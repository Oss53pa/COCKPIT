import{j as e,R as T,B as Fe,C as U,X as Y,Y as Q,T as B,b as Z,c as I,P as De,d as Se,e as Me,L as Ae,a as ee}from"./vendor-charts-cvMpHz0W.js";import{e as ke,r as c,L as te}from"./vendor-react-BdB5Pz3t.js";import{u as $e,f as Te}from"./index-IaNwoOYO.js";import{a5 as Be,W as se,aZ as Ie,a_ as Re,ag as ae,A as Le,a$ as qe,P as Je,b0 as _e,B as ze,ab as re,b1 as R,aS as ne,b2 as ie,aQ as oe,X as le,K as L,g as Ke,_ as Oe,j as Ve}from"./vendor-icons-B6Rt7gcW.js";import"./vendor-export-C98UG4Mq.js";import"./vendor-utils-BBD155gO.js";const Ge=[{id:"rh-1",poste:"Recrutement",description:"Frais de recrutement (annonces, cabinets, tests)",montantPrevu:25e6,montantEngage:22e6,montantConsomme:18e6,commentaire:"Cabinet RH sélectionné: Talent Africa. 3 postes clés en cours.",piecesJointes:[{id:"pj-1",nom:"Contrat_Cabinet_RH.pdf",type:"application/pdf",taille:245e3,dateAjout:"2024-01-15"},{id:"pj-2",nom:"Grille_Salaires.xlsx",type:"application/xlsx",taille:45e3,dateAjout:"2024-01-20"}],lignesDepenses:[{id:"dep-1",date:"2024-01-10",description:"Acompte cabinet Talent Africa",fournisseur:"Talent Africa",reference:"FA-2024-001",montant:8e6,statut:"paye"},{id:"dep-2",date:"2024-01-25",description:"Publication annonces LinkedIn Premium",fournisseur:"LinkedIn",reference:"INV-45678",montant:15e5,statut:"paye"},{id:"dep-3",date:"2024-02-01",description:"Tests psychométriques (lot 1)",fournisseur:"AssessFirst",reference:"AF-2024-123",montant:25e5,statut:"paye"},{id:"dep-4",date:"2024-02-05",description:"Frais de déplacement candidats",fournisseur:"Divers",montant:12e5,statut:"paye"},{id:"dep-5",date:"2024-02-10",description:"Honoraires recrutement poste DG",fournisseur:"Talent Africa",reference:"FA-2024-015",montant:48e5,statut:"paye"},{id:"dep-6",date:"2024-02-20",description:"Solde cabinet Talent Africa",fournisseur:"Talent Africa",reference:"FA-2024-022",montant:4e6,statut:"engage"}],dateModification:"2024-02-10"},{id:"rh-2",poste:"Recrutement",description:"Salaires pré-ouverture (équipe pilote)",montantPrevu:85e6,montantEngage:85e6,montantConsomme:6e7,commentaire:"Équipe pilote de 8 personnes recrutée. Salaires versés M-3 à M-1.",dateModification:"2024-02-01"},{id:"rh-3",poste:"Recrutement",description:"Déplacements et hébergement candidats",montantPrevu:8e6,montantEngage:5e6,montantConsomme:35e5},{id:"form-1",poste:"Formation",description:"Formation initiale équipe (interne)",montantPrevu:15e6,montantEngage:12e6,montantConsomme:8e6,commentaire:"Programme formation 3 semaines validé. Démarrage prévu S-6.",piecesJointes:[{id:"pj-3",nom:"Programme_Formation.pdf",type:"application/pdf",taille:52e4,dateAjout:"2024-01-25"}]},{id:"form-2",poste:"Formation",description:"Formation externe (prestataires spécialisés)",montantPrevu:2e7,montantEngage:18e6,montantConsomme:1e7},{id:"form-3",poste:"Formation",description:"Supports et documentation",montantPrevu:5e6,montantEngage:5e6,montantConsomme:5e6},{id:"mkt-1",poste:"Marketing",description:"Identité visuelle et charte graphique",montantPrevu:12e6,montantEngage:12e6,montantConsomme:12e6,commentaire:"Charte graphique finalisée et validée par le siège.",piecesJointes:[{id:"pj-4",nom:"Charte_Graphique_V2.pdf",type:"application/pdf",taille:85e5,dateAjout:"2024-02-01"},{id:"pj-5",nom:"Logo_Vectoriel.ai",type:"application/illustrator",taille:25e5,dateAjout:"2024-02-01"}]},{id:"mkt-2",poste:"Marketing",description:"Site web et réseaux sociaux",montantPrevu:8e6,montantEngage:8e6,montantConsomme:6e6},{id:"mkt-3",poste:"Marketing",description:"Campagne pré-ouverture (média, affichage)",montantPrevu:65e6,montantEngage:45e6,montantConsomme:25e6,commentaire:"Campagne radio + affichage 4x3. Démarrage J-30.",piecesJointes:[{id:"pj-6",nom:"Plan_Media.xlsx",type:"application/xlsx",taille:125e3,dateAjout:"2024-02-05"}]},{id:"mkt-4",poste:"Marketing",description:"Relations presse et RP",montantPrevu:15e6,montantEngage:1e7,montantConsomme:5e6},{id:"evt-1",poste:"Événements",description:"Soft Opening (événement VIP)",montantPrevu:25e6,montantEngage:15e6,montantConsomme:0},{id:"evt-2",poste:"Événements",description:"Inauguration officielle",montantPrevu:45e6,montantEngage:2e7,montantConsomme:0,commentaire:"Présence ministre confirmée. Traiteur en cours de sélection."},{id:"evt-3",poste:"Événements",description:"Animations ouverture (1er mois)",montantPrevu:3e7,montantEngage:1e7,montantConsomme:0},{id:"it-1",poste:"IT & Équipements",description:"Systèmes informatiques (ERP, caisse)",montantPrevu:35e6,montantEngage:35e6,montantConsomme:28e6,commentaire:"ERP Sage X3 installé. Formation utilisateurs en cours."},{id:"it-2",poste:"IT & Équipements",description:"Matériel bureautique et téléphonie",montantPrevu:12e6,montantEngage:12e6,montantConsomme:1e7},{id:"it-3",poste:"IT & Équipements",description:"Signalétique et PLV",montantPrevu:25e6,montantEngage:2e7,montantConsomme:15e6},{id:"amgt-1",poste:"Aménagement",description:"Mobilier bureaux et espaces staff",montantPrevu:18e6,montantEngage:18e6,montantConsomme:18e6},{id:"amgt-2",poste:"Aménagement",description:"Aménagement accueil et direction",montantPrevu:15e6,montantEngage:15e6,montantConsomme:12e6},{id:"fg-1",poste:"Frais généraux",description:"Déplacements et missions",montantPrevu:2e7,montantEngage:15e6,montantConsomme:1e7},{id:"fg-2",poste:"Frais généraux",description:"Fournitures et consommables",montantPrevu:8e6,montantEngage:5e6,montantConsomme:3e6},{id:"fg-3",poste:"Frais généraux",description:"Assurances pré-ouverture",montantPrevu:12e6,montantEngage:12e6,montantConsomme:12e6},{id:"prov-1",poste:"Provisions",description:"Imprévus et aléas",montantPrevu:45e6,montantEngage:0,montantConsomme:0},{id:"prov-2",poste:"Provisions",description:"Réserve de trésorerie",montantPrevu:205e5,montantEngage:0,montantConsomme:0}],He=[{id:"1",phaseId:"1",categorie:"RH",libelle:"Recrutement Center Manager",montantPrevu:15e6,montantEngage:15e6,montantConsomme:15e6},{id:"2",phaseId:"1",categorie:"RH",libelle:"Recrutement équipe management",montantPrevu:25e6,montantEngage:2e7,montantConsomme:12e6},{id:"3",phaseId:"1",categorie:"Marketing",libelle:"Identité visuelle",montantPrevu:8e6,montantEngage:8e6,montantConsomme:8e6},{id:"4",phaseId:"1",categorie:"Marketing",libelle:"Site web",montantPrevu:5e6,montantEngage:5e6,montantConsomme:35e5},{id:"5",phaseId:"1",categorie:"Technique",libelle:"Équipements IT",montantPrevu:12e6,montantEngage:0,montantConsomme:0},{id:"6",phaseId:"2",categorie:"Formation",libelle:"Formation équipe",montantPrevu:18e6,montantEngage:1e7,montantConsomme:5e6},{id:"7",phaseId:"2",categorie:"Communication",libelle:"Campagne pré-opening",montantPrevu:45e6,montantEngage:3e7,montantConsomme:15e6},{id:"8",phaseId:"2",categorie:"Communication",libelle:"Événement inauguration",montantPrevu:35e6,montantEngage:0,montantConsomme:0},{id:"9",phaseId:"2",categorie:"Aménagement",libelle:"Mobilier espaces communs",montantPrevu:85e6,montantEngage:85e6,montantConsomme:6e7},{id:"10",phaseId:"3",categorie:"Animation",libelle:"Animation opening weekend",montantPrevu:25e6,montantEngage:15e6,montantConsomme:0}];function st(){const{centreId:h}=ke(),{setCurrentCentre:q,addToast:E}=$e(),{projets:me,phases:de,loadProjet:J,updateProjet:We,updatePhase:ce}=Te(),[u,w]=c.useState("synthese"),[xe,F]=c.useState(!1),[m,D]=c.useState(null),[k]=c.useState(He),[x,$]=c.useState(Ge),[_,Xe]=c.useState("all"),[C,z]=c.useState("all"),[pe,N]=c.useState(!1),[K,v]=c.useState(null),[j,O]=c.useState(!1);c.useEffect(()=>{h&&(q(h),J(h))},[h,q,J]);const p=me.find(t=>t.centreId===h),S=de.filter(t=>p&&t.projetId===p.id),b=(p==null?void 0:p.budgetTotal)||0,V=(p==null?void 0:p.provisions)||0,y=S.reduce((t,s)=>t+s.budgetEngage,0),g=S.reduce((t,s)=>t+s.budgetConsomme,0),G=b-g,ue=b>0?y/b*100:0,ge=b>0?g/b*100:0,he=[...new Set(k.map(t=>t.categorie))],M=[...new Set(x.map(t=>t.poste))];k.filter(t=>_==="all"||t.categorie===_);const P=x.filter(t=>C==="all"||t.poste===C),je=M.map(t=>{const s=x.filter(n=>n.poste===t);return{poste:t,prevu:s.reduce((n,i)=>n+i.montantPrevu,0),engage:s.reduce((n,i)=>n+i.montantEngage,0),consomme:s.reduce((n,i)=>n+i.montantConsomme,0)}}),f={prevu:x.reduce((t,s)=>t+s.montantPrevu,0),engage:x.reduce((t,s)=>t+s.montantEngage,0),consomme:x.reduce((t,s)=>t+s.montantConsomme,0)},be=S.map(t=>({name:t.nom,Prévu:t.budget/1e6,Engagé:t.budgetEngage/1e6,Consommé:t.budgetConsomme/1e6})),H=he.map(t=>({name:t,value:k.filter(s=>s.categorie===t).reduce((s,n)=>s+n.montantPrevu,0)})),W=["#1e3a5f","#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"],ye=[{mois:"M-6",prevu:0,reel:0},{mois:"M-5",prevu:50,reel:45},{mois:"M-4",prevu:120,reel:110},{mois:"M-3",prevu:200,reel:185},{mois:"M-2",prevu:320,reel:290},{mois:"M-1",prevu:450,reel:420},{mois:"Actuel",prevu:y/1e6,reel:g/1e6}],r=t=>t>=1e9?`${(t/1e9).toFixed(1)} Md`:t>=1e6?`${(t/1e6).toFixed(1)} M`:t>=1e3?`${(t/1e3).toFixed(0)} K`:t.toFixed(0),fe=t=>{v(t),O(!1),N(!0)},Ne=()=>{v({id:`new-${Date.now()}`,poste:M[0]||"Recrutement",description:"",montantPrevu:0,montantEngage:0,montantConsomme:0,commentaire:"",piecesJointes:[],dateModification:new Date().toISOString().split("T")[0]}),O(!0),N(!0)},X=t=>{$(j?[...x,t]:x.map(s=>s.id===t.id?t:s)),N(!1),v(null),E({type:"success",title:j?"Ligne ajoutée":"Ligne mise à jour"})},ve=t=>{$(x.filter(s=>s.id!==t)),N(!1),v(null),E({type:"success",title:"Ligne supprimée"})},we=t=>t>=1e6?`${(t/1e6).toFixed(1)} Mo`:t>=1e3?`${(t/1e3).toFixed(0)} Ko`:`${t} o`,Ce=()=>{const[t,s]=c.useState(K||{id:"",poste:"",description:"",montantPrevu:0,montantEngage:0,montantConsomme:0,commentaire:"",piecesJointes:[],dateModification:new Date().toISOString().split("T")[0]}),n=a=>{const l=a.target.files;if(!l)return;const d=Array.from(l).map(o=>({id:`pj-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,nom:o.name,type:o.type,taille:o.size,dateAjout:new Date().toISOString().split("T")[0]}));s({...t,piecesJointes:[...t.piecesJointes||[],...d]})},i=a=>{s({...t,piecesJointes:(t.piecesJointes||[]).filter(l=>l.id!==a)})},A=a=>{a.preventDefault(),X({...t,dateModification:new Date().toISOString().split("T")[0]})};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"border-b border-primary-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-primary-900",children:j?"Nouvelle ligne budgétaire":"Modifier la ligne budgétaire"}),e.jsx("button",{onClick:()=>{N(!1),v(null)},className:"p-2 hover:bg-primary-100 rounded-lg",children:e.jsx(le,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:A,className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Poste budgétaire"}),e.jsx("select",{value:t.poste,onChange:a=>s({...t,poste:a.target.value}),className:"w-full px-3 py-2 border border-primary-200 rounded-lg",required:!0,children:M.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:t.description,onChange:a=>s({...t,description:a.target.value}),className:"w-full px-3 py-2 border border-primary-200 rounded-lg",placeholder:"Description de la ligne",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Montant prévu (FCFA)"}),e.jsx("input",{type:"number",value:t.montantPrevu,onChange:a=>s({...t,montantPrevu:Number(a.target.value)}),className:"w-full px-3 py-2 border border-primary-200 rounded-lg font-mono",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Montant engagé (FCFA)"}),e.jsx("input",{type:"number",value:t.montantEngage,onChange:a=>s({...t,montantEngage:Number(a.target.value)}),className:"w-full px-3 py-2 border border-primary-200 rounded-lg font-mono",min:"0",max:t.montantPrevu})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Montant consommé (FCFA)"}),e.jsx("input",{type:"number",value:t.montantConsomme,onChange:a=>s({...t,montantConsomme:Number(a.target.value)}),className:"w-full px-3 py-2 border border-primary-200 rounded-lg font-mono",min:"0",max:t.montantEngage})]})]}),e.jsx("div",{className:"bg-primary-50 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-primary-600",children:"Taux d'engagement"}),e.jsxs("span",{className:"font-medium text-info",children:[t.montantPrevu>0?(t.montantEngage/t.montantPrevu*100).toFixed(1):0,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-primary-600",children:"Taux de consommation"}),e.jsxs("span",{className:"font-medium text-success",children:[t.montantPrevu>0?(t.montantConsomme/t.montantPrevu*100).toFixed(1):0,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-primary-600",children:"Disponible"}),e.jsxs("span",{className:`font-medium ${t.montantPrevu-t.montantConsomme>=0?"text-primary-700":"text-error"}`,children:[r(t.montantPrevu-t.montantConsomme)," FCFA"]})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4"}),"Détail des dépenses (",(t.lignesDepenses||[]).length,")"]})}),e.jsxs("button",{type:"button",onClick:()=>{const a={id:`dep-${Date.now()}`,date:new Date().toISOString().split("T")[0],description:"",fournisseur:"",montant:0,statut:"prevu"};s({...t,lignesDepenses:[...t.lignesDepenses||[],a]})},className:"flex items-center gap-1 px-2 py-1 text-xs bg-primary-100 text-primary-700 rounded-lg hover:bg-primary-200",children:[e.jsx(re,{className:"w-3 h-3"}),"Ajouter une dépense"]})]}),(t.lignesDepenses||[]).length>0?e.jsx("div",{className:"border border-primary-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-primary-50 border-b border-primary-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-3 py-2 text-xs font-medium text-primary-500",children:"Date"}),e.jsx("th",{className:"text-left px-3 py-2 text-xs font-medium text-primary-500",children:"Description"}),e.jsx("th",{className:"text-left px-3 py-2 text-xs font-medium text-primary-500",children:"Fournisseur"}),e.jsx("th",{className:"text-left px-3 py-2 text-xs font-medium text-primary-500",children:"Réf."}),e.jsx("th",{className:"text-right px-3 py-2 text-xs font-medium text-primary-500",children:"Montant"}),e.jsx("th",{className:"text-center px-3 py-2 text-xs font-medium text-primary-500",children:"Statut"}),e.jsx("th",{className:"text-center px-3 py-2 text-xs font-medium text-primary-500 w-10"})]})}),e.jsx("tbody",{className:"divide-y divide-primary-100",children:(t.lignesDepenses||[]).map((a,l)=>e.jsxs("tr",{className:"hover:bg-primary-50",children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"date",value:a.date,onChange:d=>{const o=[...t.lignesDepenses||[]];o[l]={...a,date:d.target.value},s({...t,lignesDepenses:o})},className:"w-full px-2 py-1 text-xs border border-primary-200 rounded"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:a.description,onChange:d=>{const o=[...t.lignesDepenses||[]];o[l]={...a,description:d.target.value},s({...t,lignesDepenses:o})},placeholder:"Description",className:"w-full px-2 py-1 text-xs border border-primary-200 rounded"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:a.fournisseur,onChange:d=>{const o=[...t.lignesDepenses||[]];o[l]={...a,fournisseur:d.target.value},s({...t,lignesDepenses:o})},placeholder:"Fournisseur",className:"w-full px-2 py-1 text-xs border border-primary-200 rounded"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:a.reference||"",onChange:d=>{const o=[...t.lignesDepenses||[]];o[l]={...a,reference:d.target.value},s({...t,lignesDepenses:o})},placeholder:"N° facture",className:"w-20 px-2 py-1 text-xs border border-primary-200 rounded"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"number",value:a.montant,onChange:d=>{const o=[...t.lignesDepenses||[]];o[l]={...a,montant:Number(d.target.value)},s({...t,lignesDepenses:o})},className:"w-24 px-2 py-1 text-xs border border-primary-200 rounded text-right font-mono",min:"0"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("select",{value:a.statut,onChange:d=>{const o=[...t.lignesDepenses||[]];o[l]={...a,statut:d.target.value},s({...t,lignesDepenses:o})},className:`w-full px-2 py-1 text-xs rounded border-0 font-medium ${a.statut==="paye"?"bg-success/10 text-success":a.statut==="engage"?"bg-info/10 text-info":"bg-primary-100 text-primary-600"}`,children:[e.jsx("option",{value:"prevu",children:"Prévu"}),e.jsx("option",{value:"engage",children:"Engagé"}),e.jsx("option",{value:"paye",children:"Payé"})]})}),e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>{const d=(t.lignesDepenses||[]).filter((o,Ee)=>Ee!==l);s({...t,lignesDepenses:d})},className:"p-1 hover:bg-error/10 rounded text-error",title:"Supprimer",children:e.jsx(L,{className:"w-3.5 h-3.5"})})})]},a.id))}),e.jsx("tfoot",{className:"bg-primary-50 border-t border-primary-200",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"px-3 py-2 text-xs font-medium text-primary-700",children:"Total des dépenses"}),e.jsx("td",{className:"px-3 py-2 text-right font-mono text-xs font-bold text-primary-900",children:r((t.lignesDepenses||[]).reduce((a,l)=>a+l.montant,0))}),e.jsx("td",{colSpan:2,className:"px-3 py-2",children:e.jsxs("div",{className:"flex gap-2 text-xs",children:[e.jsxs("span",{className:"text-success",children:["Payé: ",r((t.lignesDepenses||[]).filter(a=>a.statut==="paye").reduce((a,l)=>a+l.montant,0))]}),e.jsxs("span",{className:"text-info",children:["Engagé: ",r((t.lignesDepenses||[]).filter(a=>a.statut==="engage").reduce((a,l)=>a+l.montant,0))]})]})})]})})]})}):e.jsxs("div",{className:"border-2 border-dashed border-primary-200 rounded-lg p-6 text-center",children:[e.jsx(R,{className:"w-8 h-8 text-primary-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-primary-500",children:"Aucune dépense enregistrée"}),e.jsx("p",{className:"text-xs text-primary-400 mt-1",children:'Cliquez sur "Ajouter une dépense" pour détailler les paiements'})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"Commentaire"]})}),e.jsx("textarea",{value:t.commentaire||"",onChange:a=>s({...t,commentaire:a.target.value}),className:"w-full px-3 py-2 border border-primary-200 rounded-lg resize-none",rows:3,placeholder:"Ajoutez un commentaire ou des notes sur cette ligne budgétaire..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"Pièces jointes (",(t.piecesJointes||[]).length,")"]})}),(t.piecesJointes||[]).length>0&&e.jsx("div",{className:"space-y-2 mb-3",children:(t.piecesJointes||[]).map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{className:"w-5 h-5 text-primary-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-primary-900",children:a.nom}),e.jsxs("p",{className:"text-xs text-primary-500",children:[we(a.taille)," • Ajouté le ",a.dateAjout]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",className:"p-1.5 hover:bg-primary-200 rounded-lg text-primary-500",title:"Voir",children:e.jsx(Oe,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>i(a.id),className:"p-1.5 hover:bg-error/10 rounded-lg text-error",title:"Supprimer",children:e.jsx(L,{className:"w-4 h-4"})})]})]},a.id))}),e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-primary-200 rounded-lg cursor-pointer hover:bg-primary-50 transition-colors",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(Ve,{className:"w-6 h-6 text-primary-400 mb-1"}),e.jsx("p",{className:"text-sm text-primary-500",children:"Cliquez pour ajouter des fichiers"}),e.jsx("p",{className:"text-xs text-primary-400",children:"PDF, Excel, Word, Images"})]}),e.jsx("input",{type:"file",className:"hidden",multiple:!0,onChange:n,accept:".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.jpeg"})]})]}),t.dateModification&&!j&&e.jsxs("p",{className:"text-xs text-primary-400 text-right",children:["Dernière modification : ",t.dateModification]})]}),e.jsxs("div",{className:"border-t border-primary-200 px-6 py-4 flex justify-between",children:[!j&&e.jsxs("button",{type:"button",onClick:()=>ve(t.id),className:"px-4 py-2 text-error hover:bg-error/10 rounded-lg flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),"Supprimer"]}),e.jsxs("div",{className:`flex gap-3 ${j?"ml-auto":""}`,children:[e.jsx("button",{type:"button",onClick:()=>{N(!1),v(null)},className:"px-4 py-2 text-primary-700 hover:bg-primary-100 rounded-lg",children:"Annuler"}),e.jsx("button",{type:"button",onClick:()=>X({...t,dateModification:new Date().toISOString().split("T")[0]}),className:"px-4 py-2 bg-primary-900 text-white rounded-lg hover:bg-primary-800",children:j?"Ajouter":"Enregistrer"})]})]})]})})},Pe=()=>{const[t,s]=c.useState({budget:(m==null?void 0:m.budget)||0,budgetEngage:(m==null?void 0:m.budgetEngage)||0,budgetConsomme:(m==null?void 0:m.budgetConsomme)||0}),n=async i=>{if(i.preventDefault(),!!m)try{await ce(m.id,t),E({type:"success",title:"Budget mis à jour"}),F(!1),D(null)}catch{E({type:"error",title:"Erreur lors de la mise à jour"})}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[e.jsxs("div",{className:"border-b border-primary-200 px-6 py-4 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-lg font-semibold text-primary-900",children:["Budget - ",m==null?void 0:m.nom]}),e.jsx("button",{onClick:()=>{F(!1),D(null)},className:"p-2 hover:bg-primary-100 rounded-lg",children:e.jsx(le,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:n,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Budget prévu (FCFA)"}),e.jsx("input",{type:"number",value:t.budget,onChange:i=>s({...t,budget:Number(i.target.value)}),className:"w-full px-3 py-2 border border-primary-200 rounded-lg",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Budget engagé (FCFA)"}),e.jsx("input",{type:"number",value:t.budgetEngage,onChange:i=>s({...t,budgetEngage:Number(i.target.value)}),className:"w-full px-3 py-2 border border-primary-200 rounded-lg",min:"0",max:t.budget})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Budget consommé (FCFA)"}),e.jsx("input",{type:"number",value:t.budgetConsomme,onChange:i=>s({...t,budgetConsomme:Number(i.target.value)}),className:"w-full px-3 py-2 border border-primary-200 rounded-lg",min:"0",max:t.budgetEngage})]}),e.jsxs("div",{className:"bg-primary-50 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-primary-600",children:"Taux d'engagement"}),e.jsxs("span",{className:"font-medium",children:[t.budget>0?(t.budgetEngage/t.budget*100).toFixed(1):0,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-primary-600",children:"Taux de consommation"}),e.jsxs("span",{className:"font-medium",children:[t.budget>0?(t.budgetConsomme/t.budget*100).toFixed(1):0,"%"]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{F(!1),D(null)},className:"px-4 py-2 text-primary-700 hover:bg-primary-100 rounded-lg",children:"Annuler"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-900 text-white rounded-lg hover:bg-primary-800",children:"Mettre à jour"})]})]})]})})};return p?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(te,{to:`/centre/${h}/projet`,className:"p-2 hover:bg-primary-100 rounded-lg transition-colors",children:e.jsx(Be,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-display font-bold text-primary-900",children:"Budget Mobilisation"}),e.jsx("p",{className:"text-primary-500",children:"Budget de lancement et démarrage (hors construction)"})]})]}),e.jsx("div",{className:"bg-info/10 text-info px-3 py-1.5 rounded-lg text-sm font-medium",children:"Budget Opérationnel"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-primary-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary-500 mb-1",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Budget total"})]}),e.jsx("p",{className:"text-2xl font-bold text-primary-900",children:r(b)}),e.jsx("p",{className:"text-xs text-primary-400",children:"FCFA"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-primary-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary-500 mb-1",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Engagé"})]}),e.jsx("p",{className:"text-2xl font-bold text-info",children:r(y)}),e.jsxs("p",{className:"text-xs text-primary-400",children:[ue.toFixed(1),"%"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-primary-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary-500 mb-1",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Consommé"})]}),e.jsx("p",{className:"text-2xl font-bold text-success",children:r(g)}),e.jsxs("p",{className:"text-xs text-primary-400",children:[ge.toFixed(1),"%"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-primary-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary-500 mb-1",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Restant"})]}),e.jsx("p",{className:`text-2xl font-bold ${G>=0?"text-success":"text-error"}`,children:r(G)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-primary-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary-500 mb-1",children:[e.jsx(Le,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Provisions"})]}),e.jsx("p",{className:"text-2xl font-bold text-warning",children:r(V)}),e.jsxs("p",{className:"text-xs text-primary-400",children:[(V/b*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border border-primary-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary-500 mb-1",children:[g<=y?e.jsx(qe,{className:"w-4 h-4 text-success"}):e.jsx(Je,{className:"w-4 h-4 text-error"}),e.jsx("span",{className:"text-xs",children:"Écart"})]}),e.jsxs("p",{className:`text-2xl font-bold ${g<=y?"text-success":"text-error"}`,children:[g<=y?"-":"+",r(Math.abs(g-y))]})]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-primary-200 p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>w("synthese"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${u==="synthese"?"bg-primary-900 text-white":"bg-primary-100 text-primary-700 hover:bg-primary-200"}`,children:[e.jsx(se,{className:"w-4 h-4"}),"Synthèse"]}),e.jsxs("button",{onClick:()=>w("detail"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${u==="detail"?"bg-primary-900 text-white":"bg-primary-100 text-primary-700 hover:bg-primary-200"}`,children:[e.jsx(ae,{className:"w-4 h-4"}),"Détail"]}),e.jsxs("button",{onClick:()=>w("overview"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${u==="overview"?"bg-primary-900 text-white":"bg-primary-100 text-primary-700 hover:bg-primary-200"}`,children:[e.jsx(_e,{className:"w-4 h-4"}),"Graphiques"]}),e.jsxs("button",{onClick:()=>w("phases"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${u==="phases"?"bg-primary-900 text-white":"bg-primary-100 text-primary-700 hover:bg-primary-200"}`,children:[e.jsx(ze,{className:"w-4 h-4"}),"Par phase"]})]})}),u==="synthese"&&e.jsxs("div",{className:"bg-white rounded-xl border border-primary-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-primary-200 bg-primary-50",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900",children:"Synthèse Budget Mobilisation"}),e.jsx("p",{className:"text-sm text-primary-500 mt-1",children:"Récapitulatif par poste budgétaire"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 border-b border-primary-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-3 text-xs font-medium text-primary-500 uppercase",children:"Poste"}),e.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-primary-500 uppercase",children:"Budget Prévu"}),e.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-primary-500 uppercase",children:"Engagé"}),e.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-primary-500 uppercase",children:"Consommé"}),e.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-primary-500 uppercase",children:"Disponible"}),e.jsx("th",{className:"text-center px-4 py-3 text-xs font-medium text-primary-500 uppercase",children:"% Conso."})]})}),e.jsx("tbody",{className:"divide-y divide-primary-100",children:je.map(t=>{const s=t.prevu-t.consomme,n=t.prevu>0?t.consomme/t.prevu*100:0;return e.jsxs("tr",{className:"hover:bg-primary-50 cursor-pointer",onClick:()=>{z(t.poste),w("detail")},children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"font-medium text-primary-900",children:t.poste})}),e.jsx("td",{className:"px-4 py-3 text-right font-mono text-sm",children:r(t.prevu)}),e.jsx("td",{className:"px-4 py-3 text-right font-mono text-sm text-info",children:r(t.engage)}),e.jsx("td",{className:"px-4 py-3 text-right font-mono text-sm text-success",children:r(t.consomme)}),e.jsx("td",{className:`px-4 py-3 text-right font-mono text-sm ${s>=0?"text-primary-600":"text-error"}`,children:r(s)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-16 h-2 bg-primary-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${n>100?"bg-error":n>80?"bg-warning":"bg-success"}`,style:{width:`${Math.min(n,100)}%`}})}),e.jsxs("span",{className:"text-xs font-medium text-primary-600 w-10",children:[n.toFixed(0),"%"]})]})})]},t.poste)})}),e.jsx("tfoot",{className:"bg-primary-100 border-t-2 border-primary-300 font-bold",children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-primary-900",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right font-mono",children:r(f.prevu)}),e.jsx("td",{className:"px-4 py-3 text-right font-mono text-info",children:r(f.engage)}),e.jsx("td",{className:"px-4 py-3 text-right font-mono text-success",children:r(f.consomme)}),e.jsx("td",{className:"px-4 py-3 text-right font-mono",children:r(f.prevu-f.consomme)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:"text-sm",children:[(f.consomme/f.prevu*100).toFixed(1),"%"]})})]})})]})})]}),u==="detail"&&e.jsxs("div",{className:"bg-white rounded-xl border border-primary-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-primary-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900",children:"Détail des lignes budgétaires"}),e.jsx("p",{className:"text-sm text-primary-500 mt-1",children:"Suivi ligne par ligne du budget mobilisation"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:C,onChange:t=>z(t.target.value),className:"px-3 py-2 border border-primary-200 rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:"Tous les postes"}),M.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("button",{onClick:Ne,className:"flex items-center gap-2 px-4 py-2 bg-primary-900 text-white rounded-lg hover:bg-primary-800",children:[e.jsx(re,{className:"w-4 h-4"}),"Ajouter"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50 border-b border-primary-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-3 text-xs font-medium text-primary-500 uppercase",children:"Poste"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-medium text-primary-500 uppercase",children:"Description"}),e.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-primary-500 uppercase",children:"Prévu"}),e.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-primary-500 uppercase",children:"Engagé"}),e.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-primary-500 uppercase",children:"Consommé"}),e.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-primary-500 uppercase",children:"Reste"}),e.jsx("th",{className:"text-center px-4 py-3 text-xs font-medium text-primary-500 uppercase",children:"Avancement"}),e.jsx("th",{className:"text-center px-4 py-3 text-xs font-medium text-primary-500 uppercase",children:"Infos"}),e.jsx("th",{className:"text-center px-4 py-3 text-xs font-medium text-primary-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-primary-100",children:P.map(t=>{var a,l;const s=t.montantPrevu-t.montantConsomme,n=t.montantPrevu>0?t.montantConsomme/t.montantPrevu*100:0,i=t.commentaire&&t.commentaire.length>0,A=t.piecesJointes&&t.piecesJointes.length>0;return e.jsxs("tr",{className:"hover:bg-primary-50 group",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 bg-primary-100 text-primary-700 rounded-full text-xs font-medium",children:t.poste})}),e.jsx("td",{className:"px-4 py-3 text-sm text-primary-900",children:e.jsxs("div",{children:[t.description,i&&e.jsx("p",{className:"text-xs text-primary-400 mt-1 line-clamp-1",title:t.commentaire,children:t.commentaire})]})}),e.jsx("td",{className:"px-4 py-3 text-right font-mono text-sm",children:r(t.montantPrevu)}),e.jsx("td",{className:"px-4 py-3 text-right font-mono text-sm text-info",children:r(t.montantEngage)}),e.jsx("td",{className:"px-4 py-3 text-right font-mono text-sm text-success",children:r(t.montantConsomme)}),e.jsx("td",{className:`px-4 py-3 text-right font-mono text-sm ${s>=0?"text-primary-600":"text-error font-bold"}`,children:r(s)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-20 h-2 bg-primary-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${n>=100?"bg-success":n>80?"bg-warning":"bg-info"}`,style:{width:`${Math.min(n,100)}%`}})}),e.jsxs("span",{className:"text-xs text-primary-500 w-8",children:[n.toFixed(0),"%"]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.lignesDepenses&&t.lignesDepenses.length>0&&e.jsxs("span",{className:"p-1 rounded bg-success/10 text-success flex items-center gap-0.5",title:`${t.lignesDepenses.length} ligne(s) de dépense`,children:[e.jsx(R,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-xs",children:t.lignesDepenses.length})]}),i&&e.jsx("span",{className:"p-1 rounded bg-info/10 text-info",title:t.commentaire,children:e.jsx(ne,{className:"w-3.5 h-3.5"})}),A&&e.jsxs("span",{className:"p-1 rounded bg-warning/10 text-warning flex items-center gap-0.5",title:`${(a=t.piecesJointes)==null?void 0:a.length} pièce(s) jointe(s)`,children:[e.jsx(ie,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-xs",children:(l=t.piecesJointes)==null?void 0:l.length})]}),!i&&!A&&(!t.lignesDepenses||t.lignesDepenses.length===0)&&e.jsx("span",{className:"text-xs text-primary-300",children:"-"})]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>fe(t),className:"p-2 hover:bg-primary-100 rounded-lg text-primary-500 hover:text-primary-700 opacity-0 group-hover:opacity-100 transition-opacity",title:"Modifier",children:e.jsx(oe,{className:"w-4 h-4"})})})]},t.id)})}),e.jsx("tfoot",{className:"bg-primary-50 border-t border-primary-200 font-medium",children:e.jsxs("tr",{children:[e.jsxs("td",{colSpan:2,className:"px-4 py-3 text-sm text-primary-700",children:["Total ",C!=="all"?`(${C})`:""]}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-mono",children:r(P.reduce((t,s)=>t+s.montantPrevu,0))}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-mono text-info",children:r(P.reduce((t,s)=>t+s.montantEngage,0))}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-mono text-success",children:r(P.reduce((t,s)=>t+s.montantConsomme,0))}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-mono",children:r(P.reduce((t,s)=>t+(s.montantPrevu-s.montantConsomme),0))}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{})]})})]})})]}),u==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-primary-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900 mb-4",children:"Budget par phase"}),e.jsx("div",{className:"h-80",children:e.jsx(T,{width:"100%",height:"100%",children:e.jsxs(Fe,{data:be,children:[e.jsx(U,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(Y,{dataKey:"name",tick:{fontSize:12}}),e.jsx(Q,{tick:{fontSize:12},tickFormatter:t=>`${t}M`}),e.jsx(B,{formatter:t=>[`${t.toFixed(1)} M FCFA`,""],contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb"}}),e.jsx(Z,{}),e.jsx(I,{dataKey:"Prévu",fill:"#1e3a5f",radius:[4,4,0,0]}),e.jsx(I,{dataKey:"Engagé",fill:"#3b82f6",radius:[4,4,0,0]}),e.jsx(I,{dataKey:"Consommé",fill:"#10b981",radius:[4,4,0,0]})]})})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-primary-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900 mb-4",children:"Répartition par catégorie"}),e.jsx("div",{className:"h-80",children:e.jsx(T,{width:"100%",height:"100%",children:e.jsxs(De,{children:[e.jsx(Se,{data:H,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:2,dataKey:"value",label:({name:t,percent:s})=>`${t} ${(s*100).toFixed(0)}%`,labelLine:!1,children:H.map((t,s)=>e.jsx(Me,{fill:W[s%W.length]},`cell-${s}`))}),e.jsx(B,{formatter:t=>[r(t)+" FCFA","Budget"]})]})})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-primary-200 p-6 lg:col-span-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900 mb-4",children:"Évolution budgétaire"}),e.jsx("div",{className:"h-64",children:e.jsx(T,{width:"100%",height:"100%",children:e.jsxs(Ae,{data:ye,children:[e.jsx(U,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(Y,{dataKey:"mois",tick:{fontSize:12}}),e.jsx(Q,{tick:{fontSize:12},tickFormatter:t=>`${t}M`}),e.jsx(B,{formatter:t=>[`${t.toFixed(1)} M FCFA`,""],contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb"}}),e.jsx(Z,{}),e.jsx(ee,{type:"monotone",dataKey:"prevu",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6"},name:"Engagé (prévu)"}),e.jsx(ee,{type:"monotone",dataKey:"reel",stroke:"#10b981",strokeWidth:2,dot:{fill:"#10b981"},name:"Consommé (réel)"})]})})})]})]}),u==="phases"&&e.jsx("div",{className:"space-y-4",children:S.map(t=>{const s=t.budget>0?t.budgetEngage/t.budget*100:0,n=t.budget>0?t.budgetConsomme/t.budget*100:0,i=t.budgetConsomme-t.budgetEngage;return e.jsxs("div",{className:"bg-white rounded-xl border border-primary-200 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${t.statut==="termine"?"bg-success/10 text-success":t.statut==="en_cours"?"bg-info/10 text-info":"bg-primary-100 text-primary-500"}`,children:t.numero}),e.jsx("h3",{className:"text-lg font-semibold text-primary-900",children:t.nom}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.statut==="termine"?"bg-success/10 text-success":t.statut==="en_cours"?"bg-info/10 text-info":"bg-primary-100 text-primary-500"}`,children:t.statut==="termine"?"Terminé":t.statut==="en_cours"?"En cours":"À venir"})]})}),e.jsx("button",{onClick:()=>{D(t),F(!0)},className:"p-2 hover:bg-primary-100 rounded-lg",children:e.jsx(oe,{className:"w-4 h-4 text-primary-500"})})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-500",children:"Budget prévu"}),e.jsx("p",{className:"text-xl font-bold text-primary-900",children:r(t.budget)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-500",children:"Engagé"}),e.jsx("p",{className:"text-xl font-bold text-info",children:r(t.budgetEngage)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-500",children:"Consommé"}),e.jsx("p",{className:"text-xl font-bold text-success",children:r(t.budgetConsomme)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-500",children:"Écart"}),e.jsxs("p",{className:`text-xl font-bold ${i<=0?"text-success":"text-error"}`,children:[i<=0?"":"+",r(i)]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-primary-600",children:"Engagement"}),e.jsxs("span",{className:"font-medium",children:[s.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-2 bg-primary-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-info rounded-full transition-all",style:{width:`${Math.min(s,100)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-primary-600",children:"Consommation"}),e.jsxs("span",{className:"font-medium",children:[n.toFixed(1),"%"]})]}),e.jsx("div",{className:"h-2 bg-primary-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${n>100?"bg-error":"bg-success"}`,style:{width:`${Math.min(n,100)}%`}})})]})]})]},t.id)})}),xe&&m&&e.jsx(Pe,{}),pe&&K&&e.jsx(Ce,{})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsx("p",{className:"text-primary-500",children:"Aucun projet trouvé pour ce centre"}),e.jsx(te,{to:`/centre/${h}/projet`,className:"mt-4 text-primary-700 hover:underline",children:"Retour au tableau de bord projet"})]})}export{st as ProjetBudget};
