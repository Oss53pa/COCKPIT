import{j as e}from"./vendor-charts-cvMpHz0W.js";import{r as m}from"./vendor-react-BdB5Pz3t.js";import{o as Y,u as fs,p as js,q as vs,C as h,h as v,i as y,g,n as C,B as f,O as ys,r as Ns,v as ue}from"./index-IaNwoOYO.js";import{B as P}from"./Badge-CM23X0aP.js";import{S as ws,I as bs}from"./Input-BZ7duGHL.js";import{an as Oe,ao as J,e as Ie,z as V,I as ke,n as xe,E as pe,y as D,ap as he,Z as ge,_ as fe,A as T,aq as je,K as G,D as ve,ar as ye,as as Ne,a7 as we,at as Ss,au as Cs,av as Ds,H as be,B as Es,aw as Se,j as Ce,Q as As,t as Os,s as Is,ax as ks,ay as Ls}from"./vendor-icons-B6Rt7gcW.js";import"./vendor-export-C98UG4Mq.js";import"./vendor-utils-BBD155gO.js";const Le="cockpit-backup-handle-local",Re="cockpit-backup-handle-onedrive";function Z(){return"showSaveFilePicker"in window&&"showDirectoryPicker"in window}function Q(){const l=new Date().toISOString().split("T")[0],n=new Date().toTimeString().split(" ")[0].replace(/:/g,"-");return`cockpit-backup-${l}_${n}.json`}async function Rs(){try{const l=await Y(),n=new Blob([l],{type:"application/json"}),a=URL.createObjectURL(n),t=document.createElement("a");return t.href=a,t.download=Q(),document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(a),{success:!0,message:"Fichier téléchargé dans le dossier de téléchargements"}}catch(l){return{success:!1,message:`Erreur lors de l'export: ${l}`}}}async function De(l){if(!Z())return Rs();try{const n=await Y(),a={suggestedName:Q(),types:[{description:"Fichier de sauvegarde Cockpit",accept:{"application/json":[".json"]}}]};l&&(a.startIn=l);const t=await window.showSaveFilePicker(a),d=await t.createWritable();return await d.write(n),await d.close(),{success:!0,message:`Sauvegarde enregistrée: ${t.name}`,filePath:t.name}}catch(n){return n.name==="AbortError"?{success:!1,message:"Sauvegarde annulée"}:{success:!1,message:`Erreur lors de la sauvegarde: ${n.message}`}}}async function Ee(l){if(!Z())return null;try{const n=await window.showDirectoryPicker({mode:"readwrite"});return await Ps(l,n),n}catch(n){if(n.name==="AbortError")return null;throw n}}async function $(l){try{if(await l.requestPermission({mode:"readwrite"})!=="granted")return{success:!1,message:"Permission refusée pour écrire dans ce dossier"};const a=await Y(),t=Q(),c=await(await l.getFileHandle(t,{create:!0})).createWritable();return await c.write(a),await c.close(),{success:!0,message:`Sauvegarde enregistrée: ${t}`,filePath:t}}catch(n){return{success:!1,message:`Erreur lors de la sauvegarde: ${n.message}`}}}async function Ps(l,n){return new Promise((a,t)=>{const d=indexedDB.open("cockpit-backup-handles",1);d.onupgradeneeded=()=>{const c=d.result;c.objectStoreNames.contains("handles")||c.createObjectStore("handles")},d.onsuccess=()=>{const i=d.result.transaction("handles","readwrite");i.objectStore("handles").put(n,l),i.oncomplete=()=>a(),i.onerror=()=>t(i.error)},d.onerror=()=>t(d.error)})}async function F(l){return new Promise((n,a)=>{const t=indexedDB.open("cockpit-backup-handles",1);t.onupgradeneeded=()=>{const d=t.result;d.objectStoreNames.contains("handles")||d.createObjectStore("handles")},t.onsuccess=()=>{const N=t.result.transaction("handles","readonly").objectStore("handles").get(l);N.onsuccess=()=>n(N.result||null),N.onerror=()=>a(N.error)},t.onerror=()=>a(t.error)})}async function Ae(l){return new Promise((n,a)=>{const t=indexedDB.open("cockpit-backup-handles",1);t.onsuccess=()=>{const c=t.result.transaction("handles","readwrite");c.objectStore("handles").delete(l),c.oncomplete=()=>n(),c.onerror=()=>a(c.error)},t.onerror=()=>a(t.error)})}async function z(l){try{return await l.queryPermission({mode:"readwrite"})==="granted"}catch{return!1}}const E={LOCAL:Le,ONEDRIVE:Re};let q=null,o=null;function Ts(l,n,a){W(),o=a;const t=l*60*1e3;q=window.setInterval(async()=>{await Pe(n)},t)}function W(){q!==null&&(window.clearInterval(q),q=null),o=null}async function Pe(l){const n=[];o==null||o.onStart();const a=await F(Le),t=await F(Re);if(l==="local"||l==="both")if(a)try{if(await z(a)){const i=await $(a);n.push({target:"local",success:i.success,message:i.message}),i.success?o==null||o.onSuccess("local",i.filePath||""):o==null||o.onError("local",i.message)}else{const i="Permission expirée pour le dossier local. Veuillez reconfigurer.";n.push({target:"local",success:!1,message:i}),o==null||o.onError("local",i)}}catch(c){const i=`Erreur: ${c.message}`;n.push({target:"local",success:!1,message:i}),o==null||o.onError("local",i)}else{const c="Aucun dossier local configuré";n.push({target:"local",success:!1,message:c}),o==null||o.onError("local",c)}if(l==="onedrive"||l==="both")if(t)try{if(await z(t)){const i=await $(t);n.push({target:"onedrive",success:i.success,message:i.message}),i.success?o==null||o.onSuccess("onedrive",i.filePath||""):o==null||o.onError("onedrive",i.message)}else{const i="Permission expirée pour OneDrive. Veuillez reconfigurer.";n.push({target:"onedrive",success:!1,message:i}),o==null||o.onError("onedrive",i)}}catch(c){const i=`Erreur: ${c.message}`;n.push({target:"onedrive",success:!1,message:i}),o==null||o.onError("onedrive",i)}else{const c="Aucun dossier OneDrive configuré";n.push({target:"onedrive",success:!1,message:c}),o==null||o.onError("onedrive",c)}return{success:n.every(c=>c.success),results:n}}function Vs(l){if(!l)return"Jamais";const n=new Date(l),t=new Date().getTime()-n.getTime(),d=Math.floor(t/6e4);if(d<1)return"À l'instant";if(d<60)return`Il y a ${d} min`;const c=Math.floor(d/60);return c<24?`Il y a ${c}h`:n.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}const qs=[{id:"apparence",label:"Apparence",icon:e.jsx(Oe,{className:"w-4 h-4"}),description:"Theme et interface"},{id:"donnees",label:"Donnees",icon:e.jsx(J,{className:"w-4 h-4"}),description:"Sauvegarde et restauration"},{id:"email",label:"Email",icon:e.jsx(Ie,{className:"w-4 h-4"}),description:"Notifications"},{id:"ia",label:"Intelligence Artificielle",icon:e.jsx(V,{className:"w-4 h-4"}),description:"Proph3et"},{id:"apropos",label:"A propos",icon:e.jsx(ke,{className:"w-4 h-4"}),description:"Version et infos"}];function Ys(){const{theme:l,setTheme:n,addToast:a,autoSaveConfig:t,setAutoSaveConfig:d,updateLastSave:c}=fs(),{config:i,setActiveProvider:N,setOpenRouterApiKey:Te,setClaudeApiKey:Ve,setOpenRouterModel:qe,setClaudeModel:$e,setTemperature:Fe,setMaxTokens:ze,usage:b}=js(),{history:w,storageStats:X,isLoading:ee,loadHistory:se,createBackup:Be,restoreBackup:Ke,deleteBackupEntry:He,calculateStorageStats:Me}=vs(),[k,Ue]=m.useState("apparence");m.useRef(null);const re=m.useRef(null),[$s,Fs]=m.useState(!1),[zs,Bs]=m.useState(!1),[_e,L]=m.useState(!1),[Ge,R]=m.useState(!1),[Je,ae]=m.useState(!1),[We,te]=m.useState(!1),[Ye,A]=m.useState(!1),[B,Ze]=m.useState(!1),[K,Qe]=m.useState(!1),[O,Xe]=m.useState(i.openrouterApiKey),[I,es]=m.useState(i.claudeApiKey),[ss,ie]=m.useState(!1),[rs,ne]=m.useState(!1),[x,H]=m.useState(null),[p,M]=m.useState(null),[le,U]=m.useState(null),[ce,_]=m.useState(null),j=Z();m.useEffect(()=>{(async()=>{if(j)try{const r=await F(E.LOCAL);r&&await z(r)&&(H(r),U(r.name));const u=await F(E.ONEDRIVE);u&&await z(u)&&(M(u),_(u.name))}catch{}})()},[j]),m.useEffect(()=>{se(),Me()},[]),m.useEffect(()=>(t.enabled&&j?(t.target==="local"?x!==null:t.target==="onedrive"?p!==null:x!==null||p!==null)&&Ts(t.intervalMinutes,t.target,{onStart:()=>A(!0),onSuccess:(r,u)=>{A(!1),c("success"),a({type:"success",title:"Sauvegarde automatique",message:`${r==="local"?"Local":"OneDrive"}: ${u}`,duration:3e3})},onError:(r,u)=>{A(!1),c("error"),a({type:"error",title:"Erreur sauvegarde auto",message:`${r}: ${u}`})}}):W(),()=>{W()}),[t.enabled,t.intervalMinutes,t.target,x,p,j]);const as=()=>{if(t.enabled)d({enabled:!1}),a({type:"info",title:"Sauvegarde automatique",message:"Desactivee"});else{if(!(t.target==="local"?x!==null:t.target==="onedrive"?p!==null:x!==null||p!==null)){a({type:"warning",title:"Configuration requise",message:"Veuillez d'abord configurer un dossier de sauvegarde"});return}d({enabled:!0}),a({type:"success",title:"Sauvegarde automatique",message:`Activee - Toutes les ${t.intervalMinutes} minutes`})}},ts=async()=>{A(!0);try{const s=await Pe(t.target);if(s.success)c("success"),a({type:"success",title:"Sauvegarde effectuee",message:s.results.map(r=>`${r.target}: ${r.message}`).join(`
`)});else{c("error");const r=s.results.filter(u=>!u.success);a({type:"error",title:"Erreur de sauvegarde",message:r.map(u=>`${u.target}: ${u.message}`).join(`
`)})}}catch(s){c("error"),a({type:"error",title:"Erreur",message:String(s)})}finally{A(!1)}},is=async()=>{if(!O.trim()){a({type:"warning",title:"Cle API requise",message:"Veuillez entrer votre cle API OpenRouter"});return}ie(!0);try{await ue("openrouter",O.trim())?(Te(O.trim()),a({type:"success",title:"Cle API validee",message:"Votre cle API OpenRouter est configuree"})):a({type:"error",title:"Cle invalide",message:"La cle API n'est pas valide ou a expire"})}catch(s){a({type:"error",title:"Erreur de validation",message:String(s)})}finally{ie(!1)}},ns=async()=>{if(!I.trim()){a({type:"warning",title:"Cle API requise",message:"Veuillez entrer votre cle API Claude"});return}ne(!0);try{await ue("claude",I.trim())?(Ve(I.trim()),a({type:"success",title:"Cle API validee",message:"Votre cle API Claude est configuree"})):a({type:"error",title:"Cle invalide",message:"La cle API n'est pas valide ou a expire"})}catch(s){a({type:"error",title:"Erreur de validation",message:String(s)})}finally{ne(!1)}},ls=async()=>{ae(!0);try{const s=await Ee(E.LOCAL);s&&(H(s),U(s.name),a({type:"success",title:"Dossier configure",message:`Dossier local: ${s.name}`}))}catch(s){a({type:"error",title:"Erreur",message:String(s)})}finally{ae(!1)}},cs=async()=>{te(!0);try{const s=await Ee(E.ONEDRIVE);s&&(M(s),_(s.name),a({type:"success",title:"Dossier configure",message:`Dossier OneDrive: ${s.name}`}))}catch(s){a({type:"error",title:"Erreur",message:String(s)})}finally{te(!1)}},os=async()=>{if(!x){L(!0);try{const s=await De("documents");s.success?a({type:"success",title:"Sauvegarde reussie",message:s.message}):s.message!=="Sauvegarde annulee"&&a({type:"error",title:"Erreur",message:s.message})}catch(s){a({type:"error",title:"Erreur",message:String(s)})}finally{L(!1)}return}L(!0);try{const s=await $(x);s.success?a({type:"success",title:"Sauvegarde locale reussie",message:s.message}):a({type:"error",title:"Erreur",message:s.message})}catch(s){a({type:"error",title:"Erreur",message:String(s)})}finally{L(!1)}},ds=async()=>{if(!p){R(!0);try{const s=await De("documents");s.success?a({type:"success",title:"Sauvegarde reussie",message:s.message}):s.message!=="Sauvegarde annulee"&&a({type:"error",title:"Erreur",message:s.message})}catch(s){a({type:"error",title:"Erreur",message:String(s)})}finally{R(!1)}return}R(!0);try{const s=await $(p);s.success?a({type:"success",title:"Sauvegarde OneDrive reussie",message:s.message}):a({type:"error",title:"Erreur",message:s.message})}catch(s){a({type:"error",title:"Erreur",message:String(s)})}finally{R(!1)}},ms=async()=>{await Ae(E.LOCAL),H(null),U(null),a({type:"info",title:"Configuration supprimee",message:"Dossier local retire"})},us=async()=>{await Ae(E.ONEDRIVE),M(null),_(null),a({type:"info",title:"Configuration supprimee",message:"Dossier OneDrive retire"})},oe=async s=>{try{const r=await Be(s);if(r.success)a({type:"success",title:"Sauvegarde creee",message:s==="download"?"Le fichier a ete telecharge":"Sauvegarde locale creee"});else throw new Error(r.message)}catch(r){a({type:"error",title:"Erreur de sauvegarde",message:String(r)})}},xs=async s=>{var u;const r=(u=s.target.files)==null?void 0:u[0];if(r)try{const S=await Ke(r,{mode:"complet",creerSauvegardeAvant:!1});if(S.success)a({type:"success",title:"Restauration reussie",message:"Toutes les donnees ont ete restaurees"}),window.location.reload();else throw new Error(S.message||"La restauration a echoue")}catch(S){a({type:"error",title:"Erreur de restauration",message:String(S)})}},ps=async s=>{confirm("Supprimer cette sauvegarde ?")&&(await He(s),a({type:"success",title:"Sauvegarde supprimee"}))},de=s=>new Date(s).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),me=s=>s<1024?`${s} o`:s<1024*1024?`${(s/1024).toFixed(1)} Ko`:`${(s/(1024*1024)).toFixed(2)} Mo`,hs=s=>{switch(s){case"succes":return e.jsx(P,{variant:"success",icon:e.jsx(Ls,{className:"w-3 h-3"}),children:"Reussi"});case"erreur":return e.jsx(P,{variant:"danger",icon:e.jsx(ks,{className:"w-3 h-3"}),children:"Erreur"});case"partiel":return e.jsx(P,{variant:"warning",icon:e.jsx(T,{className:"w-3 h-3"}),children:"Partiel"});default:return e.jsx(P,{variant:"secondary",children:"Inconnu"})}},gs=()=>{var s;switch(k){case"apparence":return e.jsxs(h,{children:[e.jsxs(v,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5"}),"Apparence"]}),e.jsx(C,{children:"Personnalisez l'interface de l'application"})]}),e.jsx(g,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-600 mb-2",children:"Theme"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>n("light"),className:`flex items-center gap-2 px-4 py-2 rounded-btn border transition-all ${l==="light"?"border-primary-900 bg-primary-50":"border-primary-200 hover:border-primary-300"}`,children:[e.jsx(Os,{className:"w-4 h-4"}),"Clair"]}),e.jsxs("button",{onClick:()=>n("dark"),className:`flex items-center gap-2 px-4 py-2 rounded-btn border transition-all ${l==="dark"?"border-primary-900 bg-primary-50":"border-primary-200 hover:border-primary-300"}`,children:[e.jsx(Is,{className:"w-4 h-4"}),"Sombre"]}),e.jsxs("button",{onClick:()=>n("system"),className:`flex items-center gap-2 px-4 py-2 rounded-btn border transition-all ${l==="system"?"border-primary-900 bg-primary-50":"border-primary-200 hover:border-primary-300"}`,children:[e.jsx(xe,{className:"w-4 h-4"}),"Systeme"]})]})]})})})]});case"donnees":return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-primary-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(T,{className:"w-5 h-5 text-warning mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-900",children:"Sauvegarde recommandee"}),e.jsx("p",{className:"text-sm text-primary-500 mt-1",children:"Vos donnees sont stockees localement dans votre navigateur. Il est recommande d'effectuer des sauvegardes regulieres pour eviter toute perte de donnees."})]})]})}),e.jsxs(h,{children:[e.jsx(v,{children:e.jsxs(y,{className:"flex items-center gap-2 text-lg",children:[e.jsx(je,{className:"w-5 h-5 text-primary-700"}),"Sauvegarde locale (Disque C:)"]})}),e.jsxs(g,{children:[e.jsx("p",{className:"text-sm text-primary-500 mb-4",children:"Sauvegardez vos donnees directement sur votre disque local"}),le&&e.jsxs("div",{className:"flex items-center gap-2 mb-3 p-2 bg-success/10 rounded text-sm",children:[e.jsx(D,{className:"w-4 h-4 text-success"}),e.jsxs("span",{className:"text-primary-700",children:["Dossier configure: ",e.jsx("strong",{children:le})]}),e.jsx("button",{onClick:ms,className:"ml-auto text-primary-400 hover:text-danger transition-colors",title:"Supprimer la configuration",children:e.jsx(G,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{variant:"primary",onClick:os,isLoading:_e,leftIcon:e.jsx(ve,{className:"w-4 h-4"}),disabled:!j,children:x?"Sauvegarder":"Choisir et sauvegarder"}),j&&e.jsx(f,{variant:"secondary",onClick:ls,isLoading:Je,leftIcon:e.jsx(ye,{className:"w-4 h-4"}),children:x?"Changer de dossier":"Configurer un dossier"})]}),!j&&e.jsx("p",{className:"text-xs text-warning mt-2",children:"Votre navigateur ne supporte pas la sauvegarde directe. Utilisez Chrome, Edge ou Opera."})]})]}),e.jsxs(h,{children:[e.jsx(v,{children:e.jsxs(y,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Ne,{className:"w-5 h-5 text-info"}),"Sauvegarde OneDrive"]})}),e.jsxs(g,{children:[e.jsx("p",{className:"text-sm text-primary-500 mb-4",children:"Sauvegardez vos donnees dans votre dossier OneDrive (synchronise automatiquement avec le cloud)"}),ce&&e.jsxs("div",{className:"flex items-center gap-2 mb-3 p-2 bg-info/10 rounded text-sm",children:[e.jsx(D,{className:"w-4 h-4 text-info"}),e.jsxs("span",{className:"text-primary-700",children:["Dossier configure: ",e.jsx("strong",{children:ce})]}),e.jsx("button",{onClick:us,className:"ml-auto text-primary-400 hover:text-danger transition-colors",title:"Supprimer la configuration",children:e.jsx(G,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{variant:"primary",onClick:ds,isLoading:Ge,leftIcon:e.jsx(Ne,{className:"w-4 h-4"}),disabled:!j,children:p?"Sauvegarder sur OneDrive":"Choisir et sauvegarder"}),j&&e.jsx(f,{variant:"secondary",onClick:cs,isLoading:We,leftIcon:e.jsx(ye,{className:"w-4 h-4"}),children:p?"Changer de dossier":"Configurer OneDrive"})]}),e.jsx("p",{className:"text-xs text-primary-400 mt-3",children:"Astuce: Selectionnez votre dossier OneDrive (generalement C:\\Users\\VotreNom\\OneDrive) pour une synchronisation automatique."})]})]}),e.jsxs(h,{children:[e.jsx(v,{children:e.jsxs(y,{className:"flex items-center gap-2 text-lg",children:[e.jsx(we,{className:"w-5 h-5 text-primary-700"}),"Sauvegarde automatique",t.enabled&&e.jsxs("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-success/20 text-success rounded-full flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-success rounded-full animate-pulse"}),"Active"]})]})}),e.jsxs(g,{children:[e.jsx("p",{className:"text-sm text-primary-500 mb-4",children:"Sauvegardez automatiquement vos donnees a intervalles reguliers"}),j?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-600 mb-1",children:"Intervalle"}),e.jsxs("select",{value:t.intervalMinutes,onChange:r=>d({intervalMinutes:Number(r.target.value)}),className:"w-full px-3 py-2 border border-primary-200 rounded-btn text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:t.enabled,children:[e.jsx("option",{value:5,children:"Toutes les 5 minutes"}),e.jsx("option",{value:15,children:"Toutes les 15 minutes"}),e.jsx("option",{value:30,children:"Toutes les 30 minutes"}),e.jsx("option",{value:60,children:"Toutes les heures"}),e.jsx("option",{value:120,children:"Toutes les 2 heures"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-600 mb-1",children:"Destination"}),e.jsxs("select",{value:t.target,onChange:r=>d({target:r.target.value}),className:"w-full px-3 py-2 border border-primary-200 rounded-btn text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:t.enabled,children:[e.jsxs("option",{value:"local",disabled:!x,children:["Disque local ",!x&&"(non configure)"]}),e.jsxs("option",{value:"onedrive",disabled:!p,children:["OneDrive ",!p&&"(non configure)"]}),e.jsx("option",{value:"both",disabled:!x&&!p,children:"Les deux"})]})]})]}),t.lastSaveTime&&e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-primary-600",children:[e.jsx("span",{children:"Derniere sauvegarde:"}),e.jsx("span",{className:`font-medium ${t.lastSaveStatus==="success"?"text-success":"text-danger"}`,children:Vs(t.lastSaveTime)}),t.lastSaveStatus==="success"?e.jsx(D,{className:"w-4 h-4 text-success"}):e.jsx(T,{className:"w-4 h-4 text-danger"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{variant:t.enabled?"danger":"primary",onClick:as,leftIcon:t.enabled?e.jsx(Ss,{className:"w-4 h-4"}):e.jsx(Cs,{className:"w-4 h-4"}),disabled:!x&&!p,children:t.enabled?"Arreter":"Demarrer"}),e.jsx(f,{variant:"secondary",onClick:ts,isLoading:Ye,leftIcon:e.jsx(Ds,{className:"w-4 h-4"}),disabled:!x&&!p,children:"Sauvegarder maintenant"})]}),!x&&!p&&e.jsx("p",{className:"text-xs text-warning mt-2",children:"Configurez d'abord un dossier de sauvegarde (local ou OneDrive) ci-dessus."})]}):e.jsx("p",{className:"text-xs text-warning",children:"Votre navigateur ne supporte pas la sauvegarde automatique. Utilisez Chrome, Edge ou Opera."})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsx(h,{children:e.jsx(g,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:e.jsx(J,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-500",children:"Base de donnees"}),e.jsx("p",{className:"text-xl font-bold text-primary-900",children:X?me(X.totalUtilise):"-"})]})]})})}),e.jsx(h,{children:e.jsx(g,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-success/10 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-success"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-500",children:"Sauvegardes"}),e.jsx("p",{className:"text-xl font-bold text-primary-900",children:w.length})]})]})})}),e.jsx(h,{children:e.jsx(g,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-warning/10 rounded-lg",children:e.jsx(we,{className:"w-5 h-5 text-warning"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-500",children:"Derniere sauvegarde"}),e.jsx("p",{className:"text-sm font-medium text-primary-900",children:w.length>0?de(w[0].date):"Jamais"})]})]})})}),e.jsx(h,{children:e.jsx(g,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:e.jsx(Es,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-500",children:"Enregistrements"}),e.jsx("p",{className:"text-xl font-bold text-primary-900",children:w.length>0?(s=w[0].enregistrements)==null?void 0:s.toLocaleString():0})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs(h,{children:[e.jsxs(v,{children:[e.jsxs(y,{className:"flex items-center gap-2 text-lg",children:[e.jsx(ve,{className:"w-5 h-5"}),"Creer une Sauvegarde"]}),e.jsx(C,{children:"Exportez vos donnees pour les conserver en lieu sur"})]}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{variant:"primary",onClick:()=>oe("download"),disabled:ee,leftIcon:e.jsx(Se,{className:"w-4 h-4"}),className:"flex-1",children:"Telecharger (.json.gz)"}),e.jsx(f,{variant:"secondary",onClick:()=>oe("local"),disabled:ee,leftIcon:e.jsx(je,{className:"w-4 h-4"}),className:"flex-1",children:"Sauvegarde locale"})]}),e.jsxs("div",{className:"p-3 bg-primary-50 rounded-lg flex items-start gap-2",children:[e.jsx(ke,{className:"w-4 h-4 text-primary-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-xs text-primary-600",children:"Les fichiers sont compresses et contiennent toutes vos donnees. Conservez-les dans un endroit sur (cloud, disque externe)."})]})]})})]}),e.jsxs(h,{children:[e.jsxs(v,{children:[e.jsxs(y,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Ce,{className:"w-5 h-5"}),"Restaurer une Sauvegarde"]}),e.jsx(C,{children:"Recuperez vos donnees depuis un fichier de sauvegarde"})]}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{ref:re,type:"file",accept:".json,.json.gz",onChange:xs,className:"hidden"}),e.jsxs("div",{onClick:()=>{var r;return(r=re.current)==null?void 0:r.click()},className:"border-2 border-dashed border-primary-200 rounded-lg p-8 text-center cursor-pointer hover:border-primary-400 hover:bg-primary-50 transition-all",children:[e.jsx(Ce,{className:"w-8 h-8 text-primary-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-primary-700",children:"Cliquez pour selectionner un fichier"}),e.jsx("p",{className:"text-xs text-primary-500 mt-1",children:".json ou .json.gz"})]}),e.jsxs("div",{className:"p-3 bg-warning/10 rounded-lg flex items-start gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-warning mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-xs text-warning",children:"Attention: La restauration remplacera toutes les donnees actuelles. Creez une sauvegarde avant de restaurer."})]})]})})]})]}),e.jsxs(h,{children:[e.jsx(v,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(y,{className:"flex items-center gap-2 text-lg",children:[e.jsx(be,{className:"w-5 h-5"}),"Historique des Sauvegardes"]}),e.jsx(C,{children:"Vos 10 dernieres sauvegardes locales"})]}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>se(),leftIcon:e.jsx(As,{className:"w-4 h-4"}),children:"Actualiser"})]})}),e.jsx(g,{children:w.length===0?e.jsxs("div",{className:"text-center py-8 text-primary-500",children:[e.jsx(J,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Aucune sauvegarde dans l'historique"}),e.jsx("p",{className:"text-sm mt-1",children:"Creez votre premiere sauvegarde"})]}):e.jsx("div",{className:"space-y-3",children:w.map(r=>{var u;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-primary-50 rounded-lg hover:bg-primary-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:e.jsx(Se,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-primary-900",children:de(r.date)}),hs(r.statut)]}),e.jsxs("p",{className:"text-sm text-primary-500",children:[r.type==="automatique"?"Sauvegarde automatique":"Sauvegarde manuelle",e.jsxs("span",{className:"ml-2",children:["- ",r.centresInclus," centre(s), ",((u=r.enregistrements)==null?void 0:u.toLocaleString())||0," enregistrements"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-primary-500",children:me(r.tailleMo*1024*1024)}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>ps(r.id),leftIcon:e.jsx(G,{className:"w-3 h-3"}),className:"text-danger hover:bg-danger/10"})]})]},r.id)})})})]})]});case"email":return e.jsxs(h,{children:[e.jsxs(v,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-5 h-5"}),"Notifications Email"]}),e.jsx(C,{children:"Configurez l'envoi d'alertes par email"})]}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-info/10 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-info mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-900",children:"Configuration requise"}),e.jsx("p",{className:"text-sm text-primary-500 mt-1",children:"Pour activer les notifications par email, vous devez configurer un service d'envoi (EmailJS, Resend ou SendGrid). Cette fonctionnalite permet de recevoir des alertes importantes directement dans votre boite mail."})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ws,{label:"Service d'envoi",options:[{value:"none",label:"Desactive"},{value:"emailjs",label:"EmailJS"},{value:"resend",label:"Resend"},{value:"sendgrid",label:"SendGrid"}],value:"none",onChange:()=>{}}),e.jsx(bs,{label:"Email destinataire",type:"email",placeholder:"votre@email.com",disabled:!0})]}),e.jsx("p",{className:"text-sm text-primary-400",children:"La configuration detaillee des services email sera disponible dans une prochaine version."})]})})]});case"ia":return e.jsxs(h,{children:[e.jsxs(v,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5"}),e.jsx("span",{className:"text-2xl",style:{fontFamily:"'Grand Hotel', cursive"},children:"Proph3et"}),e.jsx("span",{className:"text-sm font-normal text-primary-500",children:"- Assistant IA"}),(i.openrouterApiKey||i.claudeApiKey)&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-success/20 text-success rounded-full",children:"Configure"})]}),e.jsx(C,{children:"Connectez OpenRouter (modeles gratuits) ou Claude (Anthropic) pour activer Proph3et"})]}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-3",children:"Provider IA actif"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>N("openrouter"),className:`flex-1 p-4 rounded-lg border-2 transition-all ${i.activeProvider==="openrouter"?"border-purple-500 bg-purple-50":"border-primary-200 hover:border-primary-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(pe,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-medium",children:"OpenRouter"}),i.openrouterApiKey&&e.jsx(D,{className:"w-4 h-4 text-success ml-auto"})]}),e.jsx("p",{className:"text-xs text-primary-500 text-left",children:"Modeles gratuits: Llama, Gemma, Mistral..."})]}),e.jsxs("button",{onClick:()=>N("claude"),className:`flex-1 p-4 rounded-lg border-2 transition-all ${i.activeProvider==="claude"?"border-orange-500 bg-orange-50":"border-primary-200 hover:border-primary-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(V,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:"font-medium",children:"Claude"}),i.claudeApiKey&&e.jsx(D,{className:"w-4 h-4 text-success ml-auto"})]}),e.jsx("p",{className:"text-xs text-primary-500 text-left",children:"Anthropic: Sonnet, Haiku, Opus"})]})]})]}),e.jsxs("div",{className:`p-4 rounded-lg border ${i.activeProvider==="openrouter"?"border-purple-300 bg-purple-50/50":"border-primary-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(pe,{className:"w-5 h-5 text-purple-600"}),e.jsx("h4",{className:"font-medium text-primary-900",children:"OpenRouter"}),e.jsxs("a",{href:"https://openrouter.ai/keys",target:"_blank",rel:"noopener noreferrer",className:"ml-auto text-xs text-purple-600 hover:text-purple-800 flex items-center gap-1",children:["Obtenir une cle gratuite ",e.jsx(he,{className:"w-3 h-3"})]})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:B?"text":"password",value:O,onChange:r=>Xe(r.target.value),placeholder:"sk-or-v1-...",className:"w-full px-3 py-2 pr-10 border border-primary-200 rounded-btn text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"}),e.jsx("button",{type:"button",onClick:()=>Ze(!B),className:"absolute right-2 top-1/2 -translate-y-1/2 text-primary-400 hover:text-primary-600",children:B?e.jsx(ge,{className:"w-4 h-4"}):e.jsx(fe,{className:"w-4 h-4"})})]}),e.jsx(f,{variant:"primary",onClick:is,isLoading:ss,disabled:!O.trim(),size:"sm",children:"Valider"})]}),i.openrouterApiKey&&e.jsx("select",{value:i.openrouterModel,onChange:r=>qe(r.target.value),className:"w-full px-3 py-2 border border-primary-200 rounded-btn text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",children:ys.map(r=>e.jsxs("option",{value:r.id,children:[r.name," (",r.provider,") - ",r.description]},r.id))})]}),e.jsxs("div",{className:`p-4 rounded-lg border ${i.activeProvider==="claude"?"border-orange-300 bg-orange-50/50":"border-primary-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(V,{className:"w-5 h-5 text-orange-600"}),e.jsx("h4",{className:"font-medium text-primary-900",children:"Claude (Anthropic)"}),e.jsxs("a",{href:"https://console.anthropic.com/settings/keys",target:"_blank",rel:"noopener noreferrer",className:"ml-auto text-xs text-orange-600 hover:text-orange-800 flex items-center gap-1",children:["Obtenir une cle ",e.jsx(he,{className:"w-3 h-3"})]})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:K?"text":"password",value:I,onChange:r=>es(r.target.value),placeholder:"sk-ant-...",className:"w-full px-3 py-2 pr-10 border border-primary-200 rounded-btn text-sm focus:outline-none focus:ring-2 focus:ring-orange-500"}),e.jsx("button",{type:"button",onClick:()=>Qe(!K),className:"absolute right-2 top-1/2 -translate-y-1/2 text-primary-400 hover:text-primary-600",children:K?e.jsx(ge,{className:"w-4 h-4"}):e.jsx(fe,{className:"w-4 h-4"})})]}),e.jsx(f,{variant:"primary",onClick:ns,isLoading:rs,disabled:!I.trim(),size:"sm",children:"Valider"})]}),i.claudeApiKey&&e.jsx("select",{value:i.claudeModel,onChange:r=>$e(r.target.value),className:"w-full px-3 py-2 border border-primary-200 rounded-btn text-sm focus:outline-none focus:ring-2 focus:ring-orange-500",children:Ns.map(r=>e.jsxs("option",{value:r.id,children:[r.name," - ",r.description]},r.id))})]}),(i.openrouterApiKey||i.claudeApiKey)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:["Temperature: ",i.temperature]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:i.temperature,onChange:r=>Fe(parseFloat(r.target.value)),className:"w-full accent-purple-600"}),e.jsx("p",{className:"text-xs text-primary-400 mt-1",children:"0 = precis, 1 = creatif"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:["Tokens max: ",i.maxTokens]}),e.jsx("input",{type:"range",min:"256",max:"4096",step:"256",value:i.maxTokens,onChange:r=>ze(parseInt(r.target.value)),className:"w-full accent-purple-600"}),e.jsx("p",{className:"text-xs text-primary-400 mt-1",children:"Longueur max des reponses"})]})]}),e.jsxs("div",{className:"p-4 bg-primary-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-primary-900 mb-3",children:"Statistiques d'utilisation"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-500",children:"Total requetes"}),e.jsx("p",{className:"text-xl font-semibold text-primary-900",children:b.totalRequests})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-500",children:"Tokens utilises"}),e.jsx("p",{className:"text-xl font-semibold text-primary-900",children:b.totalTokens.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-500",children:"OpenRouter"}),e.jsx("p",{className:"text-xl font-semibold text-purple-600",children:b.openrouterRequests})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-500",children:"Claude"}),e.jsx("p",{className:"text-xl font-semibold text-orange-600",children:b.claudeRequests})]})]}),b.lastUsed&&e.jsxs("p",{className:"text-xs text-primary-400 mt-3",children:["Derniere utilisation: ",new Date(b.lastUsed).toLocaleString("fr-FR")]})]})]})]})})]});case"apropos":return e.jsxs(h,{children:[e.jsx(v,{children:e.jsx(y,{children:"A propos"})}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-accent to-purple-600 rounded-xl flex items-center justify-center text-white",children:e.jsx(xe,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-3xl text-primary-900",children:"Cockpit"}),e.jsx("p",{className:"text-primary-500",children:"Application de pilotage strategique"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-primary-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-500",children:"Version"}),e.jsx("p",{className:"font-medium text-primary-900",children:"1.0.0"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-500",children:"Build"}),e.jsx("p",{className:"font-medium text-primary-900",children:"2024.01"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-primary-200",children:[e.jsx("p",{className:"text-sm text-primary-500 mb-2",children:"Description"}),e.jsx("p",{className:"text-primary-700",children:"Application de pilotage strategique multi-centres commerciaux. Permet la gestion des centres en construction et en exploitation, le suivi des KPIs, la generation de rapports et l'analyse BI."})]}),e.jsxs("div",{className:"pt-4 border-t border-primary-200",children:[e.jsx("p",{className:"text-sm text-primary-500 mb-2",children:"Technologies"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["React","TypeScript","Tailwind CSS","Zustand","Dexie (IndexedDB)","Chart.js","PDF.js"].map(r=>e.jsx("span",{className:"px-2 py-1 text-xs bg-primary-100 text-primary-700 rounded",children:r},r))})]})]})})]})}};return e.jsxs("div",{className:"flex gap-6 max-w-6xl",children:[e.jsx("div",{className:"w-64 flex-shrink-0",children:e.jsxs("div",{className:"sticky top-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-primary-900 mb-6",children:"Parametres"}),e.jsx("nav",{className:"space-y-1",children:qs.map(s=>e.jsxs("button",{onClick:()=>Ue(s.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-all ${k===s.id?"bg-accent text-white shadow-md":"text-primary-600 hover:bg-primary-50 hover:text-primary-900"}`,children:[e.jsx("span",{className:k===s.id?"text-white":"text-primary-400",children:s.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:s.label}),e.jsx("p",{className:`text-xs ${k===s.id?"text-white/70":"text-primary-400"}`,children:s.description})]})]},s.id))})]})}),e.jsx("div",{className:"flex-1 min-w-0",children:gs()})]})}export{Ys as Parametres};
