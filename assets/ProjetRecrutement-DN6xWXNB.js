import{j as e}from"./vendor-charts-cvMpHz0W.js";import{e as pe,d as he,r as x}from"./vendor-react-BdB5Pz3t.js";import{a as ge,f as be,B as P,C as I,g as A,h as je,i as ve,u as Ne}from"./index-IaNwoOYO.js";import{B as F}from"./Badge-CM23X0aP.js";import{I as c,S as b,T as U}from"./Input-BZ7duGHL.js";import{M as fe}from"./Modal-J_gxoCCM.js";import{C as ye,ab as O,h as G,ay as me,a7 as Ce,x as we,ag as ue,r as Se,f as Pe,az as Me,T as Re,aU as De,ak as Ee,al as ie,X,aN as ke,aJ as qe,e as Le,aD as Ie,K as Ae,aV as Oe,k as Fe,am as $e}from"./vendor-icons-B6Rt7gcW.js";import{f as v,v as H}from"./vendor-utils-BBD155gO.js";import{f as ne}from"./fr-C0qvdQu_.js";import"./vendor-export-C98UG4Mq.js";const W={a_lancer:{bg:"bg-primary-100",text:"text-primary-600",label:"À lancer"},en_cours:{bg:"bg-info/20",text:"text-info",label:"En cours"},shortlist:{bg:"bg-purple-100",text:"text-purple-600",label:"Shortlist"},offre_envoyee:{bg:"bg-warning/20",text:"text-warning",label:"Offre envoyée"},negocie:{bg:"bg-orange-100",text:"text-orange-600",label:"Négociation"},accepte:{bg:"bg-success/20",text:"text-success",label:"Accepté"},integre:{bg:"bg-success",text:"text-white",label:"Intégré"},annule:{bg:"bg-error/20",text:"text-error",label:"Annulé"}},Te=["a_lancer","en_cours","shortlist","offre_envoyee","negocie","accepte","integre"],Ve={cdi:"CDI",cdd:"CDD",stage:"Stage",interim:"Intérim",consultant:"Consultant"},le={interne:"Mobilité interne",cabinet:"Cabinet de recrutement",jobboard:"Jobboard",cooptation:"Cooptation",linkedin:"LinkedIn",spontanee:"Candidature spontanée",autre:"Autre"},Be={bac:"Bac",bac2:"Bac +2",bac3:"Bac +3 (Licence)",bac5:"Bac +5 (Master)",doctorat:"Doctorat",autre:"Autre"},ce={debutant:"Débutant",intermediaire:"Intermédiaire",confirme:"Confirmé",expert:"Expert"},oe={recu:{label:"CV reçu",color:"bg-gray-100 text-gray-700"},preselectionne:{label:"Présélectionné",color:"bg-blue-100 text-blue-700"},entretien_planifie:{label:"Entretien planifié",color:"bg-purple-100 text-purple-700"},entretien_realise:{label:"Entretien réalisé",color:"bg-orange-100 text-orange-700"},retenu:{label:"Retenu",color:"bg-success/20 text-success"},refuse:{label:"Refusé",color:"bg-error/20 text-error"},desiste:{label:"Désisté",color:"bg-gray-200 text-gray-500"}},de=(g,M)=>{var u;return{vagueId:((u=g[0])==null?void 0:u.id)||"",projetId:M,titre:"",departement:"",typeContrat:"cdi",missions:"",competencesRequises:[],experienceRequise:0,niveauEtudes:"bac3",languesRequises:[],salaireMensuel:0,devise:"XOF",dateEntreePrevue:v(new Date,"yyyy-MM-dd"),priorite:"moyenne",statut:"a_lancer",candidats:[],equipementsNecessaires:[],formationsAPlanifier:[],commentaire:""}};function _e({isOpen:g,onClose:M,poste:u,vagues:q,projetId:L,onSave:J}){var Y,Z,ee,te,ae,se,re;const{addToast:T}=Ne(),[R,V]=x.useState("poste"),[a,r]=x.useState(de(q,L)),[p,C]=x.useState({nom:"",niveau:"intermediaire",obligatoire:!0}),[N,D]=x.useState(""),[l,f]=x.useState({nom:"",prenom:"",email:"",telephone:"",sourceCandidat:"jobboard",statut:"recu",dateReception:v(new Date,"yyyy-MM-dd")}),[h,$]=x.useState({type:"materiel",description:""}),[o,j]=x.useState({titre:"",type:"interne",duree:"",obligatoire:!0});x.useEffect(()=>{r(u?{...u,dateEntreePrevue:v(new Date(u.dateEntreePrevue),"yyyy-MM-dd"),datePublication:u.datePublication?v(new Date(u.datePublication),"yyyy-MM-dd"):void 0,dateLimite:u.dateLimite?v(new Date(u.dateLimite),"yyyy-MM-dd"):void 0}:de(q,L)),V("poste")},[u,q,L,g]);const w=()=>{var t,i;if(!((t=a.titre)!=null&&t.trim())){T({type:"error",title:"Erreur",message:"Le titre du poste est obligatoire"});return}if(!((i=a.departement)!=null&&i.trim())){T({type:"error",title:"Erreur",message:"Le département est obligatoire"});return}J({...a,dateEntreePrevue:a.dateEntreePrevue?new Date(a.dateEntreePrevue).toISOString():new Date().toISOString(),datePublication:a.datePublication?new Date(a.datePublication).toISOString():void 0,dateLimite:a.dateLimite?new Date(a.dateLimite).toISOString():void 0,projetId:L}),M()},B=()=>{if(!p.nom.trim())return;const t={id:H(),nom:p.nom,niveau:p.niveau,obligatoire:p.obligatoire};r({...a,competencesRequises:[...a.competencesRequises||[],t]}),C({nom:"",niveau:"intermediaire",obligatoire:!0})},E=t=>{var i;r({...a,competencesRequises:((i=a.competencesRequises)==null?void 0:i.filter(m=>m.id!==t))||[]})},_=()=>{var t;!N.trim()||(t=a.languesRequises)!=null&&t.includes(N.trim())||(r({...a,languesRequises:[...a.languesRequises||[],N.trim()]}),D(""))},z=t=>{var i;r({...a,languesRequises:((i=a.languesRequises)==null?void 0:i.filter(m=>m!==t))||[]})},K=()=>{var i,m;if(!((i=l.nom)!=null&&i.trim())||!((m=l.prenom)!=null&&m.trim()))return;const t={id:H(),nom:l.nom,prenom:l.prenom,email:l.email,telephone:l.telephone,sourceCandidat:l.sourceCandidat||"jobboard",dateReception:l.dateReception||new Date().toISOString(),statut:l.statut||"recu",pretentionSalariale:l.pretentionSalariale};r({...a,candidats:[...a.candidats||[],t]}),f({nom:"",prenom:"",email:"",telephone:"",sourceCandidat:"jobboard",statut:"recu",dateReception:v(new Date,"yyyy-MM-dd")})},s=t=>{var i;r({...a,candidats:((i=a.candidats)==null?void 0:i.filter(m=>m.id!==t))||[]})},d=(t,i)=>{var m;r({...a,candidats:((m=a.candidats)==null?void 0:m.map(k=>k.id===t?{...k,statut:i}:k))||[]})},y=()=>{if(!h.description.trim())return;const t={id:H(),type:h.type,description:h.description,commande:!1,recu:!1};r({...a,equipementsNecessaires:[...a.equipementsNecessaires||[],t]}),$({type:"materiel",description:""})},n=t=>{var i;r({...a,equipementsNecessaires:((i=a.equipementsNecessaires)==null?void 0:i.filter(m=>m.id!==t))||[]})},S=()=>{if(!o.titre.trim())return;const t={id:H(),titre:o.titre,type:o.type,duree:o.duree,planifiee:!1,obligatoire:o.obligatoire};r({...a,formationsAPlanifier:[...a.formationsAPlanifier||[],t]}),j({titre:"",type:"interne",duree:"",obligatoire:!0})},Q=t=>{var i;r({...a,formationsAPlanifier:((i=a.formationsAPlanifier)==null?void 0:i.filter(m=>m.id!==t))||[]})},xe=[{id:"poste",label:"Poste",icon:Me},{id:"recrutement",label:"Recrutement",icon:Re},{id:"candidats",label:"Candidats",icon:G,badge:(Y=a.candidats)==null?void 0:Y.length},{id:"integration",label:"Intégration",icon:De}];return e.jsxs(fe,{isOpen:g,onClose:M,title:u?`Modifier: ${u.titre}`:"Nouveau poste",size:"xl",footer:e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:"ghost",onClick:M,children:"Annuler"}),e.jsx(P,{onClick:w,leftIcon:e.jsx($e,{className:"w-4 h-4"}),children:u?"Enregistrer":"Créer"})]}),children:[e.jsx("div",{className:"flex border-b border-primary-200 mb-4 -mt-2",children:xe.map(({id:t,label:i,icon:m,badge:k})=>e.jsxs("button",{type:"button",onClick:()=>V(t),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${R===t?"border-accent text-accent":"border-transparent text-primary-500 hover:text-primary-700"}`,children:[e.jsx(m,{className:"w-4 h-4"}),i,k!==void 0&&k>0&&e.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs bg-primary-100 text-primary-700 rounded-full",children:k})]},t))}),R==="poste"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(c,{label:"Titre du poste *",value:a.titre||"",onChange:t=>r({...a,titre:t.target.value}),placeholder:"Ex: Center Manager",required:!0}),e.jsx(c,{label:"Département *",value:a.departement||"",onChange:t=>r({...a,departement:t.target.value}),placeholder:"Ex: Direction",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(b,{label:"Type de contrat",options:Object.entries(Ve).map(([t,i])=>({value:t,label:i})),value:a.typeContrat||"cdi",onChange:t=>r({...a,typeContrat:t.target.value})}),(a.typeContrat==="cdd"||a.typeContrat==="stage")&&e.jsx(c,{label:"Durée (mois)",type:"number",value:a.dureeContrat||"",onChange:t=>r({...a,dureeContrat:Number(t.target.value)})}),e.jsx(b,{label:"Niveau d'études",options:Object.entries(Be).map(([t,i])=>({value:t,label:i})),value:a.niveauEtudes||"bac3",onChange:t=>r({...a,niveauEtudes:t.target.value})}),e.jsx(c,{label:"Expérience (années)",type:"number",min:0,value:a.experienceRequise||0,onChange:t=>r({...a,experienceRequise:Number(t.target.value)})})]}),e.jsx(U,{label:"Missions principales",rows:4,value:a.missions||"",onChange:t=>r({...a,missions:t.target.value}),placeholder:"Décrivez les missions et responsabilités du poste..."}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:[e.jsx(Ee,{className:"w-4 h-4 inline mr-1"}),"Compétences requises"]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:(Z=a.competencesRequises)==null?void 0:Z.map(t=>e.jsxs(F,{className:`flex items-center gap-1 ${t.obligatoire?"bg-accent/10 text-accent":"bg-primary-100 text-primary-700"}`,children:[t.nom," (",ce[t.niveau],")",t.obligatoire&&e.jsx(ie,{className:"w-3 h-3"}),e.jsx("button",{type:"button",onClick:()=>E(t.id),className:"ml-1 hover:text-error",children:e.jsx(X,{className:"w-3 h-3"})})]},t.id))}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsx(c,{value:p.nom,onChange:t=>C({...p,nom:t.target.value}),placeholder:"Compétence...",className:"flex-1"}),e.jsx(b,{options:Object.entries(ce).map(([t,i])=>({value:t,label:i})),value:p.niveau,onChange:t=>C({...p,niveau:t.target.value}),className:"w-36"}),e.jsxs("label",{className:"flex items-center gap-1 text-sm whitespace-nowrap",children:[e.jsx("input",{type:"checkbox",checked:p.obligatoire,onChange:t=>C({...p,obligatoire:t.target.checked}),className:"rounded"}),"Obligatoire"]}),e.jsx(P,{type:"button",size:"sm",onClick:B,disabled:!p.nom.trim(),children:e.jsx(O,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:[e.jsx(ke,{className:"w-4 h-4 inline mr-1"}),"Langues requises"]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:(ee=a.languesRequises)==null?void 0:ee.map(t=>e.jsxs(F,{className:"bg-primary-100 text-primary-700 flex items-center gap-1",children:[t,e.jsx("button",{type:"button",onClick:()=>z(t),className:"hover:text-error",children:e.jsx(X,{className:"w-3 h-3"})})]},t))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{value:N,onChange:t=>D(t.target.value),placeholder:"Ex: Français, Anglais...",className:"flex-1",onKeyDown:t=>t.key==="Enter"&&(t.preventDefault(),_())}),e.jsx(P,{type:"button",size:"sm",onClick:_,disabled:!N.trim(),children:e.jsx(O,{className:"w-4 h-4"})})]})]}),e.jsx(U,{label:"Avantages proposés",rows:2,value:a.avantages||"",onChange:t=>r({...a,avantages:t.target.value}),placeholder:"Ex: Mutuelle, tickets restaurant, télétravail..."})]}),R==="recrutement"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(b,{label:"Vague de recrutement",options:q.map(t=>({value:t.id,label:`Vague ${t.numero} - ${t.nom}`})),value:a.vagueId||"",onChange:t=>r({...a,vagueId:t.target.value})}),e.jsx(b,{label:"Priorité",options:[{value:"critique",label:"Critique"},{value:"haute",label:"Haute"},{value:"moyenne",label:"Moyenne"},{value:"basse",label:"Basse"}],value:a.priorite||"moyenne",onChange:t=>r({...a,priorite:t.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(b,{label:"Statut",options:Object.entries(W).map(([t,{label:i}])=>({value:t,label:i})),value:a.statut||"a_lancer",onChange:t=>r({...a,statut:t.target.value})}),e.jsx(c,{label:"Date d'entrée prévue",type:"date",value:a.dateEntreePrevue||"",onChange:t=>r({...a,dateEntreePrevue:t.target.value})})]}),e.jsxs("div",{className:"p-4 bg-primary-50 rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-primary-900 mb-3 flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4"}),"Rémunération"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsx(c,{label:"Salaire mensuel",type:"number",value:a.salaireMensuel||0,onChange:t=>r({...a,salaireMensuel:Number(t.target.value)})}),e.jsx(c,{label:"Salaire min",type:"number",value:a.salaireMin||"",onChange:t=>r({...a,salaireMin:Number(t.target.value)}),placeholder:"Fourchette basse"}),e.jsx(c,{label:"Salaire max",type:"number",value:a.salaireMax||"",onChange:t=>r({...a,salaireMax:Number(t.target.value)}),placeholder:"Fourchette haute"}),e.jsx(c,{label:"Variable prévu",type:"number",value:a.variablePrevu||"",onChange:t=>r({...a,variablePrevu:Number(t.target.value)}),placeholder:"Bonus annuel"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(b,{label:"Source de recrutement",options:[{value:"",label:"Non définie"},...Object.entries(le).map(([t,i])=>({value:t,label:i}))],value:a.sourceRecrutement||"",onChange:t=>r({...a,sourceRecrutement:t.target.value})}),e.jsx(c,{label:"Responsable recrutement",value:a.responsableRecrutement||"",onChange:t=>r({...a,responsableRecrutement:t.target.value}),placeholder:"Nom du recruteur"})]}),a.sourceRecrutement==="cabinet"&&e.jsx(c,{label:"Cabinet de recrutement",value:a.cabinetRecrutement||"",onChange:t=>r({...a,cabinetRecrutement:t.target.value}),placeholder:"Nom du cabinet"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(c,{label:"URL de l'annonce",value:a.urlAnnonce||"",onChange:t=>r({...a,urlAnnonce:t.target.value}),placeholder:"https://...",leftIcon:e.jsx(qe,{className:"w-4 h-4"})}),e.jsx(c,{label:"Date de publication",type:"date",value:a.datePublication||"",onChange:t=>r({...a,datePublication:t.target.value})}),e.jsx(c,{label:"Date limite candidature",type:"date",value:a.dateLimite||"",onChange:t=>r({...a,dateLimite:t.target.value})})]}),e.jsx(U,{label:"Commentaires",rows:2,value:a.commentaire||"",onChange:t=>r({...a,commentaire:t.target.value}),placeholder:"Notes sur le recrutement..."})]}),R==="candidats"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-primary-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-primary-900 mb-3",children:"Ajouter un candidat"}),e.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-3",children:[e.jsx(c,{label:"Prénom",value:l.prenom||"",onChange:t=>f({...l,prenom:t.target.value})}),e.jsx(c,{label:"Nom",value:l.nom||"",onChange:t=>f({...l,nom:t.target.value})}),e.jsx(c,{label:"Email",type:"email",value:l.email||"",onChange:t=>f({...l,email:t.target.value})}),e.jsx(c,{label:"Téléphone",value:l.telephone||"",onChange:t=>f({...l,telephone:t.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(b,{label:"Source",options:Object.entries(le).map(([t,i])=>({value:t,label:i})),value:l.sourceCandidat||"jobboard",onChange:t=>f({...l,sourceCandidat:t.target.value})}),e.jsx(c,{label:"Prétention salariale",type:"number",value:l.pretentionSalariale||"",onChange:t=>f({...l,pretentionSalariale:Number(t.target.value)}),placeholder:"FCFA/mois"}),e.jsx("div",{className:"flex items-end",children:e.jsxs(P,{type:"button",onClick:K,disabled:!((te=l.nom)!=null&&te.trim())||!((ae=l.prenom)!=null&&ae.trim()),className:"w-full",children:[e.jsx(O,{className:"w-4 h-4 mr-1"})," Ajouter"]})})]})]}),e.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:!a.candidats||a.candidats.length===0?e.jsxs("div",{className:"text-center py-8 text-primary-400",children:[e.jsx(G,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Aucun candidat enregistré"})]}):a.candidats.map(t=>(oe[t.statut],e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-primary-200 rounded-lg",children:[e.jsxs("div",{className:"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center text-primary-700 font-bold",children:[t.prenom[0],t.nom[0]]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium text-primary-900",children:[t.prenom," ",t.nom]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-primary-500",children:[t.email&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Le,{className:"w-3 h-3"}),t.email]}),t.telephone&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ie,{className:"w-3 h-3"}),t.telephone]}),t.pretentionSalariale&&e.jsxs("span",{children:[t.pretentionSalariale.toLocaleString()," XOF"]})]})]}),e.jsx(b,{options:Object.entries(oe).map(([i,{label:m}])=>({value:i,label:m})),value:t.statut,onChange:i=>d(t.id,i.target.value),className:"w-40"}),e.jsx("button",{type:"button",onClick:()=>s(t.id),className:"p-1 text-primary-400 hover:text-error",children:e.jsx(Ae,{className:"w-4 h-4"})})]},t.id)))}),a.candidats&&a.candidats.length>0&&e.jsx("div",{className:"p-3 bg-info/10 rounded-lg",children:e.jsxs("p",{className:"text-sm text-info",children:[e.jsx("strong",{children:a.candidats.filter(t=>t.statut==="retenu").length})," candidat(s) retenu(s) sur"," ",e.jsx("strong",{children:a.candidats.length})," candidatures"]})}),(a.statut==="accepte"||a.statut==="integre")&&e.jsx(c,{label:"Candidat final retenu",value:a.candidatRetenu||"",onChange:t=>r({...a,candidatRetenu:t.target.value}),placeholder:"Nom complet du candidat retenu",leftIcon:e.jsx(me,{className:"w-4 h-4 text-success"})})]}),R==="integration"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(c,{label:"Date d'entrée réelle",type:"date",value:a.dateEntreeReelle?v(new Date(a.dateEntreeReelle),"yyyy-MM-dd"):"",onChange:t=>r({...a,dateEntreeReelle:t.target.value})}),e.jsx(c,{label:"Tuteur d'intégration",value:a.tuteurIntegration||"",onChange:t=>r({...a,tuteurIntegration:t.target.value}),placeholder:"Nom du tuteur"})]}),e.jsx(U,{label:"Parcours d'intégration",rows:3,value:a.parcoursDintegration||"",onChange:t=>r({...a,parcoursDintegration:t.target.value}),placeholder:"Description du parcours d'intégration prévu..."}),e.jsxs("div",{className:"p-4 bg-primary-50 rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-primary-900 mb-3 flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4"}),"Équipements à prévoir"]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx(b,{options:[{value:"materiel",label:"Matériel"},{value:"logiciel",label:"Logiciel"},{value:"acces",label:"Accès"},{value:"mobilier",label:"Mobilier"},{value:"autre",label:"Autre"}],value:h.type,onChange:t=>$({...h,type:t.target.value}),className:"w-32"}),e.jsx(c,{value:h.description,onChange:t=>$({...h,description:t.target.value}),placeholder:"Description de l'équipement...",className:"flex-1"}),e.jsx(P,{type:"button",size:"sm",onClick:y,disabled:!h.description.trim(),children:e.jsx(O,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-2",children:(se=a.equipementsNecessaires)==null?void 0:se.map(t=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded border border-primary-200",children:[e.jsx(F,{size:"sm",children:t.type}),e.jsx("span",{className:"flex-1 text-sm text-primary-700",children:t.description}),e.jsx("button",{type:"button",onClick:()=>n(t.id),className:"p-1 text-primary-400 hover:text-error",children:e.jsx(X,{className:"w-4 h-4"})})]},t.id))})]}),e.jsxs("div",{className:"p-4 bg-primary-50 rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-primary-900 mb-3 flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Formations à planifier"]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx(c,{value:o.titre,onChange:t=>j({...o,titre:t.target.value}),placeholder:"Titre de la formation...",className:"flex-1"}),e.jsx(b,{options:[{value:"interne",label:"Interne"},{value:"externe",label:"Externe"},{value:"elearning",label:"E-learning"}],value:o.type,onChange:t=>j({...o,type:t.target.value}),className:"w-28"}),e.jsx(c,{value:o.duree,onChange:t=>j({...o,duree:t.target.value}),placeholder:"Durée",className:"w-24"}),e.jsxs("label",{className:"flex items-center gap-1 text-sm whitespace-nowrap",children:[e.jsx("input",{type:"checkbox",checked:o.obligatoire,onChange:t=>j({...o,obligatoire:t.target.checked}),className:"rounded"}),"Obligatoire"]}),e.jsx(P,{type:"button",size:"sm",onClick:S,disabled:!o.titre.trim(),children:e.jsx(O,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-2",children:(re=a.formationsAPlanifier)==null?void 0:re.map(t=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded border border-primary-200",children:[e.jsx(F,{size:"sm",className:t.obligatoire?"bg-accent/10 text-accent":"",children:t.type}),e.jsx("span",{className:"flex-1 text-sm text-primary-700",children:t.titre}),t.duree&&e.jsx("span",{className:"text-xs text-primary-500",children:t.duree}),t.obligatoire&&e.jsx(ie,{className:"w-3 h-3 text-accent"}),e.jsx("button",{type:"button",onClick:()=>Q(t.id),className:"p-1 text-primary-400 hover:text-error",children:e.jsx(X,{className:"w-4 h-4"})})]},t.id))})]})]})]})}function Ze(){const{centreId:g}=pe(),M=he(),u=ge(s=>s.getCentre(g||"")),{projets:q,vaguesRecrutement:L,postesARecruter:J,loadProjet:T,addPoste:R,updatePoste:V}=be(),[a,r]=x.useState("pipeline"),[p,C]=x.useState(!1),[N,D]=x.useState(),[l,f]=x.useState(""),[h,$]=x.useState("all");if(x.useEffect(()=>{g&&T(g)},[g]),!u)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-primary-500",children:"Centre non trouvé"})});const o=q.find(s=>s.centreId===g);if(!o)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-primary-500",children:"Projet non initialisé"})});const j=L.filter(s=>s.projetId===o.id).sort((s,d)=>s.numero-d.numero),w=J.filter(s=>s.projetId===o.id),B=w.filter(s=>{const d=s.titre.toLowerCase().includes(l.toLowerCase())||s.departement.toLowerCase().includes(l.toLowerCase()),y=h==="all"||s.vagueId===h;return d&&y}),E={total:w.length,integres:w.filter(s=>s.statut==="integre").length,enCours:w.filter(s=>!["integre","annule","a_lancer"].includes(s.statut)).length,aLancer:w.filter(s=>s.statut==="a_lancer").length,masseSalariale:w.reduce((s,d)=>s+d.salaireMensuel,0)},_=async s=>{N?await V(N.id,s):await R(s),D(void 0)},z=s=>{D(s),C(!0)},K=()=>{D(void 0),C(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>M(`/centre/${g}/projet`),className:"p-2 hover:bg-primary-100 rounded-lg transition-colors",children:e.jsx(ye,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-primary-900",children:"Recrutement"}),e.jsx("p",{className:"text-primary-500",children:u.nom})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex bg-primary-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>r("pipeline"),className:`px-3 py-1.5 text-sm rounded-md transition-colors ${a==="pipeline"?"bg-white shadow text-primary-900":"text-primary-600"}`,children:"Pipeline"}),e.jsx("button",{onClick:()=>r("vagues"),className:`px-3 py-1.5 text-sm rounded-md transition-colors ${a==="vagues"?"bg-white shadow text-primary-900":"text-primary-600"}`,children:"Par vagues"})]}),e.jsx(P,{onClick:K,leftIcon:e.jsx(O,{className:"w-4 h-4"}),children:"Nouveau poste"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx(I,{children:e.jsx(A,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-info/10 flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-info"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-primary-900",children:E.total}),e.jsx("p",{className:"text-xs text-primary-500",children:"Postes total"})]})]})})}),e.jsx(I,{children:e.jsx(A,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-success/10 flex items-center justify-center",children:e.jsx(me,{className:"w-5 h-5 text-success"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-success",children:E.integres}),e.jsx("p",{className:"text-xs text-primary-500",children:"Intégrés"})]})]})})}),e.jsx(I,{children:e.jsx(A,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-warning/10 flex items-center justify-center",children:e.jsx(Ce,{className:"w-5 h-5 text-warning"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-warning",children:E.enCours}),e.jsx("p",{className:"text-xs text-primary-500",children:"En cours"})]})]})})}),e.jsx(I,{children:e.jsx(A,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary-100 flex items-center justify-center",children:e.jsx(we,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-primary-900",children:E.aLancer}),e.jsx("p",{className:"text-xs text-primary-500",children:"À lancer"})]})]})})}),e.jsx(I,{children:e.jsx(A,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 flex items-center justify-center",children:e.jsx(ue,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-primary-900",children:[(E.masseSalariale/1e6).toFixed(1),"M"]}),e.jsx("p",{className:"text-xs text-primary-500",children:"Masse salariale"})]})]})})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Se,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-primary-400"}),e.jsx("input",{type:"text",value:l,onChange:s=>f(s.target.value),placeholder:"Rechercher un poste...",className:"w-full pl-10 pr-4 py-2 border border-primary-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("select",{value:h,onChange:s=>$(s.target.value),className:"px-3 py-2 border border-primary-300 rounded-lg",children:[e.jsx("option",{value:"all",children:"Toutes les vagues"}),j.map(s=>e.jsxs("option",{value:s.id,children:["Vague ",s.numero," - ",s.nom]},s.id))]})]}),a==="pipeline"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"flex gap-4 min-w-[1200px] pb-4",children:Te.map(s=>{const d=W[s],y=B.filter(n=>n.statut===s);return e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("div",{className:`p-3 rounded-t-xl ${d.bg}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`font-medium ${d.text}`,children:d.label}),e.jsx("span",{className:`text-sm ${d.text}`,children:y.length})]})}),e.jsx("div",{className:"bg-primary-50 rounded-b-xl p-2 min-h-[400px] space-y-2",children:y.map(n=>{const S=j.find(Q=>Q.id===n.vagueId);return e.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-primary-100 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>z(n),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx(F,{variant:n.priorite==="critique"?"error":n.priorite==="haute"?"warning":"default",size:"sm",children:n.priorite}),S&&e.jsxs("span",{className:"text-xs text-primary-500",children:["V",S.numero]})]}),e.jsx("p",{className:"font-medium text-primary-900 text-sm mb-1",children:n.titre}),e.jsx("p",{className:"text-xs text-primary-500 mb-2",children:n.departement}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-primary-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Pe,{className:"w-3 h-3"}),v(new Date(n.dateEntreePrevue),"dd/MM",{locale:ne})]}),n.candidatRetenu&&e.jsx("span",{className:"text-success font-medium truncate max-w-[80px]",children:n.candidatRetenu})]})]},n.id)})})]},s)})})}),a==="vagues"&&e.jsx("div",{className:"space-y-6",children:j.map(s=>{const d=B.filter(n=>n.vagueId===s.id),y=d.filter(n=>n.statut==="integre").length;return e.jsxs(I,{children:[e.jsx(je,{children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${s.priorite==="critique"?"bg-error/10":s.priorite==="haute"?"bg-warning/10":"bg-info/10"}`,children:e.jsxs("span",{className:`font-bold ${s.priorite==="critique"?"text-error":s.priorite==="haute"?"text-warning":"text-info"}`,children:["V",s.numero]})}),e.jsxs("div",{children:[e.jsx(ve,{children:s.nom}),e.jsxs("p",{className:"text-sm text-primary-500",children:["Deadline: ",v(new Date(s.deadline),"dd MMMM yyyy",{locale:ne})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-bold text-primary-900",children:[y,"/",d.length]}),e.jsx("p",{className:"text-xs text-primary-500",children:"recrutés"})]}),e.jsx("div",{className:"w-32 h-2 bg-primary-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-success rounded-full",style:{width:`${d.length>0?y/d.length*100:0}%`}})})]})]})}),e.jsx(A,{children:d.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(n=>{const S=W[n.statut];return e.jsxs("div",{className:`p-4 rounded-xl border ${S.bg} cursor-pointer hover:shadow-md transition-all`,onClick:()=>z(n),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-900",children:n.titre}),e.jsx("p",{className:"text-sm text-primary-500",children:n.departement})]}),e.jsx(F,{variant:n.priorite==="critique"?"error":n.priorite==="haute"?"warning":"default",size:"sm",children:n.priorite})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsx("span",{className:`text-sm font-medium ${S.text}`,children:S.label}),e.jsx("span",{className:"text-xs text-primary-500",children:v(new Date(n.dateEntreePrevue),"dd/MM/yy")})]}),n.candidatRetenu&&e.jsx("div",{className:"mt-2 pt-2 border-t border-primary-200",children:e.jsx("p",{className:"text-sm text-success font-medium",children:n.candidatRetenu})})]},n.id)})}):e.jsx("p",{className:"text-center text-primary-500 py-4",children:"Aucun poste dans cette vague"})})]},s.id)})}),e.jsx(_e,{isOpen:p,onClose:()=>{C(!1),D(void 0)},poste:N,vagues:j,projetId:o.id,onSave:_})]})}export{Ze as ProjetRecrutement};
