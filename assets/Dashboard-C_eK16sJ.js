import{j as e,R as D,L as Ke,a as Oe,B as de,C as Y,X as Q,Y as Z,T as K,b as ve,c as B,P as xe,d as me,e as he,A as Le,f as We,g as Be,h as Ge,i as Je,k as Ve,l as qe}from"./vendor-charts-cvMpHz0W.js";import{d as _e,r as M}from"./vendor-react-BdB5Pz3t.js";import{u as Ue,a as He,b as Xe,c as Ye,d as Qe,e as Ze,f as es,B as I,C as x,g as m,h as R,i as E}from"./index-IaNwoOYO.js";import{B as ee}from"./Badge-CM23X0aP.js";import{E as ss}from"./vendor-export-C98UG4Mq.js";import{s as ts,a as rs,e as as,f as pe,d as we,p as ke}from"./vendor-utils-BBD155gO.js";import{c as Ce,a0 as is,D as ns,a1 as ls,a2 as cs,d as ue,R as se,y as Se,A as je,W as os,o as ds,T as Te,a3 as Ae,S as Pe,F as Re,_ as xs,a4 as ms,B as hs}from"./vendor-icons-B6Rt7gcW.js";import{f as Ee}from"./fr-C0qvdQu_.js";function ps({data:c,color:t="#22c55e",width:p=80,height:f=24,showDot:n=!0}){if(!c||c.length===0)return e.jsx("div",{className:"bg-primary-100 dark:bg-primary-700 rounded",style:{width:p,height:f}});const u=(c.length>=2?c[c.length-1]-c[0]:0)>=0?"#22c55e":"#ef4444",l=t==="auto"?u:t,C=c.map((G,V)=>({value:G,index:V}));return e.jsx("div",{style:{width:p,height:f},children:e.jsx(D,{width:"100%",height:"100%",children:e.jsx(Ke,{data:C,children:e.jsx(Oe,{type:"monotone",dataKey:"value",stroke:l,strokeWidth:1.5,dot:n?{r:0}:!1,activeDot:!1})})})})}const N={primary:[23,23,23],secondary:[115,115,115],success:[34,197,94],warning:[245,158,11],error:[239,68,68],border:[229,229,229],background:[250,250,250]};function us(c){return c.centres.map(t=>{const p=c.mesures.filter(l=>l.centreId===t.id),f=p.filter(l=>l.statut==="vert").length,n=p.filter(l=>l.statut==="orange").length,i=p.filter(l=>l.statut==="rouge").length,u=p.length>0?Math.round(f/p.length*100):0;return{centre:t,performance:u,mesuresVertes:f,mesuresOranges:n,mesuresRouges:i,totalMesures:p.length}})}function js(c){const t=[],p=c.length>0?Math.round(c.reduce((u,l)=>u+l.performance,0)/c.length):0;t.push(`Performance globale moyenne: ${p}%`);const f=c.filter(u=>u.performance>=80);f.length>0&&t.push(`${f.length} centre(s) en excellente performance (>80%): ${f.map(u=>u.centre.code).join(", ")}`);const n=c.filter(u=>u.performance<60);n.length>0&&t.push(`${n.length} centre(s) nécessitent une attention particulière (<60%): ${n.map(u=>u.centre.code).join(", ")}`);const i=c.reduce((u,l)=>u+l.mesuresRouges,0);return i>0&&t.push(`${i} KPI(s) en zone critique à traiter en priorité`),t}async function fs(c){const t=new ss({orientation:"portrait",unit:"mm",format:"a4"}),p=t.internal.pageSize.getWidth(),f=t.internal.pageSize.getHeight(),n=20;let i=n;const u=us(c);t.setFillColor(...N.primary),t.rect(0,0,p,40,"F"),t.setTextColor(255,255,255),t.setFontSize(24),t.setFont("helvetica","bold"),t.text("Tableau de Bord",n,25),t.setFontSize(12),t.setFont("helvetica","normal"),t.text("Vue consolidée multi-centres",n,33),t.setFontSize(10),t.text(`Généré le ${c.dateExport.toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric"})}`,p-n,33,{align:"right"}),i=55,t.setTextColor(...N.primary),t.setFontSize(16),t.setFont("helvetica","bold"),t.text("Résumé exécutif",n,i),i+=10;const l=js(u);t.setFontSize(11),t.setFont("helvetica","normal"),t.setTextColor(...N.secondary),l.forEach(a=>{const S=t.splitTextToSize(a,p-n*2);t.text(S,n,i),i+=S.length*5+3}),i+=10,t.setTextColor(...N.primary),t.setFontSize(16),t.setFont("helvetica","bold"),t.text("Statistiques globales",n,i),i+=10;const C=(p-n*2-15)/4,G=30;[{label:"Centres actifs",value:c.centres.filter(a=>a.statut==="actif").length.toString(),total:c.centres.length.toString()},{label:"Performance moy.",value:u.length>0?Math.round(u.reduce((a,S)=>a+S.performance,0)/u.length).toString()+"%":"N/A"},{label:"KPIs verts",value:u.reduce((a,S)=>a+S.mesuresVertes,0).toString()},{label:"KPIs critiques",value:u.reduce((a,S)=>a+S.mesuresRouges,0).toString()}].forEach((a,S)=>{const z=n+S*(C+5);t.setFillColor(...N.background),t.setDrawColor(...N.border),t.roundedRect(z,i,C,G,3,3,"FD"),t.setTextColor(...N.primary),t.setFontSize(18),t.setFont("helvetica","bold");const J=a.total?`${a.value}/${a.total}`:a.value;t.text(J,z+C/2,i+13,{align:"center"}),t.setFontSize(9),t.setFont("helvetica","normal"),t.setTextColor(...N.secondary),t.text(a.label,z+C/2,i+22,{align:"center"})}),i+=G+15,t.setTextColor(...N.primary),t.setFontSize(16),t.setFont("helvetica","bold"),t.text("Performance par centre",n,i),i+=10;const _=[30,60,25,25,25,25],O=["Code","Nom","Perf.","Verts","Orange","Rouges"];t.setFillColor(...N.primary),t.rect(n,i,p-n*2,8,"F"),t.setTextColor(255,255,255),t.setFontSize(9),t.setFont("helvetica","bold");let L=n+2;O.forEach((a,S)=>{t.text(a,L,i+5.5),L+=_[S]}),i+=8,t.setFont("helvetica","normal"),u.forEach((a,S)=>{i>f-30&&(t.addPage(),i=n),S%2===0&&(t.setFillColor(...N.background),t.rect(n,i,p-n*2,7,"F")),t.setTextColor(...N.primary),t.setFontSize(9),L=n+2,[a.centre.code,a.centre.nom.substring(0,25),`${a.performance}%`,a.mesuresVertes.toString(),a.mesuresOranges.toString(),a.mesuresRouges.toString()].forEach((J,W)=>{W===2?a.performance>=80?t.setTextColor(...N.success):a.performance>=60?t.setTextColor(...N.warning):t.setTextColor(...N.error):W===3?t.setTextColor(...N.success):W===4?t.setTextColor(...N.warning):W===5?t.setTextColor(...N.error):t.setTextColor(...N.primary),t.text(J,L,i+5),L+=_[W]}),i+=7}),i+=10;const k=c.actions.filter(a=>a.statut==="termine"||a.statut==="annule"?!1:new Date(a.dateEcheance)<new Date);k.length>0&&(i>f-60&&(t.addPage(),i=n),t.setTextColor(...N.primary),t.setFontSize(16),t.setFont("helvetica","bold"),t.text(`Actions en retard (${k.length})`,n,i),i+=10,k.slice(0,10).forEach(a=>{i>f-20&&(t.addPage(),i=n);const S=c.centres.find(J=>J.id===a.centreId),z=Math.floor((new Date().getTime()-new Date(a.dateEcheance).getTime())/(1e3*60*60*24));t.setFillColor(254,226,226),t.rect(n,i,p-n*2,12,"F"),t.setTextColor(...N.error),t.setFontSize(9),t.setFont("helvetica","bold"),t.text(`-${z}j`,n+3,i+5),t.setTextColor(...N.primary),t.setFont("helvetica","normal"),t.text(a.titre.substring(0,50),n+20,i+5),t.setTextColor(...N.secondary),t.text((S==null?void 0:S.code)||"N/A",p-n-20,i+5),i+=12}));const U=t.getNumberOfPages();for(let a=1;a<=U;a++)t.setPage(a),t.setFontSize(8),t.setTextColor(...N.secondary),t.text(`Page ${a}/${U}`,p/2,f-10,{align:"center"}),t.text("Cockpit CRMC - Confidentiel",n,f-10);return t.output("blob")}async function gs(c){const t=await fs(c),p=URL.createObjectURL(t),f=document.createElement("a"),n=c.dateExport.toISOString().slice(0,10);f.href=p,f.download=`dashboard_cockpit_${n}.pdf`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(p)}function As(){const c=_e(),{setCurrentCentre:t,theme:p}=Ue(),[f,n]=M.useState(!1),[i,u]=M.useState("overview"),l=p==="dark",{centres:C,loadCentres:G}=He(),{axes:V,loadAxes:_,objectifs:O,loadObjectifs:L}=Xe(),{mesures:k,loadMesures:U}=Ye(),{actions:a,loadActions:S,getActionsEnRetard:z}=Qe(),{alertes:J,loadAlertes:W,getAlertesNonLues:Fe}=Ze(),{projets:te,jalons:re,postesARecruter:ae,prospects:ie,vaguesRecrutement:ys,loadProjet:fe}=es();M.useEffect(()=>{G(),_(),L(),U(),S(),W()},[]),M.useEffect(()=>{C.filter(s=>s.modeProjetActif).forEach(s=>fe(s.id))},[C,fe]);const ne=Fe(),H=z(),X=C.filter(s=>s.statut==="actif"&&!s.modeProjetActif),$=C.filter(s=>s.modeProjetActif),h=M.useMemo(()=>{const s=a.filter(d=>d.statut==="termine"),r=a.filter(d=>d.statut==="en_cours"),o=a.filter(d=>d.statut==="a_faire"),b=a.reduce((d,y)=>{var F;return d+(((F=y.budget)==null?void 0:F.prevu)||0)},0),j=a.reduce((d,y)=>{var F;return d+(((F=y.budget)==null?void 0:F.consomme)||0)},0),T=C.reduce((d,y)=>d+(y.surfaceLocative||0),0),A=a.length>0?Math.round(s.length/a.length*100):0,w=k.filter(d=>d.statut==="vert").length,g=k.length>0?Math.round(w/k.length*100):0;return{totalCentres:C.length,centresActifs:X.length,centresEnProjet:$.length,totalObjectifs:O.length,actionsTotal:a.length,actionsTerminees:s.length,actionsEnCours:r.length,actionsAFaire:o.length,actionsEnRetard:H.length,budgetTotal:b,budgetConsomme:j,surfaceTotale:T,tauxRealisation:A,performanceGlobale:g,kpisVerts:k.filter(d=>d.statut==="vert").length,kpisOrange:k.filter(d=>d.statut==="orange").length,kpisRouge:k.filter(d=>d.statut==="rouge").length}},[C,X,$,O,a,H,k]),v=M.useMemo(()=>{let s=0,r=0,o=0,b=0,j=0,T=0,A=0,w=0;return $.forEach(g=>{const d=te.find(P=>P.centreId===g.id);if(!d)return;const y=re.filter(P=>P.projetId===d.id),F=ae.filter(P=>P.projetId===d.id),Ne=ie.filter(P=>P.projetId===d.id);s+=y.length,r+=y.filter(P=>P.statut==="atteint").length,o+=F.length,b+=F.filter(P=>P.statut==="integre").length,j+=Ne.length;const be=Ne.filter(P=>P.statut==="bail_signe");T+=be.length,A+=g.surfaceLocative||0,w+=be.reduce((P,ze)=>P+ze.surface,0)}),{totalJalons:s,jalonsAtteints:r,tauxJalons:s>0?Math.round(r/s*100):0,totalPostes:o,postesIntegres:b,tauxRecrutement:o>0?Math.round(b/o*100):0,totalProspects:j,prospectsSigns:T,tauxCommercialisation:A>0?Math.round(w/A*100):0,glaTotale:A,glaSignee:w}},[$,te,re,ae,ie]),le=M.useMemo(()=>C.map(s=>{const r=k.filter(w=>w.centreId===s.id),o=r.filter(w=>w.statut==="vert").length,b=r.length>0?Math.round(o/r.length*100):0,j=a.filter(w=>w.centreId===s.id),T=j.filter(w=>w.statut==="termine").length,A=j.length>0?Math.round(T/j.length*100):0;return{name:s.code,fullName:s.nom,performance:b,tauxActions:A,kpis:r.length,actions:j.length,color:s.couleurTheme||"#171717"}}),[C,k,a]),ce=[{name:"Atteint",value:h.kpisVerts,color:"#22c55e"},{name:"Attention",value:h.kpisOrange,color:"#f59e0b"},{name:"Critique",value:h.kpisRouge,color:"#ef4444"}],q=[{name:"Terminées",value:h.actionsTerminees,color:"#22c55e"},{name:"En cours",value:h.actionsEnCours,color:"#3b82f6"},{name:"À faire",value:h.actionsAFaire,color:"#a3a3a3"},{name:"En retard",value:h.actionsEnRetard,color:"#ef4444"}],$e=M.useMemo(()=>{const s=[];for(let r=5;r>=0;r--){const o=ts(new Date,r),b=rs(o),j=as(o),T=k.filter(g=>{const d=new Date(g.dateSaisie);return d>=b&&d<=j}),A=T.filter(g=>g.statut==="vert").length,w=T.length>0?Math.round(A/T.length*100):null;s.push({mois:pe(o,"MMM",{locale:Ee}),performance:w,mesures:T.length})}return s},[k]),oe=M.useMemo(()=>{const s={};return V.forEach(r=>{const o=k.filter(j=>{const T=O.find(A=>A.id===j.objectifId);return(T==null?void 0:T.axeId)===r.id}),b=o.filter(j=>j.statut==="vert").length;s[r.id]={nom:r.nom,code:r.code,performance:o.length>0?Math.round(b/o.length*100):0,count:o.length,couleur:r.couleur}}),Object.values(s).filter(r=>r.count>0)},[V,k,O]),Me=s=>{t(s),c(`/centre/${s}`)},Ie=async()=>{n(!0);try{await gs({centres:C,mesures:k,actions:a,dateExport:new Date})}catch{}finally{n(!1)}},ge=s=>{const r=k.filter(b=>b.centreId===s).sort((b,j)=>new Date(b.dateSaisie).getTime()-new Date(j.dateSaisie).getTime());return r.length<2?[]:r.slice(-6).map(b=>b.statut==="vert"?100:b.statut==="orange"?50:0)},ye=s=>{const r=te.find(y=>y.centreId===s);if(!r)return null;const o=re.filter(y=>y.projetId===r.id),b=ae.filter(y=>y.projetId===r.id),j=ie.filter(y=>y.projetId===r.id),T=we(ke(r.dateSoftOpening),new Date),A=o.filter(y=>y.statut==="atteint").length,w=b.filter(y=>y.statut==="integre").length,g=j.filter(y=>y.statut==="bail_signe"),d=g.reduce((y,F)=>y+F.surface,0);return{projet:r,joursRestants:T,jalonsAtteints:A,jalonsTotal:o.length,postesIntegres:w,postesTotal:b.length,prospectsSigns:g.length,prospectsTotal:j.length,glaSigne:d}},De=[{id:"overview",label:"Vue d'ensemble",icon:e.jsx(ms,{className:"w-4 h-4"})},{id:"performance",label:"Performance",icon:e.jsx(hs,{className:"w-4 h-4"})},{id:"actions",label:"Actions",icon:e.jsx(Ce,{className:"w-4 h-4"})},{id:"projets",label:"Projets",icon:e.jsx(se,{className:"w-4 h-4"})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-primary-900 dark:text-primary-100",children:"Tableau de bord"}),e.jsx("p",{className:"text-primary-500 dark:text-primary-400 mt-1",children:"Vue consolidée multi-centres"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(I,{variant:"secondary",onClick:()=>c("/actions-consolidees"),leftIcon:e.jsx(Ce,{className:"w-4 h-4"}),children:"Plan d'action consolidé"}),C.length>=2&&e.jsx(I,{variant:"ghost",onClick:()=>c("/comparateur"),leftIcon:e.jsx(is,{className:"w-4 h-4"}),children:"Comparer"}),e.jsx(I,{variant:"ghost",onClick:Ie,disabled:f,leftIcon:e.jsx(ns,{className:"w-4 h-4"}),children:f?"Export...":"Export PDF"}),e.jsx(I,{variant:"secondary",onClick:()=>c("/centres"),rightIcon:e.jsx(ls,{className:"w-4 h-4"}),children:"Gérer les centres"})]})]}),e.jsx("div",{className:"flex gap-1 p-1 bg-primary-100 dark:bg-primary-800 rounded-lg w-fit",children:De.map(s=>e.jsxs("button",{onClick:()=>u(s.id),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-colors ${i===s.id?"bg-white dark:bg-primary-700 text-primary-900 dark:text-primary-100 shadow-sm":"text-primary-600 dark:text-primary-400 hover:text-primary-900 dark:hover:text-primary-100"}`,children:[s.icon,s.label]},s.id))}),i==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[e.jsx(x,{className:"bg-gradient-to-br from-primary-900 to-primary-700 text-white",children:e.jsxs(m,{className:"py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-200",children:"Performance Globale"}),e.jsxs("p",{className:"text-3xl font-bold mt-1",children:[h.performanceGlobale,"%"]})]}),e.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full flex items-center justify-center",children:e.jsx(cs,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"mt-3 h-1.5 bg-white/20 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-white rounded-full transition-all",style:{width:`${h.performanceGlobale}%`}})})]})}),e.jsx(x,{children:e.jsxs(m,{className:"py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-500 dark:text-primary-400",children:"Centres actifs"}),e.jsx("p",{className:"text-3xl font-bold text-primary-900 dark:text-primary-100 mt-1",children:h.centresActifs})]}),e.jsx("div",{className:"w-12 h-12 bg-success/10 rounded-full flex items-center justify-center",children:e.jsx(ue,{className:"w-6 h-6 text-success"})})]}),e.jsxs("p",{className:"text-xs text-primary-500 mt-2",children:[h.surfaceTotale.toLocaleString()," m² GLA totale"]})]})}),e.jsx(x,{children:e.jsxs(m,{className:"py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-500 dark:text-primary-400",children:"En construction"}),e.jsx("p",{className:"text-3xl font-bold text-info mt-1",children:h.centresEnProjet})]}),e.jsx("div",{className:"w-12 h-12 bg-info/10 rounded-full flex items-center justify-center",children:e.jsx(se,{className:"w-6 h-6 text-info"})})]}),e.jsxs("p",{className:"text-xs text-info mt-2",children:[v.tauxJalons,"% jalons atteints"]})]})}),e.jsx(x,{children:e.jsxs(m,{className:"py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-500 dark:text-primary-400",children:"Taux réalisation"}),e.jsxs("p",{className:"text-3xl font-bold text-success mt-1",children:[h.tauxRealisation,"%"]})]}),e.jsx("div",{className:"w-12 h-12 bg-success/10 rounded-full flex items-center justify-center",children:e.jsx(Se,{className:"w-6 h-6 text-success"})})]}),e.jsxs("p",{className:"text-xs text-primary-500 mt-2",children:[h.actionsTerminees,"/",h.actionsTotal," actions"]})]})}),e.jsx(x,{children:e.jsxs(m,{className:"py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-500 dark:text-primary-400",children:"Actions en retard"}),e.jsx("p",{className:`text-3xl font-bold mt-1 ${h.actionsEnRetard>0?"text-error":"text-success"}`,children:h.actionsEnRetard})]}),e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${h.actionsEnRetard>0?"bg-error/10":"bg-success/10"}`,children:e.jsx(je,{className:`w-6 h-6 ${h.actionsEnRetard>0?"text-error":"text-success"}`})})]}),e.jsxs("p",{className:"text-xs text-primary-500 mt-2",children:[h.actionsEnCours," en cours"]})]})}),e.jsx(x,{children:e.jsxs(m,{className:"py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-500 dark:text-primary-400",children:"Budget actions"}),e.jsxs("p",{className:"text-2xl font-bold text-primary-900 dark:text-primary-100 mt-1",children:[(h.budgetConsomme/1e6).toFixed(1),"M"]})]}),e.jsx("div",{className:"w-12 h-12 bg-warning/10 rounded-full flex items-center justify-center",children:e.jsx(os,{className:"w-6 h-6 text-warning"})})]}),e.jsxs("p",{className:"text-xs text-primary-500 mt-2",children:["sur ",(h.budgetTotal/1e6).toFixed(1),"M prévus"]})]})})]}),$.length>0&&e.jsxs(x,{children:[e.jsx(R,{action:e.jsxs(I,{variant:"ghost",size:"sm",onClick:()=>u("projets"),children:["Voir détails ",e.jsx(ds,{className:"w-4 h-4 ml-1"})]}),children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5 text-info"}),"Projets en construction (",$.length,")"]})}),e.jsxs(m,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-primary-50 dark:bg-primary-800 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-primary-500 mb-2",children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Jalons"})]}),e.jsxs("p",{className:"text-2xl font-bold text-primary-900 dark:text-primary-100",children:[v.jalonsAtteints,"/",v.totalJalons]}),e.jsx("div",{className:"mt-2 h-2 bg-primary-200 dark:bg-primary-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-info rounded-full",style:{width:`${v.tauxJalons}%`}})}),e.jsxs("p",{className:"text-xs text-primary-500 mt-1",children:[v.tauxJalons,"%"]})]}),e.jsxs("div",{className:"text-center p-4 bg-primary-50 dark:bg-primary-800 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-primary-500 mb-2",children:[e.jsx(Ae,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Recrutement"})]}),e.jsxs("p",{className:"text-2xl font-bold text-primary-900 dark:text-primary-100",children:[v.postesIntegres,"/",v.totalPostes]}),e.jsx("div",{className:"mt-2 h-2 bg-primary-200 dark:bg-primary-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-success rounded-full",style:{width:`${v.tauxRecrutement}%`}})}),e.jsxs("p",{className:"text-xs text-primary-500 mt-1",children:[v.tauxRecrutement,"%"]})]}),e.jsxs("div",{className:"text-center p-4 bg-primary-50 dark:bg-primary-800 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-primary-500 mb-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Baux signés"})]}),e.jsxs("p",{className:"text-2xl font-bold text-primary-900 dark:text-primary-100",children:[v.prospectsSigns,"/",v.totalProspects]}),e.jsx("div",{className:"mt-2 h-2 bg-primary-200 dark:bg-primary-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-warning rounded-full",style:{width:`${v.tauxCommercialisation}%`}})}),e.jsxs("p",{className:"text-xs text-primary-500 mt-1",children:[v.tauxCommercialisation,"% GLA"]})]}),e.jsxs("div",{className:"text-center p-4 bg-primary-50 dark:bg-primary-800 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-primary-500 mb-2",children:[e.jsx(Re,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"GLA signée"})]}),e.jsxs("p",{className:"text-2xl font-bold text-primary-900 dark:text-primary-100",children:[(v.glaSignee/1e3).toFixed(1),"k"]}),e.jsxs("p",{className:"text-xs text-primary-500 mt-3",children:["sur ",(v.glaTotale/1e3).toFixed(1),"k m²"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:$.slice(0,4).map(s=>{const r=ye(s.id);return e.jsxs("div",{onClick:()=>{t(s.id),c(`/centre/${s.id}/projet`)},className:"flex items-center gap-4 p-3 bg-white dark:bg-primary-700 border border-primary-200 dark:border-primary-600 rounded-lg hover:border-info cursor-pointer transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white font-bold text-sm",style:{backgroundColor:s.couleurTheme||"#3b82f6"},children:s.code.substring(0,2)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-primary-900 dark:text-primary-100 truncate",children:s.nom}),e.jsx("p",{className:"text-xs text-primary-500",children:s.ville})]}),r&&e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:`text-lg font-bold ${r.joursRestants<=30?"text-error":r.joursRestants<=90?"text-warning":"text-info"}`,children:["J-",Math.max(0,r.joursRestants)]})})]},s.id)})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(x,{children:[e.jsx(R,{children:e.jsx(E,{children:"Performance par centre"})}),e.jsx(m,{children:e.jsx("div",{className:"h-72",children:e.jsx(D,{width:"100%",height:"100%",minWidth:0,children:e.jsxs(de,{data:le,layout:"vertical",children:[e.jsx(Y,{strokeDasharray:"3 3",stroke:l?"#404040":"#e5e5e5"}),e.jsx(Q,{type:"number",domain:[0,100],stroke:l?"#a3a3a3":"#737373",fontSize:12}),e.jsx(Z,{dataKey:"name",type:"category",width:60,stroke:l?"#a3a3a3":"#737373",fontSize:12}),e.jsx(K,{contentStyle:{backgroundColor:l?"#262626":"#fff",border:`1px solid ${l?"#404040":"#e5e5e5"}`,borderRadius:"8px",color:l?"#fafafa":"#171717"},formatter:(s,r)=>[`${s}%`,r==="performance"?"Performance KPI":"Taux actions terminées"]}),e.jsx(ve,{}),e.jsx(B,{dataKey:"performance",name:"Performance KPI",fill:"#22c55e",radius:[0,4,4,0]}),e.jsx(B,{dataKey:"tauxActions",name:"Actions terminées",fill:"#3b82f6",radius:[0,4,4,0]})]})})})})]}),e.jsxs(x,{children:[e.jsx(R,{children:e.jsx(E,{children:"Répartition des statuts"})}),e.jsx(m,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 h-72",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-primary-600 dark:text-primary-400 mb-2 text-center",children:"KPIs"}),e.jsx("div",{className:"h-48",children:k.length>0?e.jsx(D,{width:"100%",height:"100%",minWidth:0,children:e.jsxs(xe,{children:[e.jsx(me,{data:ce,cx:"50%",cy:"50%",innerRadius:40,outerRadius:60,paddingAngle:3,dataKey:"value",children:ce.map((s,r)=>e.jsx(he,{fill:s.color},`cell-${r}`))}),e.jsx(K,{})]})}):e.jsx("div",{className:"h-full flex items-center justify-center text-primary-400",children:"Aucune mesure"})}),e.jsx("div",{className:"flex justify-center gap-3 flex-wrap",children:ce.map(s=>e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:s.color}}),e.jsx("span",{className:"text-primary-600 dark:text-primary-400",children:s.value})]},s.name))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-primary-600 dark:text-primary-400 mb-2 text-center",children:"Actions"}),e.jsx("div",{className:"h-48",children:a.length>0?e.jsx(D,{width:"100%",height:"100%",minWidth:0,children:e.jsxs(xe,{children:[e.jsx(me,{data:q,cx:"50%",cy:"50%",innerRadius:40,outerRadius:60,paddingAngle:3,dataKey:"value",children:q.map((s,r)=>e.jsx(he,{fill:s.color},`cell-${r}`))}),e.jsx(K,{})]})}):e.jsx("div",{className:"h-full flex items-center justify-center text-primary-400",children:"Aucune action"})}),e.jsx("div",{className:"flex justify-center gap-3 flex-wrap",children:q.map(s=>e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:s.color}}),e.jsx("span",{className:"text-primary-600 dark:text-primary-400",children:s.value})]},s.name))})]})]})})]})]}),X.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"w-5 h-5 text-success"}),e.jsx("h2",{className:"text-lg font-semibold text-primary-900 dark:text-primary-100",children:"Centres en exploitation"})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:X.map(s=>{const r=O.filter(g=>g.centreId===s.id),o=k.filter(g=>g.centreId===s.id),b=o.filter(g=>g.statut==="vert").length,j=o.length>0?Math.round(b/o.length*100):0,T=a.filter(g=>g.centreId===s.id),A=T.filter(g=>g.statut!=="termine"&&g.statut!=="annule"&&g.dateEcheance&&new Date(g.dateEcheance)<new Date),w=j>=80?"success":j>=60?"warning":"error";return e.jsxs(x,{hoverable:!0,onClick:()=>Me(s.id),children:[e.jsx(R,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white font-bold",style:{backgroundColor:s.couleurTheme||"#171717"},children:s.code.substring(0,2)}),e.jsxs("div",{children:[e.jsx(E,{children:s.nom}),e.jsx("p",{className:"text-sm text-primary-500 dark:text-primary-400",children:s.ville})]})]})}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-primary-600 dark:text-primary-400",children:"Performance"}),e.jsxs("div",{className:"flex items-center gap-2",children:[ge(s.id).length>=2&&e.jsx(ps,{data:ge(s.id),color:w==="success"?"#22c55e":w==="warning"?"#f59e0b":"#ef4444",width:60,height:20}),e.jsxs(ee,{variant:w,children:[j,"%"]})]})]}),e.jsx("div",{className:"h-2 bg-primary-100 dark:bg-primary-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full bg-${w}`,style:{width:`${j}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{className:"text-center p-2 bg-primary-50 dark:bg-primary-800 rounded-lg",children:[e.jsx("p",{className:"text-xs text-primary-500",children:"Objectifs"}),e.jsx("p",{className:"font-semibold text-primary-900 dark:text-primary-100",children:r.length})]}),e.jsxs("div",{className:"text-center p-2 bg-primary-50 dark:bg-primary-800 rounded-lg",children:[e.jsx("p",{className:"text-xs text-primary-500",children:"Actions"}),e.jsx("p",{className:"font-semibold text-primary-900 dark:text-primary-100",children:T.length})]}),e.jsxs("div",{className:`text-center p-2 rounded-lg ${A.length>0?"bg-error/10":"bg-primary-50 dark:bg-primary-800"}`,children:[e.jsx("p",{className:"text-xs text-primary-500",children:"Retard"}),e.jsx("p",{className:`font-semibold ${A.length>0?"text-error":"text-primary-900 dark:text-primary-100"}`,children:A.length})]})]})]})})]},s.id)})})]}),C.length===0&&e.jsx(x,{children:e.jsxs(m,{className:"text-center py-12",children:[e.jsx(ue,{className:"w-12 h-12 text-primary-300 dark:text-primary-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-primary-900 dark:text-primary-100 mb-2",children:"Aucun centre configuré"}),e.jsx("p",{className:"text-primary-500 dark:text-primary-400 mb-4",children:"Commencez par ajouter votre premier centre commercial"}),e.jsx(I,{onClick:()=>c("/centres"),children:"Ajouter un centre"})]})}),ne.length>0&&e.jsxs(x,{children:[e.jsx(R,{action:e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>c("/alertes"),children:"Voir tout"}),children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5 text-warning"}),"Alertes prioritaires (",ne.length,")"]})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-3",children:ne.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-primary-50 dark:bg-primary-700/50 rounded-lg",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${s.priorite==="critique"?"bg-error":s.priorite==="haute"?"bg-warning":"bg-info"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-primary-900 dark:text-primary-100",children:s.titre}),e.jsx("p",{className:"text-sm text-primary-500 dark:text-primary-400",children:s.message})]}),e.jsx(ee,{variant:s.priorite==="critique"?"error":s.priorite==="haute"?"warning":"info",children:s.priorite})]},s.id))})})]})]}),i==="performance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x,{children:[e.jsx(R,{children:e.jsx(E,{children:"Tendance de performance (6 derniers mois)"})}),e.jsx(m,{children:e.jsx("div",{className:"h-72",children:e.jsx(D,{width:"100%",height:"100%",minWidth:0,children:e.jsxs(Le,{data:$e,children:[e.jsx(Y,{strokeDasharray:"3 3",stroke:l?"#404040":"#e5e5e5"}),e.jsx(Q,{dataKey:"mois",stroke:l?"#a3a3a3":"#737373",fontSize:12}),e.jsx(Z,{domain:[0,100],stroke:l?"#a3a3a3":"#737373",fontSize:12}),e.jsx(K,{contentStyle:{backgroundColor:l?"#262626":"#fff",border:`1px solid ${l?"#404040":"#e5e5e5"}`,borderRadius:"8px"}}),e.jsx(We,{type:"monotone",dataKey:"performance",stroke:"#22c55e",fill:"#22c55e",fillOpacity:.2,strokeWidth:2,connectNulls:!0})]})})})})]}),oe.length>0&&e.jsxs(x,{children:[e.jsx(R,{children:e.jsx(E,{children:"Performance par axe stratégique"})}),e.jsx(m,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"h-72",children:e.jsx(D,{width:"100%",height:"100%",minWidth:0,children:e.jsxs(Be,{data:oe,children:[e.jsx(Ge,{stroke:l?"#404040":"#e5e5e5"}),e.jsx(Je,{dataKey:"code",stroke:l?"#a3a3a3":"#737373",fontSize:12}),e.jsx(Ve,{domain:[0,100],stroke:l?"#a3a3a3":"#737373",fontSize:10}),e.jsx(qe,{name:"Performance",dataKey:"performance",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.3}),e.jsx(K,{})]})})}),e.jsx("div",{className:"space-y-3",children:oe.map(s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.couleur}}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium text-primary-900 dark:text-primary-100",children:s.code}),e.jsxs("span",{className:`font-bold ${s.performance>=80?"text-success":s.performance>=60?"text-warning":"text-error"}`,children:[s.performance,"%"]})]}),e.jsx("p",{className:"text-xs text-primary-500 truncate",children:s.nom}),e.jsx("div",{className:"mt-1 h-1.5 bg-primary-100 dark:bg-primary-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${s.performance}%`,backgroundColor:s.couleur}})})]})]},s.code))})]})})]}),e.jsxs(x,{children:[e.jsx(R,{children:e.jsx(E,{children:"Comparaison des centres"})}),e.jsx(m,{children:e.jsx("div",{className:"h-80",children:e.jsx(D,{width:"100%",height:"100%",minWidth:0,children:e.jsxs(de,{data:le,children:[e.jsx(Y,{strokeDasharray:"3 3",stroke:l?"#404040":"#e5e5e5"}),e.jsx(Q,{dataKey:"name",stroke:l?"#a3a3a3":"#737373",fontSize:12}),e.jsx(Z,{stroke:l?"#a3a3a3":"#737373",fontSize:12}),e.jsx(K,{contentStyle:{backgroundColor:l?"#262626":"#fff",border:`1px solid ${l?"#404040":"#e5e5e5"}`,borderRadius:"8px"}}),e.jsx(ve,{}),e.jsx(B,{dataKey:"performance",name:"Performance KPI %",fill:"#22c55e",radius:[4,4,0,0]}),e.jsx(B,{dataKey:"tauxActions",name:"Actions terminées %",fill:"#3b82f6",radius:[4,4,0,0]}),e.jsx(B,{dataKey:"kpis",name:"Nb KPIs",fill:"#f59e0b",radius:[4,4,0,0]}),e.jsx(B,{dataKey:"actions",name:"Nb Actions",fill:"#8b5cf6",radius:[4,4,0,0]})]})})})})]})]}),i==="actions"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx(x,{children:e.jsxs(m,{className:"py-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-primary-900 dark:text-primary-100",children:h.actionsTotal}),e.jsx("p",{className:"text-sm text-primary-500",children:"Total actions"})]})}),e.jsx(x,{className:"bg-success/5 border-success/20",children:e.jsxs(m,{className:"py-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-success",children:h.actionsTerminees}),e.jsx("p",{className:"text-sm text-success",children:"Terminées"})]})}),e.jsx(x,{className:"bg-info/5 border-info/20",children:e.jsxs(m,{className:"py-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-info",children:h.actionsEnCours}),e.jsx("p",{className:"text-sm text-info",children:"En cours"})]})}),e.jsx(x,{children:e.jsxs(m,{className:"py-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-primary-500",children:h.actionsAFaire}),e.jsx("p",{className:"text-sm text-primary-500",children:"À faire"})]})}),e.jsx(x,{className:"bg-error/5 border-error/20",children:e.jsxs(m,{className:"py-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-error",children:h.actionsEnRetard}),e.jsx("p",{className:"text-sm text-error",children:"En retard"})]})})]}),e.jsxs(x,{children:[e.jsx(R,{action:e.jsx(I,{onClick:()=>c("/actions-consolidees"),leftIcon:e.jsx(xs,{className:"w-4 h-4"}),children:"Voir plan consolidé"}),children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5 text-error"}),"Actions en retard par centre"]})}),e.jsx(m,{children:H.length===0?e.jsxs("div",{className:"text-center py-8 text-success",children:[e.jsx(Se,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Aucune action en retard"}),e.jsx("p",{className:"text-sm text-primary-500",children:"Toutes les actions sont dans les délais"})]}):e.jsx("div",{className:"space-y-4",children:C.map(s=>{const r=H.filter(o=>o.centreId===s.id);return r.length===0?null:e.jsxs("div",{className:"border border-error/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-white font-bold text-sm",style:{backgroundColor:s.couleurTheme||"#171717"},children:s.code.substring(0,2)}),e.jsx("span",{className:"font-medium text-primary-900 dark:text-primary-100",children:s.nom}),e.jsxs(ee,{variant:"error",children:[r.length," en retard"]})]}),e.jsxs("div",{className:"space-y-2",children:[r.slice(0,3).map(o=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-error/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-primary-900 dark:text-primary-100",children:o.titre}),e.jsxs("p",{className:"text-xs text-error",children:["Échéance: ",pe(new Date(o.dateEcheance),"dd/MM/yyyy")," ","(",we(new Date,new Date(o.dateEcheance))," jours de retard)"]})]}),e.jsx(ee,{variant:o.priorite==="critique"?"error":o.priorite==="haute"?"warning":"default",children:o.priorite})]},o.id)),r.length>3&&e.jsxs("p",{className:"text-xs text-primary-500 text-center",children:["+",r.length-3," autres actions en retard"]})]})]},s.id)})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(x,{children:[e.jsx(R,{children:e.jsx(E,{children:"Répartition par statut"})}),e.jsx(m,{children:e.jsx("div",{className:"h-64",children:e.jsx(D,{width:"100%",height:"100%",minWidth:0,children:e.jsxs(xe,{children:[e.jsx(me,{data:q,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:3,dataKey:"value",label:({name:s,percent:r})=>`${s} ${(r*100).toFixed(0)}%`,children:q.map((s,r)=>e.jsx(he,{fill:s.color},`cell-${r}`))}),e.jsx(K,{})]})})})})]}),e.jsxs(x,{children:[e.jsx(R,{children:e.jsx(E,{children:"Actions par centre"})}),e.jsx(m,{children:e.jsx("div",{className:"h-64",children:e.jsx(D,{width:"100%",height:"100%",minWidth:0,children:e.jsxs(de,{data:le,layout:"vertical",children:[e.jsx(Y,{strokeDasharray:"3 3",stroke:l?"#404040":"#e5e5e5"}),e.jsx(Q,{type:"number",stroke:l?"#a3a3a3":"#737373",fontSize:12}),e.jsx(Z,{dataKey:"name",type:"category",width:60,stroke:l?"#a3a3a3":"#737373",fontSize:12}),e.jsx(K,{contentStyle:{backgroundColor:l?"#262626":"#fff",border:`1px solid ${l?"#404040":"#e5e5e5"}`,borderRadius:"8px"}}),e.jsx(B,{dataKey:"actions",name:"Nombre d'actions",fill:"#8b5cf6",radius:[0,4,4,0]})]})})})})]})]})]}),i==="projets"&&e.jsx("div",{className:"space-y-6",children:$.length===0?e.jsx(x,{children:e.jsxs(m,{className:"text-center py-12",children:[e.jsx(se,{className:"w-12 h-12 text-primary-300 dark:text-primary-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-primary-900 dark:text-primary-100 mb-2",children:"Aucun projet en cours"}),e.jsx("p",{className:"text-primary-500 dark:text-primary-400 mb-4",children:"Activez le mode projet sur un centre pour démarrer"}),e.jsx(I,{onClick:()=>c("/centres"),children:"Gérer les centres"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(x,{className:"bg-info/5 border-info/20",children:e.jsx(m,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-info/10 rounded-full flex items-center justify-center",children:e.jsx(Te,{className:"w-6 h-6 text-info"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-info",children:[v.jalonsAtteints,"/",v.totalJalons]}),e.jsx("p",{className:"text-sm text-primary-500",children:"Jalons atteints"})]})]})})}),e.jsx(x,{className:"bg-success/5 border-success/20",children:e.jsx(m,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-success/10 rounded-full flex items-center justify-center",children:e.jsx(Ae,{className:"w-6 h-6 text-success"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-success",children:[v.postesIntegres,"/",v.totalPostes]}),e.jsx("p",{className:"text-sm text-primary-500",children:"Postes pourvus"})]})]})})}),e.jsx(x,{className:"bg-warning/5 border-warning/20",children:e.jsx(m,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-warning/10 rounded-full flex items-center justify-center",children:e.jsx(Pe,{className:"w-6 h-6 text-warning"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-warning",children:[v.prospectsSigns,"/",v.totalProspects]}),e.jsx("p",{className:"text-sm text-primary-500",children:"Baux signés"})]})]})})}),e.jsx(x,{children:e.jsx(m,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 dark:bg-primary-700 rounded-full flex items-center justify-center",children:e.jsx(Re,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-primary-900 dark:text-primary-100",children:[v.tauxCommercialisation,"%"]}),e.jsx("p",{className:"text-sm text-primary-500",children:"Taux commercialisation"})]})]})})})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:$.map(s=>{const r=ye(s.id);return r?e.jsx(x,{hoverable:!0,onClick:()=>{t(s.id),c(`/centre/${s.id}/projet`)},className:"border-l-4 border-l-info",children:e.jsxs(m,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-white font-bold",style:{backgroundColor:s.couleurTheme||"#3b82f6"},children:s.code.substring(0,2)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-primary-900 dark:text-primary-100",children:s.nom}),e.jsx("p",{className:"text-sm text-primary-500 dark:text-primary-400",children:s.ville})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`text-2xl font-bold ${r.joursRestants<=30?"text-error":r.joursRestants<=90?"text-warning":"text-info"}`,children:["J-",Math.max(0,r.joursRestants)]}),e.jsx("p",{className:"text-xs text-primary-500",children:pe(ke(r.projet.dateSoftOpening),"dd MMM yyyy",{locale:Ee})})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"text-center p-2 bg-primary-50 dark:bg-primary-700/50 rounded-lg",children:[e.jsxs("p",{className:"text-lg font-bold text-primary-900 dark:text-primary-100",children:[r.jalonsAtteints,"/",r.jalonsTotal]}),e.jsx("p",{className:"text-xs text-primary-500 dark:text-primary-400",children:"Jalons"}),e.jsx("div",{className:"mt-1 h-1 bg-primary-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-info rounded-full",style:{width:`${r.jalonsTotal>0?r.jalonsAtteints/r.jalonsTotal*100:0}%`}})})]}),e.jsxs("div",{className:"text-center p-2 bg-primary-50 dark:bg-primary-700/50 rounded-lg",children:[e.jsxs("p",{className:"text-lg font-bold text-primary-900 dark:text-primary-100",children:[r.postesIntegres,"/",r.postesTotal]}),e.jsx("p",{className:"text-xs text-primary-500 dark:text-primary-400",children:"Recrutés"}),e.jsx("div",{className:"mt-1 h-1 bg-primary-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-success rounded-full",style:{width:`${r.postesTotal>0?r.postesIntegres/r.postesTotal*100:0}%`}})})]}),e.jsxs("div",{className:"text-center p-2 bg-primary-50 dark:bg-primary-700/50 rounded-lg",children:[e.jsxs("p",{className:"text-lg font-bold text-primary-900 dark:text-primary-100",children:[r.prospectsSigns,"/",r.prospectsTotal]}),e.jsx("p",{className:"text-xs text-primary-500 dark:text-primary-400",children:"Baux"}),e.jsx("div",{className:"mt-1 h-1 bg-primary-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-warning rounded-full",style:{width:`${r.prospectsTotal>0?r.prospectsSigns/r.prospectsTotal*100:0}%`}})})]}),e.jsxs("div",{className:"text-center p-2 bg-primary-50 dark:bg-primary-700/50 rounded-lg",children:[e.jsx("p",{className:"text-lg font-bold text-primary-900 dark:text-primary-100",children:r.glaSigne>0?`${(r.glaSigne/1e3).toFixed(1)}k`:"0"}),e.jsx("p",{className:"text-xs text-primary-500 dark:text-primary-400",children:"m² GLA"})]})]})]})},s.id):null})})]})})]})}export{As as Dashboard};
