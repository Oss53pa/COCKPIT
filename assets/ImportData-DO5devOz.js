import{j as e}from"./vendor-charts-cvMpHz0W.js";import{e as W,r as u}from"./vendor-react-BdB5Pz3t.js";import{r as O,u as S,S as k,w as ee}from"./vendor-export-C98UG4Mq.js";import{a as te,u as ie,C as oe,g as re,B as A,t as se}from"./index-IaNwoOYO.js";import{B as ae}from"./Badge-CM23X0aP.js";import{M as ne}from"./Modal-J_gxoCCM.js";import{D as le,j as Y,b as me,A as pe,y as U,h as ce,T as de,c as ue,f as ge,d as xe,ag as be,P as ye,B as fe,av as he,g as je,M as Ne,S as ve,U as Ce,aE as we}from"./vendor-icons-B6Rt7gcW.js";import{v as Se}from"./vendor-utils-BBD155gO.js";const De=[{id:"equipe",nom:"Membres d'équipe",description:"Liste des collaborateurs du centre",icon:e.jsx(ce,{className:"w-5 h-5"}),categorie:"gestion",tableName:"membresEquipe",colonnes:[{id:"nom",nom:"Nom",type:"string",obligatoire:!0,exemple:"Dupont"},{id:"prenom",nom:"Prénom",type:"string",obligatoire:!0,exemple:"Jean"},{id:"email",nom:"Email",type:"string",obligatoire:!0,exemple:"jean.dupont@email.com"},{id:"telephone",nom:"Téléphone",type:"string",obligatoire:!1,exemple:"+33612345678"},{id:"poste",nom:"Poste",type:"string",obligatoire:!0,exemple:"Directeur"},{id:"departement",nom:"Département",type:"string",obligatoire:!1,exemple:"Direction"},{id:"dateEntree",nom:"Date d'entrée",type:"date",obligatoire:!1,exemple:"2024-01-15"},{id:"statut",nom:"Statut",type:"select",obligatoire:!0,options:["actif","inactif","conge"],exemple:"actif"}]},{id:"objectifs",nom:"Objectifs",description:"Objectifs stratégiques et opérationnels",icon:e.jsx(de,{className:"w-5 h-5"}),categorie:"gestion",tableName:"objectifs",colonnes:[{id:"code",nom:"Code",type:"string",obligatoire:!0,exemple:"OBJ-001"},{id:"titre",nom:"Titre",type:"string",obligatoire:!0,exemple:"Augmenter la fréquentation"},{id:"description",nom:"Description",type:"string",obligatoire:!1,exemple:"Atteindre 1M visiteurs/an"},{id:"axeCode",nom:"Code Axe",type:"string",obligatoire:!0,exemple:"AXE-COM"},{id:"responsable",nom:"Responsable (email)",type:"string",obligatoire:!1,exemple:"jean.dupont@email.com"},{id:"cible",nom:"Cible",type:"number",obligatoire:!0,exemple:"1000000"},{id:"unite",nom:"Unité",type:"string",obligatoire:!0,exemple:"visiteurs"},{id:"frequenceMesure",nom:"Fréquence",type:"select",obligatoire:!0,options:["mensuel","trimestriel","annuel"],exemple:"mensuel"}]},{id:"actions",nom:"Plans d'actions",description:"Actions et tâches à réaliser",icon:e.jsx(ue,{className:"w-5 h-5"}),categorie:"gestion",tableName:"actions",colonnes:[{id:"titre",nom:"Titre",type:"string",obligatoire:!0,exemple:"Organiser événement portes ouvertes"},{id:"description",nom:"Description",type:"string",obligatoire:!1,exemple:"Événement grand public"},{id:"responsable",nom:"Responsable (email)",type:"string",obligatoire:!1,exemple:"jean.dupont@email.com"},{id:"dateEcheance",nom:"Date échéance",type:"date",obligatoire:!0,exemple:"2024-06-30"},{id:"priorite",nom:"Priorité",type:"select",obligatoire:!0,options:["haute","moyenne","basse"],exemple:"haute"},{id:"statut",nom:"Statut",type:"select",obligatoire:!0,options:["a_faire","en_cours","termine","annule"],exemple:"a_faire"},{id:"objectifCode",nom:"Code Objectif",type:"string",obligatoire:!1,exemple:"OBJ-001"}]},{id:"reunions",nom:"Réunions",description:"Réunions et comités",icon:e.jsx(ge,{className:"w-5 h-5"}),categorie:"gestion",tableName:"reunions",colonnes:[{id:"titre",nom:"Titre",type:"string",obligatoire:!0,exemple:"Comité de direction"},{id:"type",nom:"Type",type:"select",obligatoire:!0,options:["comite_direction","revue_performance","reunion_equipe","autre"],exemple:"comite_direction"},{id:"date",nom:"Date",type:"date",obligatoire:!0,exemple:"2024-03-15"},{id:"heureDebut",nom:"Heure début",type:"string",obligatoire:!1,exemple:"09:00"},{id:"heureFin",nom:"Heure fin",type:"string",obligatoire:!1,exemple:"11:00"},{id:"lieu",nom:"Lieu",type:"string",obligatoire:!1,exemple:"Salle de réunion A"},{id:"organisateur",nom:"Organisateur (email)",type:"string",obligatoire:!1,exemple:"jean.dupont@email.com"}]},{id:"etats_locatifs",nom:"États locatifs",description:"Liste des lots et locataires",icon:e.jsx(xe,{className:"w-5 h-5"}),categorie:"bi",tableName:"etatsLocatifs",colonnes:[{id:"lotId",nom:"ID Lot",type:"string",obligatoire:!0,exemple:"LOT-001"},{id:"lotNumero",nom:"Numéro lot",type:"string",obligatoire:!0,exemple:"A-101"},{id:"niveau",nom:"Niveau",type:"string",obligatoire:!1,exemple:"RDC"},{id:"locataireEnseigne",nom:"Enseigne",type:"string",obligatoire:!0,exemple:"Zara"},{id:"locataireRaisonSociale",nom:"Raison sociale",type:"string",obligatoire:!1,exemple:"ZARA FRANCE SAS"},{id:"activite",nom:"Activité",type:"string",obligatoire:!0,exemple:"Prêt-à-porter"},{id:"surfaceGLA",nom:"Surface GLA (m²)",type:"number",obligatoire:!0,exemple:"450"},{id:"loyerMinimumGaranti",nom:"Loyer annuel (€)",type:"number",obligatoire:!0,exemple:"120000"},{id:"statutOccupation",nom:"Statut",type:"select",obligatoire:!0,options:["occupe","vacant","pre_loue","travaux"],exemple:"occupe"},{id:"bailDebut",nom:"Début bail",type:"date",obligatoire:!1,exemple:"2022-01-01"},{id:"bailFin",nom:"Fin bail",type:"date",obligatoire:!1,exemple:"2031-12-31"}]},{id:"loyers",nom:"Loyers",description:"Quittancement et encaissements",icon:e.jsx(be,{className:"w-5 h-5"}),categorie:"bi",tableName:"donneesLoyers",colonnes:[{id:"lotId",nom:"ID Lot",type:"string",obligatoire:!0,exemple:"LOT-001"},{id:"periode",nom:"Période (YYYY-MM)",type:"string",obligatoire:!0,exemple:"2024-01"},{id:"loyerAppele",nom:"Loyer appelé",type:"number",obligatoire:!0,exemple:"10000"},{id:"loyerEncaisse",nom:"Loyer encaissé",type:"number",obligatoire:!0,exemple:"10000"},{id:"chargesAppelees",nom:"Charges appelées",type:"number",obligatoire:!1,exemple:"2000"},{id:"chargesEncaissees",nom:"Charges encaissées",type:"number",obligatoire:!1,exemple:"2000"},{id:"dateEncaissement",nom:"Date encaissement",type:"date",obligatoire:!1,exemple:"2024-01-05"}]},{id:"frequentation",nom:"Fréquentation",description:"Comptages visiteurs",icon:e.jsx(ye,{className:"w-5 h-5"}),categorie:"bi",tableName:"donneesFrequentation",colonnes:[{id:"date",nom:"Date",type:"date",obligatoire:!0,exemple:"2024-01-15"},{id:"entreesTotal",nom:"Entrées totales",type:"number",obligatoire:!0,exemple:"15000"},{id:"entreesPrincipale",nom:"Entrée principale",type:"number",obligatoire:!1,exemple:"8000"},{id:"entreesSecondaires",nom:"Entrées secondaires",type:"number",obligatoire:!1,exemple:"7000"},{id:"tauxTransformation",nom:"Taux transformation (%)",type:"number",obligatoire:!1,exemple:"45"}]},{id:"chiffre_affaires",nom:"Chiffre d'affaires",description:"CA déclarés par enseignes",icon:e.jsx(fe,{className:"w-5 h-5"}),categorie:"bi",tableName:"donneesChiffreAffaires",colonnes:[{id:"lotId",nom:"ID Lot",type:"string",obligatoire:!0,exemple:"LOT-001"},{id:"periode",nom:"Période (YYYY-MM)",type:"string",obligatoire:!0,exemple:"2024-01"},{id:"caDeclare",nom:"CA déclaré",type:"number",obligatoire:!0,exemple:"250000"},{id:"caEstime",nom:"CA estimé",type:"number",obligatoire:!1,exemple:"260000"},{id:"variationN1",nom:"Variation N-1 (%)",type:"number",obligatoire:!1,exemple:"5.2"}]},{id:"charges",nom:"Charges",description:"Charges d'exploitation",icon:e.jsx(he,{className:"w-5 h-5"}),categorie:"bi",tableName:"donneesCharges",colonnes:[{id:"periode",nom:"Période (YYYY-MM)",type:"string",obligatoire:!0,exemple:"2024-01"},{id:"categorie",nom:"Catégorie",type:"select",obligatoire:!0,options:["energie","securite","nettoyage","maintenance","assurance","taxes","marketing","autre"],exemple:"energie"},{id:"libelle",nom:"Libellé",type:"string",obligatoire:!0,exemple:"Électricité parties communes"},{id:"montantBudget",nom:"Budget",type:"number",obligatoire:!1,exemple:"15000"},{id:"montantReel",nom:"Réel",type:"number",obligatoire:!0,exemple:"14500"},{id:"fournisseur",nom:"Fournisseur",type:"string",obligatoire:!1,exemple:"EDF"}]},{id:"baux",nom:"Baux",description:"Détails des contrats de bail",icon:e.jsx(je,{className:"w-5 h-5"}),categorie:"bi",tableName:"donneesBaux",colonnes:[{id:"lotId",nom:"ID Lot",type:"string",obligatoire:!0,exemple:"LOT-001"},{id:"numeroBail",nom:"N° Bail",type:"string",obligatoire:!0,exemple:"BAIL-2022-001"},{id:"locataire",nom:"Locataire",type:"string",obligatoire:!0,exemple:"ZARA FRANCE SAS"},{id:"dateDebut",nom:"Date début",type:"date",obligatoire:!0,exemple:"2022-01-01"},{id:"dateFin",nom:"Date fin",type:"date",obligatoire:!0,exemple:"2031-12-31"},{id:"dateBreak",nom:"Date break",type:"date",obligatoire:!1,exemple:"2025-12-31"},{id:"loyerAnnuel",nom:"Loyer annuel",type:"number",obligatoire:!0,exemple:"120000"},{id:"chargesAnnuelles",nom:"Charges annuelles",type:"number",obligatoire:!1,exemple:"24000"},{id:"indexation",nom:"Indexation",type:"string",obligatoire:!1,exemple:"ILC"},{id:"tauxVariable",nom:"Taux variable (%)",type:"number",obligatoire:!1,exemple:"8"}]},{id:"jalons",nom:"Jalons projet",description:"Jalons du planning projet",icon:e.jsx(Ne,{className:"w-5 h-5"}),categorie:"projet",tableName:"jalons",colonnes:[{id:"code",nom:"Code",type:"string",obligatoire:!0,exemple:"JAL-001"},{id:"titre",nom:"Titre",type:"string",obligatoire:!0,exemple:"Livraison structure"},{id:"description",nom:"Description",type:"string",obligatoire:!1,exemple:"Fin des travaux gros oeuvre"},{id:"phase",nom:"Phase",type:"select",obligatoire:!0,options:["conception","construction","amenagement","commercialisation","ouverture"],exemple:"construction"},{id:"datePrevue",nom:"Date prévue",type:"date",obligatoire:!0,exemple:"2024-06-30"},{id:"dateReelle",nom:"Date réelle",type:"date",obligatoire:!1,exemple:""},{id:"statut",nom:"Statut",type:"select",obligatoire:!0,options:["a_venir","en_cours","atteint","retard","annule"],exemple:"a_venir"},{id:"responsable",nom:"Responsable",type:"string",obligatoire:!1,exemple:"Chef de projet"}]},{id:"prospects",nom:"Prospects commerciaux",description:"Pipeline de commercialisation",icon:e.jsx(ve,{className:"w-5 h-5"}),categorie:"projet",tableName:"prospectsCommerciaux",colonnes:[{id:"enseigne",nom:"Enseigne",type:"string",obligatoire:!0,exemple:"Nike"},{id:"contact",nom:"Contact",type:"string",obligatoire:!1,exemple:"M. Martin"},{id:"email",nom:"Email",type:"string",obligatoire:!1,exemple:"contact@nike.fr"},{id:"telephone",nom:"Téléphone",type:"string",obligatoire:!1,exemple:"+33145678900"},{id:"activite",nom:"Activité",type:"string",obligatoire:!0,exemple:"Sport"},{id:"surfaceDemandee",nom:"Surface demandée (m²)",type:"number",obligatoire:!1,exemple:"300"},{id:"lotCible",nom:"Lot ciblé",type:"string",obligatoire:!1,exemple:"A-201"},{id:"statut",nom:"Statut",type:"select",obligatoire:!0,options:["prospect","contact","negociation","offre","signe","perdu"],exemple:"prospect"},{id:"probabilite",nom:"Probabilité (%)",type:"number",obligatoire:!1,exemple:"30"},{id:"loyerCible",nom:"Loyer cible",type:"number",obligatoire:!1,exemple:"90000"}]},{id:"postes_recruter",nom:"Postes à recruter",description:"Plan de recrutement",icon:e.jsx(Ce,{className:"w-5 h-5"}),categorie:"projet",tableName:"postesARecruter",colonnes:[{id:"titre",nom:"Titre du poste",type:"string",obligatoire:!0,exemple:"Responsable sécurité"},{id:"departement",nom:"Département",type:"string",obligatoire:!0,exemple:"Sécurité"},{id:"nombrePostes",nom:"Nombre de postes",type:"number",obligatoire:!0,exemple:"2"},{id:"dateCible",nom:"Date cible",type:"date",obligatoire:!0,exemple:"2024-09-01"},{id:"priorite",nom:"Priorité",type:"select",obligatoire:!0,options:["critique","haute","moyenne","basse"],exemple:"haute"},{id:"statut",nom:"Statut",type:"select",obligatoire:!0,options:["a_ouvrir","ouvert","en_cours","pourvu","annule"],exemple:"a_ouvrir"},{id:"typeContrat",nom:"Type contrat",type:"select",obligatoire:!1,options:["CDI","CDD","Interim","Stage"],exemple:"CDI"},{id:"salairePrevisionnel",nom:"Salaire prévu",type:"number",obligatoire:!1,exemple:"45000"}]},{id:"risques_projet",nom:"Risques projet",description:"Registre des risques",icon:e.jsx(we,{className:"w-5 h-5"}),categorie:"projet",tableName:"risquesProjet",colonnes:[{id:"code",nom:"Code",type:"string",obligatoire:!0,exemple:"RSQ-001"},{id:"titre",nom:"Titre",type:"string",obligatoire:!0,exemple:"Retard livraison structure"},{id:"description",nom:"Description",type:"string",obligatoire:!1,exemple:"Risque de retard sur le gros oeuvre"},{id:"categorie",nom:"Catégorie",type:"select",obligatoire:!0,options:["technique","financier","planning","commercial","juridique","autre"],exemple:"planning"},{id:"probabilite",nom:"Probabilité (1-5)",type:"number",obligatoire:!0,exemple:"3"},{id:"impact",nom:"Impact (1-5)",type:"number",obligatoire:!0,exemple:"4"},{id:"statut",nom:"Statut",type:"select",obligatoire:!0,options:["identifie","en_traitement","resolu","clos"],exemple:"identifie"},{id:"responsable",nom:"Responsable",type:"string",obligatoire:!1,exemple:"Chef de projet"},{id:"planMitigation",nom:"Plan mitigation",type:"string",obligatoire:!1,exemple:"Suivi hebdomadaire avec entreprise"}]}];function Re(){const{centreId:L}=W(),I=te(t=>t.getCentre(L||"")),{addToast:j}=ie(),[E,J]=u.useState("all"),[s,z]=u.useState(null),[V,_]=u.useState(!1),[N,F]=u.useState(null),[T,M]=u.useState([]),[g,v]=u.useState([]),[P,B]=u.useState(!1),[y,$]=u.useState(null),G=De.filter(t=>E==="all"||t.categorie===E),Z=t=>{const a=S.book_new(),m=t.colonnes.map(n=>n.nom),x=t.colonnes.map(n=>n.exemple||""),f=t.colonnes.map(n=>{let p=n.obligatoire?"(Obligatoire) ":"(Optionnel) ";return p+=n.description||"",n.type==="select"&&n.options&&(p+=` Valeurs: ${n.options.join(", ")}`),n.type==="date"&&(p+=" Format: YYYY-MM-DD"),p}),h=S.aoa_to_sheet([m,x,f]);h["!cols"]=m.map(()=>({wch:20})),S.book_append_sheet(a,h,t.nom.substring(0,31)),ee(a,`template_${t.id}.xlsx`),j({type:"success",title:"Template téléchargé",message:`Template ${t.nom} téléchargé`})},H=t=>{z(t),F(null),M([]),v([]),$(null),_(!0)},Q=u.useCallback(async t=>{var m;const a=(m=t.target.files)==null?void 0:m[0];if(!(!a||!s)){F(a),v([]),$(null);try{const x=await a.arrayBuffer(),f=O(x),h=f.SheetNames[0],n=f.Sheets[h],p=S.sheet_to_json(n,{header:1});if(p.length<2){v(["Le fichier doit contenir au moins une ligne de données (en plus des en-têtes)"]);return}const R=p[0],C=p.slice(1).filter(D=>D.some(l=>l!==""&&l!==null&&l!==void 0)),c=[],d=[];C.forEach((D,l)=>{const b={},r=D;s.colonnes.forEach(i=>{const q=R.findIndex(o=>(o==null?void 0:o.toLowerCase().trim())===i.nom.toLowerCase().trim());if(q!==-1){let o=r[q];if(i.type==="number"&&o!==void 0&&o!=="")o=Number(o),isNaN(o)&&d.push(`Ligne ${l+2}: "${i.nom}" doit être un nombre`);else if(i.type==="date"&&o){if(typeof o=="number"){const w=k.parse_date_code(o);o=`${w.y}-${String(w.m).padStart(2,"0")}-${String(w.d).padStart(2,"0")}`}}else if(i.type==="boolean")o=o===!0||o==="true"||o==="oui"||o==="1";else if(i.type==="select"&&o&&i.options){const w=String(o).toLowerCase().trim();i.options.some(K=>K.toLowerCase()===w)||d.push(`Ligne ${l+2}: "${i.nom}" doit être une des valeurs: ${i.options.join(", ")}`)}b[i.id]=o}else i.obligatoire&&d.push(`Colonne obligatoire manquante: "${i.nom}"`)}),s.colonnes.filter(i=>i.obligatoire).forEach(i=>{(b[i.id]===void 0||b[i.id]===""||b[i.id]===null)&&d.push(`Ligne ${l+2}: "${i.nom}" est obligatoire`)}),c.push(b)}),M(c.slice(0,5)),v([...new Set(d)]),d.length===0&&j({type:"success",title:"Fichier valide",message:`${c.length} lignes prêtes à importer`})}catch(x){v([`Erreur de lecture du fichier: ${x}`])}}},[s,j]),X=async()=>{if(!s||!N||!L||g.length>0)return;B(!0);let t=0,a=0;try{const m=await N.arrayBuffer(),x=O(m),f=x.SheetNames[0],h=x.Sheets[f],n=S.sheet_to_json(h,{header:1}),p=n[0],R=n.slice(1).filter(C=>C.some(c=>c!==""&&c!==null&&c!==void 0));for(const C of R)try{const c=C,d={id:Se(),centreId:L,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};s.colonnes.forEach(l=>{const b=p.findIndex(r=>(r==null?void 0:r.toLowerCase().trim())===l.nom.toLowerCase().trim());if(b!==-1){let r=c[b];if(l.type==="number"&&r!==void 0&&r!=="")r=Number(r);else if(l.type==="date"&&r&&typeof r=="number"){const i=k.parse_date_code(r);r=`${i.y}-${String(i.m).padStart(2,"0")}-${String(i.d).padStart(2,"0")}`}else l.type==="boolean"&&(r=r===!0||r==="true"||r==="oui"||r==="1");d[l.id]=r}}),await se.table(s.tableName).add(d),t++}catch{a++}$({success:t,errors:a}),j({type:a>0?"warning":"success",title:"Import terminé",message:`${t} lignes importées, ${a} erreurs`})}catch(m){j({type:"error",title:"Erreur",message:`Erreur d'import: ${m}`})}finally{B(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-primary-900",children:"Import de données"}),e.jsxs("p",{className:"text-primary-500 mt-1",children:[I==null?void 0:I.nom," - Importez des données depuis des fichiers Excel"]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-primary-500",children:"Filtrer:"}),[{value:"all",label:"Toutes"},{value:"gestion",label:"Gestion"},{value:"bi",label:"Exploitation / BI"},{value:"projet",label:"Projet"}].map(t=>e.jsx("button",{onClick:()=>J(t.value),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${E===t.value?"bg-accent text-white":"bg-primary-100 text-primary-600 hover:bg-primary-200"}`,children:t.label},t.value))]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:G.map(t=>e.jsx(oe,{className:"hover:border-accent transition-colors",children:e.jsxs(re,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${t.categorie==="gestion"?"bg-accent/10 text-accent":t.categorie==="bi"?"bg-success/10 text-success":"bg-warning/10 text-warning"}`,children:t.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-primary-900",children:t.nom}),e.jsx("p",{className:"text-sm text-primary-500 mt-0.5",children:t.description}),e.jsxs("p",{className:"text-xs text-primary-400 mt-1",children:[t.colonnes.length," colonnes (",t.colonnes.filter(a=>a.obligatoire).length," obligatoires)"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[e.jsx(A,{variant:"outline",size:"sm",leftIcon:e.jsx(le,{className:"w-4 h-4"}),onClick:()=>Z(t),className:"flex-1",children:"Template"}),e.jsx(A,{size:"sm",leftIcon:e.jsx(Y,{className:"w-4 h-4"}),onClick:()=>H(t),className:"flex-1",children:"Importer"})]})]})},t.id))}),e.jsx(ne,{isOpen:V,onClose:()=>_(!1),title:`Importer - ${s==null?void 0:s.nom}`,size:"lg",footer:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(A,{variant:"ghost",onClick:()=>_(!1),children:"Fermer"}),e.jsx(A,{onClick:X,disabled:!N||g.length>0||P||!!y,leftIcon:P?e.jsx(Y,{className:"w-4 h-4 animate-pulse"}):e.jsx(U,{className:"w-4 h-4"}),children:P?"Import en cours...":"Importer"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-primary-200 rounded-lg p-6 text-center",children:[e.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:Q,className:"hidden",id:"file-upload"}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx(me,{className:"w-12 h-12 text-primary-300 mx-auto mb-2"}),e.jsx("p",{className:"text-primary-600 font-medium",children:N?N.name:"Cliquez pour sélectionner un fichier"}),e.jsx("p",{className:"text-sm text-primary-400 mt-1",children:"Excel (.xlsx, .xls) ou CSV"})]})]}),s&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-primary-700 mb-2",children:"Colonnes attendues:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.colonnes.map(t=>e.jsxs(ae,{className:t.obligatoire?"bg-accent/10 text-accent":"bg-primary-100 text-primary-600",children:[t.nom,t.obligatoire&&" *"]},t.id))})]}),g.length>0&&e.jsxs("div",{className:"p-3 bg-error/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-error font-medium mb-2",children:[e.jsx(pe,{className:"w-4 h-4"}),g.length," erreur(s) détectée(s)"]}),e.jsxs("ul",{className:"text-sm text-error space-y-1 max-h-32 overflow-y-auto",children:[g.slice(0,10).map((t,a)=>e.jsxs("li",{children:["• ",t]},a)),g.length>10&&e.jsxs("li",{children:["... et ",g.length-10," autres erreurs"]})]})]}),T.length>0&&g.length===0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-primary-700 mb-2",children:["Aperçu (",T.length," premières lignes):"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-primary-50",children:s==null?void 0:s.colonnes.slice(0,5).map(t=>e.jsx("th",{className:"px-2 py-1 text-left text-primary-600",children:t.nom},t.id))})}),e.jsx("tbody",{children:T.map((t,a)=>e.jsx("tr",{className:"border-t border-primary-100",children:s==null?void 0:s.colonnes.slice(0,5).map(m=>e.jsx("td",{className:"px-2 py-1 text-primary-700",children:String(t[m.id]??"")},m.id))},a))})]})})]}),y&&e.jsxs("div",{className:`p-4 rounded-lg ${y.errors>0?"bg-warning/10":"bg-success/10"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:`w-5 h-5 ${y.errors>0?"text-warning":"text-success"}`}),e.jsx("span",{className:"font-medium",children:"Import terminé"})]}),e.jsxs("p",{className:"text-sm mt-1",children:[y.success," lignes importées avec succès",y.errors>0&&`, ${y.errors} erreurs`]})]})]})})]})}export{Re as ImportData};
