import{j as e,m as Bt,D as bs,n as vs,o as js,p as Ns,q as Cs,r as Es,s as As,t as Rs,u as Ts,v as Ss,w as ws,x as ks,y as Is,z as Ls}from"./vendor-charts-cvMpHz0W.js";import{e as nt,r as d,b as Ie,d as Qt}from"./vendor-react-BdB5Pz3t.js";import{a as lt,u as ot,x as Ps,B as G,C as z,h as pe,i as xe,g as $,y as Ds,z as Bs,t as Ae,A as Ot}from"./index-IaNwoOYO.js";import{B as _}from"./Badge-CM23X0aP.js";import{I as Me,S as fe}from"./Input-BZ7duGHL.js";import{M as Le,C as Os}from"./Modal-J_gxoCCM.js";import{ar as et,Q as tt,y as ye,o as ve,j as At,b as we,A as Pe,g as ce,X as Oe,ao as bt,a7 as De,k as _s,aR as Jt,B as Ge,r as ke,O as he,al as Re,a6 as Zt,a8 as Rt,av as vt,P as oe,i as Fs,ay as _t,_ as ct,ab as ge,b4 as Ft,a2 as He,p as Be,T as Tt,l as st,b5 as qs,b6 as Ue,b7 as Ms,a4 as Gs,aA as Vs,b0 as rt,b8 as Us,az as Ws,b9 as Hs,W as $s,ba as zs,bb as Ys,d as Ks,c as Qs,h as Js,f as Xt,S as Zs,ag as Xs,a1 as es,ax as ts,b3 as be,u as xt,a$ as jt,bc as Ve,bd as er,be as tr,C as St,bf as sr,bg as rr,bh as ar,bi as ir,an as wt,am as ss,D as rs,bj as as,bk as is,bl as ns,aN as ls,bm as os,Y as kt,n as nr,bn as cs,G as lr,aL as It,I as or,bo as Lt,K as $e,aH as at,aS as ds,ah as cr,ae as dr,bp as mr,N as ur,bq as Pt,br as ms,bs as pr,bt as xr,bu as hr,bv as Ne,x as yr,bw as gr,bx as fr,by as br,bz as vr,bA as jr,bB as Nr,bC as Cr,bD as Er,af as Ar}from"./vendor-icons-B6Rt7gcW.js";import{c as Rr,v as Te}from"./vendor-utils-BBD155gO.js";import{exportReport as Tr,downloadBlob as Sr}from"./reportExport-BgnGCEkm.js";import"./vendor-export-C98UG4Mq.js";const wr=[{value:"etat_locatif",label:"État locatif",description:"Baux, locataires, surfaces"},{value:"loyers",label:"Loyers",description:"Quittancement et encaissements"},{value:"frequentation",label:"Fréquentation",description:"Comptages visiteurs"},{value:"chiffre_affaires",label:"Chiffre d'affaires",description:"CA déclarés par enseignes"},{value:"charges",label:"Charges",description:"Charges d'exploitation"},{value:"bail",label:"Baux",description:"Détails des contrats de bail"},{value:"travaux",label:"Travaux",description:"Projets et interventions"},{value:"budget",label:"Budget",description:"Budget prévisionnel"},{value:"valorisation",label:"Valorisation",description:"Expertises et valeurs"},{value:"surface",label:"Surfaces",description:"Détail des surfaces"},{value:"energie",label:"Énergie",description:"Consommations énergétiques"},{value:"satisfaction",label:"Satisfaction",description:"Enquêtes locataires/visiteurs"}],kr={succes:"bg-success/10 text-success",partiel:"bg-warning/10 text-warning",echec:"bg-error/10 text-error"},Ir={succes:"Terminé",partiel:"Partiel",echec:"Erreur"};function pi(){var se;const{centreId:t}=nt(),r=lt(o=>o.getCentre(t||"")),{addToast:s}=ot(),{fichiers:l=[],dossiers:a=[],importEnCours:n={etape:"upload",progression:0,fichierParse:null,categorie:null,mapping:[],validation:null,donneesTransformees:[],erreur:null},loadFichiers:m,loadDossiers:c,uploadFichier:y,setCategorie:g,setMapping:u,valider:p,importerDonnees:v,resetImport:N,creerDossier:E}=Ps(),[j,h]=d.useState(1),[f,w]=d.useState("etat_locatif"),[b,S]=d.useState(!1),[A,D]=d.useState(!1),[C,O]=d.useState(""),[k,W]=d.useState(null);d.useEffect(()=>{t&&(m(t),c(t))},[t,m,c]),d.useEffect(()=>{n.etape==="mapping"?h(2):n.etape==="validation"?h(3):(n.etape==="import"||n.etape==="termine")&&h(4)},[n.etape]);const H=d.useCallback(o=>{o.preventDefault(),S(!0)},[]),Q=d.useCallback(o=>{o.preventDefault(),S(!1)},[]),B=d.useCallback(async o=>{o.preventDefault(),S(!1);const x=Array.from(o.dataTransfer.files);x.length>0&&await U(x[0])},[f]),U=async o=>{if(t)try{g(f),await y(o),s({type:"success",title:"Fichier chargé",message:`${o.name} analysé avec succès`})}catch(x){s({type:"error",title:"Erreur",message:String(x)})}},Y=async o=>{const x=o.target.files;x&&x.length>0&&await U(x[0])},X=()=>{try{p(),n.validation&&n.validation.valide?s({type:"success",title:"Validation réussie",message:"Les données sont prêtes à être importées"}):n.validation&&s({type:"warning",title:"Validation avec avertissements",message:`${n.validation.erreurs.length} erreur(s) détectée(s)`})}catch(o){s({type:"error",title:"Erreur de validation",message:String(o)})}},M=async()=>{if(t)try{await v(t,k||void 0)&&s({type:"success",title:"Import terminé",message:"Les données ont été importées avec succès"})}catch(o){s({type:"error",title:"Erreur d'import",message:String(o)})}},ie=()=>{N(),h(1)},de=async()=>{if(!(!t||!C))try{await E({centreId:t,nom:C,ordre:a.length}),D(!1),O(""),s({type:"success",title:"Dossier créé"})}catch(o){s({type:"error",title:"Erreur",message:String(o)})}},ne=[{num:1,titre:"Sélection",description:"Choisir fichier et catégorie"},{num:2,titre:"Mapping",description:"Associer les colonnes"},{num:3,titre:"Validation",description:"Vérifier les données"},{num:4,titre:"Import",description:"Finaliser l'import"}],ae=k?l.filter(o=>o.dossierId===k):l;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-primary-900",children:"Import de données"}),e.jsx("p",{className:"text-primary-500 mt-1",children:r==null?void 0:r.nom})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{variant:"secondary",leftIcon:e.jsx(et,{className:"w-4 h-4"}),onClick:()=>D(!0),children:"Nouveau dossier"}),n.fichierParse&&e.jsx(G,{variant:"ghost",leftIcon:e.jsx(tt,{className:"w-4 h-4"}),onClick:ie,children:"Recommencer"})]})]}),e.jsx("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-primary-200",children:ne.map((o,x)=>e.jsxs(Ie.Fragment,{children:[e.jsxs("div",{className:`flex items-center gap-3 cursor-pointer ${j>=o.num?"text-accent":"text-primary-400"}`,onClick:()=>j>o.num&&h(o.num),children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold ${j>o.num?"bg-success text-white":j===o.num?"bg-accent text-white":"bg-primary-100 text-primary-400"}`,children:j>o.num?e.jsx(ye,{className:"w-5 h-5"}):o.num}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:o.titre}),e.jsx("div",{className:"text-xs text-primary-500",children:o.description})]})]}),x<ne.length-1&&e.jsx(ve,{className:"w-5 h-5 text-primary-300 flex-shrink-0"})]},o.num))}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-2 space-y-6",children:[j===1&&e.jsxs(z,{children:[e.jsx(pe,{children:e.jsx(xe,{children:"Sélection du fichier"})}),e.jsxs($,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Catégorie de données"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:wr.map(o=>e.jsxs("button",{onClick:()=>w(o.value),className:`p-3 rounded-lg border text-left transition-all ${f===o.value?"border-accent bg-accent/5 ring-2 ring-accent/20":"border-primary-200 hover:border-primary-300"}`,children:[e.jsx("div",{className:"font-medium text-primary-900",children:o.label}),e.jsx("div",{className:"text-xs text-primary-500",children:o.description})]},o.value))})]}),e.jsxs("div",{onDragOver:H,onDragLeave:Q,onDrop:B,className:`border-2 border-dashed rounded-lg p-12 text-center transition-all ${b?"border-accent bg-accent/5":"border-primary-300 hover:border-primary-400"}`,children:[e.jsx(At,{className:"w-12 h-12 text-primary-400 mx-auto mb-4"}),e.jsx("p",{className:"text-primary-600 mb-2",children:"Glissez-déposez votre fichier ici"}),e.jsx("p",{className:"text-sm text-primary-500 mb-4",children:"ou"}),e.jsxs("label",{children:[e.jsx("input",{type:"file",accept:".xlsx,.xls,.csv,.json",onChange:Y,className:"hidden"}),e.jsx(G,{as:"span",leftIcon:e.jsx(we,{className:"w-4 h-4"}),children:"Parcourir les fichiers"})]}),e.jsx("p",{className:"text-xs text-primary-400 mt-4",children:"Formats acceptés: Excel (.xlsx, .xls), CSV, JSON"})]}),n.erreur&&e.jsxs("div",{className:"p-4 bg-error/10 border border-error/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-error",children:[e.jsx(Pe,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Erreur"})]}),e.jsx("p",{className:"mt-1 text-sm text-primary-700",children:n.erreur})]})]})]}),j===2&&n.fichierParse&&e.jsxs(z,{children:[e.jsx(pe,{children:e.jsx(xe,{children:"Mapping des colonnes"})}),e.jsxs($,{children:[e.jsx("div",{className:"mb-4 p-3 bg-primary-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ce,{className:"w-4 h-4 text-primary-500"}),e.jsx("span",{className:"font-medium",children:n.fichierParse.nom}),e.jsxs("span",{className:"text-primary-500",children:["(",n.fichierParse.lignesTotal," lignes, ",n.fichierParse.colonnes.length," colonnes)"]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm font-medium text-primary-600 pb-2 border-b",children:[e.jsx("div",{children:"Colonne source"}),e.jsx("div",{children:"Champ cible"}),e.jsx("div",{children:"Statut"})]}),n.mapping.map((o,x)=>e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center py-2 border-b border-primary-100",children:[e.jsx("div",{className:"font-mono text-sm bg-primary-50 px-2 py-1 rounded",children:o.colonneSource}),e.jsx("div",{className:"text-sm text-primary-700",children:o.champCible||"— Non mappé —"}),e.jsx("div",{children:o.champCible?e.jsxs(_,{className:"bg-success/10 text-success",children:[e.jsx(ye,{className:"w-3 h-3 mr-1"}),"Mappé"]}):e.jsx(_,{className:"bg-primary-100 text-primary-500",children:"Ignoré"})})]},x))]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(G,{onClick:X,children:"Valider les données"})})]})]}),j===3&&n.validation&&e.jsxs(z,{children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(xe,{children:"Résultat de la validation"}),e.jsx(_,{className:n.validation.valide?"bg-success/10 text-success":"bg-error/10 text-error",children:n.validation.valide?"Valide":"Erreurs détectées"})]})}),e.jsxs($,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-success/10 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-success",children:n.validation.lignesValides}),e.jsx("div",{className:"text-sm text-primary-600",children:"Lignes valides"})]}),e.jsxs("div",{className:"p-4 bg-warning/10 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-warning",children:((se=n.validation.avertissements)==null?void 0:se.length)||0}),e.jsx("div",{className:"text-sm text-primary-600",children:"Avertissements"})]}),e.jsxs("div",{className:"p-4 bg-error/10 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-error",children:n.validation.erreurs.length}),e.jsx("div",{className:"text-sm text-primary-600",children:"Erreurs"})]})]}),n.validation.erreurs.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-medium text-error mb-3",children:"Erreurs"}),e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[n.validation.erreurs.slice(0,20).map((o,x)=>e.jsxs("div",{className:"flex items-start gap-2 p-2 bg-error/5 rounded text-sm",children:[e.jsx(Oe,{className:"w-4 h-4 text-error flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-primary-500",children:["Ligne ",o.ligne,', colonne "',o.colonne,'":']})," ",e.jsx("span",{className:"text-primary-700",children:o.message})]})]},x)),n.validation.erreurs.length>20&&e.jsxs("div",{className:"text-sm text-primary-500 text-center py-2",children:["... et ",n.validation.erreurs.length-20," autres erreurs"]})]})]}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx(G,{variant:"secondary",onClick:()=>h(2),children:"Retour au mapping"}),e.jsx(G,{onClick:M,disabled:!n.validation.valide&&n.validation.erreurs.length>0,children:"Importer les données"})]})]})]}),j===4&&n.etape==="termine"&&e.jsx(z,{children:e.jsxs($,{className:"py-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-success/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ye,{className:"w-8 h-8 text-success"})}),e.jsx("h3",{className:"text-xl font-bold text-primary-900 mb-2",children:"Import réussi !"}),e.jsx("p",{className:"text-primary-600 mb-6",children:"Les données ont été importées avec succès dans la base."}),e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsx(G,{variant:"secondary",onClick:ie,children:"Nouvel import"}),e.jsx(G,{leftIcon:e.jsx(bt,{className:"w-4 h-4"}),children:"Voir les données"})]})]})}),j===4&&n.etape==="import"&&e.jsx(z,{children:e.jsxs($,{className:"py-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-accent/10 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:e.jsx(bt,{className:"w-8 h-8 text-accent"})}),e.jsx("h3",{className:"text-xl font-bold text-primary-900 mb-2",children:"Import en cours..."}),e.jsxs("div",{className:"max-w-xs mx-auto mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-primary-600",children:"Progression"}),e.jsxs("span",{className:"font-medium",children:[n.progression,"%"]})]}),e.jsx("div",{className:"w-full bg-primary-200 rounded-full h-2",children:e.jsx("div",{className:"bg-accent h-2 rounded-full transition-all duration-300",style:{width:`${n.progression}%`}})})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(z,{children:[e.jsx(pe,{children:e.jsx(xe,{className:"text-base",children:"Dossiers d'import"})}),e.jsx($,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>W(null),className:`w-full flex items-center gap-2 p-2 rounded-lg text-left ${k?"hover:bg-primary-50":"bg-accent/10 text-accent"}`,children:[e.jsx(et,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Tous les imports"}),e.jsx(_,{className:"ml-auto text-xs",children:l.length})]}),a.map(o=>{const x=l.filter(R=>R.dossierId===o.id);return e.jsxs("button",{onClick:()=>W(o.id),className:`w-full flex items-center justify-between p-2 rounded-lg text-left ${k===o.id?"bg-accent/10 text-accent":"hover:bg-primary-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:o.nom})]}),e.jsx(_,{className:"text-xs",children:x.length})]},o.id)})]})})]}),e.jsxs(z,{children:[e.jsx(pe,{children:e.jsx(xe,{className:"text-base",children:"Historique récent"})}),e.jsx($,{children:ae.length===0?e.jsx("p",{className:"text-sm text-primary-500 text-center py-4",children:"Aucun import récent"}):e.jsx("div",{className:"space-y-3",children:ae.slice(0,5).map(o=>e.jsxs("div",{className:"flex items-start gap-3 p-2 bg-primary-50 rounded-lg",children:[e.jsx(we,{className:"w-4 h-4 text-primary-400 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-primary-900 truncate",children:o.nom}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-primary-500",children:[e.jsx(De,{className:"w-3 h-3"}),new Date(o.dateImport).toLocaleDateString("fr-FR"),e.jsx(_,{className:`${kr[o.statut]||"bg-primary-100 text-primary-700"} text-xs`,children:Ir[o.statut]||o.statut})]})]})]},o.id))})})]}),n.etape==="import"&&e.jsxs(z,{children:[e.jsx(pe,{children:e.jsx(xe,{className:"text-base",children:"Import en cours"})}),e.jsx($,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-primary-600",children:"Progression"}),e.jsxs("span",{className:"font-medium",children:[n.progression,"%"]})]}),e.jsx("div",{className:"w-full bg-primary-200 rounded-full h-2",children:e.jsx("div",{className:"bg-accent h-2 rounded-full transition-all duration-300",style:{width:`${n.progression}%`}})})]})})]})]})]}),e.jsx(Le,{isOpen:A,onClose:()=>D(!1),title:"Nouveau dossier d'import",size:"sm",footer:e.jsxs(e.Fragment,{children:[e.jsx(G,{variant:"ghost",onClick:()=>D(!1),children:"Annuler"}),e.jsx(G,{onClick:de,disabled:!C,children:"Créer"})]}),children:e.jsx(Me,{label:"Nom du dossier",value:C,onChange:o=>O(o.target.value),placeholder:"Ex: Import Q1 2024"})})]})}const q={ICSC:{code:"ICSC",name:"ICSC Standards",organization:"International Council of Shopping Centers",description:"Standards mondiaux pour les centres commerciaux",url:"https://www.icsc.com"},EPRA:{code:"EPRA",name:"EPRA BPR",organization:"European Public Real Estate Association",description:"Best Practices Recommendations pour le reporting immobilier",url:"https://www.epra.com"},RICS:{code:"RICS",name:"RICS Red Book",organization:"Royal Institution of Chartered Surveyors",description:"Standards globaux pour l'évaluation immobilière",url:"https://www.rics.org"},GRESB:{code:"GRESB",name:"GRESB Standards",organization:"Global Real Estate Sustainability Benchmark",description:"Benchmark ESG pour l'immobilier",url:"https://www.gresb.com"},BREEAM:{code:"BREEAM",name:"BREEAM",organization:"Building Research Establishment",description:"Certification environnementale des bâtiments",url:"https://www.breeam.com"},IFRS16:{code:"IFRS16",name:"IFRS 16 Leases",organization:"IASB",description:"Norme comptable internationale pour les baux",url:"https://www.ifrs.org"},CNCC:{code:"CNCC",name:"CNCC Standards",organization:"Conseil National des Centres Commerciaux",description:"Standards français des centres commerciaux",url:"https://www.cncc.com"}},Ze=[{code:"ASSET_MANAGEMENT",name:"Asset Management",nameEn:"Asset Management",icon:"Briefcase",color:"#3B82F6",description:"Performance et valorisation des actifs",reportsCount:6},{code:"PROPERTY_MANAGEMENT",name:"Property Management",nameEn:"Property Management",icon:"Building2",color:"#10B981",description:"Gestion opérationnelle des immeubles",reportsCount:5},{code:"LEASING",name:"Commercialisation",nameEn:"Leasing",icon:"Store",color:"#F97316",description:"Location et gestion des baux",reportsCount:5},{code:"RETAIL_PERFORMANCE",name:"Performance Retail",nameEn:"Retail Performance",icon:"TrendingUp",color:"#8B5CF6",description:"CA, fréquentation et enseignes",reportsCount:6},{code:"FINANCIAL",name:"Financier",nameEn:"Financial",icon:"DollarSign",color:"#EC4899",description:"Analyses financières et comptables",reportsCount:5},{code:"SUSTAINABILITY",name:"RSE & ESG",nameEn:"Sustainability & ESG",icon:"Leaf",color:"#22C55E",description:"Développement durable et conformité",reportsCount:4},{code:"INVESTMENT",name:"Investissement",nameEn:"Investment",icon:"Target",color:"#06B6D4",description:"Acquisition, cession et valorisation",reportsCount:4},{code:"PROJECT",name:"Projet & Travaux",nameEn:"Project & Construction",icon:"HardHat",color:"#84CC16",description:"Développement et rénovation",reportsCount:5}],Lr={id:"asset-performance",code:"ASSET_PERFORMANCE",name:"Performance Globale de l'Actif",nameEn:"Asset Performance Report",shortName:"Perf. Actif",category:"asset_management",subcategory:"performance",icon:"TrendingUp",color:"#3B82F6",description:"Analyse complète de la performance financière et opérationnelle d'un centre commercial",longDescription:`Le rapport de Performance Globale de l'Actif fournit une vue synthétique et détaillée de tous les indicateurs clés de performance d'un centre commercial.

**Objectifs du rapport :**
- Mesurer la performance financière (NOI, rendement, valorisation)
- Analyser la performance commerciale (CA, fréquentation, occupation)
- Identifier les leviers d'amélioration
- Comparer aux benchmarks du marché

**Métriques EPRA incluses :**
- EPRA Net Initial Yield
- EPRA Topped-up NIY
- EPRA Vacancy Rate
- EPRA Cost Ratio

**Standards appliqués :**
- EPRA Best Practices Recommendations
- ICSC Shopping Center Definitions
- RICS Valuation Standards`,longDescriptionEn:`The Asset Performance Report provides a synthetic and detailed view of all key performance indicators for a shopping center.

**Report Objectives:**
- Measure financial performance (NOI, yield, valuation)
- Analyze commercial performance (sales, footfall, occupancy)
- Identify improvement levers
- Compare to market benchmarks`,industryStandards:[q.EPRA,q.ICSC,q.RICS],estimatedPages:{min:12,max:25},complexity:"standard",updateFrequency:"monthly",targetAudience:["Asset Managers","Direction Générale","Investisseurs","Comité d'investissement","Property Managers"],kpis:[{code:"NOI",name:"Net Operating Income",nameEn:"Net Operating Income",shortName:"NOI",formula:"Revenus Locatifs - Charges Non Récupérables",unit:"EUR",description:"Revenu net d'exploitation avant charges financières et amortissements",epraDefinition:"Rental income less property operating expenses",benchmark:{excellent:0,good:0,acceptable:0,poor:0},frequency:"monthly",trend:"higher_better",category:"financial",standardReference:q.EPRA},{code:"NOI_M2",name:"NOI par m²",nameEn:"NOI per sqm",shortName:"NOI/m²",formula:"NOI / Surface GLA",unit:"EUR/m2",description:"NOI ramené au mètre carré de surface locative",frequency:"monthly",trend:"higher_better",category:"financial",assetTypeBenchmark:{regional:280,superRegional:320,community:180,neighborhood:120,outletCenter:250,retailPark:100}},{code:"EPRA_NIY",name:"EPRA Net Initial Yield",nameEn:"EPRA Net Initial Yield",shortName:"NIY",formula:"Loyer Net Annualisé / (Valeur Brute + Droits)",unit:"%",description:"Rendement initial net selon méthodologie EPRA",epraDefinition:"Annualised rental income based on passing cash rents, less non-recoverable property operating expenses, divided by gross market value",benchmark:{excellent:6,good:5,acceptable:4,poor:3},frequency:"quarterly",trend:"target",targetValue:5.5,category:"financial",standardReference:q.EPRA},{code:"EPRA_VACANCY",name:"EPRA Vacancy Rate",nameEn:"EPRA Vacancy Rate",shortName:"Vacance",formula:"ERV Lots Vacants / ERV Total",unit:"%",description:"Taux de vacance financière selon EPRA",epraDefinition:"Estimated rental value of vacant space divided by ERV of total portfolio",benchmark:{excellent:3,good:5,acceptable:8,poor:12},frequency:"monthly",trend:"lower_better",category:"operational",standardReference:q.EPRA},{code:"WAULT",name:"WAULT (Weighted Average Unexpired Lease Term)",nameEn:"Weighted Average Unexpired Lease Term",shortName:"WAULT",formula:"Σ(Loyer × Durée Résiduelle) / Σ(Loyer)",unit:"years",description:"Durée moyenne pondérée des baux restant à courir",benchmark:{excellent:5,good:4,acceptable:3,poor:2},frequency:"monthly",trend:"higher_better",category:"risk"},{code:"OCCUPANCY_RATE",name:"Taux d'Occupation Physique",nameEn:"Physical Occupancy Rate",shortName:"TOP",formula:"(Surface Louée / Surface GLA) × 100",unit:"%",description:"Pourcentage de surfaces occupées",benchmark:{excellent:98,good:95,acceptable:90,poor:85},frequency:"monthly",trend:"higher_better",category:"operational"},{code:"FOOTFALL",name:"Fréquentation",nameEn:"Footfall",shortName:"Fréq.",formula:"Comptage visiteurs (entrées)",unit:"visitors",description:"Nombre de visiteurs sur la période",frequency:"daily",trend:"higher_better",category:"operational"},{code:"SALES_DENSITY",name:"Densité de CA",nameEn:"Sales Density",shortName:"CA/m²",formula:"CA Total Enseignes / Surface GLA",unit:"EUR/m2",description:"Chiffre d'affaires par m² de surface locative",icscDefinition:"Tenant sales per square meter of GLA",benchmark:{excellent:6e3,good:4500,acceptable:3e3,poor:2e3},frequency:"monthly",trend:"higher_better",category:"commercial",standardReference:q.ICSC}],dataRequirements:[{fieldName:"Surface GLA",fieldNameEn:"Gross Leasable Area",description:"Surface locative brute totale en m²",dataType:"area",required:!0,sources:["Plans architecte","Relevé géomètre"],validationRules:["IPMS-3 Retail"],exampleValues:["45,000 m²","28,500 m²"]},{fieldName:"Loyers facturés",fieldNameEn:"Billed Rent",description:"Montant des loyers facturés sur la période",dataType:"currency",required:!0,sources:["Comptabilité","Gestion locative"],validationRules:["Mensuel","HT"],exampleValues:["1,250,000 EUR","890,000 EUR"]},{fieldName:"Charges d'exploitation",fieldNameEn:"Operating Expenses",description:"Charges non récupérables",dataType:"currency",required:!0,sources:["Comptabilité analytique"],exampleValues:["180,000 EUR","95,000 EUR"]},{fieldName:"Valeur vénale",fieldNameEn:"Market Value",description:"Dernière valorisation expertisée",dataType:"currency",required:!0,sources:["Rapport d'expertise RICS"],validationRules:["< 12 mois"],exampleValues:["185,000,000 EUR"]},{fieldName:"CA enseignes",fieldNameEn:"Tenant Sales",description:"Chiffres d'affaires déclarés par les enseignes",dataType:"currency",required:!0,sources:["Déclarations mensuelles","Extractions caisses"],exampleValues:["15,800,000 EUR"]},{fieldName:"Comptage visiteurs",fieldNameEn:"Visitor Count",description:"Données de fréquentation",dataType:"numeric",required:!0,sources:["Compteurs automatiques","Mytraffic","Eco-Counter"],exampleValues:["850,000 visiteurs/mois"]}],sections:[{id:"executive_summary",title:"Résumé Exécutif",titleEn:"Executive Summary",shortTitle:"Résumé",description:"Synthèse des points clés et recommandations",type:"executive_summary",kpis:["NOI","EPRA_NIY","OCCUPANCY_RATE","FOOTFALL"],aiPowered:!0},{id:"kpi_dashboard",title:"Tableau de Bord KPIs",titleEn:"KPI Dashboard",shortTitle:"KPIs",description:"Vue synthétique des indicateurs clés",type:"kpi_dashboard",chartTypes:["gauge","bar"],kpis:["NOI","NOI_M2","EPRA_NIY","EPRA_VACANCY","WAULT","OCCUPANCY_RATE","FOOTFALL","SALES_DENSITY"]},{id:"financial_analysis",title:"Analyse Financière",titleEn:"Financial Analysis",shortTitle:"Finance",description:"Performance financière détaillée",type:"analysis",chartTypes:["waterfall","line","bar"],kpis:["NOI","NOI_M2","EPRA_NIY"],insights:["Évolution du NOI","Décomposition des revenus","Analyse des charges"]},{id:"occupancy_analysis",title:"Analyse de l'Occupation",titleEn:"Occupancy Analysis",shortTitle:"Occupation",description:"État locatif et vacance",type:"analysis",chartTypes:["pie","treemap","bar"],kpis:["OCCUPANCY_RATE","EPRA_VACANCY","WAULT"]},{id:"commercial_performance",title:"Performance Commerciale",titleEn:"Commercial Performance",shortTitle:"Commercial",description:"CA enseignes et fréquentation",type:"analysis",chartTypes:["line","bar","heatmap"],kpis:["FOOTFALL","SALES_DENSITY"]},{id:"benchmark",title:"Benchmark Marché",titleEn:"Market Benchmark",shortTitle:"Benchmark",description:"Comparaison aux standards du marché",type:"comparison",chartTypes:["radar","bar"]},{id:"recommendations",title:"Recommandations",titleEn:"Recommendations",shortTitle:"Actions",description:"Plan d'actions recommandé",type:"recommendations",aiPowered:!0}],useCases:["Reporting mensuel aux investisseurs","Comité d'investissement","Suivi de la performance locative","Préparation des business reviews","Benchmark inter-actifs"],limitations:["Nécessite des données de CA enseignes à jour","Valorisation expertisée requise pour les métriques EPRA","Comptage visiteurs dépendant de la fiabilité des capteurs"],relatedReports:["NOI_ANALYSIS","TENANT_PERFORMANCE","FOOTFALL_ANALYSIS","LEASE_EXPIRY"],bestPractices:["Mettre à jour les données CA mensuellement","Valider les comptages de fréquentation","Réconcilier avec la comptabilité","Comparer aux périodes N-1"],tags:["performance","asset management","KPIs","EPRA","monthly"],popular:!0,new:!1,aiPowered:!0,premium:!1},Pr={id:"noi-analysis",code:"NOI_ANALYSIS",name:"Analyse du NOI",nameEn:"NOI Analysis",shortName:"NOI",category:"financial",subcategory:"profitability",icon:"DollarSign",color:"#EC4899",description:"Analyse détaillée du Net Operating Income et de ses composantes",longDescription:`Le rapport d'Analyse du NOI décompose le revenu net d'exploitation pour identifier les leviers de performance et d'optimisation.

**Composantes analysées :**
- Revenus locatifs (loyers minimum garantis, loyers variables)
- Revenus annexes (parkings, terrasses, publicité, revenus divers)
- Charges récupérables et non récupérables
- Provision pour impayés

**Analyses incluses :**
- Waterfall NOI (décomposition)
- Évolution mensuelle et annuelle
- Variance budget vs réel
- Projection à fin d'année`,longDescriptionEn:"The NOI Analysis report breaks down net operating income to identify performance and optimization levers.",industryStandards:[q.EPRA,q.IFRS16],estimatedPages:{min:8,max:15},complexity:"standard",updateFrequency:"monthly",targetAudience:["Asset Managers","Direction Financière","Contrôleurs de gestion","Property Managers"],kpis:[{code:"NOI",name:"Net Operating Income",nameEn:"Net Operating Income",shortName:"NOI",formula:"Revenus Locatifs - Charges Non Récupérables",unit:"EUR",description:"Revenu net d'exploitation",frequency:"monthly",trend:"higher_better",category:"financial"},{code:"NOI_MARGIN",name:"Marge NOI",nameEn:"NOI Margin",shortName:"Marge",formula:"(NOI / Revenus Totaux) × 100",unit:"%",description:"Ratio de profitabilité opérationnelle",benchmark:{excellent:85,good:80,acceptable:75,poor:70},frequency:"monthly",trend:"higher_better",category:"financial"},{code:"LIKE_FOR_LIKE_NOI",name:"NOI Like-for-Like",nameEn:"Like-for-Like NOI Growth",shortName:"LfL NOI",formula:"((NOI N - NOI N-1) / NOI N-1) × 100",unit:"%",description:"Croissance du NOI à périmètre constant",benchmark:{excellent:5,good:3,acceptable:1,poor:-2},frequency:"quarterly",trend:"higher_better",category:"financial"},{code:"COST_RATIO",name:"EPRA Cost Ratio",nameEn:"EPRA Cost Ratio",shortName:"Cost Ratio",formula:"(Charges Admin + Charges Opé) / Revenus Locatifs Bruts",unit:"%",description:"Ratio de coûts selon EPRA",benchmark:{excellent:15,good:20,acceptable:25,poor:30},frequency:"quarterly",trend:"lower_better",category:"financial",standardReference:q.EPRA},{code:"RECOVERY_RATE",name:"Taux de Récupération Charges",nameEn:"Expense Recovery Rate",shortName:"Récup.",formula:"(Charges Refacturées / Charges Totales) × 100",unit:"%",description:"Part des charges refacturées aux locataires",benchmark:{excellent:95,good:90,acceptable:85,poor:75},frequency:"quarterly",trend:"higher_better",category:"financial"}],dataRequirements:[{fieldName:"Loyers facturés",fieldNameEn:"Billed Rent",description:"Détail des loyers par locataire",dataType:"currency",required:!0,sources:["Comptabilité","Gestion locative"],exampleValues:["12,500,000 EUR/an"]},{fieldName:"Revenus variables",fieldNameEn:"Variable Income",description:"Loyers en % du CA, revenus annexes",dataType:"currency",required:!0,sources:["Déclarations CA","Comptabilité"],exampleValues:["850,000 EUR/an"]},{fieldName:"Charges propriétaire",fieldNameEn:"Landlord Expenses",description:"Charges non récupérables",dataType:"currency",required:!0,sources:["Comptabilité analytique"],exampleValues:["1,200,000 EUR/an"]},{fieldName:"Budget NOI",fieldNameEn:"NOI Budget",description:"Budget NOI de l'exercice",dataType:"currency",required:!1,sources:["Budget prévisionnel"],exampleValues:["11,000,000 EUR"]}],sections:[{id:"noi_summary",title:"Synthèse NOI",titleEn:"NOI Summary",shortTitle:"Synthèse",description:"Vue d'ensemble du NOI et tendances",type:"kpi_dashboard",chartTypes:["gauge","line"],kpis:["NOI","NOI_MARGIN","LIKE_FOR_LIKE_NOI"]},{id:"noi_waterfall",title:"Décomposition du NOI",titleEn:"NOI Breakdown",shortTitle:"Waterfall",description:"Waterfall des composantes du NOI",type:"chart",chartTypes:["waterfall"]},{id:"revenue_analysis",title:"Analyse des Revenus",titleEn:"Revenue Analysis",shortTitle:"Revenus",description:"Détail des revenus locatifs et annexes",type:"analysis",chartTypes:["bar","pie"]},{id:"cost_analysis",title:"Analyse des Charges",titleEn:"Cost Analysis",shortTitle:"Charges",description:"Détail des charges par catégorie",type:"analysis",chartTypes:["bar","treemap"],kpis:["COST_RATIO","RECOVERY_RATE"]},{id:"budget_variance",title:"Écarts Budget",titleEn:"Budget Variance",shortTitle:"Budget",description:"Analyse des écarts vs budget",type:"comparison",chartTypes:["bar","line"]},{id:"noi_forecast",title:"Projection NOI",titleEn:"NOI Forecast",shortTitle:"Prévision",description:"Projection à fin d'exercice",type:"trend",chartTypes:["line","area"],aiPowered:!0}],useCases:["Reporting financier mensuel","Analyse de rentabilité","Suivi budgétaire","Préparation des closings","Business plan actif"],limitations:["Dépend de la qualité de la comptabilité analytique","Les projections sont indicatives"],relatedReports:["ASSET_PERFORMANCE","BUDGET_VS_ACTUAL","CASH_FLOW"],bestPractices:["Réconcilier mensuellement avec la comptabilité","Documenter les écarts significatifs","Suivre les indicateurs en tendance"],tags:["NOI","financial","profitability","budget"],popular:!0,new:!1,aiPowered:!0,premium:!1},Dr={id:"rent-roll",code:"RENT_ROLL",name:"État Locatif",nameEn:"Rent Roll",shortName:"État Loc.",category:"property_management",subcategory:"leasing",icon:"ClipboardList",color:"#10B981",description:"Liste exhaustive des baux et locataires avec détails contractuels",longDescription:`L'État Locatif (Rent Roll) est le document de référence qui recense l'ensemble des baux d'un centre commercial.

**Informations par bail :**
- Identité locataire et enseigne
- Surfaces (GLA, terrasse, réserve)
- Conditions financières (loyer minimum, loyer variable, charges)
- Échéances clés (fin de bail, break, indexation)
- Garanties (dépôt, caution bancaire)

**Analyses dérivées :**
- Répartition par activité (Merchandising Mix)
- Concentration des revenus
- Échéancier des baux
- Reversion potentielle`,longDescriptionEn:"The Rent Roll is the reference document listing all leases of a shopping center.",industryStandards:[q.ICSC,q.IFRS16],estimatedPages:{min:10,max:30},complexity:"simple",updateFrequency:"monthly",targetAudience:["Property Managers","Asset Managers","Comptabilité","Juridique","Investisseurs (due diligence)"],kpis:[{code:"TOTAL_GLA",name:"Surface GLA Totale",nameEn:"Total GLA",shortName:"GLA",formula:"Σ Surfaces locatives",unit:"m2",description:"Surface locative brute totale",frequency:"monthly",trend:"target",category:"operational"},{code:"OCCUPANCY_RATE",name:"Taux d'Occupation",nameEn:"Occupancy Rate",shortName:"Occup.",formula:"(Surface Louée / GLA) × 100",unit:"%",description:"Pourcentage de surfaces occupées",benchmark:{excellent:98,good:95,acceptable:90,poor:85},frequency:"monthly",trend:"higher_better",category:"operational"},{code:"TOTAL_RENT",name:"Loyer Total Annuel",nameEn:"Total Annual Rent",shortName:"Loyer",formula:"Σ Loyers minimum garantis annualisés",unit:"EUR",description:"Montant total des loyers annuels",frequency:"monthly",trend:"higher_better",category:"financial"},{code:"AVG_RENT_SQM",name:"Loyer Moyen au m²",nameEn:"Average Rent per sqm",shortName:"Loyer/m²",formula:"Loyer Total / Surface Louée",unit:"EUR/m2",description:"Loyer moyen par m² de surface louée",frequency:"monthly",trend:"higher_better",category:"financial"},{code:"TENANT_COUNT",name:"Nombre de Locataires",nameEn:"Tenant Count",shortName:"Nb Loc.",formula:"Count(Baux actifs)",unit:"number",description:"Nombre de baux en cours",frequency:"monthly",trend:"target",category:"operational"},{code:"TOP5_CONCENTRATION",name:"Concentration Top 5",nameEn:"Top 5 Concentration",shortName:"Top 5",formula:"(Loyer Top 5 / Loyer Total) × 100",unit:"%",description:"Part des 5 premiers locataires dans les loyers",benchmark:{excellent:20,good:30,acceptable:40,poor:50},frequency:"quarterly",trend:"lower_better",category:"risk"}],dataRequirements:[{fieldName:"Référence lot",fieldNameEn:"Unit Reference",description:"Identifiant unique du lot",dataType:"text",required:!0,sources:["Système de gestion"],exampleValues:["A-001","B-125","FOOD-01"]},{fieldName:"Raison sociale",fieldNameEn:"Company Name",description:"Nom légal du locataire",dataType:"text",required:!0,sources:["Bail","K-bis"],exampleValues:["ZARA FRANCE SAS","FNAC DARTY SA"]},{fieldName:"Enseigne",fieldNameEn:"Brand",description:"Nom commercial",dataType:"text",required:!0,sources:["Bail"],exampleValues:["Zara","Fnac","Sephora"]},{fieldName:"Activité CNCC",fieldNameEn:"CNCC Activity",description:"Code activité CNCC",dataType:"enum",required:!0,sources:["Bail","Classification CNCC"],exampleValues:["1.1 Mode Femme","2.3 Restauration Rapide"]},{fieldName:"Surface GLA",fieldNameEn:"GLA",description:"Surface locative brute",dataType:"area",required:!0,sources:["Bail","Relevé géomètre"],exampleValues:["850 m²","120 m²"]},{fieldName:"Loyer minimum garanti",fieldNameEn:"Minimum Guaranteed Rent",description:"LMG annuel HT",dataType:"currency",required:!0,sources:["Bail"],exampleValues:["250,000 EUR/an","48,000 EUR/an"]},{fieldName:"Date fin bail",fieldNameEn:"Lease End Date",description:"Date d'échéance du bail",dataType:"date",required:!0,sources:["Bail"],format:"DD/MM/YYYY",exampleValues:["31/12/2028","30/06/2026"]},{fieldName:"Date break",fieldNameEn:"Break Date",description:"Prochaine date de sortie possible",dataType:"date",required:!1,sources:["Bail"],exampleValues:["31/12/2025"]}],sections:[{id:"summary",title:"Synthèse État Locatif",titleEn:"Rent Roll Summary",shortTitle:"Synthèse",description:"Chiffres clés de l'état locatif",type:"kpi_dashboard",chartTypes:["gauge"],kpis:["TOTAL_GLA","OCCUPANCY_RATE","TOTAL_RENT","TENANT_COUNT"]},{id:"tenant_list",title:"Liste des Locataires",titleEn:"Tenant List",shortTitle:"Locataires",description:"Tableau détaillé des baux",type:"table",columns:["Lot","Enseigne","Activité","Surface","Loyer","Fin Bail"]},{id:"vacancy",title:"Lots Vacants",titleEn:"Vacant Units",shortTitle:"Vacance",description:"Liste des lots disponibles",type:"table",columns:["Lot","Surface","ERV","Durée vacance"]},{id:"activity_mix",title:"Mix Activités",titleEn:"Activity Mix",shortTitle:"Mix",description:"Répartition par type d'activité",type:"chart",chartTypes:["treemap","pie"]},{id:"concentration",title:"Analyse Concentration",titleEn:"Concentration Analysis",shortTitle:"Concentration",description:"Risque de concentration locataires",type:"analysis",chartTypes:["bar"],kpis:["TOP5_CONCENTRATION"]},{id:"rent_analysis",title:"Analyse des Loyers",titleEn:"Rent Analysis",shortTitle:"Loyers",description:"Distribution et moyennes des loyers",type:"analysis",chartTypes:["bar","scatter"],kpis:["AVG_RENT_SQM"]}],useCases:["Due diligence acquisition","Reporting investisseurs","Gestion courante","Préparation budget","Analyse de portefeuille"],limitations:["Les données doivent être réconciliées avec les baux originaux","Les loyers variables ne sont pas inclus dans le LMG"],relatedReports:["LEASE_EXPIRY","TENANT_PERFORMANCE","MERCHANDISING_MIX","VACANCY_ANALYSIS"],bestPractices:["Mettre à jour à chaque mouvement locatif","Vérifier la cohérence des surfaces","Documenter les conditions particulières"],tags:["rent roll","leasing","tenants","property management"],popular:!0,new:!1,aiPowered:!1,premium:!1},Br={id:"lease-expiry",code:"LEASE_EXPIRY",name:"Échéancier des Baux",nameEn:"Lease Expiry Schedule",shortName:"Échéances",category:"leasing",subcategory:"risk_management",icon:"Calendar",color:"#F97316",description:"Analyse des échéances de baux et risque de vacance future",longDescription:`L'Échéancier des Baux analyse les dates clés des contrats de location pour anticiper les risques et opportunités.

**Dates analysées :**
- Fins de bail (expiries)
- Options de sortie (breaks)
- Prochaines indexations
- Dates de renouvellement

**Indicateurs de risque :**
- WAULT / WALB
- Concentration des échéances
- Exposition par année
- Potentiel de réversion

**Actions recommandées :**
- Priorisation des renégociations
- Anticipation des départs
- Stratégie de relet`,longDescriptionEn:"The Lease Expiry Schedule analyzes key contract dates to anticipate risks and opportunities.",industryStandards:[q.EPRA,q.IFRS16],estimatedPages:{min:6,max:12},complexity:"simple",updateFrequency:"monthly",targetAudience:["Leasing Managers","Asset Managers","Property Managers","Direction Générale"],kpis:[{code:"WAULT",name:"WAULT",nameEn:"Weighted Average Unexpired Lease Term",shortName:"WAULT",formula:"Σ(Loyer × Durée Résiduelle) / Σ(Loyer)",unit:"years",description:"Durée moyenne pondérée jusqu'à fin de bail",benchmark:{excellent:5,good:4,acceptable:3,poor:2},frequency:"monthly",trend:"higher_better",category:"risk"},{code:"WALB",name:"WALB",nameEn:"Weighted Average Lease to Break",shortName:"WALB",formula:"Σ(Loyer × Durée jusqu'au Break) / Σ(Loyer)",unit:"years",description:"Durée moyenne pondérée jusqu'à première sortie possible",benchmark:{excellent:3,good:2.5,acceptable:2,poor:1.5},frequency:"monthly",trend:"higher_better",category:"risk"},{code:"EXPIRY_Y1",name:"Échéances Année 1",nameEn:"Year 1 Expiries",shortName:"Y1",formula:"Loyers des baux expirant dans 12 mois / Loyer Total",unit:"%",description:"Part des loyers expirant dans l'année",benchmark:{excellent:10,good:15,acceptable:20,poor:30},frequency:"monthly",trend:"lower_better",category:"risk"},{code:"BREAK_Y1",name:"Breaks Année 1",nameEn:"Year 1 Breaks",shortName:"Breaks Y1",formula:"Loyers des baux avec break dans 12 mois / Loyer Total",unit:"%",description:"Part des loyers avec option de sortie dans l'année",benchmark:{excellent:5,good:10,acceptable:15,poor:25},frequency:"monthly",trend:"lower_better",category:"risk"},{code:"REVERSION_POTENTIAL",name:"Potentiel de Réversion",nameEn:"Reversion Potential",shortName:"Réversion",formula:"((ERV - Loyer Actuel) / Loyer Actuel) × 100",unit:"%",description:"Potentiel d'augmentation des loyers au renouvellement",benchmark:{excellent:15,good:10,acceptable:5,poor:0},frequency:"annually",trend:"higher_better",category:"commercial"}],dataRequirements:[{fieldName:"Date fin bail",fieldNameEn:"Lease End Date",description:"Date d'expiration du bail",dataType:"date",required:!0,sources:["Bail"],exampleValues:["31/12/2027"]},{fieldName:"Date break",fieldNameEn:"Break Option Date",description:"Prochaine date d'option de sortie",dataType:"date",required:!1,sources:["Bail"],exampleValues:["30/06/2025"]},{fieldName:"Loyer annuel",fieldNameEn:"Annual Rent",description:"Loyer annuel pour pondération",dataType:"currency",required:!0,sources:["État locatif"],exampleValues:["120,000 EUR"]},{fieldName:"ERV",fieldNameEn:"Estimated Rental Value",description:"Valeur locative de marché estimée",dataType:"currency",required:!1,sources:["Expertise","Benchmark marché"],exampleValues:["135,000 EUR"]}],sections:[{id:"wault_summary",title:"Synthèse WAULT/WALB",titleEn:"WAULT/WALB Summary",shortTitle:"WAULT",description:"Indicateurs de durée résiduelle",type:"kpi_dashboard",chartTypes:["gauge"],kpis:["WAULT","WALB"]},{id:"expiry_schedule",title:"Calendrier des Échéances",titleEn:"Expiry Schedule",shortTitle:"Calendrier",description:"Vue chronologique des échéances",type:"chart",chartTypes:["bar","line"]},{id:"expiry_table",title:"Détail par Locataire",titleEn:"Tenant Detail",shortTitle:"Détail",description:"Liste des échéances par locataire",type:"table",columns:["Enseigne","Loyer","Fin Bail","Break","Durée Restante"]},{id:"risk_analysis",title:"Analyse des Risques",titleEn:"Risk Analysis",shortTitle:"Risques",description:"Concentration et exposition",type:"analysis",chartTypes:["bar","heatmap"],kpis:["EXPIRY_Y1","BREAK_Y1"]},{id:"reversion_analysis",title:"Analyse de Réversion",titleEn:"Reversion Analysis",shortTitle:"Réversion",description:"Potentiel d'augmentation des loyers",type:"analysis",chartTypes:["scatter","bar"],kpis:["REVERSION_POTENTIAL"]},{id:"action_plan",title:"Plan d'Actions",titleEn:"Action Plan",shortTitle:"Actions",description:"Priorisation des renégociations",type:"recommendations",aiPowered:!0}],useCases:["Gestion du risque locatif","Planification des renégociations","Reporting investisseurs","Due diligence","Business plan"],limitations:["Les options de break dépendent des décisions des locataires","Les ERV sont des estimations"],relatedReports:["RENT_ROLL","VACANCY_ANALYSIS","TENANT_PERFORMANCE"],bestPractices:["Anticiper les échéances 18-24 mois à l'avance","Mettre à jour les ERV annuellement","Suivre les signaux de départ des enseignes"],tags:["leasing","risk","WAULT","expiries"],popular:!0,new:!1,aiPowered:!0,premium:!1},Or={id:"tenant-performance",code:"TENANT_PERFORMANCE",name:"Performance des Enseignes",nameEn:"Tenant Performance",shortName:"Perf. Enseignes",category:"retail_performance",subcategory:"tenant_analysis",icon:"Store",color:"#8B5CF6",description:"Analyse détaillée des performances commerciales des enseignes",longDescription:`Le rapport de Performance des Enseignes analyse les chiffres d'affaires et indicateurs clés de chaque locataire.

**Indicateurs analysés :**
- Chiffre d'affaires mensuel et cumulé
- Évolution vs N-1 (like-for-like)
- Densité de CA (€/m²)
- Taux d'effort (loyer/CA)
- Panier moyen et taux de conversion

**Classifications :**
- Top performers
- Enseignes à surveiller
- Enseignes en difficulté

**Benchmarks ICSC :**
- Par catégorie d'activité
- Par format de centre
- Par zone géographique`,longDescriptionEn:"The Tenant Performance report analyzes sales and key indicators for each tenant.",industryStandards:[q.ICSC,q.CNCC],estimatedPages:{min:10,max:25},complexity:"standard",updateFrequency:"monthly",targetAudience:["Directeur de Centre","Leasing Managers","Asset Managers","Marketing"],kpis:[{code:"TOTAL_SALES",name:"CA Total Centre",nameEn:"Total Center Sales",shortName:"CA Total",formula:"Σ CA Enseignes",unit:"EUR",description:"Chiffre d'affaires total déclaré",frequency:"monthly",trend:"higher_better",category:"commercial"},{code:"SALES_LFL",name:"Évolution CA LfL",nameEn:"Like-for-Like Sales Growth",shortName:"LfL",formula:"((CA N - CA N-1) / CA N-1) × 100",unit:"%",description:"Croissance du CA à périmètre constant",benchmark:{excellent:5,good:2,acceptable:0,poor:-3},frequency:"monthly",trend:"higher_better",category:"commercial"},{code:"SALES_DENSITY",name:"Densité CA",nameEn:"Sales Density",shortName:"CA/m²",formula:"CA / Surface GLA",unit:"EUR/m2",description:"CA par m² de surface locative",benchmark:{excellent:6e3,good:4500,acceptable:3e3,poor:2e3},frequency:"monthly",trend:"higher_better",category:"commercial",standardReference:q.ICSC},{code:"OCCUPANCY_COST_RATIO",name:"Taux d'Effort",nameEn:"Occupancy Cost Ratio",shortName:"Taux Effort",formula:"(Loyer + Charges) / CA × 100",unit:"%",description:"Part du CA consacrée au loyer et charges",benchmark:{excellent:8,good:12,acceptable:15,poor:20},frequency:"monthly",trend:"lower_better",category:"risk",icscDefinition:"Total occupancy cost as percentage of tenant sales"},{code:"BASKET_SIZE",name:"Panier Moyen",nameEn:"Average Basket Size",shortName:"Panier",formula:"CA / Nombre de Transactions",unit:"EUR",description:"Montant moyen par transaction",frequency:"monthly",trend:"higher_better",category:"commercial"},{code:"CONVERSION_RATE",name:"Taux de Conversion",nameEn:"Conversion Rate",shortName:"Conversion",formula:"(Transactions / Visiteurs Boutique) × 100",unit:"%",description:"Part des visiteurs effectuant un achat",benchmark:{excellent:25,good:20,acceptable:15,poor:10},frequency:"monthly",trend:"higher_better",category:"commercial"}],dataRequirements:[{fieldName:"CA mensuel",fieldNameEn:"Monthly Sales",description:"Chiffre d'affaires déclaré par l'enseigne",dataType:"currency",required:!0,sources:["Déclaration locataire","Extraction caisse"],exampleValues:["185,000 EUR","52,000 EUR"]},{fieldName:"CA N-1",fieldNameEn:"Prior Year Sales",description:"CA de la période comparable N-1",dataType:"currency",required:!0,sources:["Historique"],exampleValues:["175,000 EUR"]},{fieldName:"Nombre de transactions",fieldNameEn:"Transaction Count",description:"Nombre de tickets de caisse",dataType:"numeric",required:!1,sources:["Extraction caisse"],exampleValues:["3,500","1,200"]},{fieldName:"Surface GLA",fieldNameEn:"GLA",description:"Surface locative",dataType:"area",required:!0,sources:["État locatif"],exampleValues:["450 m²"]},{fieldName:"Loyer + Charges",fieldNameEn:"Occupancy Cost",description:"Coût d'occupation mensuel",dataType:"currency",required:!0,sources:["Comptabilité"],exampleValues:["18,500 EUR"]}],sections:[{id:"sales_summary",title:"Synthèse CA Centre",titleEn:"Center Sales Summary",shortTitle:"Synthèse",description:"Performance globale du centre",type:"kpi_dashboard",chartTypes:["gauge","line"],kpis:["TOTAL_SALES","SALES_LFL","SALES_DENSITY"]},{id:"tenant_ranking",title:"Classement Enseignes",titleEn:"Tenant Ranking",shortTitle:"Ranking",description:"Top et bottom performers",type:"table",columns:["Rang","Enseigne","CA","Évolution","CA/m²","Taux Effort"]},{id:"activity_analysis",title:"Performance par Activité",titleEn:"Performance by Activity",shortTitle:"Activités",description:"CA et évolution par secteur d'activité",type:"analysis",chartTypes:["bar","treemap"]},{id:"effort_rate_analysis",title:"Analyse Taux d'Effort",titleEn:"Occupancy Cost Analysis",shortTitle:"Taux Effort",description:"Distribution et enseignes à risque",type:"analysis",chartTypes:["scatter","bar"],kpis:["OCCUPANCY_COST_RATIO"]},{id:"lfl_analysis",title:"Évolution Like-for-Like",titleEn:"Like-for-Like Analysis",shortTitle:"LfL",description:"Tendances à périmètre constant",type:"trend",chartTypes:["line","bar"],kpis:["SALES_LFL"]},{id:"alerts",title:"Enseignes à Surveiller",titleEn:"Tenants to Watch",shortTitle:"Alertes",description:"Signaux d'alerte et actions",type:"recommendations",aiPowered:!0}],useCases:["Suivi mensuel de la performance","Identification des enseignes à risque","Négociation des renouvellements","Stratégie de merchandising","Reporting investisseurs"],limitations:["Dépend de la qualité des déclarations CA","Certaines enseignes ne déclarent pas ou avec retard","Les données de transactions ne sont pas toujours disponibles"],relatedReports:["RENT_ROLL","FOOTFALL_ANALYSIS","MERCHANDISING_MIX","LEASE_EXPIRY"],bestPractices:["Relancer les déclarations CA en retard","Croiser avec les données de fréquentation","Analyser les tendances sur 12 mois glissants"],tags:["sales","tenant","performance","retail"],popular:!0,new:!1,aiPowered:!0,premium:!1},_r={id:"footfall-analysis",code:"FOOTFALL_ANALYSIS",name:"Analyse de la Fréquentation",nameEn:"Footfall Analysis",shortName:"Fréquentation",category:"retail_performance",subcategory:"traffic_analysis",icon:"Users",color:"#8B5CF6",description:"Analyse approfondie des flux visiteurs et tendances de fréquentation",longDescription:`L'Analyse de la Fréquentation étudie les flux de visiteurs pour optimiser la performance commerciale.

**Dimensions d'analyse :**
- Évolution quotidienne, hebdomadaire, mensuelle
- Répartition par entrée et par zone
- Pics de fréquentation (horaires, jours)
- Impact des événements et météo
- Comparaison aux indices marché (CNCC, Mytraffic)

**Indicateurs clés :**
- Fréquentation totale et évolution
- Taux de pénétration zone de chalandise
- CA par visiteur
- Temps de présence moyen`,longDescriptionEn:"Footfall Analysis studies visitor flows to optimize commercial performance.",industryStandards:[q.CNCC,q.ICSC],estimatedPages:{min:8,max:18},complexity:"standard",updateFrequency:"weekly",targetAudience:["Directeur de Centre","Marketing","Asset Managers","Enseignes partenaires"],kpis:[{code:"TOTAL_FOOTFALL",name:"Fréquentation Totale",nameEn:"Total Footfall",shortName:"Visiteurs",formula:"Σ Comptages entrées",unit:"visitors",description:"Nombre total de visiteurs sur la période",frequency:"daily",trend:"higher_better",category:"operational"},{code:"FOOTFALL_LFL",name:"Évolution Fréquentation LfL",nameEn:"Like-for-Like Footfall Growth",shortName:"LfL Fréq.",formula:"((Fréq N - Fréq N-1) / Fréq N-1) × 100",unit:"%",description:"Évolution de la fréquentation vs N-1",benchmark:{excellent:3,good:1,acceptable:-1,poor:-5},frequency:"monthly",trend:"higher_better",category:"operational"},{code:"AVG_DAILY_FOOTFALL",name:"Fréquentation Jour Moyen",nameEn:"Average Daily Footfall",shortName:"Fréq. Jour",formula:"Fréquentation Mois / Nombre Jours Ouverture",unit:"visitors",description:"Moyenne journalière de visiteurs",frequency:"monthly",trend:"higher_better",category:"operational"},{code:"SALES_PER_VISITOR",name:"CA par Visiteur",nameEn:"Sales per Visitor",shortName:"CA/Visiteur",formula:"CA Total / Fréquentation",unit:"EUR",description:"Dépense moyenne par visiteur",benchmark:{excellent:35,good:25,acceptable:18,poor:12},frequency:"monthly",trend:"higher_better",category:"commercial"},{code:"CATCHMENT_PENETRATION",name:"Taux de Pénétration",nameEn:"Catchment Penetration Rate",shortName:"Pénétration",formula:"(Visiteurs Uniques / Population Zone) × 100",unit:"%",description:"Part de la population de la zone visitant le centre",frequency:"quarterly",trend:"higher_better",category:"commercial"},{code:"DWELL_TIME",name:"Temps de Présence",nameEn:"Dwell Time",shortName:"Durée",formula:"Temps moyen passé dans le centre",unit:"minutes",description:"Durée moyenne de visite",benchmark:{excellent:90,good:70,acceptable:50,poor:30},frequency:"monthly",trend:"higher_better",category:"commercial"}],dataRequirements:[{fieldName:"Comptage entrées",fieldNameEn:"Entry Count",description:"Données des compteurs par entrée",dataType:"numeric",required:!0,sources:["Compteurs automatiques","Mytraffic","Eco-Counter"],exampleValues:["25,000/jour","750,000/mois"]},{fieldName:"Date/Heure",fieldNameEn:"Date/Time",description:"Timestamp des comptages",dataType:"date",required:!0,sources:["Système de comptage"],format:"YYYY-MM-DD HH:MM",exampleValues:["2024-01-15 14:30"]},{fieldName:"CA Total",fieldNameEn:"Total Sales",description:"CA pour calcul dépense/visiteur",dataType:"currency",required:!0,sources:["Déclarations enseignes"],exampleValues:["18,500,000 EUR/mois"]},{fieldName:"Population zone",fieldNameEn:"Catchment Population",description:"Population de la zone de chalandise",dataType:"numeric",required:!1,sources:["INSEE","Études géomarketing"],exampleValues:["450,000 habitants"]},{fieldName:"Données météo",fieldNameEn:"Weather Data",description:"Conditions météorologiques",dataType:"text",required:!1,sources:["API météo"],exampleValues:["Ensoleillé 22°C","Pluie 12°C"]}],sections:[{id:"footfall_summary",title:"Synthèse Fréquentation",titleEn:"Footfall Summary",shortTitle:"Synthèse",description:"KPIs clés de fréquentation",type:"kpi_dashboard",chartTypes:["gauge","line"],kpis:["TOTAL_FOOTFALL","FOOTFALL_LFL","AVG_DAILY_FOOTFALL"]},{id:"trend_analysis",title:"Tendances",titleEn:"Trends",shortTitle:"Tendances",description:"Évolution de la fréquentation",type:"trend",chartTypes:["line","area"]},{id:"weekly_pattern",title:"Profil Hebdomadaire",titleEn:"Weekly Pattern",shortTitle:"Semaine",description:"Répartition par jour de la semaine",type:"chart",chartTypes:["bar","heatmap"]},{id:"hourly_pattern",title:"Profil Horaire",titleEn:"Hourly Pattern",shortTitle:"Heures",description:"Répartition par heure",type:"chart",chartTypes:["line","heatmap"]},{id:"entry_analysis",title:"Analyse par Entrée",titleEn:"Entry Analysis",shortTitle:"Entrées",description:"Répartition par point d'entrée",type:"analysis",chartTypes:["pie","bar"]},{id:"conversion_analysis",title:"Analyse de Conversion",titleEn:"Conversion Analysis",shortTitle:"Conversion",description:"Transformation visiteurs en acheteurs",type:"analysis",chartTypes:["funnel","bar"],kpis:["SALES_PER_VISITOR"]},{id:"benchmark",title:"Benchmark Marché",titleEn:"Market Benchmark",shortTitle:"Benchmark",description:"Comparaison aux indices sectoriels",type:"comparison",chartTypes:["line","bar"]}],useCases:["Optimisation des horaires d'ouverture","Planification des événements","Négociation avec les enseignes","Reporting marketing","Étude d'impact travaux"],limitations:["Précision des compteurs (marge d'erreur 3-5%)","Distinction entrées/sorties","Comptage des passages multiples"],relatedReports:["TENANT_PERFORMANCE","MARKETING_ROI","EVENT_ANALYSIS"],bestPractices:["Calibrer régulièrement les compteurs","Corréler avec les données CA","Analyser l'impact météo"],tags:["footfall","traffic","visitors","retail"],popular:!0,new:!1,aiPowered:!0,premium:!1},We={ASSET_PERFORMANCE:Lr,NOI_ANALYSIS:Pr,RENT_ROLL:Dr,LEASE_EXPIRY:Br,TENANT_PERFORMANCE:Or,FOOTFALL_ANALYSIS:_r};Object.keys(We).length,Object.values(We).reduce((t,r)=>t+r.kpis.length,0);function Fr(){return Object.values(We).filter(t=>t.popular)}function qr(){const t=[],r=new Set;return Object.values(We).forEach(s=>{s.kpis.forEach(l=>{r.has(l.code)||(t.push(l),r.add(l.code))})}),t}const Mr={id:"vacancy-analysis",code:"VACANCY_ANALYSIS",name:"Analyse de la Vacance",nameEn:"Vacancy Analysis",shortName:"Vacance",category:"leasing",subcategory:"vacancy",icon:"Building",color:"#F97316",description:"Analyse détaillée de la vacance et stratégie de relocation",longDescription:`L'Analyse de la Vacance identifie les lots vacants et propose des stratégies de commercialisation.

**Dimensions d'analyse :**
- Vacance physique vs financière
- Durée de vacance par lot
- Causes de la vacance
- Potentiel de revalorisation
- Pipeline de commercialisation

**Indicateurs EPRA :**
- EPRA Vacancy Rate
- ERV vacante
- Manque à gagner`,longDescriptionEn:"Vacancy Analysis identifies vacant units and proposes reletting strategies.",industryStandards:[q.EPRA,q.ICSC],estimatedPages:{min:6,max:12},complexity:"simple",updateFrequency:"monthly",targetAudience:["Leasing Managers","Asset Managers","Property Managers"],kpis:[{code:"PHYSICAL_VACANCY",name:"Vacance Physique",nameEn:"Physical Vacancy Rate",shortName:"Vac. Phys.",formula:"(Surface Vacante / Surface GLA) × 100",unit:"%",description:"Pourcentage de surfaces non occupées",benchmark:{excellent:3,good:5,acceptable:8,poor:12},frequency:"monthly",trend:"lower_better",category:"operational"},{code:"EPRA_VACANCY",name:"EPRA Vacancy Rate",nameEn:"EPRA Vacancy Rate",shortName:"Vac. EPRA",formula:"(ERV Vacante / ERV Totale) × 100",unit:"%",description:"Vacance financière selon EPRA",benchmark:{excellent:3,good:5,acceptable:8,poor:12},frequency:"monthly",trend:"lower_better",category:"financial",standardReference:q.EPRA},{code:"VACANCY_COST",name:"Manque à Gagner",nameEn:"Vacancy Cost",shortName:"MAG",formula:"ERV Lots Vacants × Durée Vacance",unit:"EUR",description:"Coût de la vacance en loyers perdus",frequency:"monthly",trend:"lower_better",category:"financial"},{code:"AVG_VACANCY_DURATION",name:"Durée Moyenne de Vacance",nameEn:"Average Vacancy Duration",shortName:"Durée Vac.",formula:"Moyenne(Jours depuis départ locataire)",unit:"days",description:"Nombre moyen de jours de vacance",benchmark:{excellent:60,good:90,acceptable:180,poor:365},frequency:"monthly",trend:"lower_better",category:"operational"},{code:"RELET_RATE",name:"Taux de Relocation",nameEn:"Reletting Rate",shortName:"Reloc.",formula:"(Lots Reloués / Lots Libérés) × 100",unit:"%",description:"Pourcentage des lots libérés qui ont été reloués",benchmark:{excellent:90,good:80,acceptable:70,poor:50},frequency:"quarterly",trend:"higher_better",category:"commercial"}],dataRequirements:[{fieldName:"Lots vacants",fieldNameEn:"Vacant Units",description:"Liste des lots non occupés",dataType:"text",required:!0,sources:["État locatif"],exampleValues:["A-012","B-025"]},{fieldName:"Surface vacante",fieldNameEn:"Vacant Area",description:"Surface GLA vacante par lot",dataType:"area",required:!0,sources:["État locatif"],exampleValues:["250 m²","85 m²"]},{fieldName:"Date de libération",fieldNameEn:"Vacancy Start Date",description:"Date de départ du dernier locataire",dataType:"date",required:!0,sources:["Gestion locative"],exampleValues:["15/03/2024"]},{fieldName:"ERV",fieldNameEn:"ERV",description:"Valeur locative estimée du lot",dataType:"currency",required:!0,sources:["Expertise","Benchmark"],exampleValues:["45,000 EUR/an"]}],sections:[{id:"vacancy_summary",title:"Synthèse Vacance",titleEn:"Vacancy Summary",shortTitle:"Synthèse",description:"KPIs de vacance",type:"kpi_dashboard",chartTypes:["gauge"],kpis:["PHYSICAL_VACANCY","EPRA_VACANCY","VACANCY_COST"]},{id:"vacant_units_list",title:"Liste des Lots Vacants",titleEn:"Vacant Units List",shortTitle:"Lots",description:"Détail de chaque lot vacant",type:"table",columns:["Lot","Surface","ERV","Durée","Cause"]},{id:"vacancy_map",title:"Cartographie Vacance",titleEn:"Vacancy Map",shortTitle:"Carte",description:"Localisation des lots vacants",type:"map"},{id:"vacancy_trend",title:"Évolution de la Vacance",titleEn:"Vacancy Trend",shortTitle:"Tendance",description:"Historique de la vacance",type:"trend",chartTypes:["line","area"]},{id:"pipeline",title:"Pipeline Commercial",titleEn:"Leasing Pipeline",shortTitle:"Pipeline",description:"Prospects et négociations en cours",type:"table",columns:["Lot","Prospect","Statut","Loyer Cible"]},{id:"recommendations",title:"Stratégie de Commercialisation",titleEn:"Leasing Strategy",shortTitle:"Stratégie",description:"Actions recommandées par lot",type:"recommendations",aiPowered:!0}],useCases:["Suivi de la commercialisation","Reporting vacance mensuel","Stratégie asset management","Business plan actif"],limitations:["Les ERV sont des estimations","Le pipeline dépend de la mise à jour par les équipes leasing"],relatedReports:["RENT_ROLL","LEASE_EXPIRY","TENANT_PERFORMANCE"],bestPractices:["Analyser les causes de vacance","Benchmarker les loyers demandés","Suivre le pipeline hebdomadairement"],tags:["vacancy","leasing","commercialization"],popular:!0,new:!1,aiPowered:!0,premium:!1},Gr={id:"merchandising-mix",code:"MERCHANDISING_MIX",name:"Merchandising Mix",nameEn:"Merchandising Mix",shortName:"Mix",category:"leasing",subcategory:"tenant_mix",icon:"Grid3X3",color:"#F97316",description:"Analyse de la répartition des activités et optimisation du mix commercial",longDescription:`L'analyse du Merchandising Mix évalue l'équilibre des activités commerciales du centre.

**Dimensions analysées :**
- Répartition par catégorie CNCC/ICSC
- Équilibre surfaces/loyers/CA
- Positionnement prix (entrée/milieu/haut de gamme)
- Couverture des besoins de la zone
- Comparaison aux best practices

**Optimisations suggérées :**
- Activités sous-représentées
- Synergies entre enseignes
- Flux de circulation`,longDescriptionEn:"Merchandising Mix analysis evaluates the balance of commercial activities.",industryStandards:[q.ICSC,q.CNCC],estimatedPages:{min:8,max:15},complexity:"standard",updateFrequency:"quarterly",targetAudience:["Leasing Managers","Asset Managers","Directeur de Centre","Marketing"],kpis:[{code:"ACTIVITY_DIVERSITY",name:"Indice de Diversité",nameEn:"Diversity Index",shortName:"Diversité",formula:"Herfindahl-Hirschman Index inversé",unit:"score",description:"Mesure de la diversité des activités",benchmark:{excellent:80,good:70,acceptable:60,poor:50},frequency:"quarterly",trend:"higher_better",category:"commercial"},{code:"ANCHOR_RATIO",name:"Ratio Locomotives",nameEn:"Anchor Ratio",shortName:"Ancres",formula:"(Surface Locomotives / GLA Totale) × 100",unit:"%",description:"Part des surfaces occupées par les locomotives",benchmark:{excellent:30,good:25,acceptable:20,poor:15},frequency:"quarterly",trend:"target",targetValue:25,category:"commercial"},{code:"FASHION_RATIO",name:"Part Mode & Équipement",nameEn:"Fashion Ratio",shortName:"Mode",formula:"(Surface Mode / GLA) × 100",unit:"%",description:"Part des surfaces dédiées à la mode",frequency:"quarterly",trend:"target",targetValue:35,category:"commercial"},{code:"FNB_RATIO",name:"Part Restauration",nameEn:"F&B Ratio",shortName:"F&B",formula:"(Surface F&B / GLA) × 100",unit:"%",description:"Part des surfaces dédiées à la restauration",benchmark:{excellent:15,good:12,acceptable:8,poor:5},frequency:"quarterly",trend:"higher_better",category:"commercial"},{code:"LEISURE_RATIO",name:"Part Loisirs & Services",nameEn:"Leisure & Services Ratio",shortName:"Loisirs",formula:"(Surface Loisirs / GLA) × 100",unit:"%",description:"Part des surfaces loisirs et services",frequency:"quarterly",trend:"target",category:"commercial"}],dataRequirements:[{fieldName:"Activité CNCC",fieldNameEn:"CNCC Activity",description:"Code activité selon nomenclature CNCC",dataType:"enum",required:!0,sources:["État locatif"],exampleValues:["1.1 Mode Femme","5.2 Restauration Assise"]},{fieldName:"Type d'enseigne",fieldNameEn:"Tenant Type",description:"Classification (locomotive, moyenne surface, boutique)",dataType:"enum",required:!0,sources:["Gestion locative"],exampleValues:["Locomotive","MSS","Boutique"]},{fieldName:"Positionnement prix",fieldNameEn:"Price Positioning",description:"Gamme de prix de l'enseigne",dataType:"enum",required:!1,sources:["Analyse marketing"],exampleValues:["Entrée de gamme","Milieu de gamme","Premium"]}],sections:[{id:"mix_overview",title:"Vue d'Ensemble du Mix",titleEn:"Mix Overview",shortTitle:"Vue",description:"Répartition globale des activités",type:"kpi_dashboard",chartTypes:["treemap","pie"]},{id:"activity_breakdown",title:"Détail par Activité",titleEn:"Activity Breakdown",shortTitle:"Activités",description:"Surface, loyer et CA par catégorie",type:"table",columns:["Activité","Surface","% Surface","Loyer","% Loyer","CA"]},{id:"benchmark_comparison",title:"Comparaison Best Practices",titleEn:"Best Practice Comparison",shortTitle:"Benchmark",description:"Position vs standards du marché",type:"comparison",chartTypes:["radar","bar"]},{id:"tenant_positioning",title:"Positionnement Enseignes",titleEn:"Tenant Positioning",shortTitle:"Position.",description:"Carte de positionnement prix/surface",type:"chart",chartTypes:["scatter"]},{id:"gaps_analysis",title:"Analyse des Lacunes",titleEn:"Gaps Analysis",shortTitle:"Lacunes",description:"Activités manquantes ou sous-représentées",type:"analysis",aiPowered:!0},{id:"recommendations",title:"Stratégie de Mix",titleEn:"Mix Strategy",shortTitle:"Stratégie",description:"Recommandations d'évolution",type:"recommendations",aiPowered:!0}],useCases:["Stratégie de commercialisation","Repositionnement d'actif","Due diligence acquisition","Business plan"],limitations:["La nomenclature CNCC peut différer d'un centre à l'autre","Les benchmarks varient selon le format de centre"],relatedReports:["RENT_ROLL","TENANT_PERFORMANCE","VACANCY_ANALYSIS"],bestPractices:["Utiliser la nomenclature CNCC standard","Comparer à des centres de même typologie","Prendre en compte la zone de chalandise"],tags:["merchandising","mix","tenant","strategy"],popular:!0,new:!1,aiPowered:!0,premium:!1},Vr={id:"budget-vs-actual",code:"BUDGET_VS_ACTUAL",name:"Budget vs Réel",nameEn:"Budget vs Actual",shortName:"Budget",category:"financial",subcategory:"budgeting",icon:"Calculator",color:"#EC4899",description:"Analyse des écarts entre budget et réalisé",longDescription:`Le rapport Budget vs Réel analyse les écarts de performance par rapport aux prévisions.

**Lignes budgétaires suivies :**
- Revenus locatifs (LMG, loyers variables, autres revenus)
- Charges récupérables et non récupérables
- CAPEX et travaux
- Frais de gestion

**Analyses d'écarts :**
- Écart prix / écart volume
- Écarts favorables / défavorables
- Projection fin d'exercice (forecast)`,longDescriptionEn:"Budget vs Actual report analyzes variances between budget and actual performance.",industryStandards:[q.EPRA],estimatedPages:{min:8,max:15},complexity:"standard",updateFrequency:"monthly",targetAudience:["Contrôleurs de gestion","Asset Managers","Direction Financière","Property Managers"],kpis:[{code:"REVENUE_VARIANCE",name:"Écart Revenus",nameEn:"Revenue Variance",shortName:"Écart Rev.",formula:"((Réel - Budget) / Budget) × 100",unit:"%",description:"Écart des revenus vs budget",benchmark:{excellent:2,good:0,acceptable:-2,poor:-5},frequency:"monthly",trend:"higher_better",category:"financial"},{code:"OPEX_VARIANCE",name:"Écart Charges",nameEn:"Operating Expense Variance",shortName:"Écart Chg.",formula:"((Réel - Budget) / Budget) × 100",unit:"%",description:"Écart des charges vs budget (négatif = favorable)",benchmark:{excellent:-5,good:0,acceptable:5,poor:10},frequency:"monthly",trend:"lower_better",category:"financial"},{code:"NOI_VARIANCE",name:"Écart NOI",nameEn:"NOI Variance",shortName:"Écart NOI",formula:"((NOI Réel - NOI Budget) / NOI Budget) × 100",unit:"%",description:"Écart du NOI vs budget",benchmark:{excellent:3,good:0,acceptable:-3,poor:-8},frequency:"monthly",trend:"higher_better",category:"financial"},{code:"FORECAST_ACCURACY",name:"Précision du Forecast",nameEn:"Forecast Accuracy",shortName:"Précision",formula:"100 - |Écart Forecast vs Réel|",unit:"%",description:"Précision des prévisions précédentes",benchmark:{excellent:98,good:95,acceptable:90,poor:85},frequency:"monthly",trend:"higher_better",category:"financial"}],dataRequirements:[{fieldName:"Budget par ligne",fieldNameEn:"Budget by Line",description:"Budget détaillé par poste comptable",dataType:"currency",required:!0,sources:["Budget prévisionnel"],exampleValues:["Loyers: 12,500,000 EUR","Charges: 2,800,000 EUR"]},{fieldName:"Réalisé par ligne",fieldNameEn:"Actual by Line",description:"Réalisé comptable par poste",dataType:"currency",required:!0,sources:["Comptabilité"],exampleValues:["Loyers: 12,750,000 EUR","Charges: 2,650,000 EUR"]},{fieldName:"Forecast révisé",fieldNameEn:"Revised Forecast",description:"Prévision mise à jour",dataType:"currency",required:!1,sources:["Controlling"],exampleValues:["NOI forecast: 10,200,000 EUR"]}],sections:[{id:"variance_summary",title:"Synthèse des Écarts",titleEn:"Variance Summary",shortTitle:"Synthèse",description:"Vue d'ensemble des écarts budget",type:"kpi_dashboard",chartTypes:["gauge"],kpis:["REVENUE_VARIANCE","OPEX_VARIANCE","NOI_VARIANCE"]},{id:"waterfall",title:"Waterfall Budget → Réel",titleEn:"Budget to Actual Waterfall",shortTitle:"Waterfall",description:"Décomposition des écarts",type:"chart",chartTypes:["waterfall"]},{id:"revenue_detail",title:"Détail Revenus",titleEn:"Revenue Detail",shortTitle:"Revenus",description:"Écarts revenus par catégorie",type:"table",columns:["Poste","Budget","Réel","Écart €","Écart %"]},{id:"expense_detail",title:"Détail Charges",titleEn:"Expense Detail",shortTitle:"Charges",description:"Écarts charges par catégorie",type:"table",columns:["Poste","Budget","Réel","Écart €","Écart %"]},{id:"trend_analysis",title:"Évolution Mensuelle",titleEn:"Monthly Trend",shortTitle:"Tendance",description:"Évolution des écarts dans le temps",type:"trend",chartTypes:["line"]},{id:"forecast",title:"Projection Fin d'Exercice",titleEn:"Year-End Forecast",shortTitle:"Forecast",description:"Prévision actualisée",type:"analysis",chartTypes:["bar"],aiPowered:!0}],useCases:["Reporting mensuel de gestion","Revues de performance","Préparation des closings","Communication investisseurs"],limitations:["La qualité dépend de la comptabilité analytique","Certains écarts sont timing (provisions)"],relatedReports:["NOI_ANALYSIS","ASSET_PERFORMANCE","CASH_FLOW"],bestPractices:["Réconcilier avec la comptabilité","Documenter les écarts significatifs","Actualiser le forecast mensuellement"],tags:["budget","variance","financial","controlling"],popular:!0,new:!1,aiPowered:!0,premium:!1},Ur={id:"cash-flow",code:"CASH_FLOW",name:"Tableau de Flux de Trésorerie",nameEn:"Cash Flow Statement",shortName:"Cash Flow",category:"financial",subcategory:"treasury",icon:"Wallet",color:"#EC4899",description:"Analyse des flux de trésorerie et position de liquidité",longDescription:`Le Tableau de Flux de Trésorerie analyse les mouvements de trésorerie opérationnels.

**Flux analysés :**
- Encaissements locatifs
- Décaissements (charges, travaux, impôts)
- Flux d'investissement (CAPEX)
- Service de la dette

**Indicateurs de liquidité :**
- Position de trésorerie
- DSO (délai de paiement locataires)
- DPO (délai de paiement fournisseurs)
- Taux de recouvrement`,longDescriptionEn:"Cash Flow Statement analyzes operational cash movements.",industryStandards:[q.EPRA],estimatedPages:{min:6,max:12},complexity:"standard",updateFrequency:"monthly",targetAudience:["Direction Financière","Trésorerie","Asset Managers","Investisseurs"],kpis:[{code:"OPERATING_CASH_FLOW",name:"Cash Flow Opérationnel",nameEn:"Operating Cash Flow",shortName:"OCF",formula:"Encaissements - Décaissements Opérationnels",unit:"EUR",description:"Flux de trésorerie d'exploitation",frequency:"monthly",trend:"higher_better",category:"financial"},{code:"COLLECTION_RATE",name:"Taux de Recouvrement",nameEn:"Collection Rate",shortName:"Recouv.",formula:"(Loyers Encaissés / Loyers Facturés) × 100",unit:"%",description:"Pourcentage des loyers encaissés",benchmark:{excellent:99,good:97,acceptable:95,poor:90},frequency:"monthly",trend:"higher_better",category:"financial"},{code:"DSO",name:"DSO (Days Sales Outstanding)",nameEn:"Days Sales Outstanding",shortName:"DSO",formula:"(Créances Locataires / CA Annuel) × 365",unit:"days",description:"Délai moyen de paiement des locataires",benchmark:{excellent:15,good:30,acceptable:45,poor:60},frequency:"monthly",trend:"lower_better",category:"financial"},{code:"CASH_POSITION",name:"Position de Trésorerie",nameEn:"Cash Position",shortName:"Tréso.",formula:"Solde comptes bancaires",unit:"EUR",description:"Trésorerie disponible",frequency:"daily",trend:"higher_better",category:"financial"},{code:"ARREARS_RATE",name:"Taux d'Impayés",nameEn:"Arrears Rate",shortName:"Impayés",formula:"(Impayés > 30j / Loyers Annuels) × 100",unit:"%",description:"Part des loyers en retard de plus de 30 jours",benchmark:{excellent:1,good:2,acceptable:4,poor:8},frequency:"monthly",trend:"lower_better",category:"risk"}],dataRequirements:[{fieldName:"Encaissements",fieldNameEn:"Collections",description:"Détail des encaissements par nature",dataType:"currency",required:!0,sources:["Comptabilité","Relevés bancaires"],exampleValues:["Loyers: 1,250,000 EUR","Charges: 180,000 EUR"]},{fieldName:"Décaissements",fieldNameEn:"Disbursements",description:"Détail des décaissements par nature",dataType:"currency",required:!0,sources:["Comptabilité","Relevés bancaires"],exampleValues:["Fournisseurs: 280,000 EUR","Salaires: 95,000 EUR"]},{fieldName:"Créances locataires",fieldNameEn:"Tenant Receivables",description:"Balance âgée des créances",dataType:"currency",required:!0,sources:["Comptabilité auxiliaire"],exampleValues:["< 30j: 150,000 EUR","30-60j: 25,000 EUR"]}],sections:[{id:"cash_summary",title:"Synthèse Trésorerie",titleEn:"Cash Summary",shortTitle:"Synthèse",description:"Position et indicateurs clés",type:"kpi_dashboard",chartTypes:["gauge"],kpis:["CASH_POSITION","COLLECTION_RATE","DSO"]},{id:"cash_flow_statement",title:"Tableau des Flux",titleEn:"Cash Flow Statement",shortTitle:"Flux",description:"Détail des flux de trésorerie",type:"chart",chartTypes:["waterfall"]},{id:"collection_analysis",title:"Analyse Recouvrement",titleEn:"Collection Analysis",shortTitle:"Recouv.",description:"Performance du recouvrement",type:"analysis",chartTypes:["bar","line"],kpis:["COLLECTION_RATE","ARREARS_RATE"]},{id:"aged_balance",title:"Balance Âgée",titleEn:"Aged Balance",shortTitle:"Balance",description:"Créances par ancienneté",type:"table",columns:["Locataire","< 30j","30-60j","60-90j","> 90j","Total"]},{id:"cash_forecast",title:"Prévision de Trésorerie",titleEn:"Cash Forecast",shortTitle:"Prévision",description:"Projection des flux à venir",type:"trend",chartTypes:["line","area"],aiPowered:!0}],useCases:["Gestion de trésorerie","Suivi du recouvrement","Prévision de liquidité","Reporting investisseurs"],limitations:["Les prévisions sont basées sur l'historique","Certains flux exceptionnels ne sont pas prévisibles"],relatedReports:["NOI_ANALYSIS","BUDGET_VS_ACTUAL","TENANT_PERFORMANCE"],bestPractices:["Suivre les impayés hebdomadairement","Anticiper les gros décaissements","Maintenir une réserve de liquidité"],tags:["cash flow","treasury","collection","financial"],popular:!0,new:!1,aiPowered:!0,premium:!1},Wr={id:"esg-report",code:"ESG_REPORT",name:"Rapport ESG",nameEn:"ESG Report",shortName:"ESG",category:"sustainability",subcategory:"esg",icon:"Leaf",color:"#22C55E",description:"Performance environnementale, sociale et de gouvernance",longDescription:`Le Rapport ESG mesure la performance extra-financière du centre commercial selon les critères GRESB et réglementaires.

**Dimensions E (Environnement) :**
- Consommations énergétiques et émissions CO2
- Certifications environnementales (BREEAM, HQE)
- Gestion des déchets et économie circulaire
- Biodiversité et espaces verts

**Dimensions S (Social) :**
- Accessibilité PMR
- Satisfaction visiteurs et locataires
- Engagement local et solidarité
- Santé et sécurité

**Dimensions G (Gouvernance) :**
- Éthique et conformité
- Transparence reporting
- Gestion des risques`,longDescriptionEn:"ESG Report measures extra-financial performance according to GRESB and regulatory criteria.",industryStandards:[q.GRESB,q.BREEAM],estimatedPages:{min:15,max:30},complexity:"advanced",updateFrequency:"annually",targetAudience:["Direction RSE","Investisseurs","Asset Managers","Régulateurs"],kpis:[{code:"ENERGY_INTENSITY",name:"Intensité Énergétique",nameEn:"Energy Intensity",shortName:"kWh/m²",formula:"Consommation Énergie / Surface",unit:"EUR/m2",description:"Consommation d'énergie par m²",benchmark:{excellent:100,good:150,acceptable:200,poor:300},frequency:"monthly",trend:"lower_better",category:"sustainability"},{code:"CARBON_INTENSITY",name:"Intensité Carbone",nameEn:"Carbon Intensity",shortName:"kgCO2/m²",formula:"Émissions CO2 / Surface",unit:"EUR/m2",description:"Émissions de CO2 par m²",benchmark:{excellent:20,good:35,acceptable:50,poor:80},frequency:"annually",trend:"lower_better",category:"sustainability"},{code:"WASTE_RECYCLING_RATE",name:"Taux de Recyclage",nameEn:"Waste Recycling Rate",shortName:"Recyclage",formula:"(Déchets Recyclés / Déchets Totaux) × 100",unit:"%",description:"Part des déchets recyclés ou valorisés",benchmark:{excellent:70,good:50,acceptable:35,poor:20},frequency:"monthly",trend:"higher_better",category:"sustainability"},{code:"GREEN_CERTIFICATION",name:"Score Certification",nameEn:"Green Certification Score",shortName:"Certif.",formula:"Score BREEAM ou équivalent",unit:"score",description:"Niveau de certification environnementale",frequency:"annually",trend:"higher_better",category:"sustainability"},{code:"GRESB_SCORE",name:"Score GRESB",nameEn:"GRESB Score",shortName:"GRESB",formula:"Score benchmark GRESB",unit:"score",description:"Score au benchmark GRESB",benchmark:{excellent:80,good:65,acceptable:50,poor:35},frequency:"annually",trend:"higher_better",category:"sustainability",standardReference:q.GRESB}],dataRequirements:[{fieldName:"Consommation énergie",fieldNameEn:"Energy Consumption",description:"Relevés de consommation par énergie",dataType:"numeric",required:!0,sources:["Compteurs","Factures énergéticiens"],exampleValues:["2,500,000 kWh/an électricité","500,000 kWh/an gaz"]},{fieldName:"Émissions CO2",fieldNameEn:"CO2 Emissions",description:"Bilan carbone scopes 1, 2, 3",dataType:"numeric",required:!0,sources:["Bilan carbone","Facteurs d'émission"],exampleValues:["1,200 tCO2e/an"]},{fieldName:"Données déchets",fieldNameEn:"Waste Data",description:"Volumes de déchets par filière",dataType:"numeric",required:!0,sources:["Prestataires déchets"],exampleValues:["800 tonnes/an","45% recyclage"]},{fieldName:"Certifications",fieldNameEn:"Certifications",description:"Certifications environnementales obtenues",dataType:"text",required:!1,sources:["Certificats"],exampleValues:["BREEAM Very Good","HQE Excellent"]}],sections:[{id:"esg_summary",title:"Synthèse ESG",titleEn:"ESG Summary",shortTitle:"Synthèse",description:"Vue d'ensemble des performances ESG",type:"kpi_dashboard",chartTypes:["radar","gauge"],kpis:["ENERGY_INTENSITY","CARBON_INTENSITY","GRESB_SCORE"]},{id:"environmental",title:"Performance Environnementale",titleEn:"Environmental Performance",shortTitle:"Environ.",description:"Énergie, carbone, déchets, eau",type:"analysis",chartTypes:["bar","line"],kpis:["ENERGY_INTENSITY","CARBON_INTENSITY","WASTE_RECYCLING_RATE"]},{id:"social",title:"Performance Sociale",titleEn:"Social Performance",shortTitle:"Social",description:"Accessibilité, satisfaction, emploi",type:"analysis",chartTypes:["bar","pie"]},{id:"governance",title:"Gouvernance",titleEn:"Governance",shortTitle:"Gouv.",description:"Conformité, éthique, transparence",type:"analysis"},{id:"certifications",title:"Certifications & Labels",titleEn:"Certifications & Labels",shortTitle:"Certif.",description:"État des certifications",type:"table",columns:["Certification","Niveau","Date","Validité"]},{id:"action_plan",title:"Plan d'Actions ESG",titleEn:"ESG Action Plan",shortTitle:"Actions",description:"Feuille de route amélioration",type:"recommendations",aiPowered:!0}],useCases:["Reporting SFDR/Taxonomie","Benchmark GRESB","Communication investisseurs","Stratégie RSE","Certification environnementale"],limitations:["Certaines données scope 3 sont estimées","Les benchmarks varient selon les sources"],relatedReports:["ASSET_PERFORMANCE","ENERGY_CONSUMPTION"],bestPractices:["Collecter les données mensuellement","Utiliser les facteurs d'émission officiels","Documenter la méthodologie"],tags:["ESG","sustainability","GRESB","carbon","environment"],popular:!0,new:!0,aiPowered:!0,premium:!0},Hr={id:"due-diligence",code:"DUE_DILIGENCE",name:"Due Diligence Acquisition",nameEn:"Acquisition Due Diligence",shortName:"Due Dil.",category:"investment",subcategory:"acquisition",icon:"Search",color:"#06B6D4",description:"Rapport d'audit complet pour acquisition d'actif",longDescription:`Le rapport de Due Diligence fournit une analyse exhaustive d'un actif en vue d'une acquisition.

**Volets analysés :**
- Due diligence financière (revenus, charges, NOI)
- Due diligence locative (baux, locataires, risques)
- Due diligence technique (état du bâtiment, CAPEX)
- Due diligence juridique (titres, servitudes, litiges)
- Due diligence environnementale (sols, amiante, ESG)

**Livrables :**
- Red flags identifiés
- Ajustements de prix recommandés
- Conditions suspensives suggérées`,longDescriptionEn:"Due Diligence report provides comprehensive analysis for asset acquisition.",industryStandards:[q.RICS,q.EPRA],estimatedPages:{min:40,max:80},complexity:"expert",updateFrequency:"on_demand",targetAudience:["Comité d'investissement","Direction Générale","Banques financeuses","Conseils (avocats, auditeurs)"],kpis:[{code:"ADJUSTED_NOI",name:"NOI Ajusté",nameEn:"Adjusted NOI",shortName:"NOI Adj.",formula:"NOI Historique + Ajustements",unit:"EUR",description:"NOI retraité des éléments non récurrents",frequency:"annually",trend:"higher_better",category:"financial"},{code:"IMPLIED_CAP_RATE",name:"Taux de Capitalisation Implicite",nameEn:"Implied Cap Rate",shortName:"Cap Rate",formula:"NOI Stabilisé / Prix d'Acquisition",unit:"%",description:"Rendement initial à l'acquisition",frequency:"annually",trend:"higher_better",category:"financial"},{code:"CAPEX_REQUIREMENT",name:"CAPEX Requis",nameEn:"Required CAPEX",shortName:"CAPEX",formula:"Σ Travaux nécessaires 5 ans",unit:"EUR",description:"Investissements nécessaires",frequency:"annually",trend:"lower_better",category:"financial"},{code:"RED_FLAGS_COUNT",name:"Nombre de Red Flags",nameEn:"Red Flags Count",shortName:"Red Flags",formula:"Count(Points d'attention critiques)",unit:"number",description:"Points bloquants ou à négocier",frequency:"annually",trend:"lower_better",category:"risk"}],dataRequirements:[{fieldName:"Data room complète",fieldNameEn:"Complete Data Room",description:"Ensemble des documents de la data room",dataType:"text",required:!0,sources:["Data room vendeur"],exampleValues:["Baux","États financiers","Plans","Rapports techniques"]},{fieldName:"États financiers 3 ans",fieldNameEn:"3-Year Financials",description:"Historique financier sur 3 exercices",dataType:"currency",required:!0,sources:["Comptabilité certifiée"],exampleValues:["Bilans","Comptes de résultat","Annexes"]},{fieldName:"Rapport technique",fieldNameEn:"Technical Report",description:"Audit technique du bâtiment",dataType:"text",required:!0,sources:["Bureau d'études technique"],exampleValues:["État structure","Équipements","Plan CAPEX"]}],sections:[{id:"executive_summary",title:"Executive Summary",titleEn:"Executive Summary",shortTitle:"Summary",description:"Synthèse et recommandation d'investissement",type:"executive_summary",aiPowered:!0},{id:"investment_highlights",title:"Points Clés de l'Investissement",titleEn:"Investment Highlights",shortTitle:"Points Clés",description:"Forces et opportunités",type:"analysis"},{id:"financial_dd",title:"Due Diligence Financière",titleEn:"Financial Due Diligence",shortTitle:"Finance",description:"Analyse des revenus et charges",type:"analysis",chartTypes:["waterfall","bar"],kpis:["ADJUSTED_NOI","IMPLIED_CAP_RATE"]},{id:"leasing_dd",title:"Due Diligence Locative",titleEn:"Leasing Due Diligence",shortTitle:"Locatif",description:"Analyse des baux et locataires",type:"analysis",chartTypes:["bar","treemap"]},{id:"technical_dd",title:"Due Diligence Technique",titleEn:"Technical Due Diligence",shortTitle:"Technique",description:"État du bâtiment et CAPEX",type:"analysis",kpis:["CAPEX_REQUIREMENT"]},{id:"legal_dd",title:"Due Diligence Juridique",titleEn:"Legal Due Diligence",shortTitle:"Juridique",description:"Risques juridiques et titres",type:"analysis"},{id:"red_flags",title:"Red Flags & Risques",titleEn:"Red Flags & Risks",shortTitle:"Red Flags",description:"Points d'attention critiques",type:"analysis",kpis:["RED_FLAGS_COUNT"]},{id:"valuation",title:"Valorisation",titleEn:"Valuation",shortTitle:"Valo",description:"Analyse de la valeur",type:"analysis",chartTypes:["bar","scatter"]},{id:"recommendations",title:"Recommandations",titleEn:"Recommendations",shortTitle:"Recomm.",description:"Ajustements de prix et conditions",type:"recommendations",aiPowered:!0}],useCases:["Acquisition d'actif","Refinancement","Restructuration de dette","Reporting au comité d'investissement"],limitations:["Dépend de la qualité de la data room","Certaines vérifications nécessitent des experts tiers"],relatedReports:["ASSET_PERFORMANCE","RENT_ROLL","NOI_ANALYSIS"],bestPractices:["Constituer une équipe pluridisciplinaire","Vérifier les sources de données","Documenter tous les ajustements"],tags:["due diligence","acquisition","investment","risk"],popular:!0,new:!1,aiPowered:!0,premium:!0},$r={VACANCY_ANALYSIS:Mr,MERCHANDISING_MIX:Gr,BUDGET_VS_ACTUAL:Vr,CASH_FLOW:Ur,ESG_REPORT:Wr,DUE_DILIGENCE:Hr},zr={id:"construction-progress",code:"CONSTRUCTION_PROGRESS",name:"Suivi Avancement Chantier",nameEn:"Construction Progress Report",shortName:"Avancement",category:"project",subcategory:"construction",icon:"HardHat",color:"#84CC16",description:"Tableau de bord du suivi de l'avancement des travaux de construction ou renovation",longDescription:`Le rapport de Suivi Avancement Chantier permet de monitorer l'etat d'avancement des travaux en temps reel.

**Indicateurs suivis :**
- Avancement physique global et par lot
- Respect du planning (jalons, chemin critique)
- Suivi des retards et causes
- Productivite des equipes

**Analyses incluses :**
- Courbe en S (planifie vs realise)
- Gantt simplifie des jalons cles
- Alertes sur les ecarts
- Projection de la date de livraison

**Points de vigilance :**
- Coherence avec le planning maitre
- Impact des aleas sur la date de livraison
- Coordination entre lots`,longDescriptionEn:"The Construction Progress Report monitors the status of construction works in real-time.",industryStandards:[],estimatedPages:{min:8,max:15},complexity:"standard",updateFrequency:"weekly",targetAudience:["Chef de Projet","Direction de Programme","Maitrise d'Ouvrage","Asset Managers","Investisseurs"],kpis:[{code:"PHYSICAL_PROGRESS",name:"Avancement Physique",nameEn:"Physical Progress",shortName:"Avancement",formula:"(Travaux Realises / Travaux Totaux) x 100",unit:"%",description:"Pourcentage d'avancement physique du chantier",benchmark:{excellent:100,good:95,acceptable:85,poor:70},frequency:"weekly",trend:"higher_better",category:"operational"},{code:"SCHEDULE_VARIANCE",name:"Ecart Planning",nameEn:"Schedule Variance",shortName:"Ecart",formula:"Date Prevue - Date Reelle (en jours)",unit:"days",description:"Ecart entre le planning prevu et l'avancement reel",benchmark:{excellent:0,good:7,acceptable:14,poor:30},frequency:"weekly",trend:"lower_better",category:"operational"},{code:"MILESTONES_ON_TIME",name:"Jalons Respectes",nameEn:"Milestones On Time",shortName:"Jalons OK",formula:"(Jalons Atteints a Temps / Jalons Totaux) x 100",unit:"%",description:"Pourcentage de jalons atteints dans les delais",benchmark:{excellent:100,good:90,acceptable:80,poor:60},frequency:"monthly",trend:"higher_better",category:"operational"},{code:"DELAY_DAYS",name:"Retard Cumule",nameEn:"Cumulative Delay",shortName:"Retard",formula:"Somme des jours de retard",unit:"days",description:"Nombre de jours de retard cumule sur le projet",benchmark:{excellent:0,good:15,acceptable:30,poor:60},frequency:"weekly",trend:"lower_better",category:"risk"},{code:"LOTS_COMPLETED",name:"Lots Termines",nameEn:"Completed Lots",shortName:"Lots OK",formula:"Nombre de lots livres / Nombre total de lots",unit:"%",description:"Pourcentage de lots de travaux termines",frequency:"weekly",trend:"higher_better",category:"operational"}],dataRequirements:[{fieldName:"Planning maitre",fieldNameEn:"Master Schedule",description:"Planning de reference du projet",dataType:"date",required:!0,sources:["MS Project","Primavera","Excel"],exampleValues:["Gantt detaille"]},{fieldName:"Avancement par lot",fieldNameEn:"Progress by Lot",description:"Pourcentage d'avancement de chaque lot",dataType:"percentage",required:!0,sources:["Rapports OPC","Reunions chantier"],exampleValues:["Gros oeuvre: 85%","CVC: 45%"]},{fieldName:"Comptes-rendus chantier",fieldNameEn:"Site Meeting Minutes",description:"PV des reunions de chantier",dataType:"text",required:!0,sources:["OPC","MOE"],exampleValues:["CR hebdomadaire"]}],sections:[{id:"progress_summary",title:"Synthese Avancement",titleEn:"Progress Summary",shortTitle:"Synthese",description:"Vue d'ensemble de l'avancement du projet",type:"kpi_dashboard",chartTypes:["gauge","bar"],kpis:["PHYSICAL_PROGRESS","SCHEDULE_VARIANCE","MILESTONES_ON_TIME"]},{id:"s_curve",title:"Courbe en S",titleEn:"S-Curve",shortTitle:"Courbe S",description:"Comparaison planifie vs realise",type:"chart",chartTypes:["line","area"]},{id:"lot_progress",title:"Avancement par Lot",titleEn:"Progress by Lot",shortTitle:"Par Lot",description:"Detail de l'avancement de chaque lot",type:"table",columns:["Lot","Entreprise","Prevu","Realise","Ecart"]},{id:"milestones",title:"Jalons Cles",titleEn:"Key Milestones",shortTitle:"Jalons",description:"Etat des jalons du projet",type:"chart",chartTypes:["bar"],kpis:["MILESTONES_ON_TIME"]},{id:"delays_analysis",title:"Analyse des Retards",titleEn:"Delay Analysis",shortTitle:"Retards",description:"Causes et impacts des retards",type:"analysis",chartTypes:["bar","pie"],kpis:["DELAY_DAYS"]},{id:"recommendations",title:"Actions Correctives",titleEn:"Corrective Actions",shortTitle:"Actions",description:"Plan de rattrapage et recommandations",type:"recommendations",aiPowered:!0}],useCases:["Reporting hebdomadaire chantier","Comite de pilotage projet","Information investisseurs","Coordination MOE/MOA","Anticipation des livraisons"],limitations:["Depend de la fiabilite des pointages","Les aleas meteo ne sont pas toujours previsibles","Necessite une mise a jour reguliere"],relatedReports:["BUDGET_TRACKING","MOBILIZATION_STATUS","HANDOVER_CHECKLIST"],bestPractices:["Mettre a jour l'avancement chaque semaine","Documenter les causes de retard","Anticiper les impacts sur les jalons suivants"],tags:["construction","avancement","planning","chantier","projet"],popular:!0,new:!0,aiPowered:!0,premium:!1},Yr={id:"budget-tracking",code:"BUDGET_TRACKING",name:"Suivi Budgetaire Travaux",nameEn:"Construction Budget Tracking",shortName:"Budget Travaux",category:"project",subcategory:"financial",icon:"Wallet",color:"#84CC16",description:"Suivi financier detaille du budget de construction et des engagements",longDescription:`Le rapport de Suivi Budgetaire Travaux permet de controler les depenses de construction en temps reel.

**Elements suivis :**
- Budget initial et revisions
- Engagements (marches signes)
- Facturations et paiements
- Reste a facturer et reste a payer
- Provisions pour aleas

**Analyses incluses :**
- Comparaison budget vs engage vs facture
- Projection du cout final (EAC)
- Suivi des avenants et TMA
- Courbe de tresorerie`,longDescriptionEn:"The Construction Budget Tracking report monitors construction expenses in real-time.",industryStandards:[],estimatedPages:{min:10,max:20},complexity:"advanced",updateFrequency:"monthly",targetAudience:["Chef de Projet","Direction Financiere","Controleur de Gestion","Direction de Programme","Investisseurs"],kpis:[{code:"BUDGET_VARIANCE",name:"Ecart Budget",nameEn:"Budget Variance",shortName:"Ecart",formula:"((Cout Estime Final - Budget Initial) / Budget Initial) x 100",unit:"%",description:"Ecart entre le cout final estime et le budget initial",benchmark:{excellent:0,good:3,acceptable:5,poor:10},frequency:"monthly",trend:"lower_better",category:"financial"},{code:"COMMITMENT_RATE",name:"Taux d'Engagement",nameEn:"Commitment Rate",shortName:"Engage",formula:"(Marches Signes / Budget Total) x 100",unit:"%",description:"Pourcentage du budget engage en marches",frequency:"monthly",trend:"target",targetValue:100,category:"financial"},{code:"BILLING_RATE",name:"Taux de Facturation",nameEn:"Billing Rate",shortName:"Facture",formula:"(Montant Facture / Montant Engage) x 100",unit:"%",description:"Pourcentage des engagements factures",frequency:"monthly",trend:"higher_better",category:"financial"},{code:"CHANGE_ORDERS_PCT",name:"Taux d'Avenants",nameEn:"Change Orders Rate",shortName:"Avenants",formula:"(Montant Avenants / Budget Initial) x 100",unit:"%",description:"Part des avenants dans le budget",benchmark:{excellent:3,good:5,acceptable:8,poor:15},frequency:"monthly",trend:"lower_better",category:"risk"},{code:"EAC",name:"Cout Final Estime (EAC)",nameEn:"Estimate at Completion",shortName:"EAC",formula:"Engage + Reste a Engager + Provisions",unit:"EUR",description:"Estimation du cout total a l'achevement",frequency:"monthly",trend:"lower_better",category:"financial"},{code:"CONTINGENCY_USED",name:"Provisions Utilisees",nameEn:"Contingency Used",shortName:"Provisions",formula:"(Provisions Consommees / Provisions Initiales) x 100",unit:"%",description:"Part des provisions pour aleas consommees",benchmark:{excellent:50,good:70,acceptable:90,poor:100},frequency:"monthly",trend:"lower_better",category:"risk"}],dataRequirements:[{fieldName:"Budget initial",fieldNameEn:"Initial Budget",description:"Budget de reference approuve",dataType:"currency",required:!0,sources:["Business plan","APS"],exampleValues:["45,000,000 EUR"]},{fieldName:"Marches signes",fieldNameEn:"Signed Contracts",description:"Liste des marches et montants",dataType:"currency",required:!0,sources:["Direction Juridique","Achats"],exampleValues:["38,500,000 EUR"]},{fieldName:"Factures",fieldNameEn:"Invoices",description:"Factures recues et validees",dataType:"currency",required:!0,sources:["Comptabilite"],exampleValues:["22,300,000 EUR"]},{fieldName:"Avenants",fieldNameEn:"Change Orders",description:"Liste des travaux supplementaires",dataType:"currency",required:!0,sources:["MOE","Chef de projet"],exampleValues:["1,850,000 EUR"]}],sections:[{id:"budget_summary",title:"Synthese Budgetaire",titleEn:"Budget Summary",shortTitle:"Synthese",description:"Vue d'ensemble du budget travaux",type:"kpi_dashboard",chartTypes:["gauge","bar"],kpis:["BUDGET_VARIANCE","EAC","COMMITMENT_RATE"]},{id:"waterfall",title:"Evolution du Budget",titleEn:"Budget Evolution",shortTitle:"Waterfall",description:"Du budget initial au cout final estime",type:"chart",chartTypes:["waterfall"]},{id:"lot_detail",title:"Detail par Lot",titleEn:"Detail by Lot",shortTitle:"Par Lot",description:"Budget, engage et facture par lot",type:"table",columns:["Lot","Budget","Engage","Facture","RAP","Ecart"]},{id:"change_orders",title:"Suivi des Avenants",titleEn:"Change Orders Tracking",shortTitle:"Avenants",description:"Liste et analyse des travaux supplementaires",type:"analysis",chartTypes:["bar","pie"],kpis:["CHANGE_ORDERS_PCT"]},{id:"cash_flow",title:"Courbe de Tresorerie",titleEn:"Cash Flow Curve",shortTitle:"Tresorerie",description:"Projection des decaissements",type:"trend",chartTypes:["line","area"]},{id:"risk_analysis",title:"Analyse des Risques",titleEn:"Risk Analysis",shortTitle:"Risques",description:"Points de vigilance financiers",type:"recommendations",aiPowered:!0,kpis:["CONTINGENCY_USED"]}],useCases:["Reporting financier mensuel","Comite d'investissement","Suivi des engagements","Negociation avec les entreprises","Projection de tresorerie"],limitations:["Les provisions sont des estimations","Les avenants peuvent survenir tardivement","Depend de la qualite du suivi comptable"],relatedReports:["CONSTRUCTION_PROGRESS","CHANGE_ORDER_ANALYSIS","CASH_FLOW"],bestPractices:["Actualiser le cout final estime mensuellement","Documenter chaque avenant","Prevoir des provisions adequates"],tags:["budget","travaux","finances","construction","projet"],popular:!0,new:!0,aiPowered:!0,premium:!1},Kr={id:"mobilization-status",code:"MOBILIZATION_STATUS",name:"Etat de la Mobilisation",nameEn:"Mobilization Status Report",shortName:"Mobilisation",category:"project",subcategory:"operations",icon:"Users",color:"#84CC16",description:"Suivi de la mobilisation des equipes et ressources avant ouverture",longDescription:`Le rapport d'Etat de la Mobilisation permet de suivre la preparation operationnelle avant l'ouverture du centre.

**Axes de mobilisation :**
- Recrutement et formation des equipes
- Commercialisation (signature des baux)
- Installation des enseignes
- Mise en place des contrats d'exploitation
- Preparation marketing et communication

**Synchronisation :**
- Alignement avec l'avancement chantier
- Detection des ecarts
- Optimisation des ressources`,longDescriptionEn:"The Mobilization Status Report tracks operational preparation before center opening.",industryStandards:[],estimatedPages:{min:8,max:15},complexity:"standard",updateFrequency:"weekly",targetAudience:["Directeur de Centre (designe)","Chef de Projet","Direction des Operations","Direction Commerciale","RH"],kpis:[{code:"RECRUITMENT_PROGRESS",name:"Avancement Recrutement",nameEn:"Recruitment Progress",shortName:"Recrutement",formula:"(Postes Pourvus / Postes a Pourvoir) x 100",unit:"%",description:"Pourcentage des postes pourvus",benchmark:{excellent:100,good:90,acceptable:75,poor:50},frequency:"weekly",trend:"higher_better",category:"operational"},{code:"LEASING_PROGRESS",name:"Taux de Commercialisation",nameEn:"Leasing Progress",shortName:"Commerc.",formula:"(Surface Signee / Surface GLA) x 100",unit:"%",description:"Pourcentage de la surface commercialisee",benchmark:{excellent:95,good:85,acceptable:75,poor:60},frequency:"weekly",trend:"higher_better",category:"commercial"},{code:"TENANT_FITOUT_PROGRESS",name:"Avancement Amenagements",nameEn:"Tenant Fit-out Progress",shortName:"Amenag.",formula:"(Boutiques Pretes / Boutiques Signees) x 100",unit:"%",description:"Pourcentage des boutiques pretes a ouvrir",benchmark:{excellent:100,good:90,acceptable:80,poor:60},frequency:"weekly",trend:"higher_better",category:"operational"},{code:"CONTRACTS_SIGNED",name:"Contrats d'Exploitation",nameEn:"Operating Contracts Signed",shortName:"Contrats",formula:"(Contrats Signes / Contrats Requis) x 100",unit:"%",description:"Pourcentage des contrats d'exploitation signes",benchmark:{excellent:100,good:95,acceptable:85,poor:70},frequency:"monthly",trend:"higher_better",category:"operational"},{code:"DAYS_TO_OPENING",name:"Jours avant Ouverture",nameEn:"Days to Opening",shortName:"J-X",formula:"Date Ouverture - Date du Jour",unit:"days",description:"Nombre de jours restants avant ouverture",frequency:"daily",trend:"target",category:"operational"},{code:"MOBILIZATION_SYNC",name:"Synchronisation Mob/Chantier",nameEn:"Mobilization/Construction Sync",shortName:"Synchro",formula:"Avancement Mobilisation - Avancement Chantier",unit:"%",description:"Ecart entre mobilisation et avancement chantier",benchmark:{excellent:5,good:0,acceptable:-10,poor:-20},frequency:"weekly",trend:"target",targetValue:0,category:"risk"}],dataRequirements:[{fieldName:"Organigramme cible",fieldNameEn:"Target Organization",description:"Liste des postes a pourvoir",dataType:"text",required:!0,sources:["RH","Direction Operations"],exampleValues:["45 postes"]},{fieldName:"Etat commercial",fieldNameEn:"Leasing Status",description:"Surface signee et en negociation",dataType:"area",required:!0,sources:["Direction Commerciale"],exampleValues:["85% signe"]},{fieldName:"Planning amenagements",fieldNameEn:"Fit-out Schedule",description:"Dates de livraison boutiques",dataType:"date",required:!0,sources:["MOE","Enseignes"],exampleValues:["Planning detaille"]}],sections:[{id:"mobilization_summary",title:"Synthese Mobilisation",titleEn:"Mobilization Summary",shortTitle:"Synthese",description:"Vue d'ensemble de la preparation",type:"kpi_dashboard",chartTypes:["gauge","bar"],kpis:["RECRUITMENT_PROGRESS","LEASING_PROGRESS","TENANT_FITOUT_PROGRESS","DAYS_TO_OPENING"]},{id:"recruitment_detail",title:"Detail Recrutement",titleEn:"Recruitment Detail",shortTitle:"Recrutement",description:"Etat par poste et par vague",type:"table",columns:["Poste","Vague","Statut","Date Integration"]},{id:"leasing_status",title:"Etat Commercial",titleEn:"Leasing Status",shortTitle:"Commercial",description:"Surface signee et pipeline",type:"analysis",chartTypes:["treemap","bar"],kpis:["LEASING_PROGRESS"]},{id:"fitout_tracking",title:"Suivi Amenagements",titleEn:"Fit-out Tracking",shortTitle:"Amenagements",description:"Avancement des travaux enseignes",type:"table",columns:["Enseigne","Debut","Fin Prevue","Avancement","Alerte"]},{id:"sync_analysis",title:"Synchronisation",titleEn:"Synchronization Analysis",shortTitle:"Synchro",description:"Alignement chantier/mobilisation",type:"comparison",chartTypes:["line","bar"],kpis:["MOBILIZATION_SYNC"]},{id:"countdown",title:"Compte a Rebours",titleEn:"Countdown",shortTitle:"J-X",description:"Actions prioritaires avant ouverture",type:"recommendations",aiPowered:!0}],useCases:["Pilotage pre-ouverture","Coordination equipes projet","Reporting Direction Generale","Anticipation des risques","Communication interne"],limitations:["Les delais enseignes sont parfois imprevisibles","Depend de la coordination entre services"],relatedReports:["CONSTRUCTION_PROGRESS","HANDOVER_CHECKLIST","TENANT_FITOUT_TRACKER"],bestPractices:["Synchroniser avec le planning chantier","Anticiper les recrutements de 3-6 mois","Suivre les amenagements enseignes de pres"],tags:["mobilisation","pre-ouverture","recrutement","commercialisation"],popular:!0,new:!0,aiPowered:!0,premium:!1},Qr={id:"handover-checklist",code:"HANDOVER_CHECKLIST",name:"Checklist Handover",nameEn:"Handover Checklist Report",shortName:"Handover",category:"project",subcategory:"handover",icon:"ClipboardList",color:"#84CC16",description:"Suivi de la reception et du transfert des ouvrages vers l'exploitation",longDescription:`Le rapport Checklist Handover permet de suivre le processus de reception des travaux et le transfert vers les equipes d'exploitation.

**Phases couvertes :**
- Pre-reception (OPR)
- Reception avec reserves
- Levee des reserves
- Formation des equipes
- Mise en service des installations
- Documentation et DOE

**Points de controle :**
- Conformite aux plans et specifications
- Tests et essais de fonctionnement
- Garanties et assurances
- Documentation complete`,longDescriptionEn:"The Handover Checklist Report tracks the acceptance process and transfer to operations teams.",industryStandards:[],estimatedPages:{min:6,max:12},complexity:"standard",updateFrequency:"weekly",targetAudience:["Chef de Projet","Directeur de Centre","Direction Technique","MOE","Facility Manager"],kpis:[{code:"HANDOVER_PROGRESS",name:"Avancement Handover",nameEn:"Handover Progress",shortName:"Handover",formula:"(Points Valides / Points Totaux) x 100",unit:"%",description:"Pourcentage de la checklist handover completee",benchmark:{excellent:100,good:95,acceptable:85,poor:70},frequency:"weekly",trend:"higher_better",category:"operational"},{code:"SNAG_COUNT",name:"Reserves Ouvertes",nameEn:"Open Snags",shortName:"Reserves",formula:"Nombre de reserves non levees",unit:"number",description:"Nombre de reserves en cours",benchmark:{excellent:0,good:10,acceptable:30,poor:50},frequency:"weekly",trend:"lower_better",category:"operational"},{code:"SNAG_CLOSURE_RATE",name:"Taux de Levee",nameEn:"Snag Closure Rate",shortName:"Levee",formula:"(Reserves Levees / Reserves Totales) x 100",unit:"%",description:"Pourcentage des reserves levees",benchmark:{excellent:100,good:90,acceptable:80,poor:60},frequency:"weekly",trend:"higher_better",category:"operational"},{code:"DOE_COMPLETION",name:"DOE Complet",nameEn:"As-Built Documentation",shortName:"DOE",formula:"(Documents Recus / Documents Requis) x 100",unit:"%",description:"Pourcentage de la documentation recue",benchmark:{excellent:100,good:95,acceptable:85,poor:70},frequency:"monthly",trend:"higher_better",category:"operational"},{code:"TRAINING_COMPLETION",name:"Formations Completees",nameEn:"Training Completion",shortName:"Formations",formula:"(Formations Realisees / Formations Prevues) x 100",unit:"%",description:"Pourcentage des formations realisees",benchmark:{excellent:100,good:90,acceptable:80,poor:60},frequency:"weekly",trend:"higher_better",category:"operational"}],dataRequirements:[{fieldName:"Checklist handover",fieldNameEn:"Handover Checklist",description:"Liste des points a valider",dataType:"text",required:!0,sources:["Template projet","MOE"],exampleValues:["250 points de controle"]},{fieldName:"Liste des reserves",fieldNameEn:"Snag List",description:"Reserves identifiees en reception",dataType:"text",required:!0,sources:["OPR","MOE","MOA"],exampleValues:["45 reserves"]},{fieldName:"Planning formations",fieldNameEn:"Training Schedule",description:"Calendrier des formations",dataType:"date",required:!0,sources:["MOE","Entreprises"],exampleValues:["Planning detaille"]}],sections:[{id:"handover_summary",title:"Synthese Handover",titleEn:"Handover Summary",shortTitle:"Synthese",description:"Etat global du transfert",type:"kpi_dashboard",chartTypes:["gauge","bar"],kpis:["HANDOVER_PROGRESS","SNAG_COUNT","DOE_COMPLETION"]},{id:"checklist_status",title:"Etat de la Checklist",titleEn:"Checklist Status",shortTitle:"Checklist",description:"Detail par categorie",type:"table",columns:["Categorie","Total","Valide","En cours","Non fait"]},{id:"snag_management",title:"Gestion des Reserves",titleEn:"Snag Management",shortTitle:"Reserves",description:"Suivi des reserves par lot",type:"analysis",chartTypes:["bar","pie"],kpis:["SNAG_CLOSURE_RATE"]},{id:"documentation",title:"Documentation",titleEn:"Documentation",shortTitle:"DOE",description:"Etat des documents recus",type:"table",columns:["Document","Lot","Statut","Date Reception"]},{id:"training",title:"Formations",titleEn:"Training",shortTitle:"Formations",description:"Etat des formations realisees",type:"table",columns:["Formation","Intervenant","Date","Participants","Statut"]},{id:"action_plan",title:"Plan d'Actions",titleEn:"Action Plan",shortTitle:"Actions",description:"Actions prioritaires pour cloturer le handover",type:"recommendations",aiPowered:!0}],useCases:["Reception des travaux","Transfert vers exploitation","Suivi des garanties","Audit qualite","Archivage projet"],limitations:["Les reserves mineures peuvent etre longues a lever","Le DOE complet peut prendre plusieurs mois"],relatedReports:["CONSTRUCTION_PROGRESS","MOBILIZATION_STATUS","WARRANTY_TRACKER"],bestPractices:["Commencer le handover 3 mois avant ouverture","Impliquer les equipes exploitation tot","Documenter systematiquement les formations"],tags:["handover","reception","reserves","DOE","formation"],popular:!1,new:!0,aiPowered:!0,premium:!1},Jr={id:"project-dashboard",code:"PROJECT_DASHBOARD",name:"Tableau de Bord Projet",nameEn:"Project Dashboard",shortName:"Dashboard Projet",category:"project",subcategory:"overview",icon:"Target",color:"#84CC16",description:"Vue synthetique de l'ensemble des indicateurs cles du projet",longDescription:`Le Tableau de Bord Projet offre une vue consolidee de tous les aspects du projet de construction.

**Dimensions couvertes :**
- Avancement physique et planning
- Budget et couts
- Mobilisation et commercialisation
- Risques et alertes
- Jalons a venir

**Public cible :**
- Direction Generale
- Comite de Pilotage
- Investisseurs
- Partenaires`,longDescriptionEn:"The Project Dashboard provides a consolidated view of all project aspects.",industryStandards:[],estimatedPages:{min:4,max:8},complexity:"simple",updateFrequency:"weekly",targetAudience:["Direction Generale","Comite de Pilotage","Investisseurs","Asset Managers"],kpis:[{code:"OVERALL_PROGRESS",name:"Avancement Global",nameEn:"Overall Progress",shortName:"Avancement",formula:"Moyenne ponderee des avancements",unit:"%",description:"Avancement global du projet",benchmark:{excellent:100,good:95,acceptable:85,poor:70},frequency:"weekly",trend:"higher_better",category:"operational"},{code:"BUDGET_STATUS",name:"Situation Budgetaire",nameEn:"Budget Status",shortName:"Budget",formula:"Ecart EAC vs Budget",unit:"%",description:"Ecart entre cout final estime et budget",benchmark:{excellent:0,good:3,acceptable:5,poor:10},frequency:"monthly",trend:"lower_better",category:"financial"},{code:"SCHEDULE_STATUS",name:"Situation Planning",nameEn:"Schedule Status",shortName:"Planning",formula:"Retard cumule en jours",unit:"days",description:"Retard par rapport au planning initial",benchmark:{excellent:0,good:15,acceptable:30,poor:60},frequency:"weekly",trend:"lower_better",category:"operational"},{code:"RISK_SCORE",name:"Score Risque",nameEn:"Risk Score",shortName:"Risque",formula:"Agregation des risques identifies",unit:"score",description:"Niveau de risque global du projet",benchmark:{excellent:20,good:40,acceptable:60,poor:80},frequency:"monthly",trend:"lower_better",category:"risk"},{code:"OPENING_READINESS",name:"Maturite Ouverture",nameEn:"Opening Readiness",shortName:"Readiness",formula:"Score composite de preparation",unit:"%",description:"Niveau de preparation pour l'ouverture",benchmark:{excellent:95,good:85,acceptable:75,poor:60},frequency:"weekly",trend:"higher_better",category:"operational"}],dataRequirements:[{fieldName:"Donnees avancement",fieldNameEn:"Progress Data",description:"Avancements des differents volets",dataType:"percentage",required:!0,sources:["Rapports detailles"],exampleValues:["Chantier: 75%, Mobilisation: 60%"]},{fieldName:"Donnees budgetaires",fieldNameEn:"Budget Data",description:"Situation financiere",dataType:"currency",required:!0,sources:["Rapport budget"],exampleValues:["Budget: 45M, EAC: 46.5M"]},{fieldName:"Registre des risques",fieldNameEn:"Risk Register",description:"Liste des risques identifies",dataType:"text",required:!0,sources:["Chef de projet"],exampleValues:["12 risques actifs"]}],sections:[{id:"executive_summary",title:"Resume Executif",titleEn:"Executive Summary",shortTitle:"Resume",description:"Points cles et alertes",type:"executive_summary",aiPowered:!0},{id:"global_kpis",title:"Indicateurs Globaux",titleEn:"Global KPIs",shortTitle:"KPIs",description:"Vue synthetique des KPIs projet",type:"kpi_dashboard",chartTypes:["gauge"],kpis:["OVERALL_PROGRESS","BUDGET_STATUS","SCHEDULE_STATUS","RISK_SCORE","OPENING_READINESS"]},{id:"progress_overview",title:"Avancement par Axe",titleEn:"Progress by Area",shortTitle:"Avancement",description:"Avancement chantier, mobilisation, commercial",type:"chart",chartTypes:["radar","bar"]},{id:"key_milestones",title:"Jalons Cles",titleEn:"Key Milestones",shortTitle:"Jalons",description:"Prochaines echeances importantes",type:"table",columns:["Jalon","Date Cible","Statut","Responsable"]},{id:"top_risks",title:"Risques Majeurs",titleEn:"Top Risks",shortTitle:"Risques",description:"Les 5 risques prioritaires",type:"table",columns:["Risque","Impact","Probabilite","Score","Mitigation"]},{id:"decisions_needed",title:"Decisions Requises",titleEn:"Decisions Needed",shortTitle:"Decisions",description:"Points necessitant une decision",type:"recommendations",aiPowered:!0}],useCases:["Comite de pilotage","Reporting Direction Generale","Communication investisseurs","Revue de projet periodique"],limitations:["Vue synthetique - consulter rapports detailles pour plus d'infos","Mise a jour dependante des rapports sources"],relatedReports:["CONSTRUCTION_PROGRESS","BUDGET_TRACKING","MOBILIZATION_STATUS","HANDOVER_CHECKLIST"],bestPractices:["Mettre a jour avant chaque comite","Harmoniser les codes couleur","Prioriser les messages cles"],tags:["dashboard","projet","synthese","direction","reporting"],popular:!0,new:!0,aiPowered:!0,premium:!1},Zr={CONSTRUCTION_PROGRESS:zr,BUDGET_TRACKING:Yr,MOBILIZATION_STATUS:Kr,HANDOVER_CHECKLIST:Qr,PROJECT_DASHBOARD:Jr},Nt={...We,...$r,...Zr};function Xr(t){const r=t.toLowerCase();return Object.values(Nt).filter(s=>s.name.toLowerCase().includes(r)||s.description.toLowerCase().includes(r)||s.tags.some(l=>l.toLowerCase().includes(r)))}const ht=[{code:"COMPARISON",name:"Comparaison",nameEn:"Comparison",description:"Comparer des valeurs entre catégories",icon:"BarChart3",color:"#3B82F6"},{code:"TREND",name:"Tendance",nameEn:"Trend",description:"Visualiser l'évolution dans le temps",icon:"TrendingUp",color:"#10B981"},{code:"DISTRIBUTION",name:"Distribution",nameEn:"Distribution",description:"Montrer la répartition des données",icon:"PieChart",color:"#8B5CF6"},{code:"RELATIONSHIP",name:"Relation",nameEn:"Relationship",description:"Analyser les corrélations entre variables",icon:"GitBranch",color:"#F59E0B"},{code:"HIERARCHICAL",name:"Hiérarchique",nameEn:"Hierarchical",description:"Représenter des structures imbriquées",icon:"Layers",color:"#EC4899"},{code:"GEOGRAPHIC",name:"Géographique",nameEn:"Geographic",description:"Visualiser des données sur carte",icon:"Map",color:"#06B6D4"},{code:"KPI",name:"Indicateurs",nameEn:"KPI",description:"Afficher des métriques clés",icon:"Gauge",color:"#EF4444"},{code:"TABLE",name:"Tableaux",nameEn:"Tables",description:"Présenter des données tabulaires",icon:"Table",color:"#6B7280"},{code:"3D_IMMERSIVE",name:"3D & Immersif",nameEn:"3D & Immersive",description:"Visualisations tridimensionnelles",icon:"Box",color:"#7C3AED"},{code:"ANIMATED",name:"Animé & Temps Réel",nameEn:"Animated & Real-Time",description:"Graphiques dynamiques et streaming",icon:"Activity",color:"#14B8A6"},{code:"STATISTICAL",name:"Statistique Avancé",nameEn:"Advanced Statistical",description:"Analyses statistiques complexes",icon:"Calculator",color:"#F97316"}],ea=[{id:"c1",code:"BAR_CHART",name:"Graphique en barres",nameEn:"Bar Chart",description:"Compare des valeurs entre différentes catégories. Le plus polyvalent des graphiques de comparaison.",category:"Comparaison",categoryCode:"COMPARISON",icon:"BarChart3",popular:!0,new:!1,useCases:["Comparaison de CA par enseigne","Loyers par locataire","Performance par zone"],dataRequirements:["1 dimension catégorielle","1+ mesures numériques"],variants:["Horizontal","Vertical","Avec labels","Avec objectif"],complexity:"simple"},{id:"c2",code:"COLUMN_CHART",name:"Histogramme vertical",nameEn:"Column Chart",description:"Barres verticales pour comparer des valeurs. Idéal pour les séries temporelles courtes.",category:"Comparaison",categoryCode:"COMPARISON",icon:"BarChart3",popular:!0,new:!1,useCases:["CA mensuel","Fréquentation par mois","Comparaison N/N-1"],dataRequirements:["1 dimension","1+ mesures"],variants:["Simple","Groupé","Avec ligne de tendance"],complexity:"simple"},{id:"c3",code:"STACKED_BAR",name:"Barres empilées",nameEn:"Stacked Bar Chart",description:"Montre la composition d'un total avec les contributions de chaque partie.",category:"Comparaison",categoryCode:"COMPARISON",icon:"BarChart3",popular:!0,new:!1,useCases:["Répartition loyers par activité","Mix CA par catégorie","Budget par poste"],dataRequirements:["1 dimension principale","1 dimension de groupe","1 mesure"],variants:["Horizontal","Vertical","100% empilé"],complexity:"simple"},{id:"c4",code:"GROUPED_BAR",name:"Barres groupées",nameEn:"Grouped Bar Chart",description:"Compare plusieurs séries côte à côte pour chaque catégorie.",category:"Comparaison",categoryCode:"COMPARISON",icon:"BarChart3",popular:!0,new:!1,useCases:["Comparaison N/N-1","Réalisé vs Budget","Multi-centres"],dataRequirements:["1 dimension principale","1 dimension de groupe","1 mesure"],variants:["Horizontal","Vertical"],complexity:"simple"},{id:"c5",code:"WATERFALL_CHART",name:"Graphique en cascade",nameEn:"Waterfall Chart",description:"Montre comment une valeur initiale évolue avec des ajouts et soustractions.",category:"Comparaison",categoryCode:"COMPARISON",icon:"Activity",popular:!0,new:!1,useCases:["Bridge NOI","Analyse des écarts","Décomposition du résultat"],dataRequirements:["Valeur initiale","Variations +/-","Valeur finale"],variants:["Horizontal","Vertical","Avec sous-totaux"],complexity:"medium"},{id:"c6",code:"BULLET_CHART",name:"Graphique à puces",nameEn:"Bullet Chart",description:"Compare une valeur à une cible avec des plages de performance. Compact et efficace.",category:"Comparaison",categoryCode:"COMPARISON",icon:"Activity",popular:!1,new:!0,useCases:["Objectifs commerciaux","KPIs vs cibles","Taux d'occupation vs objectif"],dataRequirements:["1 valeur actuelle","1 valeur cible","Plages optionnelles"],variants:["Horizontal","Vertical"],complexity:"medium"},{id:"c7",code:"RADAR_CHART",name:"Graphique radar",nameEn:"Radar Chart",description:"Compare plusieurs variables quantitatives sur des axes partant d'un point central.",category:"Comparaison",categoryCode:"COMPARISON",icon:"Target",popular:!1,new:!1,useCases:["Score ESG multicritères","Benchmark enseignes","Profil de performance"],dataRequirements:["3+ dimensions","1 mesure par dimension"],variants:["Simple","Rempli","Multiple"],complexity:"medium"},{id:"c8",code:"LOLLIPOP_CHART",name:"Graphique sucette",nameEn:"Lollipop Chart",description:"Version épurée du graphique en barres, avec un point et une ligne.",category:"Comparaison",categoryCode:"COMPARISON",icon:"Activity",popular:!1,new:!0,useCases:["Classements","Top N enseignes","Variations de loyers"],dataRequirements:["1 dimension","1 mesure"],variants:["Horizontal","Vertical","Avec marqueurs"],complexity:"simple"}],ta=[{id:"c9",code:"LINE_CHART",name:"Graphique linéaire",nameEn:"Line Chart",description:"Visualise les tendances et l'évolution des données dans le temps.",category:"Tendance",categoryCode:"TREND",icon:"LineChart",popular:!0,new:!1,useCases:["Évolution du CA","Tendances fréquentation","Historique NOI"],dataRequirements:["1 dimension temporelle","1+ mesures"],variants:["Simple","Multi-séries","Avec marqueurs","Lissé"],complexity:"simple"},{id:"c10",code:"AREA_CHART",name:"Graphique en aires",nameEn:"Area Chart",description:"Comme le graphique linéaire mais avec l'aire sous la courbe remplie.",category:"Tendance",categoryCode:"TREND",icon:"AreaChart",popular:!0,new:!1,useCases:["CA cumulé","Parts de marché dans le temps","Flux de trésorerie"],dataRequirements:["1 dimension temporelle","1+ mesures"],variants:["Simple","Empilé","100% empilé","Stream"],complexity:"simple"},{id:"c11",code:"SPARKLINE",name:"Sparkline",nameEn:"Sparkline",description:"Mini graphique intégré dans une cellule pour montrer une tendance.",category:"Tendance",categoryCode:"TREND",icon:"Activity",popular:!0,new:!1,useCases:["Tableaux de bord","Dans les tableaux","KPI cards"],dataRequirements:["Série de valeurs temporelles"],variants:["Ligne","Barre","Win/Loss"],complexity:"simple"},{id:"c12",code:"COMBO_CHART",name:"Graphique combiné",nameEn:"Combo Chart",description:"Combine barres et lignes pour montrer différentes mesures sur le même graphique.",category:"Tendance",categoryCode:"TREND",icon:"BarChart3",popular:!0,new:!1,useCases:["CA et fréquentation","Volume et prix","NOI et taux d'occupation"],dataRequirements:["1 dimension","2+ mesures d'échelles différentes"],variants:["Barres + Ligne","Aires + Ligne","Double axe Y"],complexity:"medium"},{id:"c13",code:"STEP_CHART",name:"Graphique en escalier",nameEn:"Step Chart",description:"Montre les changements discrets entre périodes sans interpolation.",category:"Tendance",categoryCode:"TREND",icon:"Activity",popular:!1,new:!1,useCases:["Tarification par palier","Changements de loyer","Évolution des taux"],dataRequirements:["1 dimension temporelle","1 mesure discrète"],variants:["Avant","Après","Centre"],complexity:"simple"},{id:"c14",code:"SLOPE_CHART",name:"Graphique de pente",nameEn:"Slope Chart",description:"Compare deux points dans le temps en montrant la direction et l'amplitude du changement.",category:"Tendance",categoryCode:"TREND",icon:"TrendingUp",popular:!1,new:!0,useCases:["Avant/Après travaux","Classement T1 vs T2","Évolution annuelle"],dataRequirements:["2 périodes","1 mesure","Catégories multiples"],variants:["Simple","Avec labels"],complexity:"medium"},{id:"c15",code:"RANGE_AREA",name:"Aire avec intervalle",nameEn:"Range Area Chart",description:"Affiche une plage de valeurs (min-max) au fil du temps.",category:"Tendance",categoryCode:"TREND",icon:"Activity",popular:!1,new:!1,useCases:["Prévisions avec incertitude","Min/Max quotidien","Bandes de confiance"],dataRequirements:["Temps","Valeur min","Valeur max"],variants:["Simple","Avec ligne centrale","Multi-bandes"],complexity:"medium"}],sa=[{id:"c16",code:"PIE_CHART",name:"Diagramme circulaire",nameEn:"Pie Chart",description:"Montre la répartition d'un total en pourcentages. Limiter à 5-7 segments.",category:"Distribution",categoryCode:"DISTRIBUTION",icon:"PieChart",popular:!0,new:!1,useCases:["Mix activités","Répartition loyers","Part des enseignes"],dataRequirements:["1 dimension catégorielle","1 mesure"],variants:["Simple","Avec labels","Explosé"],complexity:"simple"},{id:"c17",code:"DONUT_CHART",name:"Graphique en anneau",nameEn:"Donut Chart",description:"Version du pie chart avec un trou central, permettant d'afficher une valeur clé.",category:"Distribution",categoryCode:"DISTRIBUTION",icon:"PieChart",popular:!0,new:!1,useCases:["Taux d'occupation","Progression objectif","KPI central"],dataRequirements:["1 dimension","1 mesure","Optionnel: KPI central"],variants:["Simple","Demi-anneau","Multiples"],complexity:"simple"},{id:"c18",code:"FUNNEL_CHART",name:"Graphique en entonnoir",nameEn:"Funnel Chart",description:"Visualise les étapes d'un processus avec les taux de conversion.",category:"Distribution",categoryCode:"DISTRIBUTION",icon:"Filter",popular:!0,new:!1,useCases:["Tunnel de commercialisation","Conversion visiteurs","Processus de bail"],dataRequirements:["Étapes ordonnées","Valeur par étape"],variants:["Simple","Avec pourcentages","Comparatif"],complexity:"medium"},{id:"c19",code:"HISTOGRAM",name:"Histogramme de distribution",nameEn:"Histogram",description:"Montre la distribution de fréquence d'une variable continue.",category:"Distribution",categoryCode:"DISTRIBUTION",icon:"BarChart3",popular:!1,new:!1,useCases:["Distribution des loyers","Répartition des surfaces","Analyse statistique"],dataRequirements:["1 variable continue","Intervalles (bins)"],variants:["Simple","Avec courbe normale","Cumulatif"],complexity:"medium"},{id:"c20",code:"BOX_PLOT",name:"Boîte à moustaches",nameEn:"Box Plot",description:"Affiche la distribution statistique: médiane, quartiles, outliers.",category:"Distribution",categoryCode:"DISTRIBUTION",icon:"Box",popular:!1,new:!1,useCases:["Comparaison de distributions","Détection d'outliers","Benchmark loyers"],dataRequirements:["1 variable continue","Optionnel: groupes"],variants:["Vertical","Horizontal","Violin"],complexity:"advanced"},{id:"c21",code:"WAFFLE_CHART",name:"Graphique en gaufre",nameEn:"Waffle Chart",description:"Grille de carrés représentant des pourcentages de manière visuelle.",category:"Distribution",categoryCode:"DISTRIBUTION",icon:"Grid3X3",popular:!1,new:!0,useCases:["Taux d'occupation visuel","Progression 100%","Parts de marché"],dataRequirements:["Catégories","Pourcentages"],variants:["10x10","5x20","Avec icônes"],complexity:"simple"}],ra=[{id:"c22",code:"SCATTER_PLOT",name:"Nuage de points",nameEn:"Scatter Plot",description:"Montre la relation entre deux variables numériques.",category:"Relation",categoryCode:"RELATIONSHIP",icon:"Circle",popular:!0,new:!1,useCases:["Corrélation loyer/CA","Surface vs Performance","Analyse de régression"],dataRequirements:["2 mesures numériques","Optionnel: dimension pour couleur/taille"],variants:["Simple","Avec régression","Bubble"],complexity:"medium"},{id:"c23",code:"BUBBLE_CHART",name:"Graphique à bulles",nameEn:"Bubble Chart",description:"Scatter plot avec une 3e dimension représentée par la taille des bulles.",category:"Relation",categoryCode:"RELATIONSHIP",icon:"Circle",popular:!0,new:!1,useCases:["Matrice CA/Surface/Loyer","Analyse de portefeuille","Segmentation enseignes"],dataRequirements:["2 mesures pour X/Y","1 mesure pour taille","Optionnel: couleur"],variants:["Simple","Avec labels","Animé"],complexity:"medium"},{id:"c24",code:"HEATMAP",name:"Carte de chaleur",nameEn:"Heatmap",description:"Matrice colorée montrant l'intensité des valeurs à l'intersection de deux dimensions.",category:"Relation",categoryCode:"RELATIONSHIP",icon:"Flame",popular:!0,new:!1,useCases:["Fréquentation heure/jour","Performance par zone/activité","Corrélations"],dataRequirements:["2 dimensions catégorielles","1 mesure numérique"],variants:["Simple","Avec valeurs","Divergente"],complexity:"medium"},{id:"c25",code:"CORRELATION_MATRIX",name:"Matrice de corrélation",nameEn:"Correlation Matrix",description:"Visualise les corrélations entre plusieurs variables.",category:"Relation",categoryCode:"RELATIONSHIP",icon:"Grid3X3",popular:!1,new:!1,useCases:["Analyse exploratoire","Sélection de KPIs","Data science"],dataRequirements:["3+ variables numériques"],variants:["Couleur","Avec valeurs","Demi-matrice"],complexity:"advanced"},{id:"c26",code:"NETWORK_GRAPH",name:"Graphe de réseau",nameEn:"Network Graph",description:"Visualise les connexions et relations entre entités.",category:"Relation",categoryCode:"RELATIONSHIP",icon:"GitBranch",popular:!1,new:!0,useCases:["Relations enseignes-groupes","Flux entre zones","Organisation"],dataRequirements:["Nœuds","Liens","Optionnel: poids"],variants:["Force-directed","Hiérarchique","Circulaire"],complexity:"advanced"}],aa=[{id:"c27",code:"TREEMAP",name:"Treemap",nameEn:"Treemap",description:"Rectangles imbriqués montrant les proportions et la hiérarchie.",category:"Hiérarchique",categoryCode:"HIERARCHICAL",icon:"LayoutGrid",popular:!0,new:!1,useCases:["Structure des loyers","Mix activités","Répartition surfaces"],dataRequirements:["1+ dimensions hiérarchiques","1 mesure pour taille","Optionnel: mesure pour couleur"],variants:["Simple","Avec labels","Avec drill-down"],complexity:"medium"},{id:"c28",code:"SUNBURST",name:"Diagramme soleil",nameEn:"Sunburst Chart",description:"Représentation circulaire d'une hiérarchie multi-niveaux.",category:"Hiérarchique",categoryCode:"HIERARCHICAL",icon:"Target",popular:!1,new:!1,useCases:["Structure organisationnelle","Catégories imbriquées","Navigation données"],dataRequirements:["2+ niveaux hiérarchiques","1 mesure"],variants:["Simple","Interactif","Avec zoom"],complexity:"medium"},{id:"c29",code:"SANKEY_DIAGRAM",name:"Diagramme de Sankey",nameEn:"Sankey Diagram",description:"Montre les flux et transferts entre catégories avec largeur proportionnelle.",category:"Hiérarchique",categoryCode:"HIERARCHICAL",icon:"GitBranch",popular:!0,new:!1,useCases:["Flux financiers","Parcours visiteurs","Décomposition revenus"],dataRequirements:["Source","Destination","Valeur du flux"],variants:["Horizontal","Vertical","Multi-niveaux"],complexity:"advanced"},{id:"c30",code:"ORG_CHART",name:"Organigramme",nameEn:"Organization Chart",description:"Représente la structure hiérarchique d'une organisation.",category:"Hiérarchique",categoryCode:"HIERARCHICAL",icon:"Users",popular:!1,new:!1,useCases:["Structure équipes","Hiérarchie locataires","Arbre de décision"],dataRequirements:["Parent","Enfant","Optionnel: attributs"],variants:["Vertical","Horizontal","Radial"],complexity:"medium"}],ia=[{id:"c31",code:"CHOROPLETH_MAP",name:"Carte choroplèthe",nameEn:"Choropleth Map",description:"Carte où les régions sont colorées selon une valeur.",category:"Géographique",categoryCode:"GEOGRAPHIC",icon:"Map",popular:!0,new:!1,useCases:["Performance par région","Zone de chalandise","Densité population"],dataRequirements:["Codes géographiques","1 mesure numérique"],variants:["France","Régions","Départements","Communes"],complexity:"medium"},{id:"c32",code:"BUBBLE_MAP",name:"Carte à bulles",nameEn:"Bubble Map",description:"Points géolocalisés dont la taille représente une valeur.",category:"Géographique",categoryCode:"GEOGRAPHIC",icon:"Map",popular:!0,new:!1,useCases:["Localisation des centres","Points de vente","CA par site"],dataRequirements:["Coordonnées (lat/lng)","1 mesure pour taille"],variants:["Simple","Clustered","Avec heatmap"],complexity:"medium"},{id:"c33",code:"FLOW_MAP",name:"Carte de flux",nameEn:"Flow Map",description:"Montre les mouvements et connexions entre localisations.",category:"Géographique",categoryCode:"GEOGRAPHIC",icon:"Map",popular:!1,new:!0,useCases:["Flux clients","Logistique","Provenance visiteurs"],dataRequirements:["Origine (lat/lng)","Destination (lat/lng)","Volume"],variants:["Lignes","Arcs","Animé"],complexity:"advanced"},{id:"c34",code:"FLOOR_PLAN",name:"Plan d'étage",nameEn:"Floor Plan",description:"Visualisation des données sur un plan de bâtiment.",category:"Géographique",categoryCode:"GEOGRAPHIC",icon:"Map",popular:!0,new:!1,useCases:["Occupation par lot","Performance par zone","Flux visiteurs"],dataRequirements:["Plan SVG","Identifiants zones","Mesures par zone"],variants:["Heatmap","Statut","Avec données"],complexity:"advanced",aiRecommended:!0}],na=[{id:"c35",code:"GAUGE_CHART",name:"Jauge",nameEn:"Gauge Chart",description:"Affiche une valeur unique par rapport à un objectif ou des seuils.",category:"Indicateurs",categoryCode:"KPI",icon:"Gauge",popular:!0,new:!1,useCases:["Taux d'occupation","Score performance","Atteinte objectif"],dataRequirements:["1 valeur","Min/Max","Optionnel: seuils"],variants:["Demi-cercle","Cercle complet","Linéaire"],complexity:"simple"},{id:"c36",code:"KPI_CARD",name:"Carte KPI",nameEn:"KPI Card",description:"Affiche un indicateur clé avec comparaison et tendance.",category:"Indicateurs",categoryCode:"KPI",icon:"Activity",popular:!0,new:!1,useCases:["NOI","CA mensuel","Fréquentation","Vacance"],dataRequirements:["Valeur actuelle","Optionnel: comparaison, tendance"],variants:["Simple","Avec sparkline","Avec comparaison"],complexity:"simple"},{id:"c37",code:"PROGRESS_BAR",name:"Barre de progression",nameEn:"Progress Bar",description:"Montre l'avancement vers un objectif.",category:"Indicateurs",categoryCode:"KPI",icon:"Activity",popular:!0,new:!1,useCases:["Progression commercialisation","Objectif annuel","Recouvrement"],dataRequirements:["Valeur actuelle","Valeur cible"],variants:["Horizontal","Circulaire","Segmenté"],complexity:"simple"},{id:"c38",code:"TRAFFIC_LIGHT",name:"Feu tricolore",nameEn:"Traffic Light",description:"Indicateur visuel simple pour le statut (vert/orange/rouge).",category:"Indicateurs",categoryCode:"KPI",icon:"Activity",popular:!1,new:!1,useCases:["Statut projets","Niveau d'alerte","Conformité"],dataRequirements:["1 valeur","Seuils pour couleurs"],variants:["Vertical","Horizontal","Avec label"],complexity:"simple"},{id:"c39",code:"METRIC_TILE",name:"Tuile métrique",nameEn:"Metric Tile",description:"Ensemble de métriques dans une tuile compacte et visuelle.",category:"Indicateurs",categoryCode:"KPI",icon:"LayoutGrid",popular:!1,new:!0,useCases:["Dashboard exécutif","Résumé performance","KPIs multiples"],dataRequirements:["1-4 métriques","Optionnel: icônes, couleurs"],variants:["1 métrique","2 métriques","4 métriques"],complexity:"simple"},{id:"c40",code:"COMPARISON_INDICATOR",name:"Indicateur de comparaison",nameEn:"Comparison Indicator",description:"Compare une valeur à une référence avec variation en %.",category:"Indicateurs",categoryCode:"KPI",icon:"TrendingUp",popular:!0,new:!1,useCases:["Variation N/N-1","vs Budget","vs Objectif"],dataRequirements:["Valeur actuelle","Valeur de référence"],variants:["Simple","Avec flèche","Avec barre"],complexity:"simple"}],la=[{id:"c41",code:"DATA_TABLE",name:"Tableau de données",nameEn:"Data Table",description:"Affichage tabulaire classique avec tri, filtres et pagination.",category:"Tableaux",categoryCode:"TABLE",icon:"Table",popular:!0,new:!1,useCases:["État locatif","Liste enseignes","Détail transactions"],dataRequirements:["Colonnes","Lignes de données"],variants:["Simple","Avec totaux","Avec sparklines","Avec formatage conditionnel"],complexity:"simple"},{id:"c42",code:"PIVOT_TABLE",name:"Tableau croisé dynamique",nameEn:"Pivot Table",description:"Agrège les données selon plusieurs dimensions avec totaux.",category:"Tableaux",categoryCode:"TABLE",icon:"Table",popular:!0,new:!1,useCases:["Analyse multidimensionnelle","Reporting financier","CA par activité/mois"],dataRequirements:["1+ dimensions en ligne","1+ dimensions en colonne","1+ mesures"],variants:["Simple","Avec sous-totaux","Avec drill-down"],complexity:"medium"},{id:"c43",code:"MATRIX",name:"Matrice",nameEn:"Matrix",description:"Tableau avec formatage conditionnel et visualisations intégrées.",category:"Tableaux",categoryCode:"TABLE",icon:"Grid3X3",popular:!1,new:!1,useCases:["Scorecard","Comparaison multicritères","Performance enseignes"],dataRequirements:["2 dimensions","1 mesure"],variants:["Couleur","Avec barres","Avec icônes"],complexity:"medium"},{id:"c44",code:"CROSSTAB",name:"Tableau croisé",nameEn:"Crosstab",description:"Croisement de deux dimensions avec mesures à l'intersection.",category:"Tableaux",categoryCode:"TABLE",icon:"Table",popular:!1,new:!1,useCases:["CA par enseigne et mois","Analyse bidimensionnelle"],dataRequirements:["1 dimension en ligne","1 dimension en colonne","1 mesure"],variants:["Simple","Avec totaux","Avec heatmap"],complexity:"medium"}],oa=[{id:"c45",code:"3D_BAR_CHART",name:"Barres 3D",nameEn:"3D Bar Chart",description:"Histogramme tridimensionnel avec profondeur et perspective.",category:"3D & Immersif",categoryCode:"3D_IMMERSIVE",icon:"Box",popular:!0,new:!1,useCases:["Présentations exécutives","Comparaisons premium","Dashboards innovants"],dataRequirements:["1-2 dimensions","1+ mesures"],variants:["Perspective","Isométrique","Animé","Avec ombres"],complexity:"medium"},{id:"c46",code:"3D_PIE_CHART",name:"Camembert 3D",nameEn:"3D Pie Chart",description:"Diagramme circulaire avec effet de profondeur et inclinaison.",category:"3D & Immersif",categoryCode:"3D_IMMERSIVE",icon:"PieChart",popular:!0,new:!1,useCases:["Répartitions élégantes","Présentations","Infographies"],dataRequirements:["1 dimension","1 mesure"],variants:["Incliné","Explosé 3D","Donut 3D","Avec reflets"],complexity:"medium"},{id:"c47",code:"3D_SCATTER",name:"Nuage de points 3D",nameEn:"3D Scatter Plot",description:"Scatter plot dans l'espace 3D avec rotation interactive.",category:"3D & Immersif",categoryCode:"3D_IMMERSIVE",icon:"Circle",popular:!0,new:!1,useCases:["Clustering 3D","Analyse multidimensionnelle","Data Science"],dataRequirements:["3 mesures numériques","Optionnel: couleur, taille"],variants:["Points","Sphères","Avec trajectoires","Clusters colorés"],complexity:"advanced"},{id:"c48",code:"3D_SURFACE",name:"Surface 3D",nameEn:"3D Surface",description:"Visualisation de données sur une surface tridimensionnelle continue.",category:"3D & Immersif",categoryCode:"3D_IMMERSIVE",icon:"Layers",popular:!1,new:!1,useCases:["Données topographiques","Analyse de surface","Heatmap 3D"],dataRequirements:["X, Y, Z coordonnées","Grille de données"],variants:["Wireframe","Solid","Contour","Gradient"],complexity:"advanced"},{id:"c49",code:"3D_GLOBE",name:"Globe terrestre 3D",nameEn:"3D Globe",description:"Visualisation géographique sur un globe rotatif interactif.",category:"3D & Immersif",categoryCode:"3D_IMMERSIVE",icon:"Map",popular:!0,new:!0,useCases:["Données mondiales","Connexions internationales","Implantations globales"],dataRequirements:["Coordonnées GPS","Mesures par pays"],variants:["Jour/Nuit","Arcs de connexion","Heatmap sphérique","Points lumineux"],complexity:"advanced"},{id:"c50",code:"ISOMETRIC_CHART",name:"Graphique isométrique",nameEn:"Isometric Chart",description:"Visualisation avec projection isométrique 2.5D élégante.",category:"3D & Immersif",categoryCode:"3D_IMMERSIVE",icon:"Box",popular:!0,new:!1,useCases:["Infographies","Présentations modernes","Design premium"],dataRequirements:["1-2 dimensions","1+ mesures"],variants:["Barres","Blocs","Icônes","Avec ombres"],complexity:"medium"}],ca=[{id:"c51",code:"LIVE_STREAM",name:"Streaming temps réel",nameEn:"Live Stream Chart",description:"Graphique qui se met à jour en continu avec les données entrantes.",category:"Animé & Temps Réel",categoryCode:"ANIMATED",icon:"Activity",popular:!0,new:!1,useCases:["Fréquentation live","Monitoring","Analytics temps réel"],dataRequirements:["Flux de données","Timestamp"],variants:["Ligne scrollante","Points","Avec historique","Multi-séries"],complexity:"advanced"},{id:"c52",code:"BAR_CHART_RACE",name:"Bar Chart Race",nameEn:"Bar Chart Race",description:"Course de barres animée montrant l'évolution des classements dans le temps.",category:"Animé & Temps Réel",categoryCode:"ANIMATED",icon:"BarChart3",popular:!0,new:!0,useCases:["Évolution des classements","Top enseignes par année","Historique CA"],dataRequirements:["Dimension temporelle","Catégories","Valeurs"],variants:["Horizontal","Avec avatars","Avec compteur"],complexity:"advanced"},{id:"c53",code:"ANIMATED_DONUT",name:"Donut animé",nameEn:"Animated Donut",description:"Anneau qui s'anime pour révéler progressivement les valeurs.",category:"Animé & Temps Réel",categoryCode:"ANIMATED",icon:"PieChart",popular:!0,new:!1,useCases:["Chargement","Progression","Scores animés"],dataRequirements:["Valeur actuelle","Maximum"],variants:["Simple","Avec icône","Multi-anneaux","Gradient"],complexity:"medium"},{id:"c54",code:"PARTICLE_FLOW",name:"Flux de particules",nameEn:"Particle Flow",description:"Particules animées montrant des flux et mouvements de données.",category:"Animé & Temps Réel",categoryCode:"ANIMATED",icon:"Activity",popular:!0,new:!0,useCases:["Flux visiteurs","Mouvements","Transferts"],dataRequirements:["Source","Destination","Volume"],variants:["Points","Lignes","Avec traînée","Coloré par catégorie"],complexity:"advanced"},{id:"c55",code:"TICKER_TAPE",name:"Bandeau défilant",nameEn:"Ticker Tape",description:"Données défilant horizontalement style ticker.",category:"Animé & Temps Réel",categoryCode:"ANIMATED",icon:"Activity",popular:!0,new:!1,useCases:["KPIs temps réel","Alertes","News"],dataRequirements:["Flux de valeurs","Labels"],variants:["Simple","Avec graphiques mini","Coloré +/-"],complexity:"simple"},{id:"c56",code:"COUNTDOWN_TIMER",name:"Compte à rebours",nameEn:"Countdown Timer",description:"Timer visuel avec animations pour les deadlines.",category:"Animé & Temps Réel",categoryCode:"ANIMATED",icon:"Clock",popular:!1,new:!1,useCases:["Événements","Deadlines baux","Échéances"],dataRequirements:["Date/heure cible"],variants:["Digital","Analogique","Progressif","Flip clock"],complexity:"simple"}],da=[{id:"c57",code:"DENSITY_PLOT",name:"Courbe de densité",nameEn:"Density Plot",description:"Distribution de probabilité estimée par noyau (KDE).",category:"Statistique Avancé",categoryCode:"STATISTICAL",icon:"TrendingUp",popular:!0,new:!1,useCases:["Distribution des loyers","Comparaison de populations","Statistiques"],dataRequirements:["Variable continue"],variants:["Simple","Empilé","Ridgeline","Violin"],complexity:"advanced"},{id:"c58",code:"VIOLIN_PLOT",name:"Graphique en violon",nameEn:"Violin Plot",description:"Combine boxplot et densité pour une vue complète de la distribution.",category:"Statistique Avancé",categoryCode:"STATISTICAL",icon:"Box",popular:!0,new:!1,useCases:["Comparaison de distributions","Analyse statistique","Benchmark"],dataRequirements:["Variable continue","Groupes"],variants:["Simple","Split","Avec points","Avec boxplot"],complexity:"advanced"},{id:"c59",code:"REGRESSION_PLOT",name:"Régression linéaire",nameEn:"Regression Plot",description:"Scatter plot avec droite de régression et intervalles de confiance.",category:"Statistique Avancé",categoryCode:"STATISTICAL",icon:"TrendingUp",popular:!0,new:!1,useCases:["Corrélation","Prédiction","Modélisation"],dataRequirements:["Variable X","Variable Y"],variants:["Linéaire","Polynomial","LOESS","Avec résidus"],complexity:"advanced"},{id:"c60",code:"CONFIDENCE_INTERVAL",name:"Intervalle de confiance",nameEn:"Confidence Interval",description:"Visualise les incertitudes avec des bandes de confiance.",category:"Statistique Avancé",categoryCode:"STATISTICAL",icon:"Activity",popular:!0,new:!1,useCases:["Prévisions","Estimations","Incertitude"],dataRequirements:["Moyenne","Écart-type ou IC"],variants:["Bandes","Error bars","Fan chart","Bootstrap"],complexity:"advanced"},{id:"c61",code:"PARALLEL_COORDINATES",name:"Coordonnées parallèles",nameEn:"Parallel Coordinates",description:"Visualise les relations entre plusieurs variables continues.",category:"Statistique Avancé",categoryCode:"STATISTICAL",icon:"Activity",popular:!0,new:!1,useCases:["Analyse multivariée","Clustering","Outliers"],dataRequirements:["3+ variables numériques"],variants:["Simple","Avec brushing","Coloré par cluster","Interactif"],complexity:"advanced"},{id:"c62",code:"HEXBIN",name:"Hexbin",nameEn:"Hexbin",description:"Agrégation en hexagones pour les grands nuages de points.",category:"Statistique Avancé",categoryCode:"STATISTICAL",icon:"Grid3X3",popular:!0,new:!1,useCases:["Big data","Densité 2D","Géospatial"],dataRequirements:["X","Y","Grand volume"],variants:["Simple","Avec taille","Logarithmique","Avec stats"],complexity:"advanced"},{id:"c63",code:"CONTOUR_PLOT",name:"Courbes de niveau",nameEn:"Contour Plot",description:"Lignes d'iso-valeurs montrant les gradients de données.",category:"Statistique Avancé",categoryCode:"STATISTICAL",icon:"Layers",popular:!0,new:!1,useCases:["Densité 2D","Optimisation","Zones de chaleur"],dataRequirements:["X","Y","Z ou densité"],variants:["Lignes","Rempli","Avec points","3D"],complexity:"advanced"},{id:"c64",code:"BEESWARM",name:"Beeswarm / Essaim",nameEn:"Beeswarm Plot",description:"Points disposés comme un essaim d'abeilles sans chevauchement.",category:"Statistique Avancé",categoryCode:"STATISTICAL",icon:"Activity",popular:!0,new:!0,useCases:["Distribution exacte","Petits datasets","Comparaisons"],dataRequirements:["Catégories","Valeurs numériques"],variants:["Horizontal","Vertical","Coloré","Avec violin"],complexity:"medium"}],it=[...ea,...ta,...sa,...ra,...aa,...ia,...na,...la,...oa,...ca,...da];function ma(){return it.filter(t=>t.popular)}function ua(t){const r=t.toLowerCase();return it.filter(s=>s.name.toLowerCase().includes(r)||s.description.toLowerCase().includes(r)||s.useCases.some(l=>l.toLowerCase().includes(r)))}const qt=({chartCode:t,className:r=""})=>{const s=`w-full h-32 rounded-lg ${r}`,l={BAR_CHART:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"barGrad",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3B82F6"}),e.jsx("stop",{offset:"100%",stopColor:"#1D4ED8"})]})}),e.jsx("rect",{x:"20",y:"70",width:"30",height:"20",rx:"2",fill:"url(#barGrad)"}),e.jsx("rect",{x:"60",y:"40",width:"30",height:"50",rx:"2",fill:"url(#barGrad)"}),e.jsx("rect",{x:"100",y:"25",width:"30",height:"65",rx:"2",fill:"url(#barGrad)"}),e.jsx("rect",{x:"140",y:"50",width:"30",height:"40",rx:"2",fill:"url(#barGrad)"}),e.jsx("line",{x1:"15",y1:"90",x2:"185",y2:"90",stroke:"#E5E7EB",strokeWidth:"1"})]}),COLUMN_CHART:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colGrad",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10B981"}),e.jsx("stop",{offset:"100%",stopColor:"#059669"})]})}),e.jsx("rect",{x:"25",y:"60",width:"25",height:"30",rx:"2",fill:"url(#colGrad)"}),e.jsx("rect",{x:"55",y:"35",width:"25",height:"55",rx:"2",fill:"url(#colGrad)"}),e.jsx("rect",{x:"85",y:"20",width:"25",height:"70",rx:"2",fill:"url(#colGrad)"}),e.jsx("rect",{x:"115",y:"45",width:"25",height:"45",rx:"2",fill:"url(#colGrad)"}),e.jsx("rect",{x:"145",y:"30",width:"25",height:"60",rx:"2",fill:"url(#colGrad)"}),e.jsx("line",{x1:"20",y1:"90",x2:"180",y2:"90",stroke:"#E5E7EB",strokeWidth:"1"})]}),STACKED_BAR:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"25",y:"55",width:"25",height:"35",rx:"2",fill:"#3B82F6"}),e.jsx("rect",{x:"25",y:"35",width:"25",height:"20",rx:"2",fill:"#60A5FA"}),e.jsx("rect",{x:"55",y:"30",width:"25",height:"60",rx:"2",fill:"#3B82F6"}),e.jsx("rect",{x:"55",y:"10",width:"25",height:"20",rx:"2",fill:"#60A5FA"}),e.jsx("rect",{x:"85",y:"40",width:"25",height:"50",rx:"2",fill:"#3B82F6"}),e.jsx("rect",{x:"85",y:"25",width:"25",height:"15",rx:"2",fill:"#60A5FA"}),e.jsx("rect",{x:"115",y:"50",width:"25",height:"40",rx:"2",fill:"#3B82F6"}),e.jsx("rect",{x:"115",y:"30",width:"25",height:"20",rx:"2",fill:"#60A5FA"}),e.jsx("rect",{x:"145",y:"35",width:"25",height:"55",rx:"2",fill:"#3B82F6"}),e.jsx("rect",{x:"145",y:"15",width:"25",height:"20",rx:"2",fill:"#60A5FA"}),e.jsx("line",{x1:"20",y1:"90",x2:"180",y2:"90",stroke:"#E5E7EB",strokeWidth:"1"})]}),GROUPED_BAR:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"25",y:"50",width:"12",height:"35",rx:"2",fill:"#3B82F6"}),e.jsx("rect",{x:"39",y:"40",width:"12",height:"45",rx:"2",fill:"#10B981"}),e.jsx("rect",{x:"65",y:"30",width:"12",height:"55",rx:"2",fill:"#3B82F6"}),e.jsx("rect",{x:"79",y:"25",width:"12",height:"60",rx:"2",fill:"#10B981"}),e.jsx("rect",{x:"105",y:"45",width:"12",height:"40",rx:"2",fill:"#3B82F6"}),e.jsx("rect",{x:"119",y:"35",width:"12",height:"50",rx:"2",fill:"#10B981"}),e.jsx("rect",{x:"145",y:"55",width:"12",height:"30",rx:"2",fill:"#3B82F6"}),e.jsx("rect",{x:"159",y:"50",width:"12",height:"35",rx:"2",fill:"#10B981"}),e.jsx("line",{x1:"20",y1:"85",x2:"180",y2:"85",stroke:"#E5E7EB",strokeWidth:"1"})]}),WATERFALL_CHART:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"20",y:"30",width:"25",height:"60",rx:"2",fill:"#10B981"}),e.jsx("rect",{x:"50",y:"30",width:"25",height:"20",rx:"2",fill:"#10B981"}),e.jsx("line",{x1:"45",y1:"30",x2:"55",y2:"30",stroke:"#9CA3AF",strokeDasharray:"2"}),e.jsx("rect",{x:"80",y:"20",width:"25",height:"30",rx:"2",fill:"#10B981"}),e.jsx("line",{x1:"75",y1:"50",x2:"85",y2:"50",stroke:"#9CA3AF",strokeDasharray:"2"}),e.jsx("rect",{x:"110",y:"50",width:"25",height:"20",rx:"2",fill:"#EF4444"}),e.jsx("line",{x1:"105",y1:"50",x2:"115",y2:"50",stroke:"#9CA3AF",strokeDasharray:"2"}),e.jsx("rect",{x:"140",y:"40",width:"25",height:"50",rx:"2",fill:"#3B82F6"}),e.jsx("line",{x1:"20",y1:"90",x2:"180",y2:"90",stroke:"#E5E7EB",strokeWidth:"1"})]}),BULLET_CHART:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"20",y:"20",width:"160",height:"20",rx:"2",fill:"#E5E7EB"}),e.jsx("rect",{x:"20",y:"20",width:"120",height:"20",rx:"2",fill:"#D1D5DB"}),e.jsx("rect",{x:"20",y:"20",width:"80",height:"20",rx:"2",fill:"#9CA3AF"}),e.jsx("rect",{x:"20",y:"25",width:"100",height:"10",rx:"1",fill:"#3B82F6"}),e.jsx("line",{x1:"130",y1:"18",x2:"130",y2:"42",stroke:"#1F2937",strokeWidth:"2"}),e.jsx("rect",{x:"20",y:"55",width:"160",height:"20",rx:"2",fill:"#E5E7EB"}),e.jsx("rect",{x:"20",y:"55",width:"140",height:"20",rx:"2",fill:"#D1D5DB"}),e.jsx("rect",{x:"20",y:"55",width:"100",height:"20",rx:"2",fill:"#9CA3AF"}),e.jsx("rect",{x:"20",y:"60",width:"130",height:"10",rx:"1",fill:"#10B981"}),e.jsx("line",{x1:"120",y1:"53",x2:"120",y2:"77",stroke:"#1F2937",strokeWidth:"2"})]}),RADAR_CHART:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("polygon",{points:"100,15 145,35 140,70 100,85 60,70 55,35",fill:"none",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("polygon",{points:"100,30 130,42 128,62 100,72 72,62 70,42",fill:"none",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("polygon",{points:"100,45 115,50 114,58 100,62 86,58 85,50",fill:"none",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("polygon",{points:"100,20 140,38 120,68 100,78 70,60 65,38",fill:"rgba(59, 130, 246, 0.3)",stroke:"#3B82F6",strokeWidth:"2"}),e.jsx("circle",{cx:"100",cy:"20",r:"3",fill:"#3B82F6"}),e.jsx("circle",{cx:"140",cy:"38",r:"3",fill:"#3B82F6"}),e.jsx("circle",{cx:"120",cy:"68",r:"3",fill:"#3B82F6"}),e.jsx("circle",{cx:"70",cy:"60",r:"3",fill:"#3B82F6"}),e.jsx("circle",{cx:"65",cy:"38",r:"3",fill:"#3B82F6"})]}),LOLLIPOP_CHART:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("line",{x1:"30",y1:"70",x2:"30",y2:"90",stroke:"#3B82F6",strokeWidth:"2"}),e.jsx("circle",{cx:"30",cy:"70",r:"6",fill:"#3B82F6"}),e.jsx("line",{x1:"60",y1:"45",x2:"60",y2:"90",stroke:"#3B82F6",strokeWidth:"2"}),e.jsx("circle",{cx:"60",cy:"45",r:"6",fill:"#3B82F6"}),e.jsx("line",{x1:"90",y1:"25",x2:"90",y2:"90",stroke:"#3B82F6",strokeWidth:"2"}),e.jsx("circle",{cx:"90",cy:"25",r:"6",fill:"#3B82F6"}),e.jsx("line",{x1:"120",y1:"55",x2:"120",y2:"90",stroke:"#3B82F6",strokeWidth:"2"}),e.jsx("circle",{cx:"120",cy:"55",r:"6",fill:"#3B82F6"}),e.jsx("line",{x1:"150",y1:"35",x2:"150",y2:"90",stroke:"#3B82F6",strokeWidth:"2"}),e.jsx("circle",{cx:"150",cy:"35",r:"6",fill:"#3B82F6"}),e.jsx("line",{x1:"20",y1:"90",x2:"170",y2:"90",stroke:"#E5E7EB",strokeWidth:"1"})]}),LINE_CHART:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"lineGrad",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(16, 185, 129, 0.3)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(16, 185, 129, 0)"})]})}),e.jsx("path",{d:"M20 70 L50 50 L80 60 L110 30 L140 40 L170 20",fill:"none",stroke:"#10B981",strokeWidth:"3",strokeLinecap:"round"}),e.jsx("path",{d:"M20 70 L50 50 L80 60 L110 30 L140 40 L170 20 L170 90 L20 90 Z",fill:"url(#lineGrad)"}),e.jsx("circle",{cx:"20",cy:"70",r:"4",fill:"#10B981"}),e.jsx("circle",{cx:"50",cy:"50",r:"4",fill:"#10B981"}),e.jsx("circle",{cx:"80",cy:"60",r:"4",fill:"#10B981"}),e.jsx("circle",{cx:"110",cy:"30",r:"4",fill:"#10B981"}),e.jsx("circle",{cx:"140",cy:"40",r:"4",fill:"#10B981"}),e.jsx("circle",{cx:"170",cy:"20",r:"4",fill:"#10B981"}),e.jsx("line",{x1:"15",y1:"90",x2:"185",y2:"90",stroke:"#E5E7EB",strokeWidth:"1"})]}),AREA_CHART:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"areaGrad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(59, 130, 246, 0.6)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(59, 130, 246, 0.1)"})]}),e.jsxs("linearGradient",{id:"areaGrad2",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(139, 92, 246, 0.6)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(139, 92, 246, 0.1)"})]})]}),e.jsx("path",{d:"M20 60 L50 45 L80 55 L110 35 L140 45 L170 25 L170 85 L20 85 Z",fill:"url(#areaGrad1)"}),e.jsx("path",{d:"M20 70 L50 60 L80 68 L110 50 L140 58 L170 40 L170 85 L20 85 Z",fill:"url(#areaGrad2)"}),e.jsx("path",{d:"M20 60 L50 45 L80 55 L110 35 L140 45 L170 25",fill:"none",stroke:"#3B82F6",strokeWidth:"2"}),e.jsx("path",{d:"M20 70 L50 60 L80 68 L110 50 L140 58 L170 40",fill:"none",stroke:"#8B5CF6",strokeWidth:"2"})]}),SPARKLINE:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"20",y:"25",width:"160",height:"50",rx:"4",fill:"#F3F4F6"}),e.jsx("path",{d:"M30 55 L45 45 L60 50 L75 35 L90 40 L105 30 L120 38 L135 32 L150 42 L165 28",fill:"none",stroke:"#10B981",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("circle",{cx:"165",cy:"28",r:"3",fill:"#10B981"}),e.jsx("text",{x:"100",y:"90",textAnchor:"middle",fontSize:"10",fill:"#6B7280",children:"+12.5%"})]}),COMBO_CHART:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"25",y:"55",width:"20",height:"30",rx:"2",fill:"#3B82F6"}),e.jsx("rect",{x:"55",y:"40",width:"20",height:"45",rx:"2",fill:"#3B82F6"}),e.jsx("rect",{x:"85",y:"50",width:"20",height:"35",rx:"2",fill:"#3B82F6"}),e.jsx("rect",{x:"115",y:"35",width:"20",height:"50",rx:"2",fill:"#3B82F6"}),e.jsx("rect",{x:"145",y:"45",width:"20",height:"40",rx:"2",fill:"#3B82F6"}),e.jsx("path",{d:"M35 50 L65 30 L95 40 L125 25 L155 35",fill:"none",stroke:"#EF4444",strokeWidth:"3",strokeLinecap:"round"}),e.jsx("circle",{cx:"35",cy:"50",r:"4",fill:"#EF4444"}),e.jsx("circle",{cx:"65",cy:"30",r:"4",fill:"#EF4444"}),e.jsx("circle",{cx:"95",cy:"40",r:"4",fill:"#EF4444"}),e.jsx("circle",{cx:"125",cy:"25",r:"4",fill:"#EF4444"}),e.jsx("circle",{cx:"155",cy:"35",r:"4",fill:"#EF4444"}),e.jsx("line",{x1:"20",y1:"85",x2:"180",y2:"85",stroke:"#E5E7EB",strokeWidth:"1"})]}),STEP_CHART:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("path",{d:"M25 70 L45 70 L45 50 L65 50 L65 35 L85 35 L85 45 L105 45 L105 30 L125 30 L125 40 L145 40 L145 25 L165 25",fill:"none",stroke:"#10B981",strokeWidth:"3"}),e.jsx("line",{x1:"20",y1:"85",x2:"175",y2:"85",stroke:"#E5E7EB",strokeWidth:"1"})]}),SLOPE_CHART:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("line",{x1:"40",y1:"15",x2:"40",y2:"85",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"160",y1:"15",x2:"160",y2:"85",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"40",y1:"25",x2:"160",y2:"35",stroke:"#3B82F6",strokeWidth:"2"}),e.jsx("line",{x1:"40",y1:"40",x2:"160",y2:"25",stroke:"#10B981",strokeWidth:"2"}),e.jsx("line",{x1:"40",y1:"55",x2:"160",y2:"70",stroke:"#F59E0B",strokeWidth:"2"}),e.jsx("line",{x1:"40",y1:"70",x2:"160",y2:"55",stroke:"#EF4444",strokeWidth:"2"}),e.jsx("circle",{cx:"40",cy:"25",r:"4",fill:"#3B82F6"}),e.jsx("circle",{cx:"160",cy:"35",r:"4",fill:"#3B82F6"}),e.jsx("circle",{cx:"40",cy:"40",r:"4",fill:"#10B981"}),e.jsx("circle",{cx:"160",cy:"25",r:"4",fill:"#10B981"}),e.jsx("circle",{cx:"40",cy:"55",r:"4",fill:"#F59E0B"}),e.jsx("circle",{cx:"160",cy:"70",r:"4",fill:"#F59E0B"}),e.jsx("circle",{cx:"40",cy:"70",r:"4",fill:"#EF4444"}),e.jsx("circle",{cx:"160",cy:"55",r:"4",fill:"#EF4444"}),e.jsx("text",{x:"40",y:"95",textAnchor:"middle",fontSize:"8",fill:"#6B7280",children:"2023"}),e.jsx("text",{x:"160",y:"95",textAnchor:"middle",fontSize:"8",fill:"#6B7280",children:"2024"})]}),RANGE_AREA:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"rangeGrad",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(59, 130, 246, 0.4)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(59, 130, 246, 0.1)"})]})}),e.jsx("path",{d:"M25 30 L55 25 L85 35 L115 20 L145 30 L175 15 L175 70 L145 65 L115 55 L85 70 L55 60 L25 65 Z",fill:"url(#rangeGrad)",stroke:"#3B82F6",strokeWidth:"1"}),e.jsx("path",{d:"M25 48 L55 43 L85 52 L115 38 L145 48 L175 35",fill:"none",stroke:"#3B82F6",strokeWidth:"2"}),e.jsx("line",{x1:"20",y1:"85",x2:"180",y2:"85",stroke:"#E5E7EB",strokeWidth:"1"})]}),PIE_CHART:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("circle",{cx:"100",cy:"50",r:"40",fill:"#E5E7EB"}),e.jsx("path",{d:"M100 50 L100 10 A40 40 0 0 1 140 50 Z",fill:"#3B82F6"}),e.jsx("path",{d:"M100 50 L140 50 A40 40 0 0 1 100 90 Z",fill:"#10B981"}),e.jsx("path",{d:"M100 50 L100 90 A40 40 0 0 1 65 70 Z",fill:"#F59E0B"}),e.jsx("path",{d:"M100 50 L65 70 A40 40 0 0 1 60 50 Z",fill:"#EF4444"}),e.jsx("path",{d:"M100 50 L60 50 A40 40 0 0 1 100 10 Z",fill:"#8B5CF6"})]}),DONUT_CHART:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("circle",{cx:"100",cy:"50",r:"40",fill:"none",stroke:"#E5E7EB",strokeWidth:"15"}),e.jsx("circle",{cx:"100",cy:"50",r:"40",fill:"none",stroke:"#3B82F6",strokeWidth:"15",strokeDasharray:"75 176",strokeDashoffset:"0",transform:"rotate(-90 100 50)"}),e.jsx("circle",{cx:"100",cy:"50",r:"40",fill:"none",stroke:"#10B981",strokeWidth:"15",strokeDasharray:"50 201",strokeDashoffset:"-75",transform:"rotate(-90 100 50)"}),e.jsx("circle",{cx:"100",cy:"50",r:"40",fill:"none",stroke:"#F59E0B",strokeWidth:"15",strokeDasharray:"45 206",strokeDashoffset:"-125",transform:"rotate(-90 100 50)"}),e.jsx("circle",{cx:"100",cy:"50",r:"40",fill:"none",stroke:"#8B5CF6",strokeWidth:"15",strokeDasharray:"81 170",strokeDashoffset:"-170",transform:"rotate(-90 100 50)"}),e.jsx("text",{x:"100",y:"54",textAnchor:"middle",fontSize:"14",fontWeight:"bold",fill:"#1F2937",children:"75%"})]}),FUNNEL_CHART:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("path",{d:"M30 15 L170 15 L150 30 L50 30 Z",fill:"#3B82F6"}),e.jsx("path",{d:"M50 32 L150 32 L135 47 L65 47 Z",fill:"#60A5FA"}),e.jsx("path",{d:"M65 49 L135 49 L120 64 L80 64 Z",fill:"#93C5FD"}),e.jsx("path",{d:"M80 66 L120 66 L110 81 L90 81 Z",fill:"#BFDBFE"}),e.jsx("text",{x:"100",y:"24",textAnchor:"middle",fontSize:"8",fill:"white",children:"1000"}),e.jsx("text",{x:"100",y:"42",textAnchor:"middle",fontSize:"8",fill:"white",children:"750"}),e.jsx("text",{x:"100",y:"58",textAnchor:"middle",fontSize:"8",fill:"#1F2937",children:"400"}),e.jsx("text",{x:"100",y:"76",textAnchor:"middle",fontSize:"8",fill:"#1F2937",children:"120"})]}),HISTOGRAM:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"25",y:"70",width:"18",height:"15",fill:"#3B82F6"}),e.jsx("rect",{x:"45",y:"45",width:"18",height:"40",fill:"#3B82F6"}),e.jsx("rect",{x:"65",y:"25",width:"18",height:"60",fill:"#3B82F6"}),e.jsx("rect",{x:"85",y:"15",width:"18",height:"70",fill:"#3B82F6"}),e.jsx("rect",{x:"105",y:"30",width:"18",height:"55",fill:"#3B82F6"}),e.jsx("rect",{x:"125",y:"50",width:"18",height:"35",fill:"#3B82F6"}),e.jsx("rect",{x:"145",y:"65",width:"18",height:"20",fill:"#3B82F6"}),e.jsx("path",{d:"M30 72 Q70 20, 95 15 Q120 20, 155 67",fill:"none",stroke:"#EF4444",strokeWidth:"2",strokeDasharray:"3"}),e.jsx("line",{x1:"20",y1:"85",x2:"175",y2:"85",stroke:"#E5E7EB",strokeWidth:"1"})]}),BOX_PLOT:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("line",{x1:"40",y1:"50",x2:"40",y2:"15",stroke:"#3B82F6",strokeWidth:"1"}),e.jsx("line",{x1:"40",y1:"50",x2:"40",y2:"85",stroke:"#3B82F6",strokeWidth:"1"}),e.jsx("line",{x1:"30",y1:"15",x2:"50",y2:"15",stroke:"#3B82F6",strokeWidth:"2"}),e.jsx("line",{x1:"30",y1:"85",x2:"50",y2:"85",stroke:"#3B82F6",strokeWidth:"2"}),e.jsx("rect",{x:"25",y:"35",width:"30",height:"30",fill:"#93C5FD",stroke:"#3B82F6",strokeWidth:"2"}),e.jsx("line",{x1:"25",y1:"50",x2:"55",y2:"50",stroke:"#1F2937",strokeWidth:"2"}),e.jsx("line",{x1:"100",y1:"50",x2:"100",y2:"20",stroke:"#10B981",strokeWidth:"1"}),e.jsx("line",{x1:"100",y1:"50",x2:"100",y2:"80",stroke:"#10B981",strokeWidth:"1"}),e.jsx("line",{x1:"90",y1:"20",x2:"110",y2:"20",stroke:"#10B981",strokeWidth:"2"}),e.jsx("line",{x1:"90",y1:"80",x2:"110",y2:"80",stroke:"#10B981",strokeWidth:"2"}),e.jsx("rect",{x:"85",y:"38",width:"30",height:"25",fill:"#A7F3D0",stroke:"#10B981",strokeWidth:"2"}),e.jsx("line",{x1:"85",y1:"48",x2:"115",y2:"48",stroke:"#1F2937",strokeWidth:"2"}),e.jsx("line",{x1:"160",y1:"50",x2:"160",y2:"25",stroke:"#F59E0B",strokeWidth:"1"}),e.jsx("line",{x1:"160",y1:"50",x2:"160",y2:"75",stroke:"#F59E0B",strokeWidth:"1"}),e.jsx("line",{x1:"150",y1:"25",x2:"170",y2:"25",stroke:"#F59E0B",strokeWidth:"2"}),e.jsx("line",{x1:"150",y1:"75",x2:"170",y2:"75",stroke:"#F59E0B",strokeWidth:"2"}),e.jsx("rect",{x:"145",y:"40",width:"30",height:"20",fill:"#FDE68A",stroke:"#F59E0B",strokeWidth:"2"}),e.jsx("line",{x1:"145",y1:"52",x2:"175",y2:"52",stroke:"#1F2937",strokeWidth:"2"})]}),WAFFLE_CHART:e.jsx("svg",{viewBox:"0 0 200 100",className:s,children:[...Array(10)].map((n,m)=>[...Array(10)].map((c,y)=>{const g=m*10+y;let u="#E5E7EB";return g<45?u="#3B82F6":g<70?u="#10B981":g<85&&(u="#F59E0B"),e.jsx("rect",{x:25+y*16,y:10+m*8,width:"14",height:"6",rx:"1",fill:u},`waffle-${m}-${y}`)}))}),SCATTER_PLOT:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("line",{x1:"25",y1:"85",x2:"185",y2:"85",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"25",y1:"85",x2:"25",y2:"10",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("circle",{cx:"45",cy:"65",r:"5",fill:"#3B82F6",opacity:"0.7"}),e.jsx("circle",{cx:"60",cy:"55",r:"4",fill:"#3B82F6",opacity:"0.7"}),e.jsx("circle",{cx:"75",cy:"60",r:"6",fill:"#3B82F6",opacity:"0.7"}),e.jsx("circle",{cx:"90",cy:"45",r:"5",fill:"#3B82F6",opacity:"0.7"}),e.jsx("circle",{cx:"105",cy:"50",r:"4",fill:"#3B82F6",opacity:"0.7"}),e.jsx("circle",{cx:"120",cy:"35",r:"7",fill:"#3B82F6",opacity:"0.7"}),e.jsx("circle",{cx:"135",cy:"40",r:"5",fill:"#3B82F6",opacity:"0.7"}),e.jsx("circle",{cx:"150",cy:"30",r:"4",fill:"#3B82F6",opacity:"0.7"}),e.jsx("circle",{cx:"165",cy:"25",r:"6",fill:"#3B82F6",opacity:"0.7"}),e.jsx("line",{x1:"40",y1:"70",x2:"170",y2:"20",stroke:"#EF4444",strokeWidth:"2",strokeDasharray:"4",opacity:"0.5"})]}),BUBBLE_CHART:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("circle",{cx:"50",cy:"60",r:"15",fill:"rgba(59, 130, 246, 0.5)",stroke:"#3B82F6",strokeWidth:"2"}),e.jsx("circle",{cx:"90",cy:"40",r:"22",fill:"rgba(16, 185, 129, 0.5)",stroke:"#10B981",strokeWidth:"2"}),e.jsx("circle",{cx:"140",cy:"55",r:"12",fill:"rgba(245, 158, 11, 0.5)",stroke:"#F59E0B",strokeWidth:"2"}),e.jsx("circle",{cx:"165",cy:"30",r:"18",fill:"rgba(139, 92, 246, 0.5)",stroke:"#8B5CF6",strokeWidth:"2"}),e.jsx("circle",{cx:"120",cy:"70",r:"10",fill:"rgba(239, 68, 68, 0.5)",stroke:"#EF4444",strokeWidth:"2"})]}),HEATMAP:e.jsx("svg",{viewBox:"0 0 200 100",className:s,children:[0,1,2,3,4].map(n=>[0,1,2,3,4,5].map(m=>{const c=["#FEE2E2","#FECACA","#FCA5A5","#F87171","#EF4444","#DC2626","#B91C1C","#991B1B"],y=(n*6+m)%c.length;return e.jsx("rect",{x:30+m*25,y:15+n*15,width:"23",height:"13",rx:"2",fill:c[y]},`heatmap-${n}-${m}`)}))}),CORRELATION_MATRIX:e.jsx("svg",{viewBox:"0 0 200 100",className:s,children:[0,1,2,3,4].map(n=>[0,1,2,3,4].map(m=>{const c=Math.abs(n-m),y=["#1D4ED8","#3B82F6","#60A5FA","#93C5FD","#BFDBFE"];return e.jsx("rect",{x:35+m*28,y:12+n*16,width:"26",height:"14",rx:"2",fill:y[c]},`corr-${n}-${m}`)}))}),NETWORK_GRAPH:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("line",{x1:"50",y1:"30",x2:"100",y2:"50",stroke:"#E5E7EB",strokeWidth:"2"}),e.jsx("line",{x1:"50",y1:"30",x2:"80",y2:"70",stroke:"#E5E7EB",strokeWidth:"2"}),e.jsx("line",{x1:"100",y1:"50",x2:"150",y2:"30",stroke:"#E5E7EB",strokeWidth:"2"}),e.jsx("line",{x1:"100",y1:"50",x2:"130",y2:"75",stroke:"#E5E7EB",strokeWidth:"2"}),e.jsx("line",{x1:"100",y1:"50",x2:"80",y2:"70",stroke:"#E5E7EB",strokeWidth:"2"}),e.jsx("line",{x1:"150",y1:"30",x2:"130",y2:"75",stroke:"#E5E7EB",strokeWidth:"2"}),e.jsx("line",{x1:"80",y1:"70",x2:"130",y2:"75",stroke:"#E5E7EB",strokeWidth:"2"}),e.jsx("circle",{cx:"50",cy:"30",r:"10",fill:"#3B82F6"}),e.jsx("circle",{cx:"100",cy:"50",r:"14",fill:"#10B981"}),e.jsx("circle",{cx:"150",cy:"30",r:"10",fill:"#F59E0B"}),e.jsx("circle",{cx:"80",cy:"70",r:"8",fill:"#8B5CF6"}),e.jsx("circle",{cx:"130",cy:"75",r:"8",fill:"#EF4444"})]}),TREEMAP:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"15",y:"10",width:"80",height:"50",rx:"3",fill:"#3B82F6"}),e.jsx("rect",{x:"97",y:"10",width:"45",height:"35",rx:"3",fill:"#10B981"}),e.jsx("rect",{x:"144",y:"10",width:"42",height:"35",rx:"3",fill:"#F59E0B"}),e.jsx("rect",{x:"97",y:"47",width:"89",height:"18",rx:"3",fill:"#8B5CF6"}),e.jsx("rect",{x:"15",y:"62",width:"50",height:"28",rx:"3",fill:"#EC4899"}),e.jsx("rect",{x:"67",y:"62",width:"60",height:"28",rx:"3",fill:"#EF4444"}),e.jsx("rect",{x:"129",y:"67",width:"57",height:"23",rx:"3",fill:"#14B8A6"})]}),SUNBURST:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("circle",{cx:"100",cy:"50",r:"15",fill:"#3B82F6"}),e.jsx("path",{d:"M100 50 L100 20 A30 30 0 0 1 130 50 Z",fill:"#60A5FA"}),e.jsx("path",{d:"M100 50 L130 50 A30 30 0 0 1 100 80 Z",fill:"#93C5FD"}),e.jsx("path",{d:"M100 50 L100 80 A30 30 0 0 1 70 50 Z",fill:"#10B981"}),e.jsx("path",{d:"M100 50 L70 50 A30 30 0 0 1 100 20 Z",fill:"#F59E0B"}),e.jsx("path",{d:"M100 10 A40 40 0 0 1 140 50 L130 50 A30 30 0 0 0 100 20 Z",fill:"#8B5CF6"}),e.jsx("path",{d:"M140 50 A40 40 0 0 1 100 90 L100 80 A30 30 0 0 0 130 50 Z",fill:"#EC4899"}),e.jsx("path",{d:"M100 90 A40 40 0 0 1 60 50 L70 50 A30 30 0 0 0 100 80 Z",fill:"#14B8A6"}),e.jsx("path",{d:"M60 50 A40 40 0 0 1 100 10 L100 20 A30 30 0 0 0 70 50 Z",fill:"#EF4444"})]}),SANKEY_DIAGRAM:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("path",{d:"M20 20 C60 20, 60 15, 100 15 C140 15, 140 20, 180 20",fill:"none",stroke:"#3B82F6",strokeWidth:"12",opacity:"0.7"}),e.jsx("path",{d:"M20 45 C60 45, 60 35, 100 35 C140 35, 140 50, 180 50",fill:"none",stroke:"#10B981",strokeWidth:"10",opacity:"0.7"}),e.jsx("path",{d:"M20 70 C60 70, 60 55, 100 55 C140 55, 140 75, 180 75",fill:"none",stroke:"#F59E0B",strokeWidth:"8",opacity:"0.7"}),e.jsx("rect",{x:"15",y:"15",width:"10",height:"65",rx:"2",fill:"#1F2937"}),e.jsx("rect",{x:"175",y:"15",width:"10",height:"65",rx:"2",fill:"#1F2937"})]}),ORG_CHART:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"80",y:"10",width:"40",height:"20",rx:"4",fill:"#3B82F6"}),e.jsx("line",{x1:"100",y1:"30",x2:"100",y2:"40",stroke:"#9CA3AF",strokeWidth:"1"}),e.jsx("line",{x1:"50",y1:"40",x2:"150",y2:"40",stroke:"#9CA3AF",strokeWidth:"1"}),e.jsx("line",{x1:"50",y1:"40",x2:"50",y2:"50",stroke:"#9CA3AF",strokeWidth:"1"}),e.jsx("line",{x1:"100",y1:"40",x2:"100",y2:"50",stroke:"#9CA3AF",strokeWidth:"1"}),e.jsx("line",{x1:"150",y1:"40",x2:"150",y2:"50",stroke:"#9CA3AF",strokeWidth:"1"}),e.jsx("rect",{x:"30",y:"50",width:"40",height:"16",rx:"3",fill:"#10B981"}),e.jsx("rect",{x:"80",y:"50",width:"40",height:"16",rx:"3",fill:"#10B981"}),e.jsx("rect",{x:"130",y:"50",width:"40",height:"16",rx:"3",fill:"#10B981"}),e.jsx("line",{x1:"50",y1:"66",x2:"50",y2:"74",stroke:"#9CA3AF",strokeWidth:"1"}),e.jsx("rect",{x:"35",y:"74",width:"30",height:"14",rx:"2",fill:"#F59E0B"})]}),CHOROPLETH_MAP:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("path",{d:"M30 30 L50 25 L60 35 L55 50 L40 55 L25 45 Z",fill:"#BFDBFE",stroke:"#3B82F6",strokeWidth:"1"}),e.jsx("path",{d:"M55 25 L80 20 L90 30 L85 45 L60 50 L55 35 Z",fill:"#60A5FA",stroke:"#3B82F6",strokeWidth:"1"}),e.jsx("path",{d:"M85 20 L110 25 L115 40 L105 55 L85 50 L80 35 Z",fill:"#3B82F6",stroke:"#3B82F6",strokeWidth:"1"}),e.jsx("path",{d:"M110 30 L135 25 L145 40 L140 60 L115 55 L110 40 Z",fill:"#1D4ED8",stroke:"#3B82F6",strokeWidth:"1"}),e.jsx("path",{d:"M140 30 L165 35 L170 55 L160 70 L145 65 L140 50 Z",fill:"#93C5FD",stroke:"#3B82F6",strokeWidth:"1"}),e.jsx("path",{d:"M40 60 L70 55 L80 70 L70 85 L45 80 L35 70 Z",fill:"#DBEAFE",stroke:"#3B82F6",strokeWidth:"1"}),e.jsx("path",{d:"M75 60 L105 55 L115 70 L105 85 L80 80 L70 70 Z",fill:"#60A5FA",stroke:"#3B82F6",strokeWidth:"1"}),e.jsx("path",{d:"M110 60 L145 55 L155 70 L145 85 L115 80 L105 70 Z",fill:"#1E40AF",stroke:"#3B82F6",strokeWidth:"1"})]}),BUBBLE_MAP:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"20",y:"10",width:"160",height:"80",rx:"5",fill:"#E0F2FE"}),e.jsx("path",{d:"M40 50 Q60 30, 80 50 T120 50 T160 50",fill:"none",stroke:"#BAE6FD",strokeWidth:"2"}),e.jsx("circle",{cx:"45",cy:"45",r:"8",fill:"rgba(239, 68, 68, 0.6)",stroke:"#EF4444",strokeWidth:"1"}),e.jsx("circle",{cx:"80",cy:"35",r:"15",fill:"rgba(239, 68, 68, 0.6)",stroke:"#EF4444",strokeWidth:"1"}),e.jsx("circle",{cx:"120",cy:"55",r:"10",fill:"rgba(239, 68, 68, 0.6)",stroke:"#EF4444",strokeWidth:"1"}),e.jsx("circle",{cx:"150",cy:"40",r:"20",fill:"rgba(239, 68, 68, 0.6)",stroke:"#EF4444",strokeWidth:"1"}),e.jsx("circle",{cx:"100",cy:"70",r:"6",fill:"rgba(239, 68, 68, 0.6)",stroke:"#EF4444",strokeWidth:"1"})]}),FLOW_MAP:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"20",y:"15",width:"160",height:"70",rx:"4",fill:"#E0F2FE"}),e.jsx("circle",{cx:"50",cy:"40",r:"6",fill:"#3B82F6"}),e.jsx("circle",{cx:"150",cy:"60",r:"8",fill:"#EF4444"}),e.jsx("circle",{cx:"100",cy:"35",r:"5",fill:"#10B981"}),e.jsx("path",{d:"M50 40 Q75 30, 100 35",fill:"none",stroke:"#3B82F6",strokeWidth:"2",opacity:"0.6"}),e.jsx("path",{d:"M100 35 Q125 40, 150 60",fill:"none",stroke:"#10B981",strokeWidth:"3",opacity:"0.6"}),e.jsx("path",{d:"M50 40 Q100 70, 150 60",fill:"none",stroke:"#F59E0B",strokeWidth:"4",opacity:"0.6"})]}),FLOOR_PLAN:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"20",y:"15",width:"160",height:"70",rx:"3",fill:"#F3F4F6",stroke:"#D1D5DB",strokeWidth:"1"}),e.jsx("rect",{x:"25",y:"20",width:"40",height:"30",rx:"2",fill:"#10B981",opacity:"0.7"}),e.jsx("rect",{x:"70",y:"20",width:"50",height:"30",rx:"2",fill:"#3B82F6",opacity:"0.7"}),e.jsx("rect",{x:"125",y:"20",width:"50",height:"30",rx:"2",fill:"#F59E0B",opacity:"0.7"}),e.jsx("rect",{x:"25",y:"55",width:"60",height:"25",rx:"2",fill:"#EF4444",opacity:"0.7"}),e.jsx("rect",{x:"90",y:"55",width:"40",height:"25",rx:"2",fill:"#8B5CF6",opacity:"0.7"}),e.jsx("rect",{x:"135",y:"55",width:"40",height:"25",rx:"2",fill:"#E5E7EB"}),e.jsx("text",{x:"45",y:"38",textAnchor:"middle",fontSize:"6",fill:"white",children:"A1"}),e.jsx("text",{x:"95",y:"38",textAnchor:"middle",fontSize:"6",fill:"white",children:"A2"}),e.jsx("text",{x:"150",y:"38",textAnchor:"middle",fontSize:"6",fill:"white",children:"A3"})]}),GAUGE_CHART:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("path",{d:"M40 80 A50 50 0 0 1 160 80",fill:"none",stroke:"#E5E7EB",strokeWidth:"12",strokeLinecap:"round"}),e.jsx("path",{d:"M40 80 A50 50 0 0 1 130 35",fill:"none",stroke:"#10B981",strokeWidth:"12",strokeLinecap:"round"}),e.jsx("circle",{cx:"100",cy:"80",r:"8",fill:"#1F2937"}),e.jsx("line",{x1:"100",y1:"80",x2:"125",y2:"45",stroke:"#1F2937",strokeWidth:"3",strokeLinecap:"round",transform:"rotate(-30 100 80)"}),e.jsx("text",{x:"100",y:"95",textAnchor:"middle",fontSize:"12",fontWeight:"bold",fill:"#1F2937",children:"75%"})]}),KPI_CARD:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"20",y:"15",width:"160",height:"70",rx:"8",fill:"white",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("text",{x:"35",y:"40",fontSize:"12",fill:"#6B7280",children:"Revenue"}),e.jsx("text",{x:"35",y:"62",fontSize:"20",fontWeight:"bold",fill:"#1F2937",children:"$124,500"}),e.jsx("text",{x:"35",y:"78",fontSize:"10",fill:"#10B981",children:"↑ 12.5%"}),e.jsx("path",{d:"M120 55 L130 50 L140 55 L150 45 L160 48 L170 35",fill:"none",stroke:"#10B981",strokeWidth:"2"})]}),PROGRESS_BAR:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("text",{x:"20",y:"25",fontSize:"10",fill:"#6B7280",children:"Project Alpha"}),e.jsx("rect",{x:"20",y:"32",width:"160",height:"12",rx:"6",fill:"#E5E7EB"}),e.jsx("rect",{x:"20",y:"32",width:"120",height:"12",rx:"6",fill:"#3B82F6"}),e.jsx("text",{x:"182",y:"42",fontSize:"10",fill:"#1F2937",children:"75%"}),e.jsx("text",{x:"20",y:"60",fontSize:"10",fill:"#6B7280",children:"Project Beta"}),e.jsx("rect",{x:"20",y:"67",width:"160",height:"12",rx:"6",fill:"#E5E7EB"}),e.jsx("rect",{x:"20",y:"67",width:"80",height:"12",rx:"6",fill:"#10B981"}),e.jsx("text",{x:"182",y:"77",fontSize:"10",fill:"#1F2937",children:"50%"})]}),TRAFFIC_LIGHT:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"30",y:"15",width:"40",height:"70",rx:"8",fill:"#1F2937"}),e.jsx("circle",{cx:"50",cy:"30",r:"8",fill:"#EF4444"}),e.jsx("circle",{cx:"50",cy:"50",r:"8",fill:"#6B7280"}),e.jsx("circle",{cx:"50",cy:"70",r:"8",fill:"#6B7280"}),e.jsx("rect",{x:"85",y:"15",width:"40",height:"70",rx:"8",fill:"#1F2937"}),e.jsx("circle",{cx:"105",cy:"30",r:"8",fill:"#6B7280"}),e.jsx("circle",{cx:"105",cy:"50",r:"8",fill:"#F59E0B"}),e.jsx("circle",{cx:"105",cy:"70",r:"8",fill:"#6B7280"}),e.jsx("rect",{x:"140",y:"15",width:"40",height:"70",rx:"8",fill:"#1F2937"}),e.jsx("circle",{cx:"160",cy:"30",r:"8",fill:"#6B7280"}),e.jsx("circle",{cx:"160",cy:"50",r:"8",fill:"#6B7280"}),e.jsx("circle",{cx:"160",cy:"70",r:"8",fill:"#10B981"})]}),METRIC_TILE:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"20",y:"15",width:"70",height:"70",rx:"8",fill:"white",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("text",{x:"55",y:"40",textAnchor:"middle",fontSize:"8",fill:"#6B7280",children:"Revenue"}),e.jsx("text",{x:"55",y:"58",textAnchor:"middle",fontSize:"14",fontWeight:"bold",fill:"#1F2937",children:"$45K"}),e.jsx("text",{x:"55",y:"72",textAnchor:"middle",fontSize:"8",fill:"#10B981",children:"+15%"}),e.jsx("rect",{x:"110",y:"15",width:"70",height:"70",rx:"8",fill:"white",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("text",{x:"145",y:"40",textAnchor:"middle",fontSize:"8",fill:"#6B7280",children:"Users"}),e.jsx("text",{x:"145",y:"58",textAnchor:"middle",fontSize:"14",fontWeight:"bold",fill:"#1F2937",children:"2.4K"}),e.jsx("text",{x:"145",y:"72",textAnchor:"middle",fontSize:"8",fill:"#EF4444",children:"-3%"})]}),COMPARISON_INDICATOR:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"20",y:"20",width:"160",height:"60",rx:"8",fill:"white",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("text",{x:"40",y:"42",fontSize:"10",fill:"#6B7280",children:"vs Last Year"}),e.jsx("text",{x:"40",y:"62",fontSize:"18",fontWeight:"bold",fill:"#10B981",children:"+23.5%"}),e.jsx("polygon",{points:"150,35 165,50 150,65",fill:"#10B981"}),e.jsx("rect",{x:"120",y:"40",width:"30",height:"20",rx:"4",fill:"#D1FAE5"}),e.jsx("text",{x:"135",y:"54",textAnchor:"middle",fontSize:"10",fill:"#10B981",children:"▲"})]}),DATA_TABLE:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"20",y:"15",width:"160",height:"70",rx:"4",fill:"white",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("rect",{x:"20",y:"15",width:"160",height:"15",fill:"#F3F4F6"}),e.jsx("line",{x1:"70",y1:"15",x2:"70",y2:"85",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"120",y1:"15",x2:"120",y2:"85",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"20",y1:"30",x2:"180",y2:"30",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"20",y1:"48",x2:"180",y2:"48",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"20",y1:"66",x2:"180",y2:"66",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("text",{x:"45",y:"25",textAnchor:"middle",fontSize:"7",fill:"#6B7280",children:"Name"}),e.jsx("text",{x:"95",y:"25",textAnchor:"middle",fontSize:"7",fill:"#6B7280",children:"Value"}),e.jsx("text",{x:"150",y:"25",textAnchor:"middle",fontSize:"7",fill:"#6B7280",children:"Status"})]}),PIVOT_TABLE:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"20",y:"15",width:"160",height:"70",rx:"4",fill:"white",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("rect",{x:"20",y:"15",width:"40",height:"70",fill:"#E0E7FF"}),e.jsx("rect",{x:"20",y:"15",width:"160",height:"15",fill:"#C7D2FE"}),e.jsx("line",{x1:"60",y1:"15",x2:"60",y2:"85",stroke:"#A5B4FC",strokeWidth:"1"}),e.jsx("line",{x1:"100",y1:"15",x2:"100",y2:"85",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"140",y1:"15",x2:"140",y2:"85",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"20",y1:"30",x2:"180",y2:"30",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"20",y1:"50",x2:"180",y2:"50",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"20",y1:"70",x2:"180",y2:"70",stroke:"#E5E7EB",strokeWidth:"1"})]}),MATRIX:e.jsx("svg",{viewBox:"0 0 200 100",className:s,children:[0,1,2,3].map(n=>[0,1,2,3,4].map(m=>e.jsx("rect",{x:30+m*30,y:18+n*18,width:"28",height:"16",rx:"2",fill:`rgba(59, 130, 246, ${.2+(n*5+m)%8*.1})`},`matrix-${n}-${m}`)))}),CROSSTAB:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"20",y:"15",width:"160",height:"70",rx:"4",fill:"white",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("rect",{x:"20",y:"15",width:"45",height:"70",fill:"#FEF3C7"}),e.jsx("rect",{x:"20",y:"15",width:"160",height:"18",fill:"#FDE68A"}),e.jsx("line",{x1:"65",y1:"15",x2:"65",y2:"85",stroke:"#FCD34D",strokeWidth:"1"}),e.jsx("line",{x1:"20",y1:"33",x2:"180",y2:"33",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("text",{x:"42",y:"27",textAnchor:"middle",fontSize:"7",fontWeight:"bold",fill:"#92400E",children:"Cat."}),e.jsx("text",{x:"110",y:"27",textAnchor:"middle",fontSize:"7",fill:"#92400E",children:"Q1 | Q2 | Q3 | Q4"})]}),"3D_BAR_CHART":e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"bar3dGrad",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3B82F6"}),e.jsx("stop",{offset:"100%",stopColor:"#1D4ED8"})]})}),e.jsx("polygon",{points:"30,75 50,75 55,70 35,70",fill:"#1E40AF"}),e.jsx("rect",{x:"30",y:"55",width:"20",height:"20",fill:"url(#bar3dGrad)"}),e.jsx("polygon",{points:"50,55 55,50 55,70 50,75",fill:"#2563EB"}),e.jsx("polygon",{points:"70,75 90,75 95,70 75,70",fill:"#1E40AF"}),e.jsx("rect",{x:"70",y:"35",width:"20",height:"40",fill:"url(#bar3dGrad)"}),e.jsx("polygon",{points:"90,35 95,30 95,70 90,75",fill:"#2563EB"}),e.jsx("polygon",{points:"110,75 130,75 135,70 115,70",fill:"#1E40AF"}),e.jsx("rect",{x:"110",y:"20",width:"20",height:"55",fill:"url(#bar3dGrad)"}),e.jsx("polygon",{points:"130,20 135,15 135,70 130,75",fill:"#2563EB"}),e.jsx("polygon",{points:"150,75 170,75 175,70 155,70",fill:"#1E40AF"}),e.jsx("rect",{x:"150",y:"40",width:"20",height:"35",fill:"url(#bar3dGrad)"}),e.jsx("polygon",{points:"170,40 175,35 175,70 170,75",fill:"#2563EB"})]}),"3D_PIE_CHART":e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("ellipse",{cx:"100",cy:"60",rx:"50",ry:"15",fill:"#1E40AF"}),e.jsx("ellipse",{cx:"100",cy:"50",rx:"50",ry:"15",fill:"#E5E7EB"}),e.jsx("path",{d:"M100 50 L100 35 A35 10 0 0 1 135 50 Z",fill:"#3B82F6"}),e.jsx("path",{d:"M100 50 L135 50 A35 10 0 0 1 100 60 Z",fill:"#10B981"}),e.jsx("path",{d:"M100 50 L100 60 A35 10 0 0 1 70 50 Z",fill:"#F59E0B"}),e.jsx("path",{d:"M100 50 L70 50 A35 10 0 0 1 100 35 Z",fill:"#8B5CF6"}),e.jsx("ellipse",{cx:"100",cy:"40",rx:"50",ry:"15",fill:"none",stroke:"rgba(255,255,255,0.5)",strokeWidth:"1"})]}),"3D_SCATTER":e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("line",{x1:"30",y1:"80",x2:"100",y2:"80",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"30",y1:"80",x2:"30",y2:"20",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"30",y1:"80",x2:"60",y2:"95",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("circle",{cx:"50",cy:"60",r:"5",fill:"rgba(59, 130, 246, 0.7)"}),e.jsx("circle",{cx:"75",cy:"45",r:"7",fill:"rgba(16, 185, 129, 0.7)"}),e.jsx("circle",{cx:"60",cy:"35",r:"4",fill:"rgba(245, 158, 11, 0.7)"}),e.jsx("circle",{cx:"90",cy:"55",r:"6",fill:"rgba(139, 92, 246, 0.7)"}),e.jsx("circle",{cx:"110",cy:"40",r:"5",fill:"rgba(236, 72, 153, 0.7)"}),e.jsx("circle",{cx:"130",cy:"50",r:"8",fill:"rgba(239, 68, 68, 0.7)"}),e.jsx("circle",{cx:"150",cy:"30",r:"6",fill:"rgba(20, 184, 166, 0.7)"})]}),"3D_SURFACE":e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"surfGrad",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10B981"}),e.jsx("stop",{offset:"50%",stopColor:"#3B82F6"}),e.jsx("stop",{offset:"100%",stopColor:"#8B5CF6"})]})}),e.jsx("path",{d:"M20 70 Q50 50, 70 60 Q90 70, 100 40 Q110 10, 130 30 Q150 50, 180 35",fill:"none",stroke:"url(#surfGrad)",strokeWidth:"3"}),e.jsx("path",{d:"M20 80 Q50 60, 70 70 Q90 80, 100 50 Q110 20, 130 40 Q150 60, 180 45",fill:"none",stroke:"url(#surfGrad)",strokeWidth:"2",opacity:"0.6"}),e.jsx("path",{d:"M20 90 Q50 70, 70 80 Q90 90, 100 60 Q110 30, 130 50 Q150 70, 180 55",fill:"none",stroke:"url(#surfGrad)",strokeWidth:"1",opacity:"0.3"})]}),"3D_GLOBE":e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("defs",{children:e.jsxs("radialGradient",{id:"globeGrad",cx:"40%",cy:"40%",r:"60%",children:[e.jsx("stop",{offset:"0%",stopColor:"#60A5FA"}),e.jsx("stop",{offset:"100%",stopColor:"#1E40AF"})]})}),e.jsx("circle",{cx:"100",cy:"50",r:"40",fill:"url(#globeGrad)"}),e.jsx("ellipse",{cx:"100",cy:"50",rx:"40",ry:"10",fill:"none",stroke:"rgba(255,255,255,0.3)",strokeWidth:"1"}),e.jsx("ellipse",{cx:"100",cy:"50",rx:"20",ry:"40",fill:"none",stroke:"rgba(255,255,255,0.3)",strokeWidth:"1"}),e.jsx("path",{d:"M100 10 Q110 30, 100 50 Q90 70, 100 90",fill:"none",stroke:"rgba(255,255,255,0.3)",strokeWidth:"1"}),e.jsx("circle",{cx:"85",cy:"35",r:"3",fill:"#10B981"}),e.jsx("circle",{cx:"110",cy:"45",r:"4",fill:"#10B981"}),e.jsx("circle",{cx:"95",cy:"60",r:"3",fill:"#10B981"}),e.jsx("path",{d:"M85 35 Q100 25, 110 45",fill:"none",stroke:"#F59E0B",strokeWidth:"1",opacity:"0.8"})]}),ISOMETRIC_CHART:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"isoGrad1",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3B82F6"}),e.jsx("stop",{offset:"100%",stopColor:"#1D4ED8"})]})}),e.jsx("polygon",{points:"50,70 70,80 70,60 50,50",fill:"#2563EB"}),e.jsx("polygon",{points:"50,70 50,50 70,40 70,60",fill:"url(#isoGrad1)"}),e.jsx("polygon",{points:"50,50 70,40 90,50 70,60",fill:"#60A5FA"}),e.jsx("polygon",{points:"90,70 110,80 110,40 90,30",fill:"#2563EB"}),e.jsx("polygon",{points:"90,70 90,30 110,20 110,60",fill:"url(#isoGrad1)"}),e.jsx("polygon",{points:"90,30 110,20 130,30 110,40",fill:"#60A5FA"}),e.jsx("polygon",{points:"130,70 150,80 150,50 130,40",fill:"#2563EB"}),e.jsx("polygon",{points:"130,70 130,40 150,30 150,60",fill:"url(#isoGrad1)"}),e.jsx("polygon",{points:"130,40 150,30 170,40 150,50",fill:"#60A5FA"})]}),LIVE_STREAM:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"15",y:"10",width:"170",height:"80",rx:"5",fill:"#0F172A"}),e.jsx("path",{d:"M25 60 L40 50 L55 55 L70 40 L85 45 L100 35 L115 42 L130 30 L145 38 L160 25 L175 32",fill:"none",stroke:"#10B981",strokeWidth:"2"}),e.jsx("circle",{cx:"175",cy:"32",r:"4",fill:"#10B981",children:e.jsx("animate",{attributeName:"opacity",values:"1;0.5;1",dur:"1s",repeatCount:"indefinite"})}),e.jsx("circle",{cx:"30",cy:"20",r:"4",fill:"#EF4444",children:e.jsx("animate",{attributeName:"opacity",values:"1;0.3;1",dur:"0.5s",repeatCount:"indefinite"})}),e.jsx("text",{x:"40",y:"24",fontSize:"8",fill:"#EF4444",children:"LIVE"})]}),BAR_CHART_RACE:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"20",y:"15",width:"150",height:"15",rx:"3",fill:"#3B82F6"}),e.jsx("text",{x:"175",y:"26",fontSize:"10",fill:"#1F2937",children:"USA"}),e.jsx("rect",{x:"20",y:"35",width:"120",height:"15",rx:"3",fill:"#10B981"}),e.jsx("text",{x:"145",y:"46",fontSize:"10",fill:"#1F2937",children:"CHN"}),e.jsx("rect",{x:"20",y:"55",width:"90",height:"15",rx:"3",fill:"#F59E0B"}),e.jsx("text",{x:"115",y:"66",fontSize:"10",fill:"#1F2937",children:"JPN"}),e.jsx("rect",{x:"20",y:"75",width:"60",height:"15",rx:"3",fill:"#EF4444"}),e.jsx("text",{x:"85",y:"86",fontSize:"10",fill:"#1F2937",children:"DEU"}),e.jsx("text",{x:"100",y:"98",textAnchor:"middle",fontSize:"8",fill:"#6B7280",children:"▶ 2024"})]}),ANIMATED_DONUT:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("circle",{cx:"100",cy:"50",r:"35",fill:"none",stroke:"#E5E7EB",strokeWidth:"10"}),e.jsx("circle",{cx:"100",cy:"50",r:"35",fill:"none",stroke:"#3B82F6",strokeWidth:"10",strokeDasharray:"165 55",strokeDashoffset:"55",transform:"rotate(-90 100 50)",children:e.jsx("animate",{attributeName:"stroke-dashoffset",values:"220;55",dur:"1.5s",fill:"freeze"})}),e.jsx("text",{x:"100",y:"54",textAnchor:"middle",fontSize:"16",fontWeight:"bold",fill:"#1F2937",children:"75%"})]}),PARTICLE_FLOW:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"flowGrad",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3B82F6",stopOpacity:"0"}),e.jsx("stop",{offset:"50%",stopColor:"#3B82F6",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"#3B82F6",stopOpacity:"0"})]})}),e.jsx("circle",{cx:"30",cy:"50",r:"15",fill:"#E5E7EB",stroke:"#9CA3AF",strokeWidth:"2"}),e.jsx("circle",{cx:"170",cy:"50",r:"15",fill:"#E5E7EB",stroke:"#9CA3AF",strokeWidth:"2"}),e.jsx("path",{d:"M45 45 Q100 30, 155 45",fill:"none",stroke:"url(#flowGrad)",strokeWidth:"3"}),e.jsx("path",{d:"M45 50 Q100 50, 155 50",fill:"none",stroke:"url(#flowGrad)",strokeWidth:"2"}),e.jsx("path",{d:"M45 55 Q100 70, 155 55",fill:"none",stroke:"url(#flowGrad)",strokeWidth:"3"}),e.jsx("circle",{cx:"70",cy:"42",r:"3",fill:"#3B82F6"}),e.jsx("circle",{cx:"90",cy:"48",r:"3",fill:"#3B82F6"}),e.jsx("circle",{cx:"110",cy:"52",r:"3",fill:"#3B82F6"}),e.jsx("circle",{cx:"130",cy:"47",r:"3",fill:"#3B82F6"})]}),TICKER_TAPE:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"20",y:"35",width:"160",height:"30",rx:"4",fill:"#F3F4F6"}),e.jsx("text",{x:"30",y:"55",fontSize:"10",fill:"#1F2937",children:"AAPL +2.5%"}),e.jsx("text",{x:"85",y:"55",fontSize:"10",fill:"#EF4444",children:"TSLA -1.2%"}),e.jsx("text",{x:"140",y:"55",fontSize:"10",fill:"#10B981",children:"MSFT +0.8%"})]}),COUNTDOWN_TIMER:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"25",y:"25",width:"40",height:"50",rx:"5",fill:"#1F2937"}),e.jsx("text",{x:"45",y:"58",textAnchor:"middle",fontSize:"24",fontWeight:"bold",fill:"#10B981",children:"12"}),e.jsx("text",{x:"45",y:"70",textAnchor:"middle",fontSize:"8",fill:"#6B7280",children:"DAYS"}),e.jsx("text",{x:"80",y:"55",fontSize:"20",fill:"#6B7280",children:":"}),e.jsx("rect",{x:"95",y:"25",width:"40",height:"50",rx:"5",fill:"#1F2937"}),e.jsx("text",{x:"115",y:"58",textAnchor:"middle",fontSize:"24",fontWeight:"bold",fill:"#10B981",children:"05"}),e.jsx("text",{x:"115",y:"70",textAnchor:"middle",fontSize:"8",fill:"#6B7280",children:"HRS"}),e.jsx("text",{x:"150",y:"55",fontSize:"20",fill:"#6B7280",children:":"}),e.jsx("rect",{x:"160",y:"25",width:"25",height:"50",rx:"5",fill:"#1F2937"}),e.jsx("text",{x:"172",y:"58",textAnchor:"middle",fontSize:"18",fontWeight:"bold",fill:"#10B981",children:"32"})]}),DENSITY_PLOT:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"densityGrad",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(59, 130, 246, 0.5)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(59, 130, 246, 0)"})]})}),e.jsx("path",{d:"M25 85 Q40 85, 60 60 Q80 20, 100 20 Q120 20, 140 60 Q160 85, 175 85 L175 85 L25 85 Z",fill:"url(#densityGrad)",stroke:"#3B82F6",strokeWidth:"2"}),e.jsx("line",{x1:"20",y1:"85",x2:"180",y2:"85",stroke:"#E5E7EB",strokeWidth:"1"})]}),VIOLIN_PLOT:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("path",{d:"M50 20 Q30 35, 30 50 Q30 65, 50 80 Q70 65, 70 50 Q70 35, 50 20",fill:"rgba(59, 130, 246, 0.3)",stroke:"#3B82F6",strokeWidth:"2"}),e.jsx("line",{x1:"50",y1:"30",x2:"50",y2:"70",stroke:"#1F2937",strokeWidth:"2"}),e.jsx("rect",{x:"45",y:"40",width:"10",height:"20",fill:"#3B82F6"}),e.jsx("line",{x1:"43",y1:"50",x2:"57",y2:"50",stroke:"white",strokeWidth:"2"}),e.jsx("path",{d:"M100 15 Q75 30, 75 50 Q75 70, 100 85 Q125 70, 125 50 Q125 30, 100 15",fill:"rgba(16, 185, 129, 0.3)",stroke:"#10B981",strokeWidth:"2"}),e.jsx("line",{x1:"100",y1:"25",x2:"100",y2:"75",stroke:"#1F2937",strokeWidth:"2"}),e.jsx("rect",{x:"95",y:"38",width:"10",height:"24",fill:"#10B981"}),e.jsx("line",{x1:"93",y1:"50",x2:"107",y2:"50",stroke:"white",strokeWidth:"2"}),e.jsx("path",{d:"M150 25 Q135 40, 135 50 Q135 60, 150 75 Q165 60, 165 50 Q165 40, 150 25",fill:"rgba(245, 158, 11, 0.3)",stroke:"#F59E0B",strokeWidth:"2"}),e.jsx("line",{x1:"150",y1:"32",x2:"150",y2:"68",stroke:"#1F2937",strokeWidth:"2"}),e.jsx("rect",{x:"145",y:"42",width:"10",height:"16",fill:"#F59E0B"}),e.jsx("line",{x1:"143",y1:"50",x2:"157",y2:"50",stroke:"white",strokeWidth:"2"})]}),REGRESSION_PLOT:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("line",{x1:"25",y1:"85",x2:"185",y2:"85",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"25",y1:"85",x2:"25",y2:"10",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("circle",{cx:"40",cy:"70",r:"4",fill:"#3B82F6",opacity:"0.7"}),e.jsx("circle",{cx:"55",cy:"65",r:"4",fill:"#3B82F6",opacity:"0.7"}),e.jsx("circle",{cx:"70",cy:"55",r:"4",fill:"#3B82F6",opacity:"0.7"}),e.jsx("circle",{cx:"90",cy:"50",r:"4",fill:"#3B82F6",opacity:"0.7"}),e.jsx("circle",{cx:"110",cy:"40",r:"4",fill:"#3B82F6",opacity:"0.7"}),e.jsx("circle",{cx:"130",cy:"35",r:"4",fill:"#3B82F6",opacity:"0.7"}),e.jsx("circle",{cx:"150",cy:"25",r:"4",fill:"#3B82F6",opacity:"0.7"}),e.jsx("circle",{cx:"170",cy:"20",r:"4",fill:"#3B82F6",opacity:"0.7"}),e.jsx("line",{x1:"35",y1:"75",x2:"175",y2:"15",stroke:"#EF4444",strokeWidth:"2"}),e.jsx("path",{d:"M35 65 L175 5",fill:"none",stroke:"#EF4444",strokeWidth:"1",strokeDasharray:"3",opacity:"0.3"}),e.jsx("path",{d:"M35 85 L175 25",fill:"none",stroke:"#EF4444",strokeWidth:"1",strokeDasharray:"3",opacity:"0.3"})]}),CONFIDENCE_INTERVAL:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"ciGrad",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(59, 130, 246, 0.3)"}),e.jsx("stop",{offset:"50%",stopColor:"rgba(59, 130, 246, 0.1)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(59, 130, 246, 0.3)"})]})}),e.jsx("path",{d:"M25 25 L55 30 L85 20 L115 35 L145 25 L175 30 L175 70 L145 65 L115 55 L85 70 L55 60 L25 65 Z",fill:"url(#ciGrad)"}),e.jsx("path",{d:"M25 45 L55 45 L85 40 L115 48 L145 42 L175 48",fill:"none",stroke:"#3B82F6",strokeWidth:"2"}),e.jsx("line",{x1:"20",y1:"85",x2:"180",y2:"85",stroke:"#E5E7EB",strokeWidth:"1"})]}),PARALLEL_COORDINATES:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("line",{x1:"30",y1:"15",x2:"30",y2:"85",stroke:"#E5E7EB",strokeWidth:"2"}),e.jsx("line",{x1:"70",y1:"15",x2:"70",y2:"85",stroke:"#E5E7EB",strokeWidth:"2"}),e.jsx("line",{x1:"110",y1:"15",x2:"110",y2:"85",stroke:"#E5E7EB",strokeWidth:"2"}),e.jsx("line",{x1:"150",y1:"15",x2:"150",y2:"85",stroke:"#E5E7EB",strokeWidth:"2"}),e.jsx("path",{d:"M30 25 L70 45 L110 35 L150 55",fill:"none",stroke:"#3B82F6",strokeWidth:"2",opacity:"0.7"}),e.jsx("path",{d:"M30 40 L70 30 L110 60 L150 40",fill:"none",stroke:"#10B981",strokeWidth:"2",opacity:"0.7"}),e.jsx("path",{d:"M30 60 L70 55 L110 45 L150 25",fill:"none",stroke:"#F59E0B",strokeWidth:"2",opacity:"0.7"}),e.jsx("path",{d:"M30 75 L70 65 L110 70 L150 65",fill:"none",stroke:"#EF4444",strokeWidth:"2",opacity:"0.7"})]}),HEXBIN:e.jsx("svg",{viewBox:"0 0 200 100",className:s,children:[{x:50,y:30,color:"#BFDBFE"},{x:80,y:30,color:"#60A5FA"},{x:110,y:30,color:"#93C5FD"},{x:140,y:30,color:"#DBEAFE"},{x:35,y:50,color:"#93C5FD"},{x:65,y:50,color:"#3B82F6"},{x:95,y:50,color:"#1D4ED8"},{x:125,y:50,color:"#3B82F6"},{x:155,y:50,color:"#60A5FA"},{x:50,y:70,color:"#60A5FA"},{x:80,y:70,color:"#93C5FD"},{x:110,y:70,color:"#60A5FA"},{x:140,y:70,color:"#BFDBFE"}].map((n,m)=>e.jsx("polygon",{points:`${n.x},${n.y-10} ${n.x+12},${n.y-5} ${n.x+12},${n.y+5} ${n.x},${n.y+10} ${n.x-12},${n.y+5} ${n.x-12},${n.y-5}`,fill:n.color},`hex-${m}`))}),CONTOUR_PLOT:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("ellipse",{cx:"100",cy:"50",rx:"70",ry:"35",fill:"none",stroke:"#BFDBFE",strokeWidth:"2"}),e.jsx("ellipse",{cx:"100",cy:"50",rx:"55",ry:"27",fill:"none",stroke:"#93C5FD",strokeWidth:"2"}),e.jsx("ellipse",{cx:"100",cy:"50",rx:"40",ry:"20",fill:"none",stroke:"#60A5FA",strokeWidth:"2"}),e.jsx("ellipse",{cx:"100",cy:"50",rx:"25",ry:"12",fill:"none",stroke:"#3B82F6",strokeWidth:"2"}),e.jsx("ellipse",{cx:"100",cy:"50",rx:"10",ry:"5",fill:"#1D4ED8"})]}),BEESWARM:e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("line",{x1:"20",y1:"85",x2:"180",y2:"85",stroke:"#E5E7EB",strokeWidth:"1"}),[{x:50,points:[25,30,35,28,32]},{x:100,points:[45,40,50,42,38,48]},{x:150,points:[60,55,65,58]}].map((n,m)=>e.jsx("g",{children:n.points.map((c,y)=>e.jsx("circle",{cx:n.x+(y%2===0?-5:5)*Math.floor(y/2),cy:c,r:"4",fill:"#3B82F6",opacity:"0.7"},`point-${m}-${y}`))},`group-${m}`))]})},a=e.jsxs("svg",{viewBox:"0 0 200 100",className:s,children:[e.jsx("rect",{x:"30",y:"20",width:"140",height:"60",rx:"8",fill:"#F3F4F6",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("text",{x:"100",y:"55",textAnchor:"middle",fontSize:"12",fill:"#9CA3AF",children:"Preview"})]});return e.jsx(e.Fragment,{children:l[t]||a})},pa={TrendingUp:oe,DollarSign:Xs,Store:Zs,Calendar:Xt,Users:Js,ClipboardList:Qs,Building2:Ks,Grid3X3:Ys,Calculator:zs,Wallet:$s,Leaf:Hs,Search:ct,Target:Tt,Briefcase:Ws,HardHat:Us,BarChart3:Ge,PieChart:rt,GitBranch:Vs,Layers:Gs,Map:Ms,Gauge:Jt,Table:Ue,Box:qs,Activity:He,LineChart:st},Fe=t=>pa[t]||ce,Xe={simple:{label:"Simple",color:"bg-green-100 text-green-700"},standard:{label:"Standard",color:"bg-blue-100 text-blue-700"},advanced:{label:"Avancé",color:"bg-orange-100 text-orange-700"},expert:{label:"Expert",color:"bg-purple-100 text-purple-700"}};function xi(){const{centreId:t}=nt();Qt();const r=lt(i=>i.getCentre(t||"")),{addToast:s}=ot(),{recherche:l,rapportsFavoris:a,setRecherche:n,toggleRapportFavori:m}=Ds(),[c,y]=d.useState("reports"),[g,u]=d.useState("grid"),[p,v]=d.useState(""),[N,E]=d.useState(""),[j,h]=d.useState(!1),[f,w]=d.useState(!1),[b,S]=d.useState(null),[A,D]=d.useState(!1),[C,O]=d.useState(new Set(Ze.map(i=>i.code))),[k,W]=d.useState(""),[H,Q]=d.useState(""),[B,U]=d.useState(!1),[Y,X]=d.useState(!1),[M,ie]=d.useState(null),[de,ne]=d.useState(!1),ae=d.useMemo(()=>Object.values(Nt),[]),se=d.useMemo(()=>{let i=ae;return l&&(i=Xr(l)),p&&(i=i.filter(I=>I.category===p)),N&&(i=i.filter(I=>I.complexity===N)),j&&(i=i.filter(I=>I.aiPowered)),f&&(i=i.filter(I=>I.premium)),i},[ae,l,p,N,j,f]);d.useMemo(()=>{const i={};return Ze.forEach(I=>{i[I.code]=se.filter(J=>J.category===I.code.toLowerCase().replace("_","_"))}),i},[se]);const o=d.useMemo(()=>qr(),[]),x=d.useMemo(()=>Fr(),[]),R=d.useMemo(()=>{let i=it;return l&&(i=ua(l)),k&&(i=i.filter(I=>I.categoryCode===k)),H&&(i=i.filter(I=>I.complexity===H)),B&&(i=i.filter(I=>I.popular)),Y&&(i=i.filter(I=>I.new)),i},[l,k,H,B,Y]),V=d.useMemo(()=>{const i={};return ht.forEach(I=>{i[I.code]=R.filter(J=>J.categoryCode===I.code)}),i},[R]),F=i=>{const I=new Set(C);I.has(i)?I.delete(i):I.add(i),O(I)},K=i=>{S(i),D(!0)},le=()=>{D(!1),S(null)},Ce=i=>{ie(i),ne(!0)},Ye=()=>{ne(!1),ie(null)},dt=i=>{s({type:"success",message:`Rapport "${i.name}" créé avec succès`}),le()},Ke=({report:i})=>{const I=a.includes(i.code),J=Fe(i.icon),te=Xe[i.complexity];return e.jsxs("div",{className:"bg-white rounded-lg border border-primary-200 hover:border-accent hover:shadow-md transition-all cursor-pointer group",onClick:()=>K(i),children:[e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${i.color}15`},children:e.jsx(J,{className:"w-5 h-5",style:{color:i.color}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-primary-900 group-hover:text-accent transition-colors",children:i.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(_,{className:te.color,children:te.label}),i.aiPowered&&e.jsxs(_,{className:"bg-purple-100 text-purple-700",children:[e.jsx(he,{className:"w-3 h-3 mr-1"}),"IA"]}),i.new&&e.jsx(_,{className:"bg-green-100 text-green-700",children:"Nouveau"}),i.premium&&e.jsx(_,{className:"bg-amber-100 text-amber-700",children:"Premium"})]})]})]}),e.jsx("button",{onClick:ee=>{ee.stopPropagation(),m(i.code)},className:"p-1 hover:bg-primary-50 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:I?e.jsx(Re,{className:"w-4 h-4 text-warning fill-warning"}):e.jsx(Ft,{className:"w-4 h-4 text-primary-400"})})]}),e.jsx("p",{className:"text-sm text-primary-600 mb-3 line-clamp-2",children:i.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-primary-500",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ce,{className:"w-3 h-3"}),i.estimatedPages.min,"-",i.estimatedPages.max," pages"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(He,{className:"w-3 h-3"}),i.kpis.length," KPIs"]})]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(De,{className:"w-3 h-3"}),i.updateFrequency==="monthly"&&"Mensuel",i.updateFrequency==="weekly"&&"Hebdo",i.updateFrequency==="quarterly"&&"Trimestriel",i.updateFrequency==="annually"&&"Annuel",i.updateFrequency==="daily"&&"Quotidien",i.updateFrequency==="on_demand"&&"À la demande"]})]})]}),e.jsx("div",{className:"px-4 py-2 border-t border-primary-100 bg-primary-50/50",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.tags.slice(0,4).map(ee=>e.jsx("span",{className:"text-xs px-2 py-0.5 bg-white rounded text-primary-500",children:ee},ee)),i.tags.length>4&&e.jsxs("span",{className:"text-xs px-2 py-0.5 text-primary-400",children:["+",i.tags.length-4]})]})})]})},mt=({report:i})=>{const I=a.includes(i.code),J=Fe(i.icon),te=Xe[i.complexity];return e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-lg border border-primary-200 hover:border-accent hover:shadow-sm transition-all cursor-pointer group",onClick:()=>K(i),children:[e.jsx("div",{className:"p-2 rounded-lg flex-shrink-0",style:{backgroundColor:`${i.color}15`},children:e.jsx(J,{className:"w-5 h-5",style:{color:i.color}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium text-primary-900 truncate group-hover:text-accent transition-colors",children:i.name}),e.jsx(_,{className:te.color,children:te.label}),i.aiPowered&&e.jsxs(_,{className:"bg-purple-100 text-purple-700",children:[e.jsx(he,{className:"w-3 h-3 mr-1"}),"IA"]})]}),e.jsx("p",{className:"text-sm text-primary-500 truncate mt-0.5",children:i.description})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-primary-500 flex-shrink-0",children:[e.jsxs("span",{children:[i.kpis.length," KPIs"]}),e.jsxs("span",{children:[i.sections.length," sections"]}),e.jsx("button",{onClick:ee=>{ee.stopPropagation(),m(i.code)},className:"p-1 hover:bg-primary-50 rounded",children:I?e.jsx(Re,{className:"w-4 h-4 text-warning fill-warning"}):e.jsx(Ft,{className:"w-4 h-4 text-primary-400"})}),e.jsx(ve,{className:"w-4 h-4 text-primary-300"})]})]})},ut=({kpi:i})=>{const I=i.trend==="higher_better"?oe:i.trend==="lower_better"?oe:Tt,J=i.trend==="higher_better"?"text-green-500":i.trend==="lower_better"?"text-red-500":"text-blue-500";return e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-primary-200 hover:border-accent transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-primary-900",children:i.name}),e.jsx("span",{className:"text-xs font-mono text-primary-500",children:i.code})]}),e.jsx(_,{className:"bg-primary-100 text-primary-700",children:i.unit})]}),e.jsx("p",{className:"text-sm text-primary-600 mb-3 line-clamp-2",children:i.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-primary-500",children:[e.jsx(De,{className:"w-3 h-3 inline mr-1"}),i.frequency==="monthly"&&"Mensuel",i.frequency==="quarterly"&&"Trimestriel",i.frequency==="annually"&&"Annuel",i.frequency==="daily"&&"Quotidien",i.frequency==="weekly"&&"Hebdomadaire"]}),e.jsxs("span",{className:`flex items-center gap-1 ${J}`,children:[Ie.createElement(I,{className:"w-3 h-3"}),i.trend==="higher_better"&&"Plus = Mieux",i.trend==="lower_better"&&"Moins = Mieux",i.trend==="target"&&"Objectif"]})]}),i.formula&&e.jsx("div",{className:"mt-3 p-2 bg-primary-50 rounded text-xs font-mono text-primary-600",children:i.formula}),i.benchmark&&e.jsxs("div",{className:"mt-3 grid grid-cols-4 gap-1 text-xs",children:[e.jsxs("div",{className:"text-center p-1 bg-green-50 rounded",children:[e.jsx("div",{className:"text-green-700 font-medium",children:i.benchmark.excellent}),e.jsx("div",{className:"text-green-600",children:"Excellent"})]}),e.jsxs("div",{className:"text-center p-1 bg-blue-50 rounded",children:[e.jsx("div",{className:"text-blue-700 font-medium",children:i.benchmark.good}),e.jsx("div",{className:"text-blue-600",children:"Bon"})]}),e.jsxs("div",{className:"text-center p-1 bg-orange-50 rounded",children:[e.jsx("div",{className:"text-orange-700 font-medium",children:i.benchmark.acceptable}),e.jsx("div",{className:"text-orange-600",children:"Acceptable"})]}),e.jsxs("div",{className:"text-center p-1 bg-red-50 rounded",children:[e.jsx("div",{className:"text-red-700 font-medium",children:i.benchmark.poor}),e.jsx("div",{className:"text-red-600",children:"Faible"})]})]})]})},pt=({category:i})=>{const I=C.has(i.code),J=i.code.toLowerCase(),te=se.filter(re=>{const Ee=re.category.toLowerCase().replace(/-/g,"_");return Ee===J||Ee===J.replace("_","")||re.category===i.code.toLowerCase()});if(te.length===0&&l)return null;const ee=Fe(i.icon);return e.jsxs(z,{className:"overflow-hidden",children:[e.jsx(pe,{className:"cursor-pointer hover:bg-primary-50 transition-colors",onClick:()=>F(i.code),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[I?e.jsx(Be,{className:"w-5 h-5 text-primary-400"}):e.jsx(ve,{className:"w-5 h-5 text-primary-400"}),e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${i.color}15`},children:e.jsx(ee,{className:"w-5 h-5",style:{color:i.color}})}),e.jsxs("div",{children:[e.jsx(xe,{children:i.name}),e.jsx("p",{className:"text-sm text-primary-500 mt-0.5",children:i.description})]})]}),e.jsxs(_,{className:"bg-primary-100 text-primary-700",children:[te.length," rapports"]})]})}),I&&te.length>0&&e.jsx($,{className:"pt-0",children:g==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:te.map(re=>e.jsx(Ke,{report:re},re.code))}):e.jsx("div",{className:"space-y-2",children:te.map(re=>e.jsx(mt,{report:re},re.code))})}),I&&te.length===0&&e.jsx($,{className:"pt-0",children:e.jsx("p",{className:"text-sm text-primary-500 text-center py-8",children:"Aucun rapport dans cette catégorie"})})]})},Qe=({chart:i})=>{const I={simple:"bg-green-100 text-green-700",medium:"bg-blue-100 text-blue-700",advanced:"bg-purple-100 text-purple-700"},J={simple:"Simple",medium:"Moyen",advanced:"Avancé"};return e.jsxs("div",{className:"bg-white rounded-lg border border-primary-200 hover:border-accent hover:shadow-md transition-all cursor-pointer group overflow-hidden",onClick:()=>Ce(i),children:[e.jsx("div",{className:"h-32 bg-gradient-to-br from-primary-50 to-white p-2 flex items-center justify-center",children:e.jsx(qt,{chartCode:i.code,className:"w-full h-full"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-primary-900 group-hover:text-accent transition-colors",children:i.name}),e.jsxs("div",{className:"flex items-center gap-1",children:[i.popular&&e.jsx(Re,{className:"w-3.5 h-3.5 text-warning fill-warning"}),i.new&&e.jsx(_,{className:"bg-green-100 text-green-700 text-xs",children:"Nouveau"})]})]}),e.jsx("p",{className:"text-sm text-primary-500 line-clamp-2 mb-3",children:i.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_,{className:I[i.complexity],children:J[i.complexity]}),e.jsxs("span",{className:"text-xs text-primary-400",children:[i.variants.length," variantes"]})]})]})]})},_e=({categoryCode:i,categoryName:I,categoryColor:J,categoryIcon:te,charts:ee})=>{const re=C.has(i),Ee=Fe(te);return ee.length===0&&l?null:e.jsxs(z,{className:"overflow-hidden",children:[e.jsx(pe,{className:"cursor-pointer hover:bg-primary-50 transition-colors",onClick:()=>F(i),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[re?e.jsx(Be,{className:"w-5 h-5 text-primary-400"}):e.jsx(ve,{className:"w-5 h-5 text-primary-400"}),e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${J}15`},children:e.jsx(Ee,{className:"w-5 h-5",style:{color:J}})}),e.jsx("div",{children:e.jsx(xe,{children:I})})]}),e.jsxs(_,{className:"bg-primary-100 text-primary-700",children:[ee.length," graphiques"]})]})}),re&&ee.length>0&&e.jsx($,{className:"pt-0",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:ee.map(Je=>e.jsx(Qe,{chart:Je},Je.code))})}),re&&ee.length===0&&e.jsx($,{className:"pt-0",children:e.jsx("p",{className:"text-sm text-primary-500 text-center py-8",children:"Aucun graphique dans cette catégorie"})})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-primary-900",children:"Catalogue BI"}),e.jsxs("p",{className:"text-primary-500 mt-1",children:[r==null?void 0:r.nom," | ",Object.keys(Nt).length," Rapports | ",o.length," KPIs | ",it.length," Graphiques"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(G,{variant:"secondary",leftIcon:e.jsx(_s,{className:"w-4 h-4"}),onClick:()=>window.open("https://docs.cockpit.fr/catalogue","_blank"),children:"Documentation"})})]}),e.jsxs("div",{className:"flex items-center gap-4 border-b border-primary-200",children:[e.jsxs("button",{onClick:()=>y("reports"),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${c==="reports"?"border-accent text-accent font-medium":"border-transparent text-primary-500 hover:text-primary-700"}`,children:[e.jsx(ce,{className:"w-4 h-4"}),"Rapports (",se.length,")"]}),e.jsxs("button",{onClick:()=>y("kpis"),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${c==="kpis"?"border-accent text-accent font-medium":"border-transparent text-primary-500 hover:text-primary-700"}`,children:[e.jsx(Jt,{className:"w-4 h-4"}),"KPIs (",o.length,")"]}),e.jsxs("button",{onClick:()=>y("charts"),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${c==="charts"?"border-accent text-accent font-medium":"border-transparent text-primary-500 hover:text-primary-700"}`,children:[e.jsx(Ge,{className:"w-4 h-4"}),"Graphiques (",R.length,")"]})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex-1 min-w-[300px] relative",children:[e.jsx(ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-primary-400"}),e.jsx(Me,{type:"text",placeholder:"Rechercher rapports, KPIs...",value:l,onChange:i=>n(i.target.value),className:"pl-10"})]}),c==="reports"&&e.jsx(fe,{value:p,onChange:i=>v(i.target.value),options:[{value:"",label:"Toutes catégories"},...Ze.map(i=>({value:i.code.toLowerCase(),label:i.name}))],className:"w-48"}),c==="reports"&&e.jsx(fe,{value:N,onChange:i=>E(i.target.value),options:[{value:"",label:"Toute complexité"},{value:"simple",label:"Simple"},{value:"standard",label:"Standard"},{value:"advanced",label:"Avancé"},{value:"expert",label:"Expert"}],className:"w-40"}),c==="reports"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>h(!j),className:`flex items-center gap-1 px-3 py-1.5 rounded-full text-sm transition-colors ${j?"bg-purple-100 text-purple-700":"bg-primary-100 text-primary-600 hover:bg-primary-200"}`,children:[e.jsx(he,{className:"w-3 h-3"}),"IA"]}),e.jsxs("button",{onClick:()=>w(!f),className:`flex items-center gap-1 px-3 py-1.5 rounded-full text-sm transition-colors ${f?"bg-amber-100 text-amber-700":"bg-primary-100 text-primary-600 hover:bg-primary-200"}`,children:[e.jsx(Re,{className:"w-3 h-3"}),"Premium"]})]}),c==="reports"&&e.jsxs("div",{className:"flex items-center gap-1 bg-primary-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>u("grid"),className:`p-1.5 rounded ${g==="grid"?"bg-white shadow-sm":"hover:bg-primary-200"}`,children:e.jsx(Zt,{className:"w-4 h-4 text-primary-600"})}),e.jsx("button",{onClick:()=>u("list"),className:`p-1.5 rounded ${g==="list"?"bg-white shadow-sm":"hover:bg-primary-200"}`,children:e.jsx(Rt,{className:"w-4 h-4 text-primary-600"})})]}),c==="charts"&&e.jsx(fe,{value:k,onChange:i=>W(i.target.value),options:[{value:"",label:"Toutes catégories"},...ht.map(i=>({value:i.code,label:i.name}))],className:"w-48"}),c==="charts"&&e.jsx(fe,{value:H,onChange:i=>Q(i.target.value),options:[{value:"",label:"Toute complexité"},{value:"simple",label:"Simple"},{value:"medium",label:"Moyen"},{value:"advanced",label:"Avancé"}],className:"w-40"}),c==="charts"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>U(!B),className:`flex items-center gap-1 px-3 py-1.5 rounded-full text-sm transition-colors ${B?"bg-amber-100 text-amber-700":"bg-primary-100 text-primary-600 hover:bg-primary-200"}`,children:[e.jsx(Re,{className:"w-3 h-3"}),"Populaires"]}),e.jsxs("button",{onClick:()=>X(!Y),className:`flex items-center gap-1 px-3 py-1.5 rounded-full text-sm transition-colors ${Y?"bg-green-100 text-green-700":"bg-primary-100 text-primary-600 hover:bg-primary-200"}`,children:[e.jsx(vt,{className:"w-3 h-3"}),"Nouveaux"]})]})]}),c==="reports"&&e.jsxs("div",{className:"space-y-4",children:[!l&&!p&&!N&&!j&&!f&&e.jsxs(z,{children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5 text-accent"}),e.jsx(xe,{children:"Rapports Populaires"})]})}),e.jsx($,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:x.slice(0,4).map(i=>e.jsx(Ke,{report:i},i.code))})})]}),Ze.map(i=>e.jsx(pt,{category:i},i.code)),se.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ke,{className:"w-12 h-12 text-primary-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-primary-900 mb-2",children:"Aucun rapport trouvé"}),e.jsx("p",{className:"text-primary-500",children:"Modifiez vos critères de recherche ou de filtrage"})]})]}),c==="kpis"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.filter(i=>!l||i.name.toLowerCase().includes(l.toLowerCase())||i.code.toLowerCase().includes(l.toLowerCase())||i.description.toLowerCase().includes(l.toLowerCase())).map(i=>e.jsx(ut,{kpi:i},i.code))}),c==="charts"&&e.jsxs("div",{className:"space-y-4",children:[!l&&!k&&!H&&!B&&!Y&&e.jsxs(z,{children:[e.jsx(pe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-5 h-5 text-warning fill-warning"}),e.jsx(xe,{children:"Graphiques Populaires"})]})}),e.jsx($,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:ma().slice(0,8).map(i=>e.jsx(Qe,{chart:i},i.code))})})]}),ht.map(i=>e.jsx(_e,{categoryCode:i.code,categoryName:i.name,categoryColor:i.color,categoryIcon:i.icon,charts:V[i.code]||[]},i.code)),R.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ke,{className:"w-12 h-12 text-primary-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-primary-900 mb-2",children:"Aucun graphique trouvé"}),e.jsx("p",{className:"text-primary-500",children:"Modifiez vos critères de recherche ou de filtrage"})]})]}),e.jsx(Le,{isOpen:A,onClose:le,title:(b==null?void 0:b.name)||"",size:"xl",footer:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(G,{variant:"ghost",onClick:le,children:"Fermer"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{variant:"secondary",leftIcon:e.jsx(ct,{className:"w-4 h-4"}),children:"Aperçu"}),e.jsx(G,{leftIcon:e.jsx(ge,{className:"w-4 h-4"}),onClick:()=>b&&dt(b),children:"Créer ce rapport"})]})]}),children:b&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:`${b.color}15`},children:Ie.createElement(Fe(b.icon),{className:"w-8 h-8",style:{color:b.color}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_,{className:Xe[b.complexity].color,children:Xe[b.complexity].label}),b.aiPowered&&e.jsxs(_,{className:"bg-purple-100 text-purple-700",children:[e.jsx(he,{className:"w-3 h-3 mr-1"}),"Assisté par IA"]}),b.premium&&e.jsx(_,{className:"bg-amber-100 text-amber-700",children:"Premium"})]}),e.jsx("p",{className:"text-primary-600",children:b.description})]})]}),e.jsxs("div",{className:"p-4 bg-primary-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-primary-900 mb-2",children:"Description détaillée"}),e.jsx("div",{className:"text-sm text-primary-700 whitespace-pre-line",children:b.longDescription})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-primary-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary-900",children:[b.estimatedPages.min,"-",b.estimatedPages.max]}),e.jsx("div",{className:"text-xs text-primary-500",children:"Pages estimées"})]}),e.jsxs("div",{className:"text-center p-3 bg-primary-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-900",children:b.kpis.length}),e.jsx("div",{className:"text-xs text-primary-500",children:"KPIs"})]}),e.jsxs("div",{className:"text-center p-3 bg-primary-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-900",children:b.sections.length}),e.jsx("div",{className:"text-xs text-primary-500",children:"Sections"})]}),e.jsxs("div",{className:"text-center p-3 bg-primary-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-900",children:b.dataRequirements.length}),e.jsx("div",{className:"text-xs text-primary-500",children:"Données requises"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-primary-900 mb-3",children:"Sections du rapport"}),e.jsx("div",{className:"space-y-2",children:b.sections.map((i,I)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-primary-50 rounded-lg",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-accent text-white flex items-center justify-center text-sm font-medium",children:I+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-primary-900",children:i.title}),e.jsx("div",{className:"text-xs text-primary-500",children:i.description})]}),i.aiPowered&&e.jsx(_,{className:"bg-purple-100 text-purple-700",children:e.jsx(he,{className:"w-3 h-3"})})]},i.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-primary-900 mb-3",children:"KPIs inclus"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.kpis.map(i=>e.jsx(_,{className:"bg-accent/10 text-accent",children:i.name},i.code))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-primary-900 mb-3",children:"Destinataires"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.targetAudience.map(i=>e.jsx(_,{className:"bg-primary-100 text-primary-700",children:i},i))})]}),b.industryStandards.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-primary-900 mb-3",children:"Standards appliqués"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.industryStandards.map(i=>e.jsxs(_,{className:"bg-blue-100 text-blue-700 cursor-pointer hover:bg-blue-200",onClick:()=>i.url&&window.open(i.url,"_blank"),children:[e.jsx(Fs,{className:"w-3 h-3 mr-1"}),i.name]},i.code))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-primary-900 mb-3",children:"Cas d'usage"}),e.jsx("ul",{className:"space-y-1",children:b.useCases.map((i,I)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-primary-600",children:[e.jsx(_t,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),i]},I))})]}),b.limitations.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-primary-900 mb-3",children:"Limitations"}),e.jsx("ul",{className:"space-y-1",children:b.limitations.map((i,I)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-primary-600",children:[e.jsx(Pe,{className:"w-4 h-4 text-orange-500 flex-shrink-0"}),i]},I))})]})]})}),e.jsx(Le,{isOpen:de,onClose:Ye,title:(M==null?void 0:M.name)||"",size:"lg",footer:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(G,{variant:"ghost",onClick:Ye,children:"Fermer"}),e.jsx(G,{leftIcon:e.jsx(ge,{className:"w-4 h-4"}),children:"Utiliser ce graphique"})]}),children:M&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-48 bg-gradient-to-br from-primary-50 to-white rounded-lg p-4 flex items-center justify-center",children:e.jsx(qt,{chartCode:M.code,className:"w-full h-full"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-primary-900 mb-2",children:"Description"}),e.jsx("p",{className:"text-primary-600",children:M.description})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-primary-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-primary-900",children:M.complexity==="simple"?"Simple":M.complexity==="medium"?"Moyen":"Avancé"}),e.jsx("div",{className:"text-xs text-primary-500",children:"Complexité"})]}),e.jsxs("div",{className:"text-center p-3 bg-primary-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-primary-900",children:M.variants.length}),e.jsx("div",{className:"text-xs text-primary-500",children:"Variantes"})]}),e.jsxs("div",{className:"text-center p-3 bg-primary-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-primary-900",children:M.dataRequirements.length}),e.jsx("div",{className:"text-xs text-primary-500",children:"Données requises"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-primary-900 mb-3",children:"Cas d'usage"}),e.jsx("ul",{className:"space-y-1",children:M.useCases.map((i,I)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-primary-600",children:[e.jsx(_t,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),i]},I))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-primary-900 mb-3",children:"Données requises"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:M.dataRequirements.map((i,I)=>e.jsx(_,{className:"bg-blue-100 text-blue-700",children:i},I))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-primary-900 mb-3",children:"Variantes disponibles"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:M.variants.map((i,I)=>e.jsx(_,{className:"bg-primary-100 text-primary-700",children:i},I))})]})]})})]})}const Mt={excellent:"bg-success/10 text-success border-success/20",bon:"bg-info/10 text-info border-info/20",attention:"bg-warning/10 text-warning border-warning/20",alerte:"bg-error/10 text-error border-error/20"},yt={haute:"bg-error/10 text-error",moyenne:"bg-warning/10 text-warning",basse:"bg-info/10 text-info"},Gt={critique:"bg-error text-white",haute:"bg-error/10 text-error",moyenne:"bg-warning/10 text-warning",basse:"bg-info/10 text-info"};function hi(){const{centreId:t}=nt(),r=Qt(),s=lt(o=>o.getCentre(t||"")),{addToast:l}=ot(),{kpisCalcules:a,insights:n,alertes:m,predictions:c,periodeAnalyse:y,isCalculating:g,calculerKPIsPourCentre:u,detecterInsights:p,verifierAlertes:v,genererPredictions:N,setPeriodeAnalyse:E}=Bs(),[j,h]=d.useState("kpis"),[f,w]=d.useState(null),[b,S]=d.useState(null),[A,D]=d.useState("all"),[C,O]=d.useState("all"),[k,W]=d.useState(null),[H,Q]=d.useState(!0);d.useEffect(()=>{(async()=>{if(t){Q(!0);try{const[x,R,V,F,K,le]=await Promise.all([Ae.etatsLocatifs.where("centreId").equals(t).count(),Ae.donneesLoyers.where("centreId").equals(t).count(),Ae.donneesBaux.where("centreId").equals(t).count(),Ae.donneesFrequentation.where("centreId").equals(t).count(),Ae.donneesChiffreAffaires.where("centreId").equals(t).count(),Ae.donneesCharges.where("centreId").equals(t).count()]);W({etatsLocatifs:x,loyers:R,baux:V,frequentation:F,chiffresAffaires:K,charges:le})}catch{}finally{Q(!1)}}})()},[t]);const B=k&&(k.etatsLocatifs>0||k.loyers>0||k.baux>0||k.frequentation>0||k.chiffresAffaires>0||k.charges>0);d.useEffect(()=>{t&&B&&U()},[t,B]);const U=async()=>{if(t)try{await u(t),await p(t),await v(t),await N(t),l({type:"success",title:"Analyse mise à jour"})}catch(o){l({type:"error",title:"Erreur",message:String(o)})}},Y=a.filter(o=>!(A!=="all"&&o.statut!==A||C!=="all"&&o.categorie!==C)),X=Y.reduce((o,x)=>{const R=x.categorie||"Autres";return o[R]||(o[R]=[]),o[R].push(x),o},{}),M={total:a.length,excellent:a.filter(o=>o.statut==="excellent").length,bon:a.filter(o=>o.statut==="bon").length,attention:a.filter(o=>o.statut==="attention").length,alerte:a.filter(o=>o.statut==="alerte").length},ie=m.filter(o=>!o.acquittee),de=({kpi:o})=>e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-primary-200 hover:border-accent transition-colors cursor-pointer",onClick:()=>w(o),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-primary-500",children:o.nom}),e.jsx(_,{className:`border ${Mt[o.statut]}`,children:o.statut})]}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("div",{children:e.jsxs("div",{className:"text-2xl font-bold text-primary-900",children:[typeof o.valeur=="number"?o.valeur.toLocaleString("fr-FR",{maximumFractionDigits:2}):o.valeur,o.unite&&e.jsx("span",{className:"text-sm font-normal ml-1",children:o.unite})]})}),o.variation!==void 0&&e.jsxs("div",{className:`flex items-center gap-1 text-sm ${o.variation>0?"text-success":o.variation<0?"text-error":"text-primary-500"}`,children:[o.variation>0?e.jsx(er,{className:"w-4 h-4"}):o.variation<0?e.jsx(tr,{className:"w-4 h-4"}):e.jsx(Ve,{className:"w-4 h-4"}),Math.abs(o.variation).toFixed(1),"%"]})]})]}),ne=({insight:o})=>e.jsx("div",{className:"bg-white p-4 rounded-lg border border-primary-200 hover:border-accent transition-colors cursor-pointer",onClick:()=>S(o),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${yt[o.priorite]}`,children:e.jsx(be,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"font-medium text-primary-900",children:o.titre}),e.jsx(_,{className:yt[o.priorite],children:o.priorite})]}),e.jsx("p",{className:"text-sm text-primary-600 line-clamp-2",children:o.description}),o.impact&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-primary-500",children:[e.jsx(Tt,{className:"w-3 h-3"}),"Impact: ",o.impact]})]})]})}),ae=({alerte:o})=>e.jsx("div",{className:`p-4 rounded-lg border ${o.acquittee?"bg-primary-50 border-primary-200":"bg-white border-primary-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${Gt[o.severite]}`,children:e.jsx(xt,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"font-medium text-primary-900",children:o.titre}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:Gt[o.severite],children:o.severite}),o.acquittee&&e.jsx(ye,{className:"w-4 h-4 text-success"})]})]}),e.jsx("p",{className:"text-sm text-primary-600",children:o.message}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-primary-500 flex items-center gap-1",children:[e.jsx(De,{className:"w-3 h-3"}),new Date(o.dateCreation).toLocaleDateString("fr-FR")]}),!o.acquittee&&e.jsx(G,{variant:"ghost",size:"sm",children:"Acquitter"})]})]})]})}),se=({prediction:o})=>{var x;return e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-primary-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-primary-900",children:o.indicateur}),e.jsxs("div",{className:"text-xs text-primary-500",children:["Méthode: ",o.methode]})]}),e.jsx(_,{className:o.tendance==="hausse"?"bg-success/10 text-success":o.tendance==="baisse"?"bg-error/10 text-error":"bg-primary-100 text-primary-600",children:o.tendance==="hausse"?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"w-3 h-3 mr-1"})," Hausse"]}):o.tendance==="baisse"?e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"w-3 h-3 mr-1"})," Baisse"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"w-3 h-3 mr-1"})," Stable"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"p-2 bg-primary-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-xs text-primary-500",children:"Valeur actuelle"}),e.jsx("div",{className:"font-bold text-primary-900",children:o.valeurActuelle.toLocaleString("fr-FR")})]}),e.jsxs("div",{className:"p-2 bg-accent/10 rounded-lg text-center",children:[e.jsx("div",{className:"text-xs text-primary-500",children:"Prévision (3 mois)"}),e.jsx("div",{className:"font-bold text-accent",children:((x=o.valeursPredites[2])==null?void 0:x.toLocaleString("fr-FR"))||"—"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"text-primary-500",children:["Confiance: ",(o.confiance*100).toFixed(0),"%"]}),e.jsx("div",{className:"w-24 bg-primary-200 rounded-full h-2",children:e.jsx("div",{className:"bg-accent h-2 rounded-full",style:{width:`${o.confiance*100}%`}})})]})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-primary-900",children:"Analyse BI"}),e.jsx("p",{className:"text-primary-500 mt-1",children:s==null?void 0:s.nom})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{value:y.debut.slice(0,7),onChange:o=>{const[x,R]=o.target.value.split("-"),V=new Date(parseInt(x),parseInt(R)-1,1),F=new Date(parseInt(x),parseInt(R),0);E({debut:V.toISOString().split("T")[0],fin:F.toISOString().split("T")[0],label:V.toLocaleDateString("fr-FR",{month:"long",year:"numeric"})})},options:Array.from({length:12},(o,x)=>{const R=new Date;return R.setMonth(R.getMonth()-x),{value:R.toISOString().slice(0,7),label:R.toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}}),className:"w-48"}),e.jsx(G,{leftIcon:e.jsx(tt,{className:`w-4 h-4 ${g?"animate-spin":""}`}),onClick:U,disabled:g,children:"Actualiser"})]})]}),H&&e.jsx(z,{children:e.jsxs($,{className:"py-12 text-center",children:[e.jsx(tt,{className:"w-12 h-12 text-primary-300 mx-auto mb-4 animate-spin"}),e.jsx("p",{className:"text-primary-500",children:"Vérification des données..."})]})}),!H&&!B&&e.jsx(z,{children:e.jsx($,{className:"py-12",children:e.jsxs("div",{className:"text-center max-w-lg mx-auto",children:[e.jsx("div",{className:"w-16 h-16 bg-warning/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(bt,{className:"w-8 h-8 text-warning"})}),e.jsx("h2",{className:"text-xl font-bold text-primary-900 mb-2",children:"Aucune donnée à analyser"}),e.jsx("p",{className:"text-primary-500 mb-6",children:"Pour utiliser l'analyse BI, vous devez d'abord importer des données d'exploitation : états locatifs, loyers, baux, fréquentation, etc."}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6 text-left",children:[e.jsxs("div",{className:"p-3 bg-primary-50 rounded-lg flex items-center gap-3",children:[e.jsx(we,{className:"w-5 h-5 text-primary-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-primary-700",children:"États locatifs"}),e.jsxs("p",{className:"text-xs text-primary-500",children:[(k==null?void 0:k.etatsLocatifs)||0," enregistrements"]})]})]}),e.jsxs("div",{className:"p-3 bg-primary-50 rounded-lg flex items-center gap-3",children:[e.jsx(we,{className:"w-5 h-5 text-primary-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-primary-700",children:"Loyers"}),e.jsxs("p",{className:"text-xs text-primary-500",children:[(k==null?void 0:k.loyers)||0," enregistrements"]})]})]}),e.jsxs("div",{className:"p-3 bg-primary-50 rounded-lg flex items-center gap-3",children:[e.jsx(we,{className:"w-5 h-5 text-primary-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-primary-700",children:"Baux"}),e.jsxs("p",{className:"text-xs text-primary-500",children:[(k==null?void 0:k.baux)||0," enregistrements"]})]})]}),e.jsxs("div",{className:"p-3 bg-primary-50 rounded-lg flex items-center gap-3",children:[e.jsx(we,{className:"w-5 h-5 text-primary-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-primary-700",children:"Fréquentation"}),e.jsxs("p",{className:"text-xs text-primary-500",children:[(k==null?void 0:k.frequentation)||0," enregistrements"]})]})]})]}),e.jsxs(G,{leftIcon:e.jsx(At,{className:"w-4 h-4"}),onClick:()=>r(`/centre/${t}/bi/import`),children:["Importer des données",e.jsx(es,{className:"w-4 h-4 ml-2"})]})]})})}),!H&&B&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsx(z,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:e.jsx(Ge,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-primary-900",children:M.total}),e.jsx("div",{className:"text-sm text-primary-500",children:"KPIs"})]})]})})}),e.jsx(z,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-success/10 rounded-lg",children:e.jsx(ye,{className:"w-5 h-5 text-success"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-success",children:M.excellent+M.bon}),e.jsx("div",{className:"text-sm text-primary-500",children:"Conformes"})]})]})})}),e.jsx(z,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-warning/10 rounded-lg",children:e.jsx(Pe,{className:"w-5 h-5 text-warning"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-warning",children:M.attention}),e.jsx("div",{className:"text-sm text-primary-500",children:"Attention"})]})]})})}),e.jsx(z,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-error/10 rounded-lg",children:e.jsx(ts,{className:"w-5 h-5 text-error"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-error",children:M.alerte}),e.jsx("div",{className:"text-sm text-primary-500",children:"Alertes"})]})]})})}),e.jsx(z,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-accent/10 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-accent"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-accent",children:n.length}),e.jsx("div",{className:"text-sm text-primary-500",children:"Insights"})]})]})})})]}),e.jsxs("div",{className:"flex items-center gap-4 border-b border-primary-200",children:[e.jsxs("button",{onClick:()=>h("kpis"),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${j==="kpis"?"border-accent text-accent font-medium":"border-transparent text-primary-500 hover:text-primary-700"}`,children:[e.jsx(Ge,{className:"w-4 h-4"}),"KPIs (",a.length,")"]}),e.jsxs("button",{onClick:()=>h("insights"),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${j==="insights"?"border-accent text-accent font-medium":"border-transparent text-primary-500 hover:text-primary-700"}`,children:[e.jsx(be,{className:"w-4 h-4"}),"Insights (",n.length,")"]}),e.jsxs("button",{onClick:()=>h("alertes"),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${j==="alertes"?"border-accent text-accent font-medium":"border-transparent text-primary-500 hover:text-primary-700"}`,children:[e.jsx(xt,{className:"w-4 h-4"}),"Alertes",ie.length>0&&e.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs bg-error text-white rounded-full",children:ie.length})]}),e.jsxs("button",{onClick:()=>h("predictions"),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${j==="predictions"?"border-accent text-accent font-medium":"border-transparent text-primary-500 hover:text-primary-700"}`,children:[e.jsx(vt,{className:"w-4 h-4"}),"Prédictions (",c.length,")"]})]}),j==="kpis"&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(fe,{value:A,onChange:o=>D(o.target.value),options:[{value:"all",label:"Tous les statuts"},{value:"excellent",label:"Excellent"},{value:"bon",label:"Bon"},{value:"attention",label:"Attention"},{value:"alerte",label:"Alerte"}],className:"w-40"}),e.jsx(fe,{value:C,onChange:o=>O(o.target.value),options:[{value:"all",label:"Toutes catégories"},...Object.keys(X).map(o=>({value:o,label:o}))],className:"w-44"})]}),j==="kpis"&&e.jsxs("div",{className:"space-y-6",children:[Object.entries(X).map(([o,x])=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-primary-900 mb-3",children:o}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:x.map(R=>e.jsx(de,{kpi:R},R.code))})]},o)),Y.length===0&&e.jsx(z,{children:e.jsxs($,{className:"py-12 text-center",children:[e.jsx(Ge,{className:"w-12 h-12 text-primary-300 mx-auto mb-4"}),e.jsx("p",{className:"text-primary-500",children:"Aucun KPI calculé"}),e.jsx(G,{className:"mt-4",onClick:U,children:"Lancer l'analyse"})]})})]}),j==="insights"&&e.jsx("div",{className:"grid grid-cols-2 gap-4",children:n.length===0?e.jsx(z,{className:"col-span-2",children:e.jsxs($,{className:"py-12 text-center",children:[e.jsx(be,{className:"w-12 h-12 text-primary-300 mx-auto mb-4"}),e.jsx("p",{className:"text-primary-500",children:"Aucun insight détecté"})]})}):n.map(o=>e.jsx(ne,{insight:o},o.id))}),j==="alertes"&&e.jsx("div",{className:"space-y-4",children:m.length===0?e.jsx(z,{children:e.jsxs($,{className:"py-12 text-center",children:[e.jsx(xt,{className:"w-12 h-12 text-primary-300 mx-auto mb-4"}),e.jsx("p",{className:"text-primary-500",children:"Aucune alerte active"})]})}):m.map(o=>e.jsx(ae,{alerte:o},o.id))}),j==="predictions"&&e.jsx("div",{className:"grid grid-cols-3 gap-4",children:c.length===0?e.jsx(z,{className:"col-span-3",children:e.jsxs($,{className:"py-12 text-center",children:[e.jsx(vt,{className:"w-12 h-12 text-primary-300 mx-auto mb-4"}),e.jsx("p",{className:"text-primary-500",children:"Aucune prédiction disponible"}),e.jsx("p",{className:"text-sm text-primary-400 mt-2",children:"Les prédictions nécessitent au moins 6 mois de données historiques"})]})}):c.map(o=>e.jsx(se,{prediction:o},o.id))})]}),e.jsx(Le,{isOpen:!!f,onClose:()=>w(null),title:(f==null?void 0:f.nom)||"",size:"md",footer:e.jsx(G,{variant:"ghost",onClick:()=>w(null),children:"Fermer"}),children:f&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_,{className:`border ${Mt[f.statut]}`,children:f.statut}),e.jsx("span",{className:"text-sm font-mono text-primary-500",children:f.code})]}),e.jsxs("div",{className:"p-6 bg-primary-50 rounded-lg text-center",children:[e.jsxs("div",{className:"text-4xl font-bold text-primary-900",children:[typeof f.valeur=="number"?f.valeur.toLocaleString("fr-FR",{maximumFractionDigits:2}):f.valeur,f.unite&&e.jsx("span",{className:"text-xl font-normal ml-2",children:f.unite})]}),f.variation!==void 0&&e.jsxs("div",{className:`flex items-center justify-center gap-1 mt-2 ${f.variation>0?"text-success":f.variation<0?"text-error":"text-primary-500"}`,children:[f.variation>0?e.jsx(oe,{className:"w-5 h-5"}):f.variation<0?e.jsx(jt,{className:"w-5 h-5"}):e.jsx(Ve,{className:"w-5 h-5"}),f.variation>0?"+":"",f.variation.toFixed(1),"% vs période précédente"]})]}),e.jsxs("div",{className:"text-sm text-primary-500",children:["Calculé le ",new Date(f.dateCalcul).toLocaleDateString("fr-FR")]})]})}),e.jsx(Le,{isOpen:!!b,onClose:()=>S(null),title:(b==null?void 0:b.titre)||"",size:"md",footer:e.jsx(G,{variant:"ghost",onClick:()=>S(null),children:"Fermer"}),children:b&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(_,{className:yt[b.priorite],children:["Priorité ",b.priorite]}),e.jsx("p",{className:"text-primary-700",children:b.description}),b.impact&&e.jsxs("div",{className:"p-4 bg-primary-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-primary-500 mb-1",children:"Impact estimé"}),e.jsx("div",{className:"font-medium text-primary-900",children:b.impact})]}),b.recommandation&&e.jsxs("div",{className:"p-4 bg-accent/10 rounded-lg",children:[e.jsx("div",{className:"text-sm text-primary-500 mb-1",children:"Recommandation"}),e.jsx("div",{className:"font-medium text-primary-900",children:b.recommandation})]}),b.donneesAssociees&&b.donneesAssociees.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-primary-500 mb-2",children:"Données associées"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.donneesAssociees.map((o,x)=>e.jsx(_,{className:"bg-primary-100 text-primary-700",children:o},x))})]})]})})]})}const Vt={selectedSectionId:null,selectedBlockId:null,isEditing:!1,isDragging:!1,zoomLevel:100,showGrid:!1,showComments:!0},Ut={isOpen:!0,activeTab:"summary",isLoading:!1,chatMessages:[]},Wt={isSaving:!1,isGenerating:!1,isPublishing:!1,hasUnsavedChanges:!1,lastSavedAt:null,sidebarCollapsed:!1,aiPanelCollapsed:!1},Ht={sections:[]};function $t(t,r){return t.findIndex(s=>s.id===r)}function gt(t,r){return t.blocks.findIndex(s=>s.id===r)}const ze=Rr((t,r)=>({report:null,content:Ht,insights:[],recommendations:[],editor:{...Vt},aiPanel:{...Ut},ui:{...Wt},history:[],historyIndex:-1,setReport:s=>t({report:s}),setContent:s=>t({content:s,history:[s],historyIndex:0}),updateContent:s=>{const l=r(),a=l.history.slice(0,l.historyIndex+1);a.push(s),a.length>50&&a.shift(),t({content:s,history:a,historyIndex:a.length-1,ui:{...l.ui,hasUnsavedChanges:!0}})},clearReport:()=>t({report:null,content:Ht,insights:[],recommendations:[],editor:{...Vt},aiPanel:{...Ut},ui:{...Wt},history:[],historyIndex:-1}),addSection:(s,l)=>{const a=r(),n=[...a.content.sections],m={...s,id:s.id||Te()};if(l){const y=$t(n,l);n.splice(y+1,0,m)}else n.push(m);const c={...a.content,sections:n};r().updateContent(c)},updateSection:(s,l)=>{const a=r(),n=a.content.sections.map(c=>c.id===s?{...c,...l}:c),m={...a.content,sections:n};r().updateContent(m)},deleteSection:s=>{const l=r(),a=l.content.sections.filter(m=>m.id!==s),n={...l.content,sections:a};r().updateContent(n),l.editor.selectedSectionId===s&&t({editor:{...l.editor,selectedSectionId:null,selectedBlockId:null}})},moveSection:(s,l)=>{const a=r(),n=[...a.content.sections],m=$t(n,s);if(m!==-1&&m!==l){const[c]=n.splice(m,1);n.splice(l,0,c);const y={...a.content,sections:n};r().updateContent(y)}},reorderSections:(s,l)=>{const a=r(),n=[...a.content.sections],[m]=n.splice(s,1);n.splice(l,0,m);const c={...a.content,sections:n};r().updateContent(c)},addBlock:(s,l,a)=>{const n=r(),m=n.content.sections.map(y=>{if(y.id!==s)return y;const g=[...y.blocks],u={...l,id:l.id||Te()};if(a){const p=gt(y,a);g.splice(p+1,0,u)}else g.push(u);return{...y,blocks:g}}),c={...n.content,sections:m};r().updateContent(c)},updateBlock:(s,l,a)=>{const n=r(),m=n.content.sections.map(y=>{if(y.id!==s)return y;const g=y.blocks.map(u=>u.id===l?{...u,...a}:u);return{...y,blocks:g}}),c={...n.content,sections:m};r().updateContent(c)},deleteBlock:(s,l)=>{const a=r(),n=a.content.sections.map(c=>c.id!==s?c:{...c,blocks:c.blocks.filter(y=>y.id!==l)}),m={...a.content,sections:n};r().updateContent(m),a.editor.selectedBlockId===l&&t({editor:{...a.editor,selectedBlockId:null}})},moveBlock:(s,l,a,n)=>{const m=r();let c=null,y=m.content.sections.map(u=>{if(u.id!==s)return u;const p=gt(u,l);return p===-1?u:(c=u.blocks[p],{...u,blocks:u.blocks.filter(v=>v.id!==l)})});if(!c)return;y=y.map(u=>{if(u.id!==a)return u;const p=[...u.blocks];return p.splice(n,0,c),{...u,blocks:p}});const g={...m.content,sections:y};r().updateContent(g)},duplicateBlock:(s,l)=>{const a=r(),n=a.content.sections.map(c=>{if(c.id!==s)return c;const y=gt(c,l);if(y===-1)return c;const g=c.blocks[y],u={...JSON.parse(JSON.stringify(g)),id:Te()},p=[...c.blocks];return p.splice(y+1,0,u),{...c,blocks:p}}),m={...a.content,sections:n};r().updateContent(m)},selectSection:s=>t(l=>({editor:{...l.editor,selectedSectionId:s,selectedBlockId:null}})),selectBlock:s=>t(l=>({editor:{...l.editor,selectedBlockId:s}})),setEditing:s=>t(l=>({editor:{...l.editor,isEditing:s}})),setZoomLevel:s=>t(l=>({editor:{...l.editor,zoomLevel:Math.min(200,Math.max(50,s))}})),setAIPanelOpen:s=>t(l=>({aiPanel:{...l.aiPanel,isOpen:s}})),setAIActiveTab:s=>t(l=>({aiPanel:{...l.aiPanel,activeTab:s}})),addChatMessage:s=>t(l=>({aiPanel:{...l.aiPanel,chatMessages:[...l.aiPanel.chatMessages,s]}})),clearChatMessages:()=>t(s=>({aiPanel:{...s.aiPanel,chatMessages:[]}})),setAILoading:s=>t(l=>({aiPanel:{...l.aiPanel,isLoading:s}})),setInsights:s=>t({insights:s}),setRecommendations:s=>t({recommendations:s}),setSaving:s=>t(l=>({ui:{...l.ui,isSaving:s}})),setGenerating:s=>t(l=>({ui:{...l.ui,isGenerating:s}})),markAsSaved:()=>t(s=>({ui:{...s.ui,hasUnsavedChanges:!1,lastSavedAt:new Date}})),toggleSidebar:()=>t(s=>({ui:{...s.ui,sidebarCollapsed:!s.ui.sidebarCollapsed}})),toggleAIPanel:()=>t(s=>({ui:{...s.ui,aiPanelCollapsed:!s.ui.aiPanelCollapsed}})),undo:()=>{const s=r();if(s.historyIndex>0){const l=s.historyIndex-1;t({content:s.history[l],historyIndex:l,ui:{...s.ui,hasUnsavedChanges:!0}})}},redo:()=>{const s=r();if(s.historyIndex<s.history.length-1){const l=s.historyIndex+1;t({content:s.history[l],historyIndex:l,ui:{...s.ui,hasUnsavedChanges:!0}})}},canUndo:()=>r().historyIndex>0,canRedo:()=>r().historyIndex<r().history.length-1,updateDesignSettings:s=>t(l=>({report:l.report?{...l.report,designSettings:s}:null,ui:{...l.ui,hasUnsavedChanges:!0}})),createBlock:s=>{const a={id:Te(),type:s};switch(s){case"paragraph":return{...a,type:"paragraph",content:"Nouveau paragraphe. Double-cliquez pour éditer."};case"heading":return{...a,type:"heading",content:"Nouveau titre",level:2};case"list":return{...a,type:"list",listType:"bullet",items:[{id:Te(),content:"Premier élément"},{id:Te(),content:"Deuxième élément"}]};case"chart":return{...a,type:"chart",chartType:"bar",data:{labels:["Jan","Fév","Mar","Avr"],datasets:[{label:"Données",data:[400,300,600,800],backgroundColor:"#1C3163"}]},config:{title:"Nouveau graphique",colorScheme:"corporate",legend:{show:!0,position:"top"}}};case"table":return{...a,type:"table",headers:[{id:"h1",label:"Colonne 1",key:"col1"},{id:"h2",label:"Colonne 2",key:"col2"},{id:"h3",label:"Colonne 3",key:"col3"}],rows:[{col1:{value:"Valeur 1"},col2:{value:"Valeur 2"},col3:{value:"Valeur 3"}}],config:{striped:!0,bordered:!0}};case"image":return{...a,type:"image",src:"",alt:"Image",caption:"Légende de l'image"};case"callout":return{...a,type:"callout",variant:"info",title:"Information importante",content:"Contenu de l'encadré."};case"quote":return{...a,type:"quote",content:"Citation à modifier...",author:"Auteur"};case"divider":return{...a,type:"divider",style:"solid"};case"pagebreak":return{...a,type:"pagebreak"};case"kpi_card":return{...a,type:"kpi_card",label:"Indicateur",value:0,unit:"",changeType:"neutral"};default:return{...a,type:"paragraph",content:"Nouveau bloc"}}}})),xa=({report:t,mode:r,hasUnsavedChanges:s,isSaving:l,zoom:a,onSave:n,onExport:m,onZoomChange:c,onModeToggle:y,onDesignSettings:g})=>{const[u,p]=d.useState(!1),[v,N]=d.useState(!1),[E,j]=d.useState(t.title),{undo:h,redo:f,canUndo:w,canRedo:b}=ze(),S={draft:"bg-primary-100 text-primary-800",generating:"bg-info/10 text-info",review:"bg-warning/10 text-warning",approved:"bg-success/10 text-success",published:"bg-success/10 text-success",archived:"bg-primary-200 text-primary-600"},A={draft:"Brouillon",generating:"Génération...",review:"En révision",approved:"Approuvé",published:"Publié",archived:"Archivé"},D=[{format:"pdf",label:"PDF",icon:ce},{format:"docx",label:"Word",icon:as},{format:"pptx",label:"PowerPoint",icon:is},{format:"xlsx",label:"Excel",icon:ns},{format:"html",label:"HTML",icon:ls}],C=[50,75,100,125,150,200];return e.jsx("header",{className:"bg-white border-b border-primary-200 px-4 py-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"p-2 hover:bg-primary-100 rounded-lg transition-colors",title:"Retour",children:e.jsx(St,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[v?e.jsx("input",{type:"text",value:E,onChange:O=>j(O.target.value),onBlur:()=>N(!1),onKeyDown:O=>O.key==="Enter"&&N(!1),className:"text-lg font-semibold border-b-2 border-primary outline-none px-1",autoFocus:!0}):e.jsx("h1",{className:"text-lg font-semibold text-primary-900 cursor-pointer hover:text-primary",onClick:()=>r==="edit"&&N(!0),title:r==="edit"?"Cliquer pour modifier":"",children:E}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${S[t.status]||S.draft}`,children:A[t.status]||t.status}),s&&e.jsx("span",{className:"text-sm text-orange-600",children:"(modifications non sauvegardées)"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-primary-500",children:["v",t.version]}),e.jsxs("div",{className:"flex items-center gap-1 border-l border-primary-200 pl-4",children:[e.jsx("button",{onClick:h,disabled:!w(),className:`p-2 rounded-lg transition-colors ${w()?"hover:bg-primary-100 text-primary-700":"text-primary-300 cursor-not-allowed"}`,title:"Annuler (Ctrl+Z)",children:e.jsx(sr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:f,disabled:!b(),className:`p-2 rounded-lg transition-colors ${b()?"hover:bg-primary-100 text-primary-700":"text-primary-300 cursor-not-allowed"}`,title:"Rétablir (Ctrl+Y)",children:e.jsx(rr,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 mr-4 border-r border-primary-200 pr-4",children:[e.jsx("button",{onClick:()=>c(Math.max(50,a-25)),className:"p-1 hover:bg-primary-100 rounded",disabled:a<=50,children:e.jsx(ar,{className:"w-4 h-4"})}),e.jsx("select",{value:a,onChange:O=>c(Number(O.target.value)),className:"text-sm border rounded px-2 py-1",children:C.map(O=>e.jsxs("option",{value:O,children:[O,"%"]},O))}),e.jsx("button",{onClick:()=>c(Math.min(200,a+25)),className:"p-1 hover:bg-primary-100 rounded",disabled:a>=200,children:e.jsx(ir,{className:"w-4 h-4"})})]}),g&&e.jsxs("button",{onClick:g,className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-colors bg-primary-100 text-primary-700 hover:bg-primary-200 flex items-center gap-2",title:"Paramètres de design",children:[e.jsx(wt,{className:"w-4 h-4"}),"Design"]}),e.jsx("button",{onClick:y,className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${r==="edit"?"bg-primary text-white":"bg-primary-100 text-primary-700 hover:bg-primary-200"}`,children:r==="edit"?"Mode édition":"Mode lecture"}),e.jsx("button",{onClick:n,disabled:!s||l,className:`px-4 py-1.5 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${s?"bg-primary text-white hover:bg-primary-dark":"bg-primary-100 text-primary-400 cursor-not-allowed"}`,children:l?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sauvegarde..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ss,{className:"w-4 h-4"}),"Sauvegarder"]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>p(!u),className:"px-4 py-1.5 bg-primary-100 text-primary-700 rounded-lg text-sm font-medium hover:bg-primary-200 transition-colors flex items-center gap-2",children:[e.jsx(rs,{className:"w-4 h-4"}),"Exporter"]}),u&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>p(!1)}),e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-primary-200 py-1 z-50",children:D.map(({format:O,label:k,icon:W})=>e.jsxs("button",{onClick:()=>{m(O),p(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-primary-50 flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{children:["Exporter en ",k]})]},O))})]})]})]})]})})},us=({section:t,isSelected:r,isExpanded:s,depth:l,onClick:a,onDoubleClick:n,onToggleExpand:m,onAddChild:c,onDragEnd:y})=>{const[g,u]=d.useState(!1),[p,v]=d.useState(!1),N=t.children&&t.children.length>0,E={generated:e.jsx(he,{className:"w-3 h-3 text-purple-500"}),edited:e.jsx(cs,{className:"w-3 h-3 text-blue-500"}),manual:e.jsx(ye,{className:"w-3 h-3 text-green-500"})},j=S=>{S.dataTransfer.setData("sectionId",t.id),u(!0)},h=()=>{u(!1)},f=S=>{S.preventDefault(),v(!0)},w=()=>{v(!1)},b=S=>{S.preventDefault();const A=S.dataTransfer.getData("sectionId");A&&A!==t.id&&y(A,t.id),v(!1)};return e.jsxs("div",{className:"mb-1",children:[e.jsxs("div",{className:`
          flex items-center gap-1 px-2 py-1.5 rounded-lg cursor-pointer group
          ${r?"bg-primary-100 text-primary-900":"hover:bg-primary-50"}
          ${g?"opacity-50":""}
          ${p?"ring-2 ring-primary":""}
        `,style:{paddingLeft:`${l*16+8}px`},onClick:a,onDoubleClick:S=>{S.stopPropagation(),n==null||n()},draggable:!0,onDragStart:j,onDragEnd:h,onDragOver:f,onDragLeave:w,onDrop:b,children:[e.jsx("button",{className:"opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing p-0.5",onMouseDown:S=>S.stopPropagation(),children:e.jsx(os,{className:"w-3 h-3 text-primary-400"})}),N?e.jsx("button",{onClick:S=>{S.stopPropagation(),m()},className:"p-0.5 hover:bg-primary-200 rounded",children:s?e.jsx(Be,{className:"w-4 h-4"}):e.jsx(ve,{className:"w-4 h-4"})}):e.jsx("span",{className:"w-5"}),e.jsx(ce,{className:"w-4 h-4 text-primary-500 flex-shrink-0"}),e.jsx("span",{className:"flex-1 text-sm truncate",children:t.title}),e.jsx("span",{className:"flex-shrink-0",children:E[t.status]}),t.isLocked&&e.jsx(kt,{className:"w-3 h-3 text-primary-400 flex-shrink-0"}),n&&e.jsx("button",{onClick:S=>{S.stopPropagation(),n()},className:"opacity-0 group-hover:opacity-100 p-0.5 hover:bg-primary-200 rounded",title:"Modifier la section",children:e.jsx(nr,{className:"w-3 h-3"})}),e.jsx("button",{onClick:S=>{S.stopPropagation(),c()},className:"opacity-0 group-hover:opacity-100 p-0.5 hover:bg-primary-200 rounded",title:"Ajouter une sous-section",children:e.jsx(ge,{className:"w-3 h-3"})})]}),N&&s&&e.jsx("div",{className:"ml-2 border-l border-primary-200",children:t.children.map(S=>e.jsx(us,{section:S,isSelected:!1,isExpanded:!0,depth:l+1,onClick:()=>{},onToggleExpand:()=>{},onAddChild:()=>{},onDragEnd:y},S.id))})]})},ha=({sections:t,selectedSectionId:r,collapsed:s,onSectionClick:l,onSectionEdit:a,onReorder:n,onAddSection:m,onCollapse:c})=>{const[y,g]=d.useState(new Set(t.map(j=>j.id))),[u,p]=d.useState(""),v=d.useCallback(j=>{g(h=>{const f=new Set(h);return f.has(j)?f.delete(j):f.add(j),f})},[]),N=d.useCallback((j,h)=>{const f=t.findIndex(b=>b.id===j),w=t.findIndex(b=>b.id===h);if(f!==-1&&w!==-1&&f!==w){const b=[...t],[S]=b.splice(f,1);b.splice(w,0,S),n(b)}},[t,n]),E=u?t.filter(j=>j.title.toLowerCase().includes(u.toLowerCase())):t;return s?e.jsxs("div",{className:"w-12 bg-white border-r border-primary-200 flex flex-col items-center py-4",children:[e.jsx("button",{onClick:c,className:"p-2 hover:bg-primary-100 rounded-lg mb-4",title:"Développer le panneau",children:e.jsx(ve,{className:"w-5 h-5"})}),e.jsx("div",{className:"space-y-2",children:t.slice(0,8).map((j,h)=>e.jsx("button",{onClick:()=>l(j.id),className:`w-8 h-8 rounded flex items-center justify-center text-xs font-medium ${r===j.id?"bg-primary text-white":"bg-primary-100 text-primary-600 hover:bg-primary-200"}`,title:j.title,children:h+1},j.id))})]}):e.jsxs("div",{className:"w-72 bg-white border-r border-primary-200 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-primary-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"font-semibold text-primary-900",children:"Plan du document"}),e.jsx("button",{onClick:c,className:"p-1 hover:bg-primary-100 rounded",title:"Réduire le panneau",children:e.jsx(St,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-primary-400"}),e.jsx("input",{type:"text",placeholder:"Rechercher...",value:u,onChange:j=>p(j.target.value),className:"w-full pl-9 pr-3 py-2 text-sm border border-primary-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[E.map(j=>e.jsx(us,{section:j,isSelected:r===j.id,isExpanded:y.has(j.id),depth:0,onClick:()=>l(j.id),onDoubleClick:()=>a(j.id),onToggleExpand:()=>v(j.id),onAddChild:()=>m(j.id),onDragEnd:N},j.id)),E.length===0&&e.jsx("div",{className:"text-center py-8 text-primary-500",children:u?e.jsx("p",{children:"Aucune section trouvée"}):e.jsx("p",{children:"Aucune section"})})]}),e.jsx("div",{className:"p-4 border-t border-primary-200",children:e.jsxs("button",{onClick:()=>m(),className:"w-full px-4 py-2 text-sm text-primary border border-primary rounded-lg hover:bg-primary hover:text-white transition-colors flex items-center justify-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4"}),"Ajouter une section"]})})]})},ya=({block:t,isEditable:r,onChange:s})=>{var p,v,N,E,j,h,f,w,b,S,A,D,C,O;const[l,a]=d.useState(!1),[n,m]=d.useState(t.content),c=d.useRef(null);d.useEffect(()=>{l&&c.current&&(c.current.focus(),c.current.style.height="auto",c.current.style.height=`${c.current.scrollHeight}px`)},[l]);const y=()=>{a(!1),n!==t.content&&s({content:n})},g=k=>{m(k.target.value),k.target.style.height="auto",k.target.style.height=`${k.target.scrollHeight}px`},u=()=>{var k;switch((k=t.formatting)==null?void 0:k.alignment){case"center":return"text-center";case"right":return"text-right";case"justify":return"text-justify";default:return"text-left"}};return l&&r?e.jsx("textarea",{ref:c,value:n,onChange:g,onBlur:y,className:`w-full p-2 border border-primary-300 rounded resize-none focus:outline-none focus:ring-2 focus:ring-primary ${u()}`,style:{fontSize:(p=t.formatting)!=null&&p.fontSize?`${t.formatting.fontSize}px`:void 0,color:(v=t.formatting)==null?void 0:v.color,backgroundColor:(N=t.formatting)==null?void 0:N.backgroundColor,fontWeight:(E=t.formatting)!=null&&E.bold?"bold":void 0,fontStyle:(j=t.formatting)!=null&&j.italic?"italic":void 0,textDecoration:[(h=t.formatting)!=null&&h.underline?"underline":"",(f=t.formatting)!=null&&f.strikethrough?"line-through":""].filter(Boolean).join(" ")||void 0}}):e.jsx("p",{className:`text-primary-700 leading-relaxed cursor-text ${u()}`,style:{fontSize:(w=t.formatting)!=null&&w.fontSize?`${t.formatting.fontSize}px`:void 0,color:(b=t.formatting)==null?void 0:b.color,backgroundColor:(S=t.formatting)==null?void 0:S.backgroundColor,fontWeight:(A=t.formatting)!=null&&A.bold?"bold":void 0,fontStyle:(D=t.formatting)!=null&&D.italic?"italic":void 0,textDecoration:[(C=t.formatting)!=null&&C.underline?"underline":"",(O=t.formatting)!=null&&O.strikethrough?"line-through":""].filter(Boolean).join(" ")||void 0},onDoubleClick:()=>r&&a(!0),children:t.content})},ga=({block:t,isEditable:r,onChange:s})=>{const[l,a]=d.useState(!1),[n,m]=d.useState(t.content),c=d.useRef(null);d.useEffect(()=>{l&&c.current&&(c.current.focus(),c.current.select())},[l]);const y=()=>{a(!1),n!==t.content&&s({content:n})},g=v=>{v.key==="Enter"&&y()},u={1:"text-4xl font-bold",2:"text-3xl font-bold",3:"text-2xl font-semibold",4:"text-xl font-semibold",5:"text-lg font-medium",6:"text-base font-medium"},p=`h${t.level}`;return l&&r?e.jsx("input",{ref:c,type:"text",value:n,onChange:v=>m(v.target.value),onBlur:y,onKeyDown:g,className:`w-full bg-transparent border-b-2 border-primary focus:outline-none ${u[t.level]} text-primary-900`}):e.jsx(p,{className:`${u[t.level]} text-primary-900 cursor-text`,onDoubleClick:()=>r&&a(!0),children:t.content})};Ns.register(Cs,Es,As,Rs,Ts,Ss,ws,ks,Is,Ls);const fa=({block:t,isEditable:r,onChange:s})=>{var m,c,y,g,u,p,v,N;const l={labels:t.data.labels||[],datasets:t.data.datasets.map(E=>({...E,backgroundColor:E.backgroundColor||"#1C3163",borderColor:E.borderColor||"#1C3163"}))},a={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:((m=t.config.legend)==null?void 0:m.show)??!0,position:((c=t.config.legend)==null?void 0:c.position)||"top"},title:{display:!!t.config.title,text:t.config.title||""}},scales:t.chartType!=="pie"&&t.chartType!=="donut"?{x:{grid:{display:t.config.gridLines??!0},title:{display:!!((y=t.config.xAxis)!=null&&y.title),text:((g=t.config.xAxis)==null?void 0:g.title)||""}},y:{grid:{display:t.config.gridLines??!0},title:{display:!!((u=t.config.yAxis)!=null&&u.title),text:((p=t.config.yAxis)==null?void 0:p.title)||""},min:(v=t.config.yAxis)==null?void 0:v.min,max:(N=t.config.yAxis)==null?void 0:N.max}}:void 0},n=()=>{switch(t.chartType){case"line":case"area":return e.jsx(js,{data:{...l,datasets:l.datasets.map(E=>({...E,fill:t.chartType==="area"}))},options:a});case"bar":case"horizontal_bar":case"stacked_bar":return e.jsx(Bt,{data:l,options:{...a,indexAxis:t.chartType==="horizontal_bar"?"y":"x",scales:t.chartType==="stacked_bar"?{x:{stacked:!0},y:{stacked:!0}}:a.scales}});case"pie":return e.jsx(vs,{data:l,options:a});case"donut":return e.jsx(bs,{data:l,options:a});default:return e.jsx(Bt,{data:l,options:a})}};return e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-primary-200",children:[t.config.title&&e.jsx("h3",{className:"text-lg font-semibold text-primary-900 mb-2",children:t.config.title}),t.config.subtitle&&e.jsx("p",{className:"text-sm text-primary-500 mb-4",children:t.config.subtitle}),e.jsx("div",{style:{height:t.config.height||300,width:"100%"},children:n()}),t.config.source&&e.jsxs("p",{className:"text-xs text-primary-400 mt-2",children:["Source: ",t.config.source]}),r&&e.jsx("div",{className:"absolute inset-0 bg-primary/5 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer",onClick:()=>{},children:e.jsx("span",{className:"bg-white px-4 py-2 rounded-lg shadow text-sm font-medium text-primary",children:"Double-cliquez pour modifier"})})]})},ba=({block:t,isEditable:r,onChange:s})=>{const[l,a]=d.useState(null),[n,m]=d.useState("asc"),[c,y]=d.useState(1),g=t.config.pageSize||10,u=h=>{t.config.sortable&&(l===h?m(n==="asc"?"desc":"asc"):(a(h),m("asc")))},p=()=>l?[...t.rows].sort((h,f)=>{var D,C;const w=((D=h[l])==null?void 0:D.value)??"",b=((C=f[l])==null?void 0:C.value)??"";if(typeof w=="number"&&typeof b=="number")return n==="asc"?w-b:b-w;const S=String(w).toLowerCase(),A=String(b).toLowerCase();return n==="asc"?S.localeCompare(A):A.localeCompare(S)}):t.rows,v=()=>{const h=p();if(!t.config.pagination)return h;const f=(c-1)*g;return h.slice(f,f+g)},N=Math.ceil(t.rows.length/g),E=v(),j=(h,f)=>{if(h===null)return"-";switch(f){case"currency":return typeof h=="number"?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(h):String(h);case"percentage":return typeof h=="number"?`${(h*100).toFixed(1)}%`:String(h);case"number":return typeof h=="number"?new Intl.NumberFormat("fr-FR").format(h):String(h);case"date":return h?new Date(String(h)).toLocaleDateString("fr-FR"):"-";default:return String(h)}};return e.jsxs("div",{className:"overflow-hidden rounded-lg border border-primary-200",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:`w-full ${t.config.compact?"text-sm":""}`,children:[e.jsx("thead",{className:"bg-primary-50",children:e.jsx("tr",{children:t.headers.map(h=>e.jsx("th",{className:`px-4 py-3 text-left font-semibold text-primary-900 ${h.sortable&&t.config.sortable?"cursor-pointer hover:bg-primary-100":""} ${h.align==="center"?"text-center":h.align==="right"?"text-right":""}`,style:{width:h.width?`${h.width}px`:void 0},onClick:()=>h.sortable&&u(h.key),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:h.label}),h.sortable&&t.config.sortable&&l===h.key&&(n==="asc"?e.jsx(lr,{className:"w-4 h-4"}):e.jsx(Be,{className:"w-4 h-4"}))]})},h.id))})}),e.jsx("tbody",{children:E.map((h,f)=>e.jsx("tr",{className:`${t.config.striped&&f%2===1?"bg-primary-25":""} ${t.config.bordered?"border-t border-primary-200":""}`,children:t.headers.map(w=>{var S,A,D;const b=h[w.key];return e.jsx("td",{className:`px-4 py-3 ${w.align==="center"?"text-center":w.align==="right"?"text-right":""}`,style:{backgroundColor:(S=b==null?void 0:b.style)==null?void 0:S.backgroundColor,color:(A=b==null?void 0:b.style)==null?void 0:A.color,fontWeight:(D=b==null?void 0:b.style)==null?void 0:D.fontWeight},children:(b==null?void 0:b.formatted)||j((b==null?void 0:b.value)??null,w.format)},w.id)})},f))})]})}),t.config.pagination&&N>1&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-primary-200 bg-primary-50",children:[e.jsxs("span",{className:"text-sm text-primary-600",children:[(c-1)*g+1," - ",Math.min(c*g,t.rows.length)," sur ",t.rows.length]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>y(Math.max(1,c-1)),disabled:c===1,className:"px-3 py-1 text-sm border border-primary-200 rounded hover:bg-primary-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Précédent"}),e.jsx("button",{onClick:()=>y(Math.min(N,c+1)),disabled:c===N,className:"px-3 py-1 text-sm border border-primary-200 rounded hover:bg-primary-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Suivant"})]})]})]})},va=({block:t,isEditable:r,onChange:s})=>{const[l,a]=d.useState(!0),[n,m]=d.useState(!1),c=()=>{a(!1),m(!1)},y=()=>{a(!1),m(!0)},g=t.alignment==="center"?"mx-auto":t.alignment==="right"?"ml-auto":"";return t.src?e.jsxs("figure",{className:g,style:{maxWidth:t.width||"100%"},children:[e.jsxs("div",{className:"relative",children:[l&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-primary-100 rounded-lg",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),n?e.jsxs("div",{className:"flex flex-col items-center justify-center bg-primary-100 rounded-lg text-primary-400",style:{height:t.height||200},children:[e.jsx(It,{className:"w-12 h-12 mb-2"}),e.jsx("p",{className:"text-sm",children:"Image non disponible"})]}):e.jsx("img",{src:t.src,alt:t.alt||"",className:`rounded-lg ${l?"invisible":""}`,style:{width:t.width||"100%",height:t.height||"auto",objectFit:"cover"},onLoad:c,onError:y})]}),t.caption&&e.jsx("figcaption",{className:"text-sm text-primary-500 text-center mt-2 italic",children:t.caption})]}):e.jsx("div",{className:`border-2 border-dashed border-primary-300 rounded-lg p-8 ${g}`,style:{width:t.width||"100%",height:t.height||200},children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-primary-400",children:[e.jsx(At,{className:"w-12 h-12 mb-2"}),e.jsx("p",{className:"text-sm",children:"Aucune image"}),r&&e.jsx("button",{className:"mt-2 px-4 py-2 text-sm bg-primary text-white rounded-lg hover:bg-primary-dark",children:"Ajouter une image"})]})})},ja=({block:t,isEditable:r,onChange:s})=>{const[l,a]=d.useState(!1),[n,m]=d.useState(t.content),[c,y]=d.useState(t.title||""),u={info:{bg:"bg-blue-50",border:"border-blue-200",icon:or,iconColor:"text-blue-500",titleColor:"text-blue-900"},warning:{bg:"bg-yellow-50",border:"border-yellow-200",icon:Pe,iconColor:"text-yellow-500",titleColor:"text-yellow-900"},success:{bg:"bg-green-50",border:"border-green-200",icon:ye,iconColor:"text-green-500",titleColor:"text-green-900"},error:{bg:"bg-red-50",border:"border-red-200",icon:ts,iconColor:"text-red-500",titleColor:"text-red-900"},tip:{bg:"bg-purple-50",border:"border-purple-200",icon:be,iconColor:"text-purple-500",titleColor:"text-purple-900"}}[t.variant],p=u.icon,v=()=>{a(!1),(n!==t.content||c!==t.title)&&s({content:n,title:c||void 0})};return l&&r?e.jsx("div",{className:`${u.bg} ${u.border} border rounded-lg p-4`,children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(p,{className:`w-5 h-5 ${u.iconColor} flex-shrink-0 mt-0.5`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",value:c,onChange:N=>y(N.target.value),placeholder:"Titre (optionnel)",className:`w-full bg-transparent border-b border-current mb-2 font-semibold ${u.titleColor} focus:outline-none`}),e.jsx("textarea",{value:n,onChange:N=>m(N.target.value),onBlur:v,className:"w-full bg-transparent resize-none focus:outline-none text-primary-700",rows:3,autoFocus:!0})]})]})}):e.jsx("div",{className:`${u.bg} ${u.border} border rounded-lg p-4 cursor-text`,onDoubleClick:()=>r&&a(!0),children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(p,{className:`w-5 h-5 ${u.iconColor} flex-shrink-0 mt-0.5`}),e.jsxs("div",{className:"flex-1",children:[t.title&&e.jsx("h4",{className:`font-semibold ${u.titleColor} mb-1`,children:t.title}),e.jsx("p",{className:"text-primary-700",children:t.content})]})]})})},Na=({block:t})=>{const r={solid:"border-solid",dashed:"border-dashed",dotted:"border-dotted"}[t.style||"solid"];return e.jsx("hr",{className:`border-t border-primary-300 my-6 ${r}`})},Ca=({block:t,isEditable:r,onChange:s})=>{const[l,a]=d.useState(null),n=(c,y)=>{const g=u=>u.map(p=>p.id===c?{...p,content:y}:p.children?{...p,children:g(p.children)}:p);s({items:g(t.items)})},m=(c,y=0)=>{const g=l===c.id;return e.jsxs("li",{className:"py-1",children:[g&&r?e.jsx("input",{type:"text",value:c.content,onChange:u=>n(c.id,u.target.value),onBlur:()=>a(null),onKeyDown:u=>u.key==="Enter"&&a(null),className:"w-full bg-transparent border-b border-primary focus:outline-none",autoFocus:!0}):e.jsx("span",{className:"cursor-text",onDoubleClick:()=>r&&a(c.id),children:c.content}),c.children&&c.children.length>0&&e.jsx(zt,{type:t.listType,items:c.children,depth:y+1,renderItem:m})]},c.id)};return e.jsx(zt,{type:t.listType,items:t.items,depth:0,renderItem:m})},zt=({type:t,items:r,depth:s,renderItem:l})=>{const a=t==="numbered"?"ol":"ul",n=t==="numbered"?"list-decimal":s===0?"list-disc":s===1?"list-circle":"list-square";return e.jsx(a,{className:`${n} ml-6 text-primary-700`,children:r.map(m=>l(m,s))})},Ea=({block:t,isEditable:r,onChange:s})=>{const a={positive:{bg:"bg-green-100",text:"text-green-700",icon:oe},negative:{bg:"bg-red-100",text:"text-red-700",icon:jt},neutral:{bg:"bg-gray-100",text:"text-gray-700",icon:Ve}}[t.changeType||"neutral"],n=a.icon,m=y=>typeof y=="number"?new Intl.NumberFormat("fr-FR").format(y):y,c=()=>{if(!t.sparkline||t.sparkline.length===0)return null;const y=Math.max(...t.sparkline),g=Math.min(...t.sparkline),u=y-g||1,p=40,v=100,N=v/(t.sparkline.length-1),E=t.sparkline.map((j,h)=>{const f=h*N,w=p-(j-g)/u*p;return`${f},${w}`}).join(" ");return e.jsx("svg",{width:v,height:p,className:"overflow-visible",viewBox:`0 0 ${v} ${p}`,children:e.jsx("polyline",{points:E,fill:"none",stroke:t.changeType==="positive"?"#10B981":t.changeType==="negative"?"#EF4444":"#6B7280",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})};return e.jsx("div",{className:"bg-white border border-primary-200 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-primary-500 font-medium",children:t.label}),e.jsxs("div",{className:"flex items-baseline gap-1 mt-1",children:[e.jsx("span",{className:"text-3xl font-bold text-primary-900",children:m(t.value)}),t.unit&&e.jsx("span",{className:"text-lg text-primary-600",children:t.unit})]}),t.change!==void 0&&e.jsxs("div",{className:`inline-flex items-center gap-1 mt-2 px-2 py-0.5 rounded-full ${a.bg}`,children:[e.jsx(n,{className:`w-3 h-3 ${a.text}`}),e.jsxs("span",{className:`text-sm font-medium ${a.text}`,children:[t.change>0?"+":"",t.change,"%"]})]})]}),t.sparkline&&e.jsx("div",{className:"flex-shrink-0",children:c()})]})})},Aa=({block:t,isEditable:r,isSelected:s,onSelect:l,onChange:a,onDragStart:n,onDrop:m,onDragOver:c,onDuplicate:y,onDelete:g})=>{var w;const[u,p]=Ie.useState(!1),[v,N]=Ie.useState(!1),E=b=>{b.preventDefault(),c(b);const S=b.currentTarget.getBoundingClientRect(),A=S.top+S.height/2;b.clientY<A?(p(!0),N(!1)):(p(!1),N(!0))},j=()=>{p(!1),N(!1)},h=b=>{b.preventDefault(),m(b,u?"before":"after"),p(!1),N(!1)},f=()=>{switch(t.type){case"paragraph":return e.jsx(ya,{block:t,isEditable:r,onChange:a});case"heading":return e.jsx(ga,{block:t,isEditable:r,onChange:a});case"chart":return e.jsx(fa,{block:t,isEditable:r,onChange:a});case"table":return e.jsx(ba,{block:t,isEditable:r,onChange:a});case"image":return e.jsx(va,{block:t,isEditable:r,onChange:a});case"callout":return e.jsx(ja,{block:t,isEditable:r,onChange:a});case"divider":return e.jsx(Na,{block:t});case"pagebreak":return e.jsx("div",{className:"border-t-2 border-dashed border-gray-300 my-8 relative",children:e.jsx("span",{className:"absolute left-1/2 -translate-x-1/2 -top-3 bg-white px-2 text-xs text-gray-400",children:"Saut de page"})});case"list":return e.jsx(Ca,{block:t,isEditable:r,onChange:a});case"kpi_card":return e.jsx(Ea,{block:t,isEditable:r,onChange:a});default:return e.jsxs("div",{className:"p-4 bg-gray-100 rounded text-gray-500 text-sm",children:["Type de bloc non supporté: ",t.type]})}};return e.jsxs("div",{className:"relative group",onDragOver:E,onDragLeave:j,onDrop:h,children:[u&&e.jsx("div",{className:"absolute -top-1 left-0 right-0 h-0.5 bg-primary rounded"}),e.jsxs("div",{className:`relative rounded transition-all ${r?"hover:ring-2 hover:ring-primary/20":""} ${s?"ring-2 ring-primary":""}`,onClick:l,draggable:r,onDragStart:n,children:[r&&e.jsxs("div",{className:"absolute -left-12 top-0 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col gap-1",children:[e.jsx("button",{className:"p-1.5 bg-white border border-gray-200 rounded shadow-sm hover:bg-gray-50 cursor-grab active:cursor-grabbing",title:"Déplacer",onMouseDown:b=>b.stopPropagation(),children:e.jsx(os,{className:"w-4 h-4 text-gray-400"})}),e.jsx("button",{className:"p-1.5 bg-white border border-gray-200 rounded shadow-sm hover:bg-gray-50",title:"Dupliquer",onClick:b=>{b.stopPropagation(),y()},children:e.jsx(Lt,{className:"w-4 h-4 text-gray-400"})}),e.jsx("button",{className:"p-1.5 bg-white border border-gray-200 rounded shadow-sm hover:bg-red-50",title:"Supprimer",onClick:b=>{b.stopPropagation(),g()},children:e.jsx($e,{className:"w-4 h-4 text-red-400"})})]}),((w=t.metadata)==null?void 0:w.aiGenerated)&&e.jsx("div",{className:"absolute -right-2 -top-2 z-10",children:e.jsx("span",{className:"bg-purple-100 text-purple-700 text-xs px-1.5 py-0.5 rounded-full",children:"IA"})}),f()]}),v&&e.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-0.5 bg-primary rounded"})]})},ps=({section:t,isEditable:r,isFirst:s,selectedBlockId:l,onBlockSelect:a,onBlockChange:n,onBlockDuplicate:m,onBlockDelete:c})=>{const[y,g]=Ie.useState(t.isCollapsed||!1),u=(N,E)=>{N.dataTransfer.setData("application/json",JSON.stringify({type:"block",blockId:E.id,sectionId:t.id}))},p=(N,E)=>{},v=N=>{N.preventDefault()};return e.jsxs("div",{id:`section-${t.id}`,className:`relative ${s?"":"mt-8 pt-8 border-t border-primary-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 group",children:[e.jsx("button",{onClick:()=>g(!y),className:"p-1 hover:bg-primary-100 rounded",children:y?e.jsx(ve,{className:"w-4 h-4"}):e.jsx(Be,{className:"w-4 h-4"})}),e.jsx("h2",{className:`font-semibold text-primary-900 ${t.level===1?"text-2xl":t.level===2?"text-xl":"text-lg"}`,children:t.title}),t.isLocked&&e.jsx(kt,{className:"w-4 h-4 text-primary-400"}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${t.status==="generated"?"bg-purple-100 text-purple-700":t.status==="edited"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:t.status==="generated"?"IA":t.status==="edited"?"Modifié":"Manuel"})]}),!y&&e.jsxs("div",{className:"space-y-4",children:[t.blocks.map(N=>e.jsx(Aa,{block:N,isEditable:r&&!t.isLocked,isSelected:l===N.id,onSelect:()=>a(N.id),onChange:E=>n(N.id,E),onDragStart:E=>u(E,N),onDrop:p,onDragOver:v,onDuplicate:()=>m(t.id,N.id),onDelete:()=>c(t.id,N.id)},N.id)),t.blocks.length===0&&r&&e.jsxs("div",{className:"text-center py-8 text-primary-400 border-2 border-dashed border-primary-200 rounded-lg",children:[e.jsx("p",{children:"Section vide"}),e.jsx("p",{className:"text-sm",children:"Utilisez la barre d'outils pour ajouter du contenu"})]})]}),y&&e.jsxs("div",{className:"text-sm text-primary-400 italic",children:[t.blocks.length," bloc(s) - Cliquez pour développer"]}),t.children&&t.children.length>0&&!y&&e.jsx("div",{className:"ml-6 mt-4",children:t.children.map((N,E)=>e.jsx(ps,{section:N,isEditable:r,isFirst:E===0,selectedBlockId:l,onBlockSelect:a,onBlockChange:n,onBlockDuplicate:m,onBlockDelete:c},N.id))})]})},Ra=({content:t,mode:r,zoom:s,viewMode:l,selectedBlockId:a,onContentChange:n,onBlockSelect:m,children:c})=>{const y=d.useRef(null),g=d.useRef(null),{duplicateBlock:u,deleteBlock:p}=ze(),v=d.useCallback(h=>{(h.target===y.current||h.target===g.current)&&m(null)},[m]),N=d.useCallback((h,f)=>{u(h,f)},[u]),E=d.useCallback((h,f)=>{p(h,f)},[p]),j=l==="double"?1200:800;return e.jsxs("div",{ref:y,className:`flex-1 overflow-auto bg-primary-200 relative ${r==="edit"?"cursor-text":""}`,onClick:v,children:[c,e.jsxs("div",{ref:g,className:`mx-auto my-8 bg-white shadow-lg rounded-sm ${l==="continuous"?"min-h-screen":""}`,style:{width:`${j}px`,transform:`scale(${s/100})`,transformOrigin:"top center",padding:"60px 80px"},children:[e.jsxs("div",{className:"mb-8 pb-8 border-b border-primary-200",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary-900 mb-4",children:"Rapport"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-primary-500",children:[e.jsxs("span",{children:["Version ",t.version||1]}),e.jsx("span",{children:"|"}),e.jsxs("span",{children:["Dernière modification: ",new Date(t.lastEditedAt||new Date().toISOString()).toLocaleDateString("fr-FR")]})]})]}),t.contentTree.sections.map((h,f)=>e.jsx(ps,{section:h,isEditable:r==="edit",isFirst:f===0,selectedBlockId:a,onBlockSelect:m,onBlockChange:n,onBlockDuplicate:N,onBlockDelete:E},h.id)),t.contentTree.sections.length===0&&e.jsxs("div",{className:"text-center py-16 text-primary-400",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-lg",children:"Document vide"}),r==="edit"&&e.jsx("p",{className:"mt-2",children:'Cliquez sur "Ajouter une section" pour commencer'})]})]}),l!=="continuous"&&e.jsxs("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 bg-white rounded-full shadow-lg px-4 py-2 flex items-center gap-4",children:[e.jsx("button",{className:"p-1 hover:bg-primary-100 rounded",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("span",{className:"text-sm",children:"Page 1 / 24"}),e.jsx("button",{className:"p-1 hover:bg-primary-100 rounded",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})},Ta=({report:t,selectedBlockId:r,collapsed:s,onCollapse:l})=>{var E;const{aiPanel:a,insights:n,recommendations:m,setAIActiveTab:c,addChatMessage:y,setAILoading:g}=ze(),[u,p]=d.useState(""),v=[{id:"summary",label:"Résumé",icon:he},{id:"insights",label:"Insights",icon:be},{id:"recommendations",label:"Actions",icon:oe},{id:"activity",label:"Activité",icon:He},{id:"comments",label:"Commentaires",icon:at},{id:"chat",label:"Chat",icon:ds}],N=async()=>{if(!u.trim())return;const j={id:`msg-${Date.now()}`,role:"user",content:u,timestamp:new Date().toISOString()};y(j),p(""),g(!0),setTimeout(()=>{const h={id:`msg-${Date.now()}`,role:"assistant",content:`Je comprends votre question concernant "${u}". Voici quelques suggestions pour améliorer votre rapport...`,timestamp:new Date().toISOString()};y(h),g(!1)},1500)};return s?e.jsxs("div",{className:"w-12 bg-white border-l border-primary-200 flex flex-col items-center py-4",children:[e.jsx("button",{onClick:l,className:"p-2 hover:bg-primary-100 rounded-lg mb-4",title:"Développer le panneau IA",children:e.jsx(St,{className:"w-5 h-5"})}),e.jsx(he,{className:"w-5 h-5 text-purple-500"})]}):e.jsxs("div",{className:"w-96 bg-white border-l border-primary-200 flex",children:[e.jsxs("div",{className:"w-14 bg-primary-50 border-r border-primary-200 flex flex-col py-2",children:[e.jsx("button",{onClick:l,className:"p-2 mx-2 mb-2 hover:bg-primary-100 rounded-lg transition-colors",title:"Réduire le panneau",children:e.jsx(ve,{className:"w-5 h-5 text-primary-500"})}),e.jsx("div",{className:"flex-1 flex flex-col gap-1 px-2",children:v.map(j=>{const h=j.icon;return e.jsxs("button",{onClick:()=>c(j.id),className:`flex flex-col items-center justify-center p-2 rounded-lg transition-colors ${a.activeTab===j.id?"bg-purple-100 text-purple-700":"text-primary-500 hover:bg-primary-100"}`,title:j.label,children:[e.jsx(h,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[10px] mt-1 font-medium",children:j.label})]},j.id)})}),e.jsx("div",{className:"px-2 pt-2 border-t border-primary-200 mt-2",children:e.jsx("div",{className:"flex items-center justify-center p-2",children:e.jsx(he,{className:"w-5 h-5 text-purple-500"})})})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-primary-200",children:e.jsx("h2",{className:"font-semibold text-primary-900",children:((E=v.find(j=>j.id===a.activeTab))==null?void 0:E.label)||"Assistant IA"})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[a.activeTab==="summary"&&e.jsx(Sa,{report:t}),a.activeTab==="insights"&&e.jsx(wa,{insights:n}),a.activeTab==="recommendations"&&e.jsx(Ia,{recommendations:m}),a.activeTab==="activity"&&e.jsx(Da,{report:t}),a.activeTab==="comments"&&e.jsx(Ba,{report:t,selectedBlockId:r}),a.activeTab==="chat"&&e.jsx(Pa,{messages:a.chatMessages,isLoading:a.isLoading,input:u,onInputChange:p,onSend:N})]})]})]})},Sa=({report:t})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-xl p-4",children:[e.jsx("h3",{className:"font-medium text-primary-900 mb-2",children:"Résumé du rapport"}),e.jsxs("p",{className:"text-sm text-primary-600",children:['Ce rapport "',t.title,'" contient une analyse complète des données. Il est actuellement en statut: ',e.jsx("span",{className:"font-medium",children:t.status})]})]}),e.jsxs("div",{className:"bg-primary-50 rounded-xl p-4",children:[e.jsx("h4",{className:"font-medium text-primary-900 mb-2",children:"Statistiques"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-primary-500",children:"Version"}),e.jsx("p",{className:"font-medium",children:t.version})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-primary-500",children:"Créé le"}),e.jsx("p",{className:"font-medium",children:new Date(t.createdAt).toLocaleDateString("fr-FR")})]})]})]})]}),wa=({insights:t})=>e.jsx("div",{className:"space-y-3",children:t.length===0?e.jsxs("div",{className:"text-center py-8 text-primary-400",children:[e.jsx(be,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Aucun insight disponible"})]}):t.map(r=>e.jsx(ka,{insight:r},r.id))}),ka=({insight:t})=>{const s={positive:{icon:ye,color:"text-green-500",bg:"bg-green-50"},negative:{icon:Pe,color:"text-red-500",bg:"bg-red-50"},warning:{icon:Pe,color:"text-yellow-500",bg:"bg-yellow-50"},info:{icon:be,color:"text-blue-500",bg:"bg-blue-50"},opportunity:{icon:oe,color:"text-purple-500",bg:"bg-purple-50"}}[t.type],l=s.icon;return e.jsx("div",{className:`${s.bg} rounded-lg p-3`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(l,{className:`w-4 h-4 ${s.color} flex-shrink-0 mt-0.5`}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-primary-900 text-sm",children:t.title}),e.jsx("p",{className:"text-xs text-primary-600 mt-1",children:t.description}),t.value&&e.jsx("p",{className:`text-sm font-bold ${s.color} mt-1`,children:t.value})]})]})})},Ia=({recommendations:t})=>e.jsx("div",{className:"space-y-3",children:t.length===0?e.jsxs("div",{className:"text-center py-8 text-primary-400",children:[e.jsx(oe,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Aucune recommandation"})]}):t.map(r=>e.jsx(La,{recommendation:r},r.id))}),La=({recommendation:t})=>{const r={critical:"border-red-300 bg-red-50",high:"border-orange-300 bg-orange-50",medium:"border-yellow-300 bg-yellow-50",low:"border-blue-300 bg-blue-50"};return e.jsxs("div",{className:`border rounded-lg p-3 ${r[t.priority]}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h4",{className:"font-medium text-primary-900 text-sm",children:t.title}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${t.priority==="critical"?"bg-red-200 text-red-700":t.priority==="high"?"bg-orange-200 text-orange-700":t.priority==="medium"?"bg-yellow-200 text-yellow-700":"bg-blue-200 text-blue-700"}`,children:t.priority})]}),e.jsx("p",{className:"text-xs text-primary-600 mt-1",children:t.description}),e.jsxs("button",{className:"mt-2 text-xs text-primary hover:underline flex items-center gap-1",children:["Appliquer ",e.jsx(es,{className:"w-3 h-3"})]})]})},Pa=({messages:t,isLoading:r,input:s,onInputChange:l,onSend:a})=>e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1 space-y-3 mb-4 overflow-y-auto",children:[t.length===0?e.jsxs("div",{className:"text-center py-8 text-primary-400",children:[e.jsx(ds,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Posez une question à l'assistant IA"})]}):t.map(n=>e.jsx("div",{className:`p-3 rounded-lg ${n.role==="user"?"bg-primary text-white ml-8":"bg-primary-100 text-primary-900 mr-8"}`,children:e.jsx("p",{className:"text-sm",children:n.content})},n.id)),r&&e.jsx("div",{className:"bg-primary-100 text-primary-900 p-3 rounded-lg mr-8",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-primary-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("span",{className:"w-2 h-2 bg-primary-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("span",{className:"w-2 h-2 bg-primary-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:s,onChange:n=>l(n.target.value),onKeyDown:n=>n.key==="Enter"&&a(),placeholder:"Posez votre question...",className:"flex-1 px-3 py-2 border border-primary-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary"}),e.jsx("button",{onClick:a,disabled:!s.trim()||r,className:"p-2 bg-primary text-white rounded-lg hover:bg-primary-dark disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(ur,{className:"w-4 h-4"})})]})]}),Da=({report:t})=>{const r=[{id:"1",type:"edit",user:t.author,description:"A modifié le rapport",timestamp:t.updatedAt,details:"Mise à jour du contenu"},{id:"2",type:"view",user:"Marie Dupont",description:"A consulté le rapport",timestamp:new Date(Date.now()-72e5).toISOString()},{id:"3",type:"status_change",user:t.author,description:"Statut modifié",timestamp:new Date(Date.now()-864e5).toISOString(),details:`Changé en "${t.status}"`},{id:"4",type:"comment",user:"Jean Martin",description:"A ajouté un commentaire",timestamp:new Date(Date.now()-1728e5).toISOString(),details:'Section "Analyse"'},{id:"5",type:"edit",user:t.author,description:"A créé le rapport",timestamp:t.createdAt}],s=a=>{switch(a){case"edit":return e.jsx(cs,{className:"w-4 h-4 text-blue-500"});case"view":return e.jsx(ct,{className:"w-4 h-4 text-gray-500"});case"comment":return e.jsx(at,{className:"w-4 h-4 text-green-500"});case"export":return e.jsx(ce,{className:"w-4 h-4 text-purple-500"});case"status_change":return e.jsx(He,{className:"w-4 h-4 text-orange-500"});default:return e.jsx(De,{className:"w-4 h-4 text-gray-400"})}},l=a=>{const n=new Date,m=new Date(a),c=n.getTime()-m.getTime(),y=Math.floor(c/6e4),g=Math.floor(c/36e5),u=Math.floor(c/864e5);return y<1?"À l'instant":y<60?`Il y a ${y} min`:g<24?`Il y a ${g}h`:u<7?`Il y a ${u}j`:m.toLocaleDateString("fr-FR")};return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-medium text-primary-900 text-sm",children:"Activité récente"}),e.jsxs("span",{className:"text-xs text-primary-400",children:[r.length," actions"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-2 bottom-2 w-px bg-primary-200"}),e.jsx("div",{className:"space-y-3",children:r.map(a=>e.jsxs("div",{className:"relative flex gap-3 pl-2",children:[e.jsx("div",{className:"relative z-10 w-8 h-8 rounded-full bg-white border border-primary-200 flex items-center justify-center",children:s(a.type)}),e.jsxs("div",{className:"flex-1 min-w-0 pt-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-primary-900 truncate",children:a.user}),e.jsx("span",{className:"text-xs text-primary-400",children:l(a.timestamp)})]}),e.jsx("p",{className:"text-xs text-primary-600",children:a.description}),a.details&&e.jsx("p",{className:"text-xs text-primary-400 mt-0.5",children:a.details})]})]},a.id))})]})]})},Ba=({report:t,selectedBlockId:r})=>{const[s,l]=d.useState({comments:[{id:"c1",reportId:t.id,blockId:"block-1",content:"Cette section nécessite plus de détails sur les KPIs.",isResolved:!1,author:{id:"u1",name:"Marie Dupont",avatar:""},createdAt:new Date(Date.now()-72e5).toISOString(),updatedAt:new Date(Date.now()-72e5).toISOString(),replies:[{id:"c1-r1",reportId:t.id,blockId:"block-1",content:"Je vais ajouter les données manquantes.",isResolved:!1,author:{id:"u2",name:t.author,avatar:""},createdAt:new Date(Date.now()-36e5).toISOString(),updatedAt:new Date(Date.now()-36e5).toISOString()}]},{id:"c2",reportId:t.id,blockId:"block-2",content:"Le graphique devrait utiliser une échelle logarithmique.",isResolved:!0,author:{id:"u3",name:"Jean Martin",avatar:""},createdAt:new Date(Date.now()-864e5).toISOString(),updatedAt:new Date(Date.now()-864e5).toISOString()},{id:"c3",reportId:t.id,blockId:r||"block-3",content:"Excellent travail sur cette analyse !",isResolved:!1,author:{id:"u4",name:"Sophie Bernard",avatar:""},createdAt:new Date(Date.now()-2592e5).toISOString(),updatedAt:new Date(Date.now()-2592e5).toISOString()}],newComment:"",replyingTo:null,replyText:""}),a=()=>{if(!s.newComment.trim())return;const g={id:`c-${Date.now()}`,reportId:t.id,blockId:r||"",content:s.newComment,isResolved:!1,author:{id:"current",name:t.author,avatar:""},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};l(u=>({...u,comments:[g,...u.comments],newComment:""}))},n=g=>{s.replyText.trim()&&l(u=>({...u,comments:u.comments.map(p=>p.id===g?{...p,replies:[...p.replies||[],{id:`r-${Date.now()}`,reportId:t.id,blockId:p.blockId,content:s.replyText,isResolved:!1,author:{id:"current",name:t.author,avatar:""},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]}:p),replyingTo:null,replyText:""}))},m=g=>{l(u=>({...u,comments:u.comments.map(p=>p.id===g?{...p,isResolved:!p.isResolved}:p)}))},c=g=>{const u=new Date,p=new Date(g),v=u.getTime()-p.getTime(),N=Math.floor(v/6e4),E=Math.floor(v/36e5),j=Math.floor(v/864e5);return N<1?"À l'instant":N<60?`${N} min`:E<24?`${E}h`:j<7?`${j}j`:p.toLocaleDateString("fr-FR")},y=s.comments.filter(g=>!g.isResolved).length;return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium text-primary-900 text-sm",children:"Commentaires"}),y>0&&e.jsxs("span",{className:"px-1.5 py-0.5 bg-orange-100 text-orange-700 text-xs rounded-full",children:[y," non résolu",y>1?"s":""]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("textarea",{value:s.newComment,onChange:g=>l(u=>({...u,newComment:g.target.value})),placeholder:r?"Commenter ce bloc...":"Ajouter un commentaire...",className:"w-full px-3 py-2 border border-primary-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary resize-none",rows:2}),e.jsxs("button",{onClick:a,disabled:!s.newComment.trim(),className:"w-full px-3 py-1.5 bg-primary text-white text-sm rounded-lg hover:bg-primary-dark disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(at,{className:"w-4 h-4"}),"Commenter"]})]}),e.jsx("div",{className:"space-y-3",children:s.comments.length===0?e.jsxs("div",{className:"text-center py-8 text-primary-400",children:[e.jsx(at,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Aucun commentaire"})]}):s.comments.map(g=>e.jsxs("div",{className:`rounded-lg border ${g.isResolved?"border-green-200 bg-green-50/50":"border-primary-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-start justify-between p-3 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 rounded-full bg-primary-200 flex items-center justify-center",children:e.jsx(cr,{className:"w-4 h-4 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-primary-900",children:g.author.name}),e.jsx("p",{className:"text-xs text-primary-400",children:c(g.createdAt)})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>m(g.id),className:`p-1 rounded transition-colors ${g.isResolved?"text-green-600 hover:bg-green-100":"text-primary-400 hover:bg-primary-100"}`,title:g.isResolved?"Marquer non résolu":"Marquer résolu",children:e.jsx(ye,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 text-primary-400 hover:bg-primary-100 rounded",children:e.jsx(dr,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"px-3 pb-2",children:e.jsx("p",{className:`text-sm ${g.isResolved?"text-primary-500":"text-primary-700"}`,children:g.content})}),g.replies&&g.replies.length>0&&e.jsx("div",{className:"mx-3 mb-2 pl-3 border-l-2 border-primary-200 space-y-2",children:g.replies.map(u=>e.jsxs("div",{className:"py-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-primary-700",children:u.author.name}),e.jsx("span",{className:"text-xs text-primary-400",children:c(u.createdAt)})]}),e.jsx("p",{className:"text-xs text-primary-600",children:u.content})]},u.id))}),s.replyingTo===g.id?e.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[e.jsx("input",{type:"text",value:s.replyText,onChange:u=>l(p=>({...p,replyText:u.target.value})),placeholder:"Répondre...",className:"w-full px-2 py-1 text-sm border border-primary-200 rounded focus:outline-none focus:ring-1 focus:ring-primary",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>n(g.id),disabled:!s.replyText.trim(),className:"px-2 py-1 text-xs bg-primary text-white rounded hover:bg-primary-dark disabled:opacity-50",children:"Envoyer"}),e.jsx("button",{onClick:()=>l(u=>({...u,replyingTo:null,replyText:""})),className:"px-2 py-1 text-xs text-primary-600 hover:bg-primary-100 rounded",children:"Annuler"})]})]}):e.jsx("div",{className:"px-3 pb-2",children:e.jsxs("button",{onClick:()=>l(u=>({...u,replyingTo:g.id})),className:"text-xs text-primary-500 hover:text-primary flex items-center gap-1",children:[e.jsx(mr,{className:"w-3 h-3"}),"Répondre"]})})]},g.id))})]})},Oa=[{type:"paragraph",label:"Paragraphe",icon:Pt,category:"text"},{type:"heading",label:"Titre H1",icon:ms,category:"text"},{type:"heading",label:"Titre H2",icon:pr,category:"text"},{type:"heading",label:"Titre H3",icon:xr,category:"text"},{type:"list",label:"Liste à puces",icon:Rt,category:"text"},{type:"list",label:"Liste numérotée",icon:hr,category:"text"},{type:"chart",label:"Graphique",icon:Ne,category:"data"},{type:"table",label:"Tableau",icon:Ue,category:"data"},{type:"kpi_card",label:"KPI",icon:Zt,category:"data"},{type:"image",label:"Image",icon:It,category:"media"},{type:"callout",label:"Encadré",icon:yr,category:"layout"},{type:"quote",label:"Citation",icon:gr,category:"layout"},{type:"divider",label:"Séparateur",icon:Ve,category:"layout"},{type:"pagebreak",label:"Saut de page",icon:fr,category:"layout"}],_a=({visible:t,selectedBlockId:r,onInsert:s,onOpenLibrary:l,onDelete:a,onDuplicate:n,onMoveUp:m,onMoveDown:c})=>{const[y,g]=d.useState(!1),[u,p]=d.useState("text");if(!t)return null;const v=[{id:"text",label:"Texte"},{id:"data",label:"Données"},{id:"media",label:"Média"},{id:"layout",label:"Mise en page"}],N=Oa.filter(E=>E.category===u);return e.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-primary-200 p-2 flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>g(!y),className:"flex items-center gap-2 px-3 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Insérer"}),e.jsx(Be,{className:"w-4 h-4"})]}),y&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>g(!1)}),e.jsxs("div",{className:"absolute bottom-full mb-2 left-0 bg-white rounded-xl shadow-xl border border-primary-200 p-4 min-w-[320px] z-50",children:[e.jsx("div",{className:"flex gap-1 mb-3 border-b border-primary-100 pb-2",children:v.map(E=>e.jsx("button",{onClick:()=>p(E.id),className:`px-3 py-1 text-sm rounded-lg transition-colors ${u===E.id?"bg-primary text-white":"text-primary-600 hover:bg-primary-50"}`,children:E.label},E.id))}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:N.map((E,j)=>{const h=E.icon;return e.jsxs("button",{onClick:()=>{s(E.type,r||void 0),g(!1)},className:"flex items-center gap-2 p-2 rounded-lg hover:bg-primary-50 transition-colors text-left",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(h,{className:"w-4 h-4 text-primary"})}),e.jsx("span",{className:"text-sm text-primary-700",children:E.label})]},`${E.type}-${j}`)})})]})]})]}),e.jsx("div",{className:"w-px h-8 bg-primary-200"}),l&&e.jsxs("button",{onClick:l,className:"flex items-center gap-1.5 px-3 py-2 bg-accent/10 text-accent rounded-lg hover:bg-accent/20 transition-colors",title:"Bibliothèque de données",children:[e.jsx(br,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Bibliothèque"})]}),e.jsx("div",{className:"w-px h-8 bg-primary-200"}),e.jsx("button",{onClick:()=>s("paragraph",r||void 0),className:"p-2 hover:bg-primary-50 rounded-lg transition-colors",title:"Paragraphe",children:e.jsx(Pt,{className:"w-4 h-4 text-primary-600"})}),e.jsx("button",{onClick:()=>s("heading",r||void 0),className:"p-2 hover:bg-primary-50 rounded-lg transition-colors",title:"Titre",children:e.jsx(ms,{className:"w-4 h-4 text-primary-600"})}),e.jsx("button",{onClick:()=>s("chart",r||void 0),className:"p-2 hover:bg-primary-50 rounded-lg transition-colors",title:"Graphique vide",children:e.jsx(Ne,{className:"w-4 h-4 text-primary-600"})}),e.jsx("button",{onClick:()=>s("table",r||void 0),className:"p-2 hover:bg-primary-50 rounded-lg transition-colors",title:"Tableau vide",children:e.jsx(Ue,{className:"w-4 h-4 text-primary-600"})}),r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-px h-8 bg-primary-200"}),e.jsx("button",{onClick:m,className:"p-2 hover:bg-primary-50 rounded-lg transition-colors",title:"Déplacer vers le haut",children:e.jsx(vr,{className:"w-4 h-4 text-primary-600"})}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-primary-50 rounded-lg transition-colors",title:"Déplacer vers le bas",children:e.jsx(jr,{className:"w-4 h-4 text-primary-600"})}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-primary-50 rounded-lg transition-colors",title:"Dupliquer",children:e.jsx(Lt,{className:"w-4 h-4 text-primary-600"})}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:e.jsx($e,{className:"w-4 h-4 text-red-500"})})]})]})})},Fa=({isOpen:t,reportTitle:r,onClose:s,onExport:l})=>{const[a,n]=d.useState("pdf"),[m,c]=d.useState({format:"pdf",quality:"standard",pageSize:"A4",orientation:"portrait",margins:"normal",includeTableOfContents:!0,includeCoverPage:!0,includeComments:!1}),[y,g]=d.useState(!1),u=[{format:"pdf",label:"PDF",icon:ce,description:"Document portable, idéal pour l'impression"},{format:"docx",label:"Word",icon:as,description:"Document éditable Microsoft Word"},{format:"pptx",label:"PowerPoint",icon:is,description:"Présentation Microsoft PowerPoint"},{format:"xlsx",label:"Excel",icon:ns,description:"Tableur avec données brutes"},{format:"html",label:"HTML",icon:ls,description:"Page web interactive"},{format:"markdown",label:"Markdown",icon:Nr,description:"Format texte simple"}],p=async()=>{g(!0);try{await l(a,{...m,format:a})}finally{g(!1)}};return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:s}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-primary-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-primary-900",children:"Exporter le rapport"}),e.jsx("p",{className:"text-sm text-primary-500",children:r})]}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-primary-100 rounded-lg transition-colors",children:e.jsx(Oe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium text-primary-900 mb-3",children:"Format d'export"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:u.map(({format:v,label:N,icon:E,description:j})=>e.jsxs("button",{onClick:()=>n(v),className:`p-4 rounded-xl border-2 text-left transition-all ${a===v?"border-primary bg-primary-50":"border-primary-200 hover:border-primary-300"}`,children:[e.jsx(E,{className:`w-6 h-6 mb-2 ${a===v?"text-primary":"text-primary-400"}`}),e.jsx("p",{className:"font-medium text-primary-900",children:N}),e.jsx("p",{className:"text-xs text-primary-500 mt-1",children:j})]},v))})]}),(a==="pdf"||a==="docx")&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium text-primary-900",children:"Options"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-primary-600",children:"Qualité"}),e.jsxs("select",{value:m.quality,onChange:v=>c({...m,quality:v.target.value}),className:"w-full mt-1 px-3 py-2 border border-primary-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"draft",children:"Brouillon"}),e.jsx("option",{value:"standard",children:"Standard"}),e.jsx("option",{value:"high",children:"Haute qualité"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-primary-600",children:"Taille de page"}),e.jsxs("select",{value:m.pageSize,onChange:v=>c({...m,pageSize:v.target.value}),className:"w-full mt-1 px-3 py-2 border border-primary-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"A4",children:"A4"}),e.jsx("option",{value:"Letter",children:"Letter"}),e.jsx("option",{value:"A3",children:"A3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-primary-600",children:"Orientation"}),e.jsxs("select",{value:m.orientation,onChange:v=>c({...m,orientation:v.target.value}),className:"w-full mt-1 px-3 py-2 border border-primary-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"portrait",children:"Portrait"}),e.jsx("option",{value:"landscape",children:"Paysage"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:m.includeCoverPage,onChange:v=>c({...m,includeCoverPage:v.target.checked}),className:"w-4 h-4 text-primary border-primary-300 rounded focus:ring-primary"}),e.jsx("span",{className:"text-sm text-primary-700",children:"Inclure la page de couverture"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:m.includeTableOfContents,onChange:v=>c({...m,includeTableOfContents:v.target.checked}),className:"w-4 h-4 text-primary border-primary-300 rounded focus:ring-primary"}),e.jsx("span",{className:"text-sm text-primary-700",children:"Inclure la table des matières"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:m.includeComments,onChange:v=>c({...m,includeComments:v.target.checked}),className:"w-4 h-4 text-primary border-primary-300 rounded focus:ring-primary"}),e.jsx("span",{className:"text-sm text-primary-700",children:"Inclure les commentaires"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-primary-200 bg-primary-50",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-primary-700 hover:bg-primary-100 rounded-lg transition-colors",children:"Annuler"}),e.jsx("button",{onClick:p,disabled:y,className:"flex items-center gap-2 px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:opacity-50",children:y?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Export en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(rs,{className:"w-4 h-4"}),"Exporter"]})})]})]})]}):null},qa={chartType:"bar",title:"Nouveau graphique",data:[{label:"Janvier",value:100},{label:"Février",value:150},{label:"Mars",value:200}],config:{showLegend:!0,showGrid:!0,colorScheme:"corporate"}},Ma=({isOpen:t,onClose:r,onSave:s,initialData:l})=>{const[a,n]=d.useState(l||qa),m=[{type:"bar",label:"Barres",icon:Ne},{type:"line",label:"Lignes",icon:st},{type:"pie",label:"Camembert",icon:rt},{type:"horizontal_bar",label:"Barres H.",icon:Ne},{type:"area",label:"Aires",icon:st},{type:"donut",label:"Donut",icon:rt}],c=[{id:"corporate",label:"Corporate",colors:["#1C3163","#4A6FA5","#8FB8DE"]},{id:"vibrant",label:"Vibrant",colors:["#FF6B6B","#4ECDC4","#45B7D1"]},{id:"pastel",label:"Pastel",colors:["#FFB3BA","#BAFFC9","#BAE1FF"]},{id:"monochrome",label:"Monochrome",colors:["#333333","#666666","#999999"]}],y=()=>{n({...a,data:[...a.data,{label:`Point ${a.data.length+1}`,value:0}]})},g=v=>{n({...a,data:a.data.filter((N,E)=>E!==v)})},u=(v,N,E)=>{const j=[...a.data];j[v]={...j[v],[N]:N==="value"?Number(E):E},n({...a,data:j})},p=()=>{s(a)};return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:r}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-primary-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-primary-900",children:"Éditeur de graphique"}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-primary-100 rounded-lg transition-colors",children:e.jsx(Oe,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1",children:"Titre du graphique"}),e.jsx("input",{type:"text",value:a.title,onChange:v=>n({...a,title:v.target.value}),className:"w-full px-3 py-2 border border-primary-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Titre du graphique"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Type de graphique"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:m.map(({type:v,label:N,icon:E})=>e.jsxs("button",{onClick:()=>n({...a,chartType:v}),className:`p-3 rounded-lg border-2 flex flex-col items-center gap-1 transition-all ${a.chartType===v?"border-primary bg-primary-50":"border-primary-200 hover:border-primary-300"}`,children:[e.jsx(E,{className:`w-5 h-5 ${a.chartType===v?"text-primary":"text-primary-400"}`}),e.jsx("span",{className:"text-xs",children:N})]},v))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Palette de couleurs"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:c.map(v=>e.jsxs("button",{onClick:()=>n({...a,config:{...a.config,colorScheme:v.id}}),className:`p-3 rounded-lg border-2 flex items-center gap-2 transition-all ${a.config.colorScheme===v.id?"border-primary bg-primary-50":"border-primary-200 hover:border-primary-300"}`,children:[e.jsx("div",{className:"flex gap-1",children:v.colors.map((N,E)=>e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:N}},E))}),e.jsx("span",{className:"text-sm",children:v.label})]},v.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a.config.showLegend,onChange:v=>n({...a,config:{...a.config,showLegend:v.target.checked}}),className:"w-4 h-4 text-primary border-primary-300 rounded focus:ring-primary"}),e.jsx("span",{className:"text-sm text-primary-700",children:"Afficher la légende"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a.config.showGrid,onChange:v=>n({...a,config:{...a.config,showGrid:v.target.checked}}),className:"w-4 h-4 text-primary border-primary-300 rounded focus:ring-primary"}),e.jsx("span",{className:"text-sm text-primary-700",children:"Afficher la grille"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700",children:"Données"}),e.jsxs("button",{onClick:y,className:"flex items-center gap-1 px-2 py-1 text-sm text-primary hover:bg-primary-50 rounded",children:[e.jsx(ge,{className:"w-4 h-4"}),"Ajouter"]})]}),e.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:a.data.map((v,N)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:v.label,onChange:E=>u(N,"label",E.target.value),className:"flex-1 px-3 py-2 border border-primary-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Libellé"}),e.jsx("input",{type:"number",value:v.value,onChange:E=>u(N,"value",E.target.value),className:"w-24 px-3 py-2 border border-primary-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Valeur"}),e.jsx("button",{onClick:()=>g(N),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",disabled:a.data.length<=1,children:e.jsx($e,{className:"w-4 h-4"})})]},N))}),e.jsxs("div",{className:"mt-4 p-4 bg-primary-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-primary-500 text-center",children:"Aperçu du graphique"}),e.jsx("div",{className:"h-40 flex items-center justify-center text-primary-400",children:e.jsx(Ne,{className:"w-16 h-16"})})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-primary-200 bg-primary-50",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 text-primary-700 hover:bg-primary-100 rounded-lg transition-colors",children:"Annuler"}),e.jsx("button",{onClick:p,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:"Enregistrer"})]})]})]}):null},ft={pageFormat:{size:"A4",orientation:"portrait",margins:"normal"},typography:{headingFont:"Inter",bodyFont:"Inter",baseFontSize:14},colors:{primary:"#1C3163",secondary:"#4A6FA5",accent:"#E85D04",text:"#333333",background:"#FFFFFF"},branding:{showLogo:!0,logoUrl:"",showFooter:!0,footerText:""},cover:{enabled:!0,template:"modern",title:"",subtitle:"",backgroundImage:""},tableOfContents:{enabled:!0,depth:3,showPageNumbers:!0}},Yt=["Inter","Roboto","Open Sans","Lato","Montserrat","Poppins","Source Sans Pro","Nunito","Playfair Display","Merriweather"],Ga=[{id:"modern",name:"Moderne",description:"Design épuré avec bandeau coloré"},{id:"classic",name:"Classique",description:"Style traditionnel professionnel"},{id:"minimal",name:"Minimaliste",description:"Simple et élégant"},{id:"bold",name:"Audacieux",description:"Couleurs vives et impactantes"}],Va=[{id:"pageFormat",label:"Format",icon:Cr},{id:"typography",label:"Typo",icon:Pt},{id:"colors",label:"Couleurs",icon:wt},{id:"branding",label:"Marque",icon:It},{id:"cover",label:"Couverture",icon:ce},{id:"toc",label:"Sommaire",icon:Rt}],Ua=({isOpen:t,settings:r,onClose:s,onSave:l})=>{const[a,n]=d.useState(r||ft),[m,c]=d.useState("pageFormat");d.useEffect(()=>{n(r||ft)},[r,t]);const y=(p,v)=>{n(N=>({...N,[p]:{...N[p],...v}}))},g=()=>{l(a),s()},u=()=>{n(ft)};return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:s}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl max-w-4xl w-full mx-4 h-[85vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-primary-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:e.jsx(wt,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-primary-900",children:"Paramètres de design"}),e.jsx("p",{className:"text-sm text-primary-500",children:"Personnalisez l'apparence de votre rapport"})]})]}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-primary-100 rounded-lg transition-colors",children:e.jsx(Oe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"w-24 bg-primary-50 border-r border-primary-200 flex flex-col py-4",children:Va.map(p=>{const v=p.icon;return e.jsxs("button",{onClick:()=>c(p.id),className:`flex flex-col items-center justify-center py-3 px-2 mx-2 mb-1 rounded-lg transition-colors ${m===p.id?"bg-primary text-white":"text-primary-600 hover:bg-primary-100"}`,children:[e.jsx(v,{className:"w-5 h-5 mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:p.label})]},p.id)})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[m==="pageFormat"&&e.jsx(Wa,{settings:a.pageFormat,onChange:p=>y("pageFormat",p)}),m==="typography"&&e.jsx(Ha,{settings:a.typography,onChange:p=>y("typography",p)}),m==="colors"&&e.jsx($a,{settings:a.colors,onChange:p=>y("colors",p)}),m==="branding"&&e.jsx(za,{settings:a.branding,onChange:p=>y("branding",p)}),m==="cover"&&e.jsx(Ya,{settings:a.cover,onChange:p=>y("cover",p)}),m==="toc"&&e.jsx(Ka,{settings:a.tableOfContents,onChange:p=>y("tableOfContents",p)})]})]}),e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-primary-200 bg-primary-50",children:[e.jsx("button",{onClick:u,className:"px-4 py-2 text-primary-600 hover:text-primary-800 transition-colors",children:"Réinitialiser"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-primary-700 hover:bg-primary-100 rounded-lg transition-colors",children:"Annuler"}),e.jsx("button",{onClick:g,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:"Appliquer"})]})]})]})]}):null},Wa=({settings:t,onChange:r})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900 mb-4",children:"Format de page"}),e.jsx("p",{className:"text-sm text-primary-500 mb-6",children:"Configurez les dimensions et les marges de votre document."})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Taille du papier"}),e.jsxs("select",{value:t.size,onChange:s=>r({size:s.target.value}),className:"w-full px-4 py-3 border border-primary-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm",children:[e.jsx("option",{value:"A4",children:"A4 (210 x 297 mm)"}),e.jsx("option",{value:"A3",children:"A3 (297 x 420 mm)"}),e.jsx("option",{value:"Letter",children:"Letter US (216 x 279 mm)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Orientation"}),e.jsxs("select",{value:t.orientation,onChange:s=>r({orientation:s.target.value}),className:"w-full px-4 py-3 border border-primary-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm",children:[e.jsx("option",{value:"portrait",children:"Portrait"}),e.jsx("option",{value:"landscape",children:"Paysage"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Marges"}),e.jsxs("select",{value:t.margins,onChange:s=>r({margins:s.target.value}),className:"w-full px-4 py-3 border border-primary-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm",children:[e.jsx("option",{value:"narrow",children:"Étroites (12.7 mm)"}),e.jsx("option",{value:"normal",children:"Normales (25.4 mm)"}),e.jsx("option",{value:"wide",children:"Larges (50.8 mm)"})]})]})]}),e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx("div",{className:`bg-white border-2 border-primary-300 shadow-lg ${t.orientation==="portrait"?"w-32 h-44":"w-44 h-32"}`,children:e.jsx("div",{className:"h-full bg-primary-50 m-1",style:{margin:t.margins==="narrow"?"2px":t.margins==="wide"?"8px":"4px"},children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-xs text-primary-400",children:[e.jsx("span",{children:t.size}),e.jsx("span",{children:t.orientation==="portrait"?"Portrait":"Paysage"})]})})})})]}),Ha=({settings:t,onChange:r})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900 mb-4",children:"Typographie"}),e.jsx("p",{className:"text-sm text-primary-500 mb-6",children:"Choisissez les polices et tailles de texte pour votre rapport."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Police des titres"}),e.jsx("select",{value:t.headingFont,onChange:s=>r({headingFont:s.target.value}),className:"w-full px-4 py-3 border border-primary-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm",children:Yt.map(s=>e.jsx("option",{value:s,style:{fontFamily:s},children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Police du corps"}),e.jsx("select",{value:t.bodyFont,onChange:s=>r({bodyFont:s.target.value}),className:"w-full px-4 py-3 border border-primary-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm",children:Yt.map(s=>e.jsx("option",{value:s,style:{fontFamily:s},children:s},s))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:["Taille de base: ",t.baseFontSize,"px"]}),e.jsx("input",{type:"range",min:"10",max:"18",value:t.baseFontSize,onChange:s=>r({baseFontSize:parseInt(s.target.value)}),className:"w-full h-2 bg-primary-200 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-primary-400 mt-1",children:[e.jsx("span",{children:"10px"}),e.jsx("span",{children:"14px"}),e.jsx("span",{children:"18px"})]})]}),e.jsxs("div",{className:"mt-6 p-6 bg-primary-50 rounded-xl",children:[e.jsx("p",{className:"text-xs text-primary-500 mb-4 uppercase tracking-wide",children:"Aperçu"}),e.jsx("h3",{style:{fontFamily:t.headingFont,fontSize:`${t.baseFontSize*1.75}px`},className:"font-bold text-primary-900 mb-3",children:"Titre de section"}),e.jsx("h4",{style:{fontFamily:t.headingFont,fontSize:`${t.baseFontSize*1.25}px`},className:"font-semibold text-primary-800 mb-2",children:"Sous-titre"}),e.jsx("p",{style:{fontFamily:t.bodyFont,fontSize:`${t.baseFontSize}px`},className:"text-primary-700",children:"Ceci est un exemple de texte de corps avec la police et la taille sélectionnées. Le texte doit être lisible et agréable à lire."})]})]}),$a=({settings:t,onChange:r})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900 mb-4",children:"Palette de couleurs"}),e.jsx("p",{className:"text-sm text-primary-500 mb-6",children:"Définissez les couleurs principales de votre rapport."})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsx(qe,{label:"Primaire",value:t.primary,onChange:s=>r({primary:s})}),e.jsx(qe,{label:"Secondaire",value:t.secondary,onChange:s=>r({secondary:s})}),e.jsx(qe,{label:"Accent",value:t.accent,onChange:s=>r({accent:s})}),e.jsx(qe,{label:"Texte",value:t.text,onChange:s=>r({text:s})}),e.jsx(qe,{label:"Fond",value:t.background,onChange:s=>r({background:s})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-xs text-primary-500 mb-3 uppercase tracking-wide",children:"Aperçu de la palette"}),e.jsx("div",{className:"flex gap-2 h-16 rounded-xl overflow-hidden shadow-sm",children:Object.entries(t).map(([s,l])=>e.jsx("div",{className:"flex-1 flex items-end justify-center pb-2",style:{backgroundColor:l},children:e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded ${s==="background"||s==="text"?"bg-white/80 text-gray-700":"bg-black/20 text-white"}`,children:s})},s))})]}),e.jsxs("div",{className:"mt-6 p-6 rounded-xl border",style:{backgroundColor:t.background,borderColor:t.primary},children:[e.jsx("h4",{style:{color:t.primary},className:"text-lg font-bold mb-2",children:"Exemple de titre"}),e.jsx("p",{style:{color:t.text},className:"mb-3",children:"Voici un exemple de paragraphe avec les couleurs sélectionnées."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"px-3 py-1 rounded text-white text-sm",style:{backgroundColor:t.primary},children:"Primaire"}),e.jsx("span",{className:"px-3 py-1 rounded text-white text-sm",style:{backgroundColor:t.secondary},children:"Secondaire"}),e.jsx("span",{className:"px-3 py-1 rounded text-white text-sm",style:{backgroundColor:t.accent},children:"Accent"})]})]})]}),za=({settings:t,onChange:r})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900 mb-4",children:"Identité visuelle"}),e.jsx("p",{className:"text-sm text-primary-500 mb-6",children:"Personnalisez le branding de votre rapport avec votre logo et pied de page."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 border border-primary-200 rounded-xl",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer mb-4",children:[e.jsx("input",{type:"checkbox",checked:t.showLogo,onChange:s=>r({showLogo:s.target.checked}),className:"w-5 h-5 text-primary border-primary-300 rounded focus:ring-primary"}),e.jsx("span",{className:"font-medium text-primary-900",children:"Afficher le logo"})]}),t.showLogo&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"URL du logo"}),e.jsx("input",{type:"text",value:t.logoUrl||"",onChange:s=>r({logoUrl:s.target.value}),placeholder:"https://example.com/logo.png",className:"w-full px-4 py-3 border border-primary-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm"}),e.jsx("p",{className:"text-xs text-primary-400 mt-2",children:"Formats supportés: PNG, JPG, SVG. Taille recommandée: 200x60px"})]})]}),e.jsxs("div",{className:"p-4 border border-primary-200 rounded-xl",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer mb-4",children:[e.jsx("input",{type:"checkbox",checked:t.showFooter,onChange:s=>r({showFooter:s.target.checked}),className:"w-5 h-5 text-primary border-primary-300 rounded focus:ring-primary"}),e.jsx("span",{className:"font-medium text-primary-900",children:"Afficher le pied de page"})]}),t.showFooter&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Texte du pied de page"}),e.jsx("input",{type:"text",value:t.footerText||"",onChange:s=>r({footerText:s.target.value}),placeholder:"© 2024 Votre entreprise - Tous droits réservés",className:"w-full px-4 py-3 border border-primary-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm"})]})]})]})]}),Ya=({settings:t,onChange:r})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900 mb-4",children:"Page de couverture"}),e.jsx("p",{className:"text-sm text-primary-500 mb-6",children:"Configurez l'apparence de la page de couverture de votre rapport."})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.enabled,onChange:s=>r({enabled:s.target.checked}),className:"w-5 h-5 text-primary border-primary-300 rounded focus:ring-primary"}),e.jsx("span",{className:"font-medium text-primary-900",children:"Inclure une page de couverture"})]}),t.enabled&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-3",children:"Modèle de couverture"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Ga.map(s=>e.jsxs("button",{onClick:()=>r({template:s.id}),className:`p-4 text-left rounded-xl border-2 transition-all ${t.template===s.id?"border-primary bg-primary-50":"border-primary-200 hover:border-primary-300"}`,children:[e.jsx("p",{className:"font-semibold text-primary-900",children:s.name}),e.jsx("p",{className:"text-sm text-primary-500 mt-1",children:s.description})]},s.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Titre personnalisé"}),e.jsx("input",{type:"text",value:t.title||"",onChange:s=>r({title:s.target.value}),placeholder:"Laisser vide pour le titre du rapport",className:"w-full px-4 py-3 border border-primary-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Sous-titre"}),e.jsx("input",{type:"text",value:t.subtitle||"",onChange:s=>r({subtitle:s.target.value}),placeholder:"Sous-titre optionnel",className:"w-full px-4 py-3 border border-primary-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Image de fond (optionnel)"}),e.jsx("input",{type:"text",value:t.backgroundImage||"",onChange:s=>r({backgroundImage:s.target.value}),placeholder:"https://example.com/background.jpg",className:"w-full px-4 py-3 border border-primary-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm"})]})]})]}),Ka=({settings:t,onChange:r})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary-900 mb-4",children:"Table des matières"}),e.jsx("p",{className:"text-sm text-primary-500 mb-6",children:"Configurez la génération automatique de la table des matières."})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.enabled,onChange:s=>r({enabled:s.target.checked}),className:"w-5 h-5 text-primary border-primary-300 rounded focus:ring-primary"}),e.jsx("span",{className:"font-medium text-primary-900",children:"Inclure une table des matières"})]}),t.enabled&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Profondeur des niveaux"}),e.jsxs("select",{value:t.depth,onChange:s=>r({depth:parseInt(s.target.value)}),className:"w-full px-4 py-3 border border-primary-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm",children:[e.jsx("option",{value:1,children:"Niveau 1 uniquement"}),e.jsx("option",{value:2,children:"Niveaux 1 et 2"}),e.jsx("option",{value:3,children:"Niveaux 1 à 3"}),e.jsx("option",{value:4,children:"Tous les niveaux"})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.showPageNumbers,onChange:s=>r({showPageNumbers:s.target.checked}),className:"w-5 h-5 text-primary border-primary-300 rounded focus:ring-primary"}),e.jsx("span",{className:"text-sm text-primary-700",children:"Afficher les numéros de page"})]})})]}),e.jsxs("div",{className:"p-4 bg-primary-50 rounded-xl",children:[e.jsx("p",{className:"text-xs text-primary-500 mb-3 uppercase tracking-wide",children:"Aperçu"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-primary-900",children:"1. Résumé exécutif"}),t.showPageNumbers&&e.jsx("span",{className:"text-primary-400",children:"3"})]}),t.depth>=2&&e.jsxs("div",{className:"flex justify-between pl-4",children:[e.jsx("span",{className:"text-primary-700",children:"1.1 Introduction"}),t.showPageNumbers&&e.jsx("span",{className:"text-primary-400",children:"3"})]}),t.depth>=3&&e.jsxs("div",{className:"flex justify-between pl-8",children:[e.jsx("span",{className:"text-primary-600",children:"1.1.1 Contexte"}),t.showPageNumbers&&e.jsx("span",{className:"text-primary-400",children:"3"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-primary-900",children:"2. Analyse des performances"}),t.showPageNumbers&&e.jsx("span",{className:"text-primary-400",children:"5"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-primary-900",children:"3. Recommandations"}),t.showPageNumbers&&e.jsx("span",{className:"text-primary-400",children:"12"})]})]})]})]})]}),qe=({label:t,value:r,onChange:s})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:t}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-full h-12 rounded-lg cursor-pointer border-2 border-primary-200 hover:border-primary-300 transition-colors relative overflow-hidden",style:{backgroundColor:r},children:e.jsx("input",{type:"color",value:r,onChange:l=>s(l.target.value),className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"})}),e.jsx("input",{type:"text",value:r,onChange:l=>s(l.target.value),className:"w-full px-2 py-1.5 text-xs text-center border border-primary-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-primary font-mono"})]})]}),Qa=({isOpen:t,section:r,onClose:s,onSave:l,onDelete:a})=>{const[n,m]=d.useState(""),[c,y]=d.useState(1),[g,u]=d.useState("manual"),[p,v]=d.useState(!1),[N,E]=d.useState(!1);if(d.useEffect(()=>{r&&(m(r.title),y(r.level),u(r.status),v(r.isLocked),E(!1))},[r]),!t||!r)return null;const j=()=>{l(r.id,{title:n,level:c,status:g,isLocked:p}),s()},h=()=>{a(r.id),s()},f=[{value:"manual",label:"Manuel",color:"bg-green-100 text-green-700"},{value:"generated",label:"Généré par IA",color:"bg-purple-100 text-purple-700"},{value:"edited",label:"Modifié",color:"bg-blue-100 text-blue-700"}];return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:s}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-primary-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(ce,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-primary-900",children:"Modifier la section"}),e.jsx("p",{className:"text-xs text-primary-500",children:"Personnalisez les propriétés"})]})]}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-primary-100 rounded-lg transition-colors",children:e.jsx(Oe,{className:"w-5 h-5 text-primary-500"})})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1.5",children:"Titre de la section"}),e.jsx("input",{type:"text",value:n,onChange:w=>m(w.target.value),className:"w-full px-3 py-2 border border-primary-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Titre de la section..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1.5",children:"Niveau hiérarchique"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(w=>e.jsxs("button",{onClick:()=>y(w),className:`flex-1 py-2 px-3 rounded-lg border transition-colors text-sm font-medium ${c===w?"bg-primary text-white border-primary":"bg-white text-primary-600 border-primary-200 hover:bg-primary-50"}`,children:["H",w]},w))}),e.jsx("p",{className:"text-xs text-primary-500 mt-1.5",children:"H1 = Section principale, H4 = Sous-sous-sous-section"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-1.5",children:"Statut"}),e.jsx("div",{className:"flex gap-2",children:f.map(w=>e.jsx("button",{onClick:()=>u(w.value),className:`flex-1 py-2 px-3 rounded-lg border transition-colors text-sm font-medium ${g===w.value?w.color+" border-transparent":"bg-white text-primary-600 border-primary-200 hover:bg-primary-50"}`,children:w.label},w.value))})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[p?e.jsx(kt,{className:"w-5 h-5 text-warning"}):e.jsx(Er,{className:"w-5 h-5 text-primary-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-primary-900",children:p?"Section verrouillée":"Section déverrouillée"}),e.jsx("p",{className:"text-xs text-primary-500",children:p?"Protégée contre les modifications":"Peut être modifiée"})]})]}),e.jsx("button",{onClick:()=>v(!p),className:`relative w-12 h-6 rounded-full transition-colors ${p?"bg-warning":"bg-primary-300"}`,children:e.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${p?"translate-x-7":"translate-x-1"}`})})]}),N?e.jsxs("div",{className:"p-3 bg-error/10 border border-error/20 rounded-lg",children:[e.jsx("p",{className:"text-sm text-error font-medium mb-2",children:"Confirmer la suppression ?"}),e.jsx("p",{className:"text-xs text-primary-600 mb-3",children:"Cette action supprimera la section et tous ses blocs de contenu."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>E(!1),className:"flex-1 py-2 px-3 text-sm font-medium text-primary-600 bg-white border border-primary-200 rounded-lg hover:bg-primary-50",children:"Annuler"}),e.jsx("button",{onClick:h,className:"flex-1 py-2 px-3 text-sm font-medium text-white bg-error rounded-lg hover:bg-error/90",children:"Supprimer"})]})]}):e.jsxs("button",{onClick:()=>E(!0),className:"w-full flex items-center justify-center gap-2 py-2 px-4 text-error hover:bg-error/10 rounded-lg transition-colors",children:[e.jsx($e,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Supprimer cette section"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-primary-200 bg-primary-50 rounded-b-xl",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-primary-600 hover:bg-primary-100 rounded-lg transition-colors",children:"Annuler"}),e.jsx("button",{onClick:j,disabled:!n.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-primary rounded-lg hover:bg-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Enregistrer"})]})]})]})},Ct=[{id:"chart-evolution-noi",name:"Évolution du NOI",description:"Graphique montrant l'évolution du Net Operating Income sur 12 mois",category:"performance",chartType:"line",compatibleReportTypes:["PERF_ACTIF","ANALYSE_PORTEFEUILLE","REPORTING_PROPRIETAIRE","NOI_ANALYSIS","COMPTE_RESULTAT"],dataSource:{type:"kpi",kpiCodes:["NOI"],refreshable:!0},data:{labels:["Jan","Fév","Mar","Avr","Mai","Juin","Juil","Août","Sep","Oct","Nov","Déc"],datasets:[{label:"NOI (k€)",data:[125,128,132,130,135,140,138,142,145,148,150,155],borderColor:"#1C3163",backgroundColor:"rgba(28, 49, 99, 0.1)"}]},config:{title:"Évolution du NOI mensuel",subtitle:"En milliers d'euros",legend:{show:!0,position:"top"},yAxis:{label:"NOI (k€)"}}},{id:"chart-yield-comparison",name:"Comparaison des Yields",description:"Comparaison du yield net vs yield brut par trimestre",category:"performance",chartType:"bar",compatibleReportTypes:["PERF_ACTIF","ANALYSE_PORTEFEUILLE","VALORISATION_DCF","DUE_DILIGENCE","SCENARIOS_ACQUISITION"],dataSource:{type:"kpi",kpiCodes:["YIELD_NET","YIELD_BRUT"],refreshable:!0},data:{labels:["Q1","Q2","Q3","Q4"],datasets:[{label:"Yield Brut",data:[6.2,6.4,6.3,6.5],backgroundColor:"#1C3163"},{label:"Yield Net",data:[5.1,5.3,5.2,5.4],backgroundColor:"#D4AF37"}]},config:{title:"Yield Brut vs Net",legend:{show:!0,position:"top"},yAxis:{label:"Yield (%)"}}},{id:"chart-kpi-gauges",name:"Jauge Taux d'occupation",description:"Indicateur visuel du taux d'occupation",category:"performance",chartType:"gauge",compatibleReportTypes:["PERF_ACTIF","ETAT_LOCATIF_REPORT","REPORTING_PROPRIETAIRE","TDB_CENTRE","SUIVI_VACANCE"],dataSource:{type:"kpi",kpiCodes:["TAUX_OCCUPATION_PHYSIQUE"],refreshable:!0},data:{labels:["Taux d'occupation"],datasets:[{label:"Occupation",data:[94.5],backgroundColor:"#10b981"}]},config:{title:"Taux d'occupation physique",subtitle:"94.5%"}},{id:"chart-revenus-charges",name:"Revenus vs Charges",description:"Évolution mensuelle des revenus et charges",category:"financier",chartType:"area",compatibleReportTypes:["COMPTE_RESULTAT","CF_OPERATIONNEL","NOI_ANALYSIS","BUDGET_VS_REEL","REPORTING_PROPRIETAIRE","GESTION_CHARGES"],dataSource:{type:"kpi",kpiCodes:["LOYER_TOTAL","CHARGES_TOTALES"],refreshable:!0},data:{labels:["Jan","Fév","Mar","Avr","Mai","Juin"],datasets:[{label:"Revenus",data:[180,185,190,188,195,200],backgroundColor:"rgba(16, 185, 129, 0.3)",borderColor:"#10b981"},{label:"Charges",data:[55,52,58,54,56,55],backgroundColor:"rgba(239, 68, 68, 0.3)",borderColor:"#ef4444"}]},config:{title:"Revenus et Charges",legend:{show:!0,position:"top"},yAxis:{label:"Montant (k€)"}}},{id:"chart-repartition-charges",name:"Répartition des Charges",description:"Camembert montrant la ventilation des charges",category:"financier",chartType:"pie",compatibleReportTypes:["GESTION_CHARGES","BUDGET_VS_REEL","REPORTING_PROPRIETAIRE","COMPTE_RESULTAT"],dataSource:{type:"kpi",kpiCodes:["CHARGES_TOTALES"],refreshable:!0},data:{labels:["Maintenance","Énergie","Sécurité","Nettoyage","Assurances","Autres"],datasets:[{label:"Charges",data:[25,30,15,12,8,10],backgroundColor:["#1C3163","#D4AF37","#10b981","#8b5cf6","#f97316","#6b7280"]}]},config:{title:"Ventilation des Charges",legend:{show:!0,position:"right"}}},{id:"chart-budget-reel",name:"Budget vs Réel",description:"Comparaison budget prévisionnel vs réalisé",category:"financier",chartType:"waterfall",compatibleReportTypes:["BUDGET_VS_REEL","GESTION_CHARGES","BUDGET_PROJET","REPORTING_PROJET"],dataSource:{type:"computed",refreshable:!0},data:{labels:["Budget","Écart Revenus","Écart Charges","Écart Travaux","Réel"],datasets:[{label:"Montants",data:[1500,50,-30,-20,1500],backgroundColor:["#1C3163","#10b981","#ef4444","#ef4444","#1C3163"]}]},config:{title:"Budget vs Réel - Analyse des écarts",yAxis:{label:"Montant (k€)"}}},{id:"chart-repartition-activites",name:"Mix Commercial",description:"Répartition par type d'activité",category:"locatif",chartType:"donut",compatibleReportTypes:["MERCHANDISING_MIX","ETAT_LOCATIF_REPORT","PIPELINE_COMMERCIAL","COMMERCIALISATION_PROJET","DUE_DILIGENCE"],dataSource:{type:"entity",entityType:"locataire",refreshable:!0},data:{labels:["Mode","Restauration","Services","Loisirs","Alimentaire"],datasets:[{label:"Surface",data:[35,25,15,15,10],backgroundColor:["#1C3163","#D4AF37","#10b981","#8b5cf6","#f97316"]}]},config:{title:"Mix Commercial par Activité",subtitle:"Répartition en surface (m²)",legend:{show:!0,position:"right"}}},{id:"chart-wault-evolution",name:"Évolution WAULT",description:"Suivi de la durée moyenne des baux",category:"locatif",chartType:"line",compatibleReportTypes:["SUIVI_BAUX","PERF_ACTIF","REPORTING_PROPRIETAIRE","DUE_DILIGENCE","ANALYSE_PORTEFEUILLE"],dataSource:{type:"kpi",kpiCodes:["WAULT"],refreshable:!0},data:{labels:["2020","2021","2022","2023","2024"],datasets:[{label:"WAULT (années)",data:[4.2,4,3.8,4.1,4.5],borderColor:"#1C3163",backgroundColor:"rgba(28, 49, 99, 0.1)"}]},config:{title:"Évolution du WAULT",yAxis:{label:"Années"}}},{id:"chart-loyers-activite",name:"Loyers par Activité",description:"Loyer moyen au m² par type d'activité",category:"locatif",chartType:"bar",compatibleReportTypes:["BENCHMARK_LOYERS","MERCHANDISING_MIX","ETAT_LOCATIF_REPORT","DUE_DILIGENCE","ANALYSE_CONCURRENTIELLE"],dataSource:{type:"kpi",kpiCodes:["LOYER_MOYEN_M2"],refreshable:!0},data:{labels:["Mode","Restauration","Services","Loisirs","Alimentaire"],datasets:[{label:"Loyer €/m²",data:[450,380,320,280,250],backgroundColor:"#D4AF37"}]},config:{title:"Loyer moyen par type d'activité",subtitle:"En €/m²/an",yAxis:{label:"€/m²/an"}}},{id:"chart-frequentation-mensuelle",name:"Fréquentation Mensuelle",description:"Nombre de visiteurs par mois",category:"frequentation",chartType:"bar",compatibleReportTypes:["TDB_CENTRE","ANALYSE_FREQUENTATION","ETUDE_MARCHE","REPORTING_PROJET","ANALYSE_CONCURRENTIELLE"],dataSource:{type:"kpi",kpiCodes:["FREQUENTATION_TOTALE"],refreshable:!0},data:{labels:["Jan","Fév","Mar","Avr","Mai","Juin","Juil","Août","Sep","Oct","Nov","Déc"],datasets:[{label:"Visiteurs (milliers)",data:[320,290,340,360,380,350,310,280,390,410,450,520],backgroundColor:"#8b5cf6"}]},config:{title:"Fréquentation mensuelle",subtitle:"En milliers de visiteurs",yAxis:{label:"Visiteurs (k)"}}},{id:"chart-frequentation-journaliere",name:"Fréquentation par Jour",description:"Répartition hebdomadaire moyenne",category:"frequentation",chartType:"radar",compatibleReportTypes:["ANALYSE_FREQUENTATION","TDB_CENTRE"],dataSource:{type:"kpi",kpiCodes:["FREQUENTATION_JOUR_MOYEN"],refreshable:!0},data:{labels:["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],datasets:[{label:"Visiteurs",data:[8500,9200,10500,9800,12e3,18500,15e3],backgroundColor:"rgba(139, 92, 246, 0.3)",borderColor:"#8b5cf6"}]},config:{title:"Répartition hebdomadaire"}},{id:"chart-ca-evolution",name:"Évolution CA",description:"Chiffre d'affaires mensuel cumulé",category:"commercial",chartType:"area",compatibleReportTypes:["ANALYSE_CA","PERF_ENSEIGNES","TDB_CENTRE","REPORTING_PROPRIETAIRE"],dataSource:{type:"kpi",kpiCodes:["CA_TOTAL"],refreshable:!0},data:{labels:["Jan","Fév","Mar","Avr","Mai","Juin"],datasets:[{label:"CA N",data:[2.1,4.3,6.8,9.2,11.8,14.5],backgroundColor:"rgba(28, 49, 99, 0.3)",borderColor:"#1C3163"},{label:"CA N-1",data:[2,4.1,6.5,8.8,11.2,13.8],backgroundColor:"rgba(212, 175, 55, 0.3)",borderColor:"#D4AF37"}]},config:{title:"CA Cumulé N vs N-1",subtitle:"En millions d'euros",legend:{show:!0,position:"top"},yAxis:{label:"CA (M€)"}}},{id:"chart-top-enseignes",name:"Top 10 Enseignes",description:"Classement des enseignes par CA",category:"commercial",chartType:"bar",compatibleReportTypes:["PERF_ENSEIGNES","ANALYSE_CA","TDB_CENTRE","MERCHANDISING_MIX"],dataSource:{type:"entity",entityType:"locataire",refreshable:!0},data:{labels:["Enseigne A","Enseigne B","Enseigne C","Enseigne D","Enseigne E","Enseigne F","Enseigne G","Enseigne H","Enseigne I","Enseigne J"],datasets:[{label:"CA (k€)",data:[850,720,680,590,520,480,420,380,350,320],backgroundColor:"#10b981"}]},config:{title:"Top 10 Enseignes par CA",yAxis:{label:"CA (k€)"}}}],Et=[{id:"table-etat-locatif",name:"État Locatif Synthétique",description:"Résumé des principaux locataires",category:"locatif",compatibleReportTypes:["ETAT_LOCATIF_REPORT","REPORTING_PROPRIETAIRE","DUE_DILIGENCE","PERF_ACTIF","ANALYSE_PORTEFEUILLE"],dataSource:{type:"entity",entityType:"bail",refreshable:!0},headers:[{key:"locataire",label:"Locataire",align:"left"},{key:"local",label:"Local",align:"left"},{key:"surface",label:"Surface (m²)",align:"right",format:"number"},{key:"loyer",label:"Loyer annuel",align:"right",format:"currency"},{key:"echeance",label:"Échéance bail",align:"center",format:"date"}],rows:[{locataire:{value:"Carrefour"},local:{value:"N001"},surface:{value:2500,formatted:"2 500"},loyer:{value:875e3,formatted:"875 000 €"},echeance:{value:"2027-12-31",formatted:"31/12/2027"}},{locataire:{value:"H&M"},local:{value:"N102"},surface:{value:850,formatted:"850"},loyer:{value:34e4,formatted:"340 000 €"},echeance:{value:"2026-06-30",formatted:"30/06/2026"}},{locataire:{value:"Zara"},local:{value:"N104"},surface:{value:720,formatted:"720"},loyer:{value:324e3,formatted:"324 000 €"},echeance:{value:"2025-09-15",formatted:"15/09/2025"}},{locataire:{value:"Sephora"},local:{value:"N201"},surface:{value:280,formatted:"280"},loyer:{value:168e3,formatted:"168 000 €"},echeance:{value:"2028-03-01",formatted:"01/03/2028"}},{locataire:{value:"McDonald's"},local:{value:"R001"},surface:{value:420,formatted:"420"},loyer:{value:189e3,formatted:"189 000 €"},echeance:{value:"2029-12-31",formatted:"31/12/2029"}}],config:{striped:!0,bordered:!0}},{id:"table-vacance",name:"Lots Vacants",description:"Liste des lots vacants disponibles",category:"locatif",compatibleReportTypes:["SUIVI_VACANCE","ETAT_LOCATIF_REPORT","PIPELINE_COMMERCIAL","COMMERCIALISATION_PROJET"],dataSource:{type:"entity",entityType:"lot",refreshable:!0},headers:[{key:"local",label:"Local",align:"left"},{key:"surface",label:"Surface (m²)",align:"right",format:"number"},{key:"etage",label:"Étage",align:"center"},{key:"vacantDepuis",label:"Vacant depuis",align:"center",format:"date"},{key:"loyerCible",label:"Loyer cible",align:"right",format:"currency"}],rows:[{local:{value:"N205"},surface:{value:150,formatted:"150"},etage:{value:"2"},vacantDepuis:{value:"2024-01-15",formatted:"15/01/2024"},loyerCible:{value:67500,formatted:"67 500 €"}},{local:{value:"N308"},surface:{value:85,formatted:"85"},etage:{value:"3"},vacantDepuis:{value:"2023-11-01",formatted:"01/11/2023"},loyerCible:{value:34e3,formatted:"34 000 €"}}],config:{striped:!0,bordered:!0,compact:!0}},{id:"table-echeances-baux",name:"Échéances des Baux",description:"Baux arrivant à échéance dans les 12 prochains mois",category:"baux",compatibleReportTypes:["SUIVI_BAUX","REPORTING_PROPRIETAIRE","DUE_DILIGENCE","PERF_ACTIF"],dataSource:{type:"entity",entityType:"bail",refreshable:!0},headers:[{key:"locataire",label:"Locataire",align:"left"},{key:"surface",label:"Surface",align:"right",format:"number"},{key:"loyer",label:"Loyer actuel",align:"right",format:"currency"},{key:"echeance",label:"Échéance",align:"center",format:"date"},{key:"option",label:"Option",align:"center"}],rows:[{locataire:{value:"Zara"},surface:{value:720,formatted:"720 m²"},loyer:{value:324e3,formatted:"324 000 €"},echeance:{value:"2025-09-15",formatted:"15/09/2025"},option:{value:"Break"}},{locataire:{value:"FNAC"},surface:{value:1200,formatted:"1 200 m²"},loyer:{value:42e4,formatted:"420 000 €"},echeance:{value:"2025-06-30",formatted:"30/06/2025"},option:{value:"Fin"}},{locataire:{value:"Orange"},surface:{value:95,formatted:"95 m²"},loyer:{value:47500,formatted:"47 500 €"},echeance:{value:"2025-12-31",formatted:"31/12/2025"},option:{value:"Break"}}],config:{striped:!0,bordered:!0}},{id:"table-compte-resultat",name:"Compte de Résultat Simplifié",description:"P&L synthétique de l'actif",category:"financier",compatibleReportTypes:["COMPTE_RESULTAT","NOI_ANALYSIS","REPORTING_PROPRIETAIRE","BUDGET_VS_REEL","DUE_DILIGENCE"],dataSource:{type:"computed",refreshable:!0},headers:[{key:"poste",label:"Poste",align:"left"},{key:"budget",label:"Budget",align:"right",format:"currency"},{key:"reel",label:"Réel",align:"right",format:"currency"},{key:"ecart",label:"Écart",align:"right",format:"percentage"}],rows:[{poste:{value:"Loyers"},budget:{value:24e5,formatted:"2 400 000 €"},reel:{value:245e4,formatted:"2 450 000 €"},ecart:{value:2.1,formatted:"+2.1%"}},{poste:{value:"Charges refacturées"},budget:{value:18e4,formatted:"180 000 €"},reel:{value:175e3,formatted:"175 000 €"},ecart:{value:-2.8,formatted:"-2.8%"}},{poste:{value:"Autres revenus"},budget:{value:5e4,formatted:"50 000 €"},reel:{value:55e3,formatted:"55 000 €"},ecart:{value:10,formatted:"+10.0%"}},{poste:{value:"Total Revenus",style:{fontWeight:"bold"}},budget:{value:263e4,formatted:"2 630 000 €"},reel:{value:268e4,formatted:"2 680 000 €"},ecart:{value:1.9,formatted:"+1.9%"}},{poste:{value:"Charges exploitation"},budget:{value:-62e4,formatted:"-620 000 €"},reel:{value:-6e5,formatted:"-600 000 €"},ecart:{value:3.2,formatted:"+3.2%"}},{poste:{value:"NOI",style:{fontWeight:"bold"}},budget:{value:201e4,formatted:"2 010 000 €"},reel:{value:208e4,formatted:"2 080 000 €"},ecart:{value:3.5,formatted:"+3.5%"}}],config:{bordered:!0}},{id:"table-kpis-synthese",name:"Synthèse KPIs",description:"Tableau récapitulatif des indicateurs clés",category:"kpis",compatibleReportTypes:["PERF_ACTIF","TDB_CENTRE","REPORTING_PROPRIETAIRE","ANALYSE_PORTEFEUILLE","DUE_DILIGENCE","DASHBOARD_PROJET"],dataSource:{type:"kpi",kpiCodes:["TAUX_OCCUPATION_PHYSIQUE","WAULT","YIELD_NET","NOI","TAUX_RECOUVREMENT"],refreshable:!0},headers:[{key:"indicateur",label:"Indicateur",align:"left"},{key:"valeur",label:"Valeur",align:"right"},{key:"evolution",label:"vs N-1",align:"right",format:"percentage"},{key:"cible",label:"Cible",align:"right"}],rows:[{indicateur:{value:"Taux d'occupation physique"},valeur:{value:"94.5%"},evolution:{value:1.2,formatted:"+1.2%"},cible:{value:"95%"}},{indicateur:{value:"Taux d'occupation financier"},valeur:{value:"96.2%"},evolution:{value:.8,formatted:"+0.8%"},cible:{value:"97%"}},{indicateur:{value:"WAULT (années)"},valeur:{value:"4.5"},evolution:{value:.3,formatted:"+0.3"},cible:{value:"4.0"}},{indicateur:{value:"Yield Net"},valeur:{value:"5.4%"},evolution:{value:.2,formatted:"+0.2%"},cible:{value:"5.5%"}},{indicateur:{value:"NOI (M€)"},valeur:{value:"2.08"},evolution:{value:3.5,formatted:"+3.5%"},cible:{value:"2.01"}},{indicateur:{value:"Taux de recouvrement"},valeur:{value:"98.5%"},evolution:{value:-.5,formatted:"-0.5%"},cible:{value:"99%"}}],config:{striped:!0,bordered:!0}},{id:"table-budget-detail",name:"Budget Détaillé",description:"Suivi budgétaire par poste",category:"budget",compatibleReportTypes:["BUDGET_VS_REEL","GESTION_CHARGES","BUDGET_PROJET","REPORTING_PROJET"],dataSource:{type:"computed",refreshable:!0},headers:[{key:"poste",label:"Poste de charge",align:"left"},{key:"budget",label:"Budget",align:"right",format:"currency"},{key:"engage",label:"Engagé",align:"right",format:"currency"},{key:"realise",label:"Réalisé",align:"right",format:"currency"},{key:"reste",label:"RAF",align:"right",format:"currency"}],rows:[{poste:{value:"Maintenance technique"},budget:{value:15e4,formatted:"150 000 €"},engage:{value:12e4,formatted:"120 000 €"},realise:{value:85e3,formatted:"85 000 €"},reste:{value:65e3,formatted:"65 000 €"}},{poste:{value:"Énergie"},budget:{value:18e4,formatted:"180 000 €"},engage:{value:18e4,formatted:"180 000 €"},realise:{value:95e3,formatted:"95 000 €"},reste:{value:85e3,formatted:"85 000 €"}},{poste:{value:"Sécurité"},budget:{value:9e4,formatted:"90 000 €"},engage:{value:9e4,formatted:"90 000 €"},realise:{value:45e3,formatted:"45 000 €"},reste:{value:45e3,formatted:"45 000 €"}},{poste:{value:"Nettoyage"},budget:{value:72e3,formatted:"72 000 €"},engage:{value:72e3,formatted:"72 000 €"},realise:{value:36e3,formatted:"36 000 €"},reste:{value:36e3,formatted:"36 000 €"}},{poste:{value:"Assurances"},budget:{value:48e3,formatted:"48 000 €"},engage:{value:48e3,formatted:"48 000 €"},realise:{value:48e3,formatted:"48 000 €"},reste:{value:0,formatted:"0 €"}}],config:{striped:!0,bordered:!0}}],je=[{id:"performance",label:"Performance",color:"#1C3163"},{id:"financier",label:"Financier",color:"#ec4899"},{id:"locatif",label:"Locatif",color:"#10b981"},{id:"frequentation",label:"Fréquentation",color:"#8b5cf6"},{id:"commercial",label:"Commercial",color:"#f97316"}],Se=[{id:"locatif",label:"État Locatif",color:"#10b981"},{id:"baux",label:"Baux",color:"#D4AF37"},{id:"financier",label:"Financier",color:"#ec4899"},{id:"kpis",label:"KPIs",color:"#1C3163"},{id:"budget",label:"Budget",color:"#f97316"}];function Ja(t){return!t||t.length===0?Ct:Ct.filter(r=>r.compatibleReportTypes.some(s=>t.includes(s)))}function Za(t){return!t||t.length===0?Et:Et.filter(r=>r.compatibleReportTypes.some(s=>t.includes(s)))}const Xa=({isOpen:t,reportTypes:r,onClose:s,onSelectChart:l,onSelectTable:a})=>{const[n,m]=d.useState("charts"),[c,y]=d.useState(""),[g,u]=d.useState("all"),[p,v]=d.useState(null),[N,E]=d.useState(!1),j=n==="charts"?je:Se,h=d.useMemo(()=>!r||r.length===0||N?Ct:Ja(r),[r,N]),f=d.useMemo(()=>!r||r.length===0||N?Et:Za(r),[r,N]),w=d.useMemo(()=>h.filter(C=>{const O=c===""||C.name.toLowerCase().includes(c.toLowerCase())||C.description.toLowerCase().includes(c.toLowerCase()),k=g==="all"||C.category===g;return O&&k}),[h,c,g]),b=d.useMemo(()=>f.filter(C=>{const O=c===""||C.name.toLowerCase().includes(c.toLowerCase())||C.description.toLowerCase().includes(c.toLowerCase()),k=g==="all"||C.category===g;return O&&k}),[f,c,g]),S=C=>{switch(C){case"line":return e.jsx(st,{className:"w-5 h-5"});case"bar":return e.jsx(Ne,{className:"w-5 h-5"});case"pie":case"donut":return e.jsx(rt,{className:"w-5 h-5"});case"area":return e.jsx(He,{className:"w-5 h-5"});default:return e.jsx(oe,{className:"w-5 h-5"})}},A=C=>{l(C),s()},D=C=>{a(C),s()};return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:s}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-4xl mx-4 max-h-[85vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-primary-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-primary-900",children:"Bibliothèque de données"}),e.jsx("p",{className:"text-sm text-primary-500",children:"Sélectionnez un graphique ou tableau pré-configuré"})]}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-primary-100 rounded-lg transition-colors",children:e.jsx(Oe,{className:"w-5 h-5 text-primary-500"})})]}),e.jsxs("div",{className:"flex items-center justify-between px-6 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("button",{onClick:()=>{m("charts"),u("all")},className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-colors ${n==="charts"?"bg-primary text-white":"text-primary-600 hover:bg-primary-50"}`,children:[e.jsx(Ne,{className:"w-4 h-4"}),"Graphiques (",h.length,")"]}),e.jsxs("button",{onClick:()=>{m("tables"),u("all")},className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-colors ${n==="tables"?"bg-primary text-white":"text-primary-600 hover:bg-primary-50"}`,children:[e.jsx(Ue,{className:"w-4 h-4"}),"Tableaux (",f.length,")"]})]}),r&&r.length>0&&e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N,onChange:C=>E(C.target.checked),className:"h-4 w-4 rounded border-primary-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm text-primary-600",children:"Afficher tous"})]})]}),r&&r.length>0&&!N&&e.jsx("div",{className:"mx-6 mt-2 px-3 py-2 bg-accent/10 rounded-lg flex items-center gap-2",children:e.jsxs("span",{className:"text-xs text-accent",children:["Filtré pour ",r.length," type(s) de rapport"]})}),e.jsxs("div",{className:"px-6 py-4 flex items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-primary-400"}),e.jsx("input",{type:"text",placeholder:"Rechercher...",value:c,onChange:C=>y(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-primary-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>u("all"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${g==="all"?"bg-primary-100 text-primary-700":"text-primary-500 hover:bg-primary-50"}`,children:"Tous"}),j.map(C=>e.jsx("button",{onClick:()=>u(C.id),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${g===C.id?"text-white":"text-primary-600 hover:bg-primary-50"}`,style:g===C.id?{backgroundColor:C.color}:void 0,children:C.label},C.id))]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-6",children:n==="charts"?e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.map(C=>{var O,k,W,H,Q,B;return e.jsxs("button",{onClick:()=>A(C),onMouseEnter:()=>v(C.id),onMouseLeave:()=>v(null),className:`p-4 border rounded-xl text-left transition-all ${p===C.id?"border-primary shadow-lg scale-[1.02]":"border-primary-200 hover:border-primary-300"}`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center",style:{backgroundColor:`${(O=je.find(U=>U.id===C.category))==null?void 0:O.color}20`,color:(k=je.find(U=>U.id===C.category))==null?void 0:k.color},children:S(C.chartType)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-primary-900 truncate",children:C.name}),e.jsx("p",{className:"text-xs text-primary-500 mt-0.5 line-clamp-2",children:C.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium",style:{backgroundColor:`${(W=je.find(U=>U.id===C.category))==null?void 0:W.color}20`,color:(H=je.find(U=>U.id===C.category))==null?void 0:H.color},children:(Q=je.find(U=>U.id===C.category))==null?void 0:Q.label}),e.jsx("span",{className:"text-xs text-primary-400",children:C.chartType})]})]})]}),e.jsx("div",{className:"mt-3 h-16 bg-primary-50 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"flex items-end gap-1 h-10",children:(B=C.data.datasets[0])==null?void 0:B.data.slice(0,8).map((U,Y)=>{var X;return e.jsx("div",{className:"w-3 rounded-t",style:{height:`${U/Math.max(...C.data.datasets[0].data)*100}%`,backgroundColor:((X=je.find(M=>M.id===C.category))==null?void 0:X.color)||"#1C3163",opacity:.7}},Y)})})})]},C.id)}),w.length===0&&e.jsx("div",{className:"col-span-2 py-12 text-center text-primary-500",children:"Aucun graphique trouvé"})]}):e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[b.map(C=>{var O,k,W,H,Q;return e.jsxs("button",{onClick:()=>D(C),onMouseEnter:()=>v(C.id),onMouseLeave:()=>v(null),className:`p-4 border rounded-xl text-left transition-all ${p===C.id?"border-primary shadow-lg":"border-primary-200 hover:border-primary-300"}`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center",style:{backgroundColor:`${(O=Se.find(B=>B.id===C.category))==null?void 0:O.color}20`,color:(k=Se.find(B=>B.id===C.category))==null?void 0:k.color},children:e.jsx(Ue,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-primary-900",children:C.name}),e.jsx("p",{className:"text-xs text-primary-500 mt-0.5",children:C.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium",style:{backgroundColor:`${(W=Se.find(B=>B.id===C.category))==null?void 0:W.color}20`,color:(H=Se.find(B=>B.id===C.category))==null?void 0:H.color},children:(Q=Se.find(B=>B.id===C.category))==null?void 0:Q.label}),e.jsxs("span",{className:"text-xs text-primary-400",children:[C.headers.length," colonnes · ",C.rows.length," lignes"]})]})]})]}),e.jsx("div",{className:"mt-3 overflow-hidden rounded-lg border border-primary-100",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primary-50",children:[C.headers.slice(0,4).map(B=>e.jsx("th",{className:"px-2 py-1.5 text-left font-medium text-primary-700",children:B.label},B.key)),C.headers.length>4&&e.jsx("th",{className:"px-2 py-1.5 text-primary-400",children:"..."})]})}),e.jsx("tbody",{children:C.rows.slice(0,2).map((B,U)=>e.jsxs("tr",{className:"border-t border-primary-100",children:[C.headers.slice(0,4).map(Y=>{var X,M;return e.jsx("td",{className:"px-2 py-1 text-primary-600",children:((X=B[Y.key])==null?void 0:X.formatted)||String(((M=B[Y.key])==null?void 0:M.value)||"")},Y.key)}),C.headers.length>4&&e.jsx("td",{className:"px-2 py-1 text-primary-400",children:"..."})]},U))})]})})]},C.id)}),b.length===0&&e.jsx("div",{className:"py-12 text-center text-primary-500",children:"Aucun tableau trouvé"})]})}),e.jsx("div",{className:"px-6 py-4 border-t border-primary-200 bg-primary-50 rounded-b-xl",children:e.jsx("p",{className:"text-xs text-primary-500 text-center",children:"Cliquez sur un élément pour l'insérer dans votre rapport. Les données sont des exemples et peuvent être personnalisées."})})]})]}):null},ei=({className:t})=>{const[r,s]=d.useState(!1),[l,a]=d.useState(!1),[n,m]=d.useState(!1),[c,y]=d.useState(!1),[g,u]=d.useState(!1),[p,v]=d.useState(null),[N,E]=d.useState(null),{report:j,content:h,editor:f,ui:w,selectSection:b,selectBlock:S,setEditing:A,reorderSections:D,addSection:C,updateSection:O,deleteSection:k,addBlock:W,updateBlock:H,deleteBlock:Q,moveBlock:B,duplicateBlock:U,setSaving:Y,markAsSaved:X,toggleSidebar:M,toggleAIPanel:ie,setZoomLevel:de,undo:ne,redo:ae,canUndo:se,canRedo:o,createBlock:x,updateDesignSettings:R}=ze(),V=d.useCallback(T=>{b(T);const L=document.getElementById(`section-${T}`);L==null||L.scrollIntoView({behavior:"smooth",block:"start"})},[b]),F=d.useCallback(T=>{const L=h.sections,P=T.find((Z,me)=>{var ue;return((ue=L[me])==null?void 0:ue.id)!==Z.id});if(P){const Z=L.findIndex(ue=>ue.id===P.id),me=T.findIndex(ue=>ue.id===P.id);Z!==-1&&me!==-1&&D(Z,me)}},[h.sections,D]),K=d.useCallback(T=>{const L={id:`section-${Date.now()}`,type:"section",title:"Nouvelle section",level:1,status:"manual",isLocked:!1,isCollapsed:!1,children:[],blocks:[{id:`block-${Date.now()}`,type:"paragraph",content:"Contenu de la nouvelle section..."}]};C(L,T)},[C]),le=d.useCallback(T=>{E(T),y(!0)},[]),Ce=d.useCallback((T,L)=>{O(T,L)},[O]),Ye=d.useCallback(T=>{k(T),f.selectedSectionId===T&&b(null)},[k,f.selectedSectionId,b]),dt=N&&h.sections.find(T=>T.id===N)||null,Ke=d.useCallback(()=>{u(!0)},[]),mt=d.useCallback(T=>{var Z;!f.selectedSectionId&&h.sections.length>0&&b(h.sections[0].id);const L=f.selectedSectionId||((Z=h.sections[0])==null?void 0:Z.id);if(!L)return;const P={id:`block-${Date.now()}`,type:"chart",chartType:T.chartType,data:T.data,config:T.config};W(L,P),S(P.id)},[f.selectedSectionId,h.sections,W,S,b]),ut=d.useCallback(T=>{var Z;!f.selectedSectionId&&h.sections.length>0&&b(h.sections[0].id);const L=f.selectedSectionId||((Z=h.sections[0])==null?void 0:Z.id);if(!L)return;const P={id:`block-${Date.now()}`,type:"table",headers:T.headers,rows:T.rows,config:T.config};W(L,P),S(P.id)},[f.selectedSectionId,h.sections,W,S,b]),pt=d.useCallback((T,L)=>{var me;!f.selectedSectionId&&h.sections.length>0&&b(h.sections[0].id);const P=f.selectedSectionId||((me=h.sections[0])==null?void 0:me.id);if(!P)return;const Z=x(T);W(P,Z,L),S(Z.id),T==="chart"&&(v(Z.id),a(!0))},[f.selectedSectionId,h.sections,x,W,S,b]),Qe=d.useCallback((T,L)=>{const P=h.sections.find(Z=>{var me;return Z.blocks.some(ue=>ue.id===T)||((me=Z.children)==null?void 0:me.some(ue=>{var Dt;return(Dt=ue.blocks)==null?void 0:Dt.some(fs=>fs.id===T)}))});P&&H(P.id,T,L)},[h.sections,H]),_e=d.useCallback(T=>{S(T)},[S]),i=d.useCallback(()=>{if(!f.selectedBlockId)return;const T=h.sections.find(L=>L.blocks.some(P=>P.id===f.selectedBlockId));T&&(Q(T.id,f.selectedBlockId),S(null))},[f.selectedBlockId,h.sections,Q,S]),I=d.useCallback(()=>{if(!f.selectedBlockId)return;const T=h.sections.find(L=>L.blocks.some(P=>P.id===f.selectedBlockId));T&&U(T.id,f.selectedBlockId)},[f.selectedBlockId,h.sections,U]),J=d.useCallback(()=>{if(!f.selectedBlockId)return;const T=h.sections.find(L=>L.blocks.some(P=>P.id===f.selectedBlockId));if(T){const L=T.blocks.findIndex(P=>P.id===f.selectedBlockId);L>0&&B(T.id,f.selectedBlockId,T.id,L-1)}},[f.selectedBlockId,h.sections,B]),te=d.useCallback(()=>{if(!f.selectedBlockId)return;const T=h.sections.find(L=>L.blocks.some(P=>P.id===f.selectedBlockId));if(T){const L=T.blocks.findIndex(P=>P.id===f.selectedBlockId);L<T.blocks.length-1&&B(T.id,f.selectedBlockId,T.id,L+1)}},[f.selectedBlockId,h.sections,B]),ee=d.useCallback(async()=>{if(!(!j||!h)){Y(!0);try{await new Promise(T=>setTimeout(T,1e3)),X()}catch{}finally{Y(!1)}}},[j,h,Y,X]),re=d.useCallback(T=>{s(!0)},[]),Ee=d.useCallback(()=>{m(!0)},[]),Je=d.useCallback(T=>{R(T)},[R]),xs=d.useCallback(async(T,L)=>{if(!j)return;const P=await Tr(j,h,T,L);P.success&&P.blob&&P.filename?(Sr(P.blob,P.filename),s(!1)):alert(`Erreur lors de l'export: ${P.error||"Erreur inconnue"}`)},[j,h]),hs=d.useCallback(T=>{de(T)},[de]),ys=d.useCallback(()=>{A(!f.isEditing)},[f.isEditing,A]),gs=d.useCallback(T=>{if(p){const L=h.sections.find(P=>P.blocks.some(Z=>Z.id===p));L&&H(L.id,p,{chartType:T.chartType,data:{labels:T.data.map(P=>P.label),datasets:[{label:T.title,data:T.data.map(P=>P.value),backgroundColor:"#1C3163"}]},config:{title:T.title,...T.config}})}a(!1),v(null)},[p,h.sections,H]);return d.useEffect(()=>{const T=L=>{if(L.ctrlKey||L.metaKey)switch(L.key){case"s":L.preventDefault(),ee();break;case"z":L.preventDefault(),se()&&ne();break;case"y":L.preventDefault(),o()&&ae();break;case"d":L.preventDefault(),I();break}L.key==="Delete"&&f.selectedBlockId&&i(),L.key==="Escape"&&_e(null)};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[ee,_e,i,I,ne,ae,se,o,f.selectedBlockId]),j?e.jsxs("div",{className:`flex flex-col h-screen bg-gray-100 ${t||""}`,children:[e.jsx(xa,{report:j,mode:f.isEditing?"edit":"view",hasUnsavedChanges:w.hasUnsavedChanges,isSaving:w.isSaving,zoom:f.zoomLevel,onSave:ee,onExport:re,onZoomChange:hs,onModeToggle:ys,onDesignSettings:Ee}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx(ha,{sections:h.sections,selectedSectionId:f.selectedSectionId,collapsed:w.sidebarCollapsed,onSectionClick:V,onSectionEdit:le,onReorder:F,onAddSection:K,onCollapse:M}),e.jsx(Ra,{content:{contentTree:h},mode:f.isEditing?"edit":"view",zoom:f.zoomLevel,viewMode:"continuous",selectedBlockId:f.selectedBlockId,onContentChange:Qe,onBlockSelect:_e,children:f.isEditing&&e.jsx(_a,{visible:!0,selectedBlockId:f.selectedBlockId,onInsert:pt,onOpenLibrary:Ke,onDelete:i,onDuplicate:I,onMoveUp:J,onMoveDown:te})}),e.jsx(Ta,{report:j,selectedBlockId:f.selectedBlockId,collapsed:w.aiPanelCollapsed,onCollapse:ie})]}),e.jsx(Fa,{isOpen:r,reportTitle:j.title,onClose:()=>s(!1),onExport:xs}),e.jsx(Ma,{isOpen:l,onClose:()=>{a(!1),v(null)},onSave:gs}),e.jsx(Ua,{isOpen:n,settings:j.designSettings,onClose:()=>m(!1),onSave:Je}),e.jsx(Qa,{isOpen:c,section:dt,onClose:()=>{y(!1),E(null)},onSave:Ce,onDelete:Ye}),e.jsx(Xa,{isOpen:g,reportTypes:j.type?j.type.split(","):[],onClose:()=>u(!1),onSelectChart:mt,onSelectTable:ut})]}):e.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Chargement du rapport..."})]})})},ti={draft:"bg-primary-100 text-primary-700",generating:"bg-info/10 text-info",review:"bg-warning/10 text-warning",approved:"bg-info/10 text-info",published:"bg-success/10 text-success",archived:"bg-primary-200 text-primary-500"},Kt={draft:"Brouillon",generating:"En génération",review:"En révision",approved:"Approuvé",published:"Publié",archived:"Archivé"},si=[{id:"1",centreId:"centre-1",title:"Rapport mensuel Janvier 2024",description:"Rapport de performance du mois de janvier",type:"rapport_mensuel_am",status:"draft",author:"John Doe",periodStart:"2024-01-01",periodEnd:"2024-01-31",periodLabel:"Janvier 2024",contentTree:{sections:[{id:"section-1",type:"section",title:"Résumé exécutif",level:1,status:"generated",isLocked:!1,blocks:[{id:"block-1",type:"paragraph",content:"Ce rapport présente une analyse complète des performances du centre pour le mois de janvier 2024. Les indicateurs clés montrent une progression significative par rapport au mois précédent."}],children:[]},{id:"section-2",type:"section",title:"Analyse des performances",level:1,status:"manual",isLocked:!1,blocks:[{id:"block-2",type:"heading",content:"Indicateurs clés",level:2},{id:"block-3",type:"kpi_card",label:"Chiffre d'affaires",value:125e3,unit:"€",change:12.5,changeType:"positive",sparkline:[100,110,105,120,118,125]},{id:"block-4",type:"chart",chartType:"bar",data:{labels:["Semaine 1","Semaine 2","Semaine 3","Semaine 4"],datasets:[{label:"Ventes",data:[28e3,32e3,3e4,35e3],backgroundColor:"#1C3163"}]},config:{title:"Évolution des ventes par semaine",legend:{show:!0,position:"top"}}}],children:[]}]},version:1,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-20T14:30:00Z"},{id:"2",centreId:"centre-1",title:"Rapport trimestriel Q4 2023",type:"rapport_trimestriel",status:"published",author:"Jane Smith",periodStart:"2023-10-01",periodEnd:"2023-12-31",periodLabel:"Q4 2023",contentTree:{sections:[]},version:3,createdAt:"2024-01-05T09:00:00Z",updatedAt:"2024-01-10T16:00:00Z",publishedAt:"2024-01-10T16:00:00Z"}];function yi(){const{centreId:t}=nt(),r=lt(x=>x.getCentre(t||"")),{addToast:s}=ot(),{report:l,setReport:a,setContent:n,clearReport:m}=ze(),[c,y]=d.useState(si),[g,u]=d.useState(!1),[p,v]=d.useState("all"),[N,E]=d.useState(""),[j,h]=d.useState(!1),[f,w]=d.useState(!1),[b,S]=d.useState(null),[A,D]=d.useState({titre:"",typesRapport:[],periodStart:"",periodEnd:"",periodType:"month",saveAsTemplate:!1,templateName:"",fromTemplate:null}),[C,O]=d.useState([{id:"tpl-mensuel-standard",name:"Rapport Mensuel Standard",description:"Template pour le reporting mensuel avec KPIs et graphiques",types:["PERF_ACTIF","TDB_CENTRE"],category:"mensuel",isDefault:!0,author:"Système",createdAt:"2024-01-01",updatedAt:"2024-01-01",usageCount:15,contentTree:{sections:[]},dataConfig:{requiredDataSources:["kpis","frequentation"],refreshOnOpen:!0,defaultPeriodType:"month"}},{id:"tpl-trimestriel-investisseur",name:"Rapport Trimestriel Investisseur",description:"Rapport complet pour les investisseurs",types:["ANALYSE_PORTEFEUILLE","NOI_ANALYSIS","VALORISATION_DCF"],category:"trimestriel",isDefault:!1,author:"User",createdAt:"2024-02-15",updatedAt:"2024-02-15",usageCount:5,contentTree:{sections:[]},dataConfig:{requiredDataSources:["kpis","financier","valorisation"],refreshOnOpen:!0,defaultPeriodType:"quarter"}}]),[k,W]=d.useState("new"),H=()=>{if(!A.periodStart||!A.periodEnd)return"";const x=new Date(A.periodStart),R=new Date(A.periodEnd),V={month:"long",year:"numeric"};return A.periodType==="month"?x.toLocaleDateString("fr-FR",V):A.periodType==="quarter"?`T${Math.ceil((x.getMonth()+1)/3)} ${x.getFullYear()}`:A.periodType==="year"?`Année ${x.getFullYear()}`:`${x.toLocaleDateString("fr-FR")} - ${R.toLocaleDateString("fr-FR")}`},Q=x=>{const R=new Date;let V,F;if(x==="month")V=new Date(R.getFullYear(),R.getMonth()-1,1),F=new Date(R.getFullYear(),R.getMonth(),0);else if(x==="quarter"){const K=Math.ceil((R.getMonth()+1)/3),le=K===1?4:K-1,Ce=K===1?R.getFullYear()-1:R.getFullYear();V=new Date(Ce,(le-1)*3,1),F=new Date(Ce,le*3,0)}else V=new Date(R.getFullYear()-1,0,1),F=new Date(R.getFullYear()-1,11,31);D(K=>({...K,periodType:x,periodStart:V.toISOString().split("T")[0],periodEnd:F.toISOString().split("T")[0]}))},B=Object.entries(Ot).reduce((x,[R,V])=>{const F=V.categorie;return x[F]||(x[F]=[]),x[F].push({code:R,config:V}),x},{}),U={asset_management:"Asset Management",property_management:"Property Management",leasing:"Commercialisation",centre_commercial:"Centre Commercial",financier:"Financier",investissement:"Investissement",projet:"Projet & Mobilisation"},Y=x=>{D(R=>({...R,typesRapport:R.typesRapport.includes(x)?R.typesRapport.filter(V=>V!==x):[...R.typesRapport,x]}))},X=c.filter(x=>{if(p!=="all"&&x.status!==p)return!1;if(N){const R=N.toLowerCase();return x.title.toLowerCase().includes(R)}return!0}),M=()=>{if(!t||!A.titre)return;let x=[],R=[];if(A.fromTemplate){const F=C.find(K=>K.id===A.fromTemplate);F&&(R=F.types,x=F.contentTree.sections.map(K=>({...K,id:crypto.randomUUID()})))}else{if(A.typesRapport.length===0)return;R=A.typesRapport,x=A.typesRapport.flatMap(F=>{const K=Ot[F];return K!=null&&K.sections?K.sections.map(le=>({id:crypto.randomUUID(),type:"section",title:le.titre,level:1,status:"manual",isLocked:!1,blocks:[],children:[],sourceType:F})):[]})}const V={id:crypto.randomUUID(),centreId:t,title:A.titre,type:R.join(","),status:"draft",author:"User",periodStart:A.periodStart||void 0,periodEnd:A.periodEnd||void 0,periodLabel:H()||void 0,contentTree:{sections:x},version:1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};if(A.saveAsTemplate&&A.templateName){const F={id:`tpl-${crypto.randomUUID().slice(0,8)}`,name:A.templateName,description:`Modèle basé sur "${A.titre}"`,types:R,category:A.periodType==="month"?"mensuel":A.periodType==="quarter"?"trimestriel":A.periodType==="year"?"annuel":"custom",isDefault:!1,author:"User",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),usageCount:0,contentTree:{sections:x},dataConfig:{requiredDataSources:[],refreshOnOpen:!0,defaultPeriodType:A.periodType}};O([...C,F]),s({type:"success",title:"Modèle créé",message:`"${A.templateName}" ajouté`})}y([...c,V]),h(!1),D({titre:"",typesRapport:[],periodStart:"",periodEnd:"",periodType:"month",saveAsTemplate:!1,templateName:"",fromTemplate:null}),W("new"),s({type:"success",title:"Rapport créé",message:`${x.length} sections ajoutées`})},ie=x=>{D(R=>({...R,fromTemplate:x.id,typesRapport:x.types,periodType:x.dataConfig.defaultPeriodType})),Q(x.dataConfig.defaultPeriodType)},de=()=>{b&&(y(c.filter(x=>x.id!==b.id)),w(!1),S(null),s({type:"success",title:"Rapport supprimé"}))},ne=x=>{const R=c.find(F=>F.id===x);if(!R)return;const V={...R,id:crypto.randomUUID(),title:`${R.title} (copie)`,status:"draft",version:1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),publishedAt:void 0};y([...c,V]),s({type:"success",title:"Rapport dupliqué"})},ae=x=>{a(x),n(x.contentTree),u(!0)},se=()=>{m(),u(!1)};if(g&&l)return e.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-100",children:[e.jsx(ei,{}),e.jsx("button",{onClick:se,className:"fixed top-4 left-4 z-[60] px-4 py-2 bg-white rounded-lg shadow-lg text-sm font-medium text-primary-700 hover:bg-primary-50 flex items-center gap-2",children:"← Retour à la liste"})]});const o=({rapportItem:x})=>e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-primary-200 hover:border-accent transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-primary-900",children:x.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(_,{className:ti[x.status],children:Kt[x.status]}),e.jsxs("span",{className:"text-xs text-primary-500",children:["v",x.version]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(G,{variant:"ghost",size:"sm",onClick:()=>ae(x),children:e.jsx(Ar,{className:"w-4 h-4"})}),e.jsx(G,{variant:"ghost",size:"sm",onClick:()=>ne(x.id),children:e.jsx(Lt,{className:"w-4 h-4"})}),e.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{S(x),w(!0)},children:e.jsx($e,{className:"w-4 h-4 text-error"})})]})]}),e.jsxs("div",{className:"text-sm text-primary-600 mb-3",children:[x.contentTree.sections.length," section(s)"]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-primary-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(De,{className:"w-3 h-3"}),new Date(x.updatedAt).toLocaleDateString("fr-FR")]}),e.jsxs(G,{variant:"secondary",size:"sm",onClick:()=>ae(x),children:[e.jsx(ct,{className:"w-4 h-4 mr-1"}),"Ouvrir"]})]})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-primary-900",children:"Rapport Studio"}),e.jsx("p",{className:"text-primary-500 mt-1",children:r==null?void 0:r.nom})]}),e.jsx(G,{leftIcon:e.jsx(ge,{className:"w-4 h-4"}),onClick:()=>h(!0),children:"Nouveau rapport"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-primary-400"}),e.jsx(Me,{type:"text",placeholder:"Rechercher un rapport...",value:N,onChange:x=>E(x.target.value),className:"pl-10"})]}),e.jsx(fe,{value:p,onChange:x=>v(x.target.value),options:[{value:"all",label:"Tous les statuts"},...Object.entries(Kt).map(([x,R])=>({value:x,label:R}))],className:"w-44"})]}),X.length===0?e.jsx(z,{children:e.jsxs($,{className:"py-12 text-center",children:[e.jsx(ce,{className:"w-12 h-12 text-primary-300 mx-auto mb-4"}),e.jsx("p",{className:"text-primary-500 mb-4",children:"Aucun rapport"}),e.jsxs(G,{onClick:()=>h(!0),children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"Créer un rapport"]})]})}):e.jsx("div",{className:"grid grid-cols-3 gap-4",children:X.map(x=>e.jsx(o,{rapportItem:x},x.id))}),e.jsx(Le,{isOpen:j,onClose:()=>{h(!1),W("new"),D({titre:"",typesRapport:[],periodStart:"",periodEnd:"",periodType:"month",saveAsTemplate:!1,templateName:"",fromTemplate:null})},title:"Nouveau rapport",size:"xl",footer:e.jsxs(e.Fragment,{children:[e.jsx(G,{variant:"ghost",onClick:()=>h(!1),children:"Annuler"}),e.jsx(G,{onClick:M,disabled:!A.titre||!A.fromTemplate&&A.typesRapport.length===0,children:"Créer le rapport"})]}),children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex gap-2 border-b border-primary-200 pb-3",children:[e.jsxs("button",{onClick:()=>{W("new"),D(x=>({...x,fromTemplate:null}))},className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-colors ${k==="new"?"bg-primary text-white":"text-primary-600 hover:bg-primary-50"}`,children:[e.jsx(ge,{className:"w-4 h-4"}),"Nouveau rapport"]}),e.jsxs("button",{onClick:()=>W("template"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-colors ${k==="template"?"bg-primary text-white":"text-primary-600 hover:bg-primary-50"}`,children:[e.jsx(et,{className:"w-4 h-4"}),"Depuis un modèle (",C.length,")"]})]}),e.jsx(Me,{label:"Titre du rapport",value:A.titre,onChange:x=>D({...A,titre:x.target.value}),placeholder:"Ex: Rapport mensuel Janvier 2024"}),e.jsxs("div",{className:"p-4 bg-primary-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Xt,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-medium text-sm text-primary-900",children:"Période du rapport"})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{onClick:()=>Q("month"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${A.periodType==="month"?"bg-primary text-white":"bg-white text-primary-600 hover:bg-primary-100"}`,children:"Mois précédent"}),e.jsx("button",{onClick:()=>Q("quarter"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${A.periodType==="quarter"?"bg-primary text-white":"bg-white text-primary-600 hover:bg-primary-100"}`,children:"Trimestre précédent"}),e.jsx("button",{onClick:()=>Q("year"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${A.periodType==="year"?"bg-primary text-white":"bg-white text-primary-600 hover:bg-primary-100"}`,children:"Année précédente"}),e.jsx("button",{onClick:()=>D(x=>({...x,periodType:"custom"})),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${A.periodType==="custom"?"bg-primary text-white":"bg-white text-primary-600 hover:bg-primary-100"}`,children:"Personnalisé"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-primary-600 mb-1",children:"Du"}),e.jsx("input",{type:"date",value:A.periodStart,onChange:x=>D(R=>({...R,periodStart:x.target.value})),className:"w-full px-3 py-2 bg-white border border-primary-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-primary-600 mb-1",children:"Au"}),e.jsx("input",{type:"date",value:A.periodEnd,onChange:x=>D(R=>({...R,periodEnd:x.target.value})),className:"w-full px-3 py-2 bg-white border border-primary-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),H()&&e.jsxs("p",{className:"mt-2 text-sm text-primary-700",children:["Période: ",e.jsx("strong",{children:H()})]})]}),k==="template"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Sélectionnez un modèle"}),e.jsx("div",{className:"grid grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:C.map(x=>e.jsxs("button",{onClick:()=>ie(x),className:`p-3 text-left rounded-xl border-2 transition-all ${A.fromTemplate===x.id?"border-primary bg-primary/5":"border-primary-200 hover:border-primary-300"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-900",children:x.name}),e.jsx("p",{className:"text-xs text-primary-500 mt-0.5",children:x.description})]}),x.isDefault&&e.jsx(_,{className:"bg-accent/10 text-accent text-xs",children:"Défaut"})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-primary-500",children:[e.jsxs("span",{children:[x.types.length," types"]}),e.jsx("span",{children:"·"}),e.jsxs("span",{children:[x.usageCount," utilisations"]}),e.jsx("span",{children:"·"}),e.jsx("span",{className:"capitalize",children:x.category})]})]},x.id))}),A.fromTemplate&&e.jsxs("div",{className:"mt-3 p-3 bg-success/10 rounded-lg flex items-center gap-2",children:[e.jsx(tt,{className:"w-4 h-4 text-success"}),e.jsx("p",{className:"text-sm text-success",children:"Les données seront actualisées pour la période sélectionnée"})]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-primary-700 mb-2",children:"Types de rapport (sélection multiple)"}),e.jsx("p",{className:"text-xs text-primary-500 mb-3",children:"Sélectionnez un ou plusieurs types pour combiner leurs sections"}),e.jsx("div",{className:"max-h-56 overflow-y-auto border border-primary-200 rounded-lg",children:Object.entries(B).map(([x,R])=>e.jsxs("div",{className:"border-b border-primary-100 last:border-b-0",children:[e.jsx("div",{className:"px-3 py-2 bg-primary-50 font-medium text-sm text-primary-800 sticky top-0",children:U[x]||x}),e.jsx("div",{className:"p-2 space-y-1",children:R.map(({code:V,config:F})=>e.jsxs("label",{className:`flex items-start gap-3 p-2 rounded-lg cursor-pointer transition-colors ${A.typesRapport.includes(V)?"bg-accent/10 border border-accent":"hover:bg-primary-50 border border-transparent"}`,children:[e.jsx("input",{type:"checkbox",checked:A.typesRapport.includes(V),onChange:()=>Y(V),className:"mt-1 h-4 w-4 rounded border-primary-300 text-accent focus:ring-accent"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-sm text-primary-900",children:F.nom}),F.estPremium&&e.jsx(_,{className:"bg-warning/10 text-warning text-xs",children:"Premium"})]}),e.jsx("p",{className:"text-xs text-primary-500 mt-0.5 line-clamp-1",children:F.description})]})]},V))})]},x))}),A.typesRapport.length>0&&e.jsx("div",{className:"mt-3 p-3 bg-success/10 rounded-lg",children:e.jsxs("p",{className:"text-sm font-medium text-success",children:[A.typesRapport.length," type(s) sélectionné(s)"]})})]}),k==="new"&&A.typesRapport.length>0&&e.jsxs("div",{className:"p-4 border border-primary-200 rounded-xl",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:A.saveAsTemplate,onChange:x=>D(R=>({...R,saveAsTemplate:x.target.checked})),className:"h-4 w-4 rounded border-primary-300 text-accent focus:ring-accent"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-medium text-sm text-primary-900",children:"Sauvegarder comme modèle"})]}),e.jsx("p",{className:"text-xs text-primary-500 mt-0.5",children:"Réutilisez cette structure pour vos prochains rapports"})]})]}),A.saveAsTemplate&&e.jsx("div",{className:"mt-3",children:e.jsx(Me,{label:"Nom du modèle",value:A.templateName,onChange:x=>D(R=>({...R,templateName:x.target.value})),placeholder:"Ex: Mon rapport mensuel"})})]})]})}),e.jsx(Os,{isOpen:f,onClose:()=>w(!1),onConfirm:de,title:"Supprimer le rapport",message:`Êtes-vous sûr de vouloir supprimer "${b==null?void 0:b.title}" ?`,confirmLabel:"Supprimer",variant:"danger"})]})}export{hi as AnalysePage,xi as CataloguePage,pi as ImportPage,yi as RapportStudioPage};
