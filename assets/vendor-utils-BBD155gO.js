import{b as un,c as Xr,g as Ga}from"./vendor-react-BdB5Pz3t.js";const zr=o=>{let a;const u=new Set,c=(N,H)=>{const X=typeof N=="function"?N(a):N;if(!Object.is(X,a)){const $=a;a=H??(typeof X!="object"||X===null)?X:Object.assign({},a,X),u.forEach(ue=>ue(a,$))}},p=()=>a,S={setState:c,getState:p,getInitialState:()=>q,subscribe:N=>(u.add(N),()=>u.delete(N))},q=a=o(c,p,S);return S},Ja=o=>o?zr(o):zr,Za=o=>o;function ei(o,a=Za){const u=un.useSyncExternalStore(o.subscribe,un.useCallback(()=>a(o.getState()),[o,a]),un.useCallback(()=>a(o.getInitialState()),[o,a]));return un.useDebugValue(u),u}const Qr=o=>{const a=Ja(o),u=c=>ei(a,c);return Object.assign(u,a),u},Ro=o=>o?Qr(o):Qr,ce=[];for(let o=0;o<256;++o)ce.push((o+256).toString(16).slice(1));function ti(o,a=0){return(ce[o[a+0]]+ce[o[a+1]]+ce[o[a+2]]+ce[o[a+3]]+"-"+ce[o[a+4]]+ce[o[a+5]]+"-"+ce[o[a+6]]+ce[o[a+7]]+"-"+ce[o[a+8]]+ce[o[a+9]]+"-"+ce[o[a+10]]+ce[o[a+11]]+ce[o[a+12]]+ce[o[a+13]]+ce[o[a+14]]+ce[o[a+15]]).toLowerCase()}let Jn;const ni=new Uint8Array(16);function ri(){if(!Jn){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Jn=crypto.getRandomValues.bind(crypto)}return Jn(ni)}const ai=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),$r={randomUUID:ai};function ii(o,a,u){var p;o=o||{};const c=o.random??((p=o.rng)==null?void 0:p.call(o))??ri();if(c.length<16)throw new Error("Random bytes length must be >= 16");return c[6]=c[6]&15|64,c[8]=c[8]&63|128,ti(c)}function Bo(o,a,u){return $r.randomUUID&&!o?$r.randomUUID():ii(o)}var ia={exports:{}};(function(o,a){(function(u,c){o.exports=c()})(Xr,function(){var u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])})(e,t)},c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function p(e,t,n){for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var D=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Xr,E=Object.keys,S=Array.isArray;function q(e,t){return typeof t!="object"||E(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||D.Promise||(D.Promise=Promise);var N=Object.getPrototypeOf,H={}.hasOwnProperty;function X(e,t){return H.call(e,t)}function $(e,t){typeof t=="function"&&(t=t(N(e))),(typeof Reflect>"u"?E:Reflect.ownKeys)(t).forEach(function(n){re(e,n,t[n])})}var ue=Object.defineProperty;function re(e,t,n,r){ue(e,t,q(n&&X(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function pe(e){return{from:function(t){return e.prototype=Object.create(t.prototype),re(e.prototype,"constructor",e),{extend:$.bind(null,e.prototype)}}}}var Tt=Object.getOwnPropertyDescriptor,Ct=[].slice;function ae(e,t,n){return Ct.call(e,t,n)}function se(e,t){return t(e)}function Oe(e){if(!e)throw new Error("Assertion Failed")}function or(e){D.setImmediate?setImmediate(e):setTimeout(e,0)}function De(e,t){if(typeof t=="string"&&X(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var s=De(e,t[r]);n.push(s)}return n}var l=t.indexOf(".");if(l!==-1){var f=e[t.substr(0,l)];return f==null?void 0:De(f,t.substr(l+1))}}function ye(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Oe(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)ye(e,t[r],n[r])}else{var s,l,f=t.indexOf(".");f!==-1?(s=t.substr(0,f),(l=t.substr(f+1))===""?n===void 0?S(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n:ye(f=!(f=e[s])||!X(e,s)?e[s]={}:f,l,n)):n===void 0?S(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ur(e){var t,n={};for(t in e)X(e,t)&&(n[t]=e[t]);return n}var pa=[].concat;function sr(e){return pa.apply([],e)}var Ye="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(sr([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return D[e]}),cr=new Set(Ye.map(function(e){return D[e]})),dt=null;function Ne(e){return dt=new WeakMap,e=function t(n){if(!n||typeof n!="object")return n;var r=dt.get(n);if(r)return r;if(S(n)){r=[],dt.set(n,r);for(var i=0,s=n.length;i<s;++i)r.push(t(n[i]))}else if(cr.has(n.constructor))r=n;else{var l,f=N(n);for(l in r=f===Object.prototype?{}:Object.create(f),dt.set(n,r),n)X(n,l)&&(r[l]=t(n[l]))}return r}(e),dt=null,e}var va={}.toString;function hn(e){return va.call(e).slice(8,-1)}var mn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ga=typeof mn=="symbol"?function(e){var t;return e!=null&&(t=e[mn])&&t.apply(e)}:function(){return null};function Re(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var Je={};function Pe(e){var t,n,r,i;if(arguments.length===1){if(S(e))return e.slice();if(this===Je&&typeof e=="string")return[e];if(i=ga(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var yn=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},yt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],be=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(yt),ba={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ze(e,t){this.name=e,this.message=t}function lr(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function Kt(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=lr(e,t)}function et(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=lr(e,this.failures)}pe(Ze).from(Error).extend({toString:function(){return this.name+": "+this.message}}),pe(Kt).from(Ze),pe(et).from(Ze);var pn=be.reduce(function(e,t){return e[t]=t+"Error",e},{}),wa=Ze,B=be.reduce(function(e,t){var n=t+"Error";function r(i,s){this.name=n,i?typeof i=="string"?(this.message="".concat(i).concat(s?`
 `+s:""),this.inner=s||null):typeof i=="object"&&(this.message="".concat(i.name," ").concat(i.message),this.inner=i):(this.message=ba[t]||n,this.inner=null)}return pe(r).from(wa),e[t]=r,e},{});B.Syntax=SyntaxError,B.Type=TypeError,B.Range=RangeError;var fr=yt.reduce(function(e,t){return e[t+"Error"]=B[t],e},{}),It=be.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=B[t]),e},{});function J(){}function ht(e){return e}function _a(e,t){return e==null||e===ht?t:function(n){return t(e(n))}}function Be(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function xa(e,t){return e===J?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Be(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Be(i,this.onerror):i),s!==void 0?s:n}}function ka(e,t){return e===J?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Be(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Be(r,this.onerror):r)}}function Oa(e,t){return e===J?t:function(n){var r=e.apply(this,arguments);q(n,r);var i=this.onsuccess,s=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?Be(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Be(s,this.onerror):s),r===void 0?n===void 0?void 0:n:q(r,n)}}function Da(e,t){return e===J?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function vn(e,t){return e===J?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return t.apply(r,s)})}return t.apply(this,arguments)}}It.ModifyError=Kt,It.DexieError=Ze,It.BulkError=et;var _e=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function dr(e){_e=e}var mt={},hr=100,Ye=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,N(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,N(t),e]}(),yt=Ye[0],be=Ye[1],Ye=Ye[2],be=be&&be.then,We=yt&&yt.constructor,gn=!!Ye,pt=function(e,t){vt.push([e,t]),jt&&(queueMicrotask(Sa),jt=!1)},bn=!0,jt=!0,Le=[],At=[],wn=ht,Te={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:J,pgp:!1,env:{},finalize:J},R=Te,vt=[],Ue=0,qt=[];function A(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=R;if(typeof e!="function"){if(e!==mt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&xn(this,this._value))}this._state=null,this._value=null,++t.ref,function n(r,i){try{i(function(s){if(r._state===null){if(s===r)throw new TypeError("A promise cannot be resolved with itself.");var l=r._lib&&tt();s&&typeof s.then=="function"?n(r,function(f,h){s instanceof A?s._then(f,h):s.then(f,h)}):(r._state=!0,r._value=s,yr(r)),l&&nt()}},xn.bind(null,r))}catch(s){xn(r,s)}}(this,e)}var _n={get:function(){var e=R,t=Bt;function n(r,i){var s=this,l=!e.global&&(e!==R||t!==Bt),f=l&&!Ke(),h=new A(function(m,b){kn(s,new mr(vr(r,e,l,f),vr(i,e,l,f),m,b,e))});return this._consoleTask&&(h._consoleTask=this._consoleTask),h}return n.prototype=mt,n},set:function(e){re(this,"then",e&&e.prototype===mt?_n:{get:function(){return e},set:_n.set})}};function mr(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}function xn(e,t){var n,r;At.push(t),e._state===null&&(n=e._lib&&tt(),t=wn(t),e._state=!1,e._value=t,r=e,Le.some(function(i){return i._value===r._value})||Le.push(r),yr(e),n&&nt())}function yr(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)kn(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Ue===0&&(++Ue,pt(function(){--Ue==0&&On()},[]))}function kn(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ue,pt(Pa,[n,e,t])}else e._listeners.push(t)}function Pa(e,t,n){try{var r,i=t._value;!t._state&&At.length&&(At=[]),r=_e&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),t._state||At.indexOf(i)!==-1||function(s){for(var l=Le.length;l;)if(Le[--l]._value===s._value)return Le.splice(l,1)}(t),n.resolve(r)}catch(s){n.reject(s)}finally{--Ue==0&&On(),--n.psd.ref||n.psd.finalize()}}function Sa(){He(Te,function(){tt()&&nt()})}function tt(){var e=bn;return jt=bn=!1,e}function nt(){var e,t,n;do for(;0<vt.length;)for(e=vt,vt=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(0<vt.length);jt=bn=!0}function On(){var e=Le;Le=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=qt.slice(0),n=t.length;n;)t[--n]()}function Ft(e){return new A(mt,!1,e)}function ee(e,t){var n=R;return function(){var r=tt(),i=R;try{return Ie(n,!0),e.apply(this,arguments)}catch(s){t&&t(s)}finally{Ie(i,!1),r&&nt()}}}$(A.prototype,{then:_n,_then:function(e,t){kn(this,new mr(null,null,e,t,R))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(r){return(r instanceof t?n:Ft)(r)}):this.then(null,function(r){return(r&&r.name===t?n:Ft)(r)})},finally:function(e){return this.then(function(t){return A.resolve(e()).then(function(){return t})},function(t){return A.resolve(e()).then(function(){return Ft(t)})})},timeout:function(e,t){var n=this;return e<1/0?new A(function(r,i){var s=setTimeout(function(){return i(new B.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&re(A.prototype,Symbol.toStringTag,"Dexie.Promise"),Te.env=pr(),$(A,{all:function(){var e=Pe.apply(null,arguments).map(Yt);return new A(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,s){return A.resolve(i).then(function(l){e[s]=l,--r||t(e)},n)})})},resolve:function(e){return e instanceof A?e:e&&typeof e.then=="function"?new A(function(t,n){e.then(t,n)}):new A(mt,!0,e)},reject:Ft,race:function(){var e=Pe.apply(null,arguments).map(Yt);return new A(function(t,n){e.map(function(r){return A.resolve(r).then(t,n)})})},PSD:{get:function(){return R},set:function(e){return R=e}},totalEchoes:{get:function(){return Bt}},newPSD:Ce,usePSD:He,scheduler:{get:function(){return pt},set:function(e){pt=e}},rejectionMapper:{get:function(){return wn},set:function(e){wn=e}},follow:function(e,t){return new A(function(n,r){return Ce(function(i,s){var l=R;l.unhandleds=[],l.onunhandled=s,l.finalize=Be(function(){var f,h=this;f=function(){h.unhandleds.length===0?i():s(h.unhandleds[0])},qt.push(function m(){f(),qt.splice(qt.indexOf(m),1)}),++Ue,pt(function(){--Ue==0&&On()},[])},l.finalize),e()},t,n,r)})}}),We&&(We.allSettled&&re(A,"allSettled",function(){var e=Pe.apply(null,arguments).map(Yt);return new A(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,s){return A.resolve(i).then(function(l){return r[s]={status:"fulfilled",value:l}},function(l){return r[s]={status:"rejected",reason:l}}).then(function(){return--n||t(r)})})})}),We.any&&typeof AggregateError<"u"&&re(A,"any",function(){var e=Pe.apply(null,arguments).map(Yt);return new A(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(s,l){return A.resolve(s).then(function(f){return t(f)},function(f){i[l]=f,--r||n(new AggregateError(i))})})})}),We.withResolvers&&(A.withResolvers=We.withResolvers));var ie={awaits:0,echoes:0,id:0},Ma=0,Nt=[],Rt=0,Bt=0,Ea=0;function Ce(e,t,n,r){var i=R,s=Object.create(i);return s.parent=i,s.ref=0,s.global=!1,s.id=++Ea,Te.env,s.env=gn?{Promise:A,PromiseProp:{value:A,configurable:!0,writable:!0},all:A.all,race:A.race,allSettled:A.allSettled,any:A.any,resolve:A.resolve,reject:A.reject}:{},t&&q(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()},r=He(s,e,n,r),s.ref===0&&s.finalize(),r}function rt(){return ie.id||(ie.id=++Ma),++ie.awaits,ie.echoes+=hr,ie.id}function Ke(){return!!ie.awaits&&(--ie.awaits==0&&(ie.id=0),ie.echoes=ie.awaits*hr,!0)}function Yt(e){return ie.echoes&&e&&e.constructor===We?(rt(),e.then(function(t){return Ke(),t},function(t){return Ke(),te(t)})):e}function Ta(){var e=Nt[Nt.length-1];Nt.pop(),Ie(e,!1)}function Ie(e,t){var n,r=R;(t?!ie.echoes||Rt++&&e===R:!Rt||--Rt&&e===R)||queueMicrotask(t?(function(i){++Bt,ie.echoes&&--ie.echoes!=0||(ie.echoes=ie.awaits=ie.id=0),Nt.push(R),Ie(i,!0)}).bind(null,e):Ta),e!==R&&(R=e,r===Te&&(Te.env=pr()),gn&&(n=Te.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(D,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function pr(){var e=D.Promise;return gn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(D,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function He(e,t,n,r,i){var s=R;try{return Ie(e,!0),t(n,r,i)}finally{Ie(s,!1)}}function vr(e,t,n,r){return typeof e!="function"?e:function(){var i=R;n&&rt(),Ie(t,!0);try{return e.apply(this,arguments)}finally{Ie(i,!1),r&&queueMicrotask(Ke)}}}function Dn(e){Promise===We&&ie.echoes===0?Rt===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+be).indexOf("[native code]")===-1&&(rt=Ke=J);var te=A.reject,Ve="ï¿¿",Se="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",gr="String expected.",at=[],Wt="__dbnames",Pn="readonly",Sn="readwrite";function Xe(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var br={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Lt(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=Ne(t))[e],t}}function wr(){throw B.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function V(e,t){try{var n=_r(e),r=_r(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(i,s){for(var l=i.length,f=s.length,h=l<f?l:f,m=0;m<h;++m)if(i[m]!==s[m])return i[m]<s[m]?-1:1;return l===f?0:l<f?-1:1}(xr(e),xr(t));case"Array":return function(i,s){for(var l=i.length,f=s.length,h=l<f?l:f,m=0;m<h;++m){var b=V(i[m],s[m]);if(b!==0)return b}return l===f?0:l<f?-1:1}(e,t)}}catch{}return NaN}function _r(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=hn(e),e==="ArrayBuffer"?"binary":e)}function xr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function Ut(e,t,n){var r=e.schema.yProps;return r?(t&&0<n.numFailures&&(t=t.filter(function(i,s){return!n.failures[s]})),Promise.all(r.map(function(i){return i=i.updatesTable,t?e.db.table(i).where("k").anyOf(t).delete():e.db.table(i).clear()})).then(function(){return n})):n}var gt=(kr.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var n=t.add;if(S(n))return p(p([],S(e)?e:[],!0),n).sort();if(typeof n=="number")return(Number(e)||0)+n;if(typeof n=="bigint")try{return BigInt(e)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(t.remove!==void 0){var r=t.remove;if(S(r))return S(e)?e.filter(function(i){return!r.includes(i)}).sort():[];if(typeof r=="number")return Number(e)-r;if(typeof r=="bigint")try{return BigInt(e)-r}catch{return BigInt(0)-r}throw new TypeError("Invalid subtrahend ".concat(r))}return n=(n=t.replacePrefix)===null||n===void 0?void 0:n[0],n&&typeof e=="string"&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},kr);function kr(e){this["@@propmod"]=e}function Or(e,t){for(var n=E(t),r=n.length,i=!1,s=0;s<r;++s){var l=n[s],f=t[l],h=De(e,l);f instanceof gt?(ye(e,l,f.execute(h)),i=!0):h!==f&&(ye(e,l,f),i=!0)}return i}var Dr=(Z.prototype._trans=function(e,t,n){var r=this._tx||R.trans,i=this.name,s=_e&&typeof console<"u"&&console.createTask&&void 0;function l(m,b,d){if(!d.schema[i])throw new B.NotFound("Table "+i+" not part of transaction");return t(d.idbtrans,d)}var f=tt();try{var h=r&&r.db._novip===this.db._novip?r===R.trans?r._promise(e,l,n):Ce(function(){return r._promise(e,l,n)},{trans:r,transless:R.transless||R}):function m(b,d,_,y){if(b.idbdb&&(b._state.openComplete||R.letThrough||b._vip)){var v=b._createTransaction(d,_,b._dbSchema);try{v.create(),b._state.PR1398_maxLoop=3}catch(g){return g.name===pn.InvalidState&&b.isOpen()&&0<--b._state.PR1398_maxLoop?(b.close({disableAutoOpen:!1}),b.open().then(function(){return m(b,d,_,y)})):te(g)}return v._promise(d,function(g,w){return Ce(function(){return R.trans=v,y(g,w,v)})}).then(function(g){if(d==="readwrite")try{v.idbtrans.commit()}catch{}return d==="readonly"?g:v._completion.then(function(){return g})})}if(b._state.openComplete)return te(new B.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._state.autoOpen)return te(new B.DatabaseClosed);b.open().catch(J)}return b._state.dbReadyPromise.then(function(){return m(b,d,_,y)})}(this.db,e,[this.name],l);return s&&(h._consoleTask=s,h=h.catch(function(m){return te(m)})),h}finally{f&&nt()}},Z.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?te(new B.Type("Invalid argument to Table.get()")):this._trans("readonly",function(r){return n.core.get({trans:r,key:e}).then(function(i){return n.hook.reading.fire(i)})}).then(t)},Z.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(S(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=E(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(f){if(f.compound&&t.every(function(m){return 0<=f.keyPath.indexOf(m)})){for(var h=0;h<t.length;++h)if(t.indexOf(f.keyPath[h])===-1)return!1;return!0}return!1}).sort(function(f,h){return f.keyPath.length-h.keyPath.length})[0];if(n&&this.db._maxKey!==Ve){var s=n.keyPath.slice(0,t.length);return this.where(s).equals(s.map(function(h){return e[h]}))}var r=this.schema.idxByName;function i(f,h){return V(f,h)===0}var l=t.reduce(function(d,h){var m=d[0],b=d[1],d=r[h],_=e[h];return[m||d,m||!d?Xe(b,d&&d.multi?function(y){return y=De(y,h),S(y)&&y.some(function(v){return i(_,v)})}:function(y){return i(_,De(y,h))}):b]},[null,null]),s=l[0],l=l[1];return s?this.where(s.name).equals(e[s.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")},Z.prototype.filter=function(e){return this.toCollection().and(e)},Z.prototype.count=function(e){return this.toCollection().count(e)},Z.prototype.offset=function(e){return this.toCollection().offset(e)},Z.prototype.limit=function(e){return this.toCollection().limit(e)},Z.prototype.each=function(e){return this.toCollection().each(e)},Z.prototype.toArray=function(e){return this.toCollection().toArray(e)},Z.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Z.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,S(e)?"[".concat(e.join("+"),"]"):e))},Z.prototype.reverse=function(){return this.toCollection().reverse()},Z.prototype.mapToClass=function(e){var t,n=this.db,r=this.name;function i(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof wr&&(function(h,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function b(){this.constructor=h}u(h,m),h.prototype=m===null?Object.create(m):(b.prototype=m.prototype,new b)}(i,t=e),Object.defineProperty(i.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),i.prototype.table=function(){return r},e=i);for(var s=new Set,l=e.prototype;l;l=N(l))Object.getOwnPropertyNames(l).forEach(function(h){return s.add(h)});function f(h){if(!h)return h;var m,b=Object.create(e.prototype);for(m in h)if(!s.has(m))try{b[m]=h[m]}catch{}return b}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=f,this.hook("reading",f),e},Z.prototype.defineClass=function(){return this.mapToClass(function(e){q(this,e)})},Z.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,s=r.keyPath,l=e;return s&&i&&(l=Lt(s)(e)),this._trans("readwrite",function(f){return n.core.mutate({trans:f,type:"add",keys:t!=null?[t]:null,values:[l]})}).then(function(f){return f.numFailures?A.reject(f.failures[0]):f.lastResult}).then(function(f){if(s)try{ye(e,s,f)}catch{}return f})},Z.prototype.upsert=function(e,t){var n=this,r=this.schema.primKey.keyPath;return this._trans("readwrite",function(i){return n.core.get({trans:i,key:e}).then(function(s){var l=s??{};return Or(l,t),r&&ye(l,r,e),n.core.mutate({trans:i,type:"put",values:[l],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[t]}}).then(function(f){return f.numFailures?A.reject(f.failures[0]):!!s})})})},Z.prototype.update=function(e,t){return typeof e!="object"||S(e)?this.where(":id").equals(e).modify(t):(e=De(e,this.schema.primKey.keyPath),e===void 0?te(new B.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},Z.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,s=r.keyPath,l=e;return s&&i&&(l=Lt(s)(e)),this._trans("readwrite",function(f){return n.core.mutate({trans:f,type:"put",values:[l],keys:t!=null?[t]:null})}).then(function(f){return f.numFailures?A.reject(f.failures[0]):f.lastResult}).then(function(f){if(s)try{ye(e,s,f)}catch{}return f})},Z.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]}).then(function(r){return Ut(t,[e],r)}).then(function(r){return r.numFailures?A.reject(r.failures[0]):void 0})})},Z.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:br}).then(function(n){return Ut(e,null,n)})}).then(function(t){return t.numFailures?A.reject(t.failures[0]):void 0})},Z.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(r){return r.map(function(i){return t.hook.reading.fire(i)})})})},Z.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(l){var m=r.schema.primKey,f=m.auto,m=m.keyPath;if(m&&i)throw new B.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new B.InvalidArgument("Arguments objects and keys must have the same length");var h=e.length,m=m&&f?e.map(Lt(m)):e;return r.core.mutate({trans:l,type:"add",keys:i,values:m,wantResults:s}).then(function(v){var d=v.numFailures,_=v.results,y=v.lastResult,v=v.failures;if(d===0)return s?_:y;throw new et("".concat(r.name,".bulkAdd(): ").concat(d," of ").concat(h," operations failed"),v)})})},Z.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(l){var m=r.schema.primKey,f=m.auto,m=m.keyPath;if(m&&i)throw new B.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new B.InvalidArgument("Arguments objects and keys must have the same length");var h=e.length,m=m&&f?e.map(Lt(m)):e;return r.core.mutate({trans:l,type:"put",keys:i,values:m,wantResults:s}).then(function(v){var d=v.numFailures,_=v.results,y=v.lastResult,v=v.failures;if(d===0)return s?_:y;throw new et("".concat(r.name,".bulkPut(): ").concat(d," of ").concat(h," operations failed"),v)})})},Z.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(l){return l.key}),i=e.map(function(l){return l.changes}),s=[];return this._trans("readwrite",function(l){return n.getMany({trans:l,keys:r,cache:"clone"}).then(function(f){var h=[],m=[];e.forEach(function(d,_){var y=d.key,v=d.changes,g=f[_];if(g){for(var w=0,x=Object.keys(v);w<x.length;w++){var k=x[w],O=v[k];if(k===t.schema.primKey.keyPath){if(V(O,y)!==0)throw new B.Constraint("Cannot update primary key in bulkUpdate()")}else ye(g,k,O)}s.push(_),h.push(y),m.push(g)}});var b=h.length;return n.mutate({trans:l,type:"put",keys:h,values:m,updates:{keys:r,changeSpecs:i}}).then(function(d){var _=d.numFailures,y=d.failures;if(_===0)return b;for(var v=0,g=Object.keys(y);v<g.length;v++){var w,x=g[v],k=s[Number(x)];k!=null&&(w=y[x],delete y[x],y[k]=w)}throw new et("".concat(t.name,".bulkUpdate(): ").concat(_," of ").concat(b," operations failed"),y)})})})},Z.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e}).then(function(i){return Ut(t,e,i)})}).then(function(l){var i=l.numFailures,s=l.lastResult,l=l.failures;if(i===0)return s;throw new et("".concat(t.name,".bulkDelete(): ").concat(i," of ").concat(n," operations failed"),l)})},Z);function Z(){}function bt(e){function t(l,f){if(f){for(var h=arguments.length,m=new Array(h-1);--h;)m[h-1]=arguments[h];return n[l].subscribe.apply(null,m),e}if(typeof l=="string")return n[l]}var n={};t.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return t;function s(l,f,h){if(typeof l!="object"){var m;f=f||Da;var b={subscribers:[],fire:h=h||J,subscribe:function(d){b.subscribers.indexOf(d)===-1&&(b.subscribers.push(d),b.fire=f(b.fire,d))},unsubscribe:function(d){b.subscribers=b.subscribers.filter(function(_){return _!==d}),b.fire=b.subscribers.reduce(f,h)}};return n[l]=t[l]=b}E(m=l).forEach(function(d){var _=m[d];if(S(_))s(d,m[d][0],m[d][1]);else{if(_!=="asap")throw new B.InvalidArgument("Invalid event config");var y=s(d,ht,function(){for(var v=arguments.length,g=new Array(v);v--;)g[v]=arguments[v];y.subscribers.forEach(function(w){or(function(){w.apply(null,g)})})})}})}}function wt(e,t){return pe(t).from({prototype:e}),t}function it(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Mn(e,t){e.filter=Xe(e.filter,t)}function En(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Xe(r(),t())}:t,e.justLimit=n&&!r}function Ht(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new B.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Pr(e,t,n){var r=Ht(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Vt(e,t,n,r){var i=e.replayFilter?Xe(e.filter,e.replayFilter()):e.filter;if(e.or){var s={},l=function(f,h,m){var b,d;i&&!i(h,m,function(_){return h.stop(_)},function(_){return h.fail(_)})||((d=""+(b=h.primaryKey))=="[object ArrayBuffer]"&&(d=""+new Uint8Array(b)),X(s,d)||(s[d]=!0,t(f,h,m)))};return Promise.all([e.or._iterate(l,n),Sr(Pr(e,r,n),e.algorithm,l,!e.keysOnly&&e.valueMapper)])}return Sr(Pr(e,r,n),Xe(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Sr(e,t,n,r){var i=ee(r?function(s,l,f){return n(r(s),l,f)}:n);return e.then(function(s){if(s)return s.start(function(){var l=function(){return s.continue()};t&&!t(s,function(f){return l=f},function(f){s.stop(f),l=J},function(f){s.fail(f),l=J})||i(s.value,s,function(f){return l=f}),l()})})}var Ca=(z.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,te.bind(null,n.error)):n.table._trans("readonly",e).then(t)},z.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,te.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},z.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Xe(t.algorithm,e)},z.prototype._iterate=function(e,t){return Vt(this._ctx,e,t,this._ctx.table.core)},z.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&q(n,e),t._ctx=n,t},z.prototype.raw=function(){return this._ctx.valueMapper=null,this},z.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Vt(t,e,n,t.table.core)})},z.prototype.count=function(e){var t=this;return this._read(function(n){var r=t._ctx,i=r.table.core;if(it(r,!0))return i.count({trans:n,query:{index:Ht(r,i.schema),range:r.range}}).then(function(l){return Math.min(l,r.limit)});var s=0;return Vt(r,function(){return++s,!1},n,i).then(function(){return s})}).then(e)},z.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function s(h,m){return m?s(h[n[m]],m-1):h[r]}var l=this._ctx.dir==="next"?1:-1;function f(h,m){return V(s(h,i),s(m,i))*l}return this.toArray(function(h){return h.sort(f)}).then(t)},z.prototype.toArray=function(e){var t=this;return this._read(function(n){var r=t._ctx;if(r.dir==="next"&&it(r,!0)&&0<r.limit){var i=r.valueMapper,s=Ht(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(function(f){return f=f.result,i?f.map(i):f})}var l=[];return Vt(r,function(f){return l.push(f)},n,r.table.core).then(function(){return l})},e)},z.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,it(t)?En(t,function(){var n=e;return function(r,i){return n===0||(n===1?--n:i(function(){r.advance(n),n=0}),!1)}}):En(t,function(){var n=e;return function(){return--n<0}})),this},z.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),En(this._ctx,function(){var t=e;return function(n,r,i){return--t<=0&&r(i),0<=t}},!0),this},z.prototype.until=function(e,t){return Mn(this._ctx,function(n,r,i){return!e(n.value)||(r(i),t)}),this},z.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},z.prototype.last=function(e){return this.reverse().first(e)},z.prototype.filter=function(e){var t;return Mn(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=Xe(t.isMatch,e),this},z.prototype.and=function(e){return this.filter(e)},z.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},z.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},z.prototype.desc=function(){return this.reverse()},z.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.key,r)})},z.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},z.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.primaryKey,r)})},z.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,i){n.push(i.key)}).then(function(){return n}).then(e)},z.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&it(t,!0)&&0<t.limit)return this._read(function(r){var i=Ht(t,t.table.core.schema);return t.table.core.query({trans:r,values:!1,limit:t.limit,query:{index:i,range:t.range}})}).then(function(r){return r.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,i){n.push(i.primaryKey)}).then(function(){return n}).then(e)},z.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},z.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},z.prototype.lastKey=function(e){return this.reverse().firstKey(e)},z.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return Mn(this._ctx,function(i){var r=i.primaryKey.toString(),i=X(t,r);return t[r]=!0,!i}),this},z.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var i=typeof e=="function"?e:function(g){return Or(g,e)},s=n.table.core,m=s.schema.primaryKey,l=m.outbound,f=m.extractKey,h=200,m=t.db._options.modifyChunkSize;m&&(h=typeof m=="object"?m[s.name]||m["*"]||200:m);function b(g,k){var x=k.failures,k=k.numFailures;_+=g-k;for(var O=0,P=E(x);O<P.length;O++){var T=P[O];d.push(x[T])}}var d=[],_=0,y=[],v=e===Mr;return t.clone().primaryKeys().then(function(g){function w(k){var O=Math.min(h,g.length-k),P=g.slice(k,k+O);return(v?Promise.resolve([]):s.getMany({trans:r,keys:P,cache:"immutable"})).then(function(T){var I=[],M=[],C=l?[]:null,j=v?P:[];if(!v)for(var K=0;K<O;++K){var F=T[K],W={value:Ne(F),primKey:g[k+K]};i.call(W,W.value,W)!==!1&&(W.value==null?j.push(g[k+K]):l||V(f(F),f(W.value))===0?(M.push(W.value),l&&C.push(g[k+K])):(j.push(g[k+K]),I.push(W.value)))}return Promise.resolve(0<I.length&&s.mutate({trans:r,type:"add",values:I}).then(function(L){for(var U in L.failures)j.splice(parseInt(U),1);b(I.length,L)})).then(function(){return(0<M.length||x&&typeof e=="object")&&s.mutate({trans:r,type:"put",keys:C,values:M,criteria:x,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<k}).then(function(L){return b(M.length,L)})}).then(function(){return(0<j.length||x&&v)&&s.mutate({trans:r,type:"delete",keys:j,criteria:x,isAdditionalChunk:0<k}).then(function(L){return Ut(n.table,j,L)}).then(function(L){return b(j.length,L)})}).then(function(){return g.length>k+O&&w(k+h)})})}var x=it(n)&&n.limit===1/0&&(typeof e!="function"||v)&&{index:n.index,range:n.range};return w(0).then(function(){if(0<d.length)throw new Kt("Error modifying one or more objects",d,_,y);return g.length})})})},z.prototype.delete=function(){var e=this._ctx,t=e.range;return!it(e)||e.table.schema.yProps||!e.isPrimKey&&t.type!==3?this.modify(Mr):this._write(function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then(function(s){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then(function(h){var f=h.failures,h=h.numFailures;if(h)throw new Kt("Could not delete some values",Object.keys(f).map(function(m){return f[m]}),s-h);return s-h})})})},z);function z(){}var Mr=function(e,t){return t.value=null};function Ka(e,t){return e<t?-1:e===t?0:1}function Ia(e,t){return t<e?-1:e===t?0:1}function ve(e,t,n){return e=e instanceof Tr?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function ot(e){return new e.Collection(e,function(){return Er("")}).limit(0)}function Xt(e,t,n,r){var i,s,l,f,h,m,b,d=n.length;if(!n.every(function(v){return typeof v=="string"}))return ve(e,gr);function _(v){i=v==="next"?function(w){return w.toUpperCase()}:function(w){return w.toLowerCase()},s=v==="next"?function(w){return w.toLowerCase()}:function(w){return w.toUpperCase()},l=v==="next"?Ka:Ia;var g=n.map(function(w){return{lower:s(w),upper:i(w)}}).sort(function(w,x){return l(w.lower,x.lower)});f=g.map(function(w){return w.upper}),h=g.map(function(w){return w.lower}),b=(m=v)==="next"?"":r}_("next"),e=new e.Collection(e,function(){return je(f[0],h[d-1]+r)}),e._ondirectionchange=function(v){_(v)};var y=0;return e._addAlgorithm(function(v,g,w){var x=v.key;if(typeof x!="string")return!1;var k=s(x);if(t(k,h,y))return!0;for(var O=null,P=y;P<d;++P){var T=function(I,M,C,j,K,F){for(var W=Math.min(I.length,j.length),L=-1,U=0;U<W;++U){var ge=M[U];if(ge!==j[U])return K(I[U],C[U])<0?I.substr(0,U)+C[U]+C.substr(U+1):K(I[U],j[U])<0?I.substr(0,U)+j[U]+C.substr(U+1):0<=L?I.substr(0,L)+M[L]+C.substr(L+1):null;K(I[U],ge)<0&&(L=U)}return W<j.length&&F==="next"?I+C.substr(I.length):W<I.length&&F==="prev"?I.substr(0,C.length):L<0?null:I.substr(0,L)+j[L]+C.substr(L+1)}(x,k,f[P],h[P],l,m);T===null&&O===null?y=P+1:(O===null||0<l(O,T))&&(O=T)}return g(O!==null?function(){v.continue(O+b)}:w),!1}),e}function je(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Er(e){return{type:1,lower:e,upper:e}}var Tr=(Object.defineProperty(oe.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),oe.prototype.between=function(e,t,n,r){n=n!==!1,r=r===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||r)&&(!n||!r)?ot(this):new this.Collection(this,function(){return je(e,t,!n,!r)})}catch{return ve(this,Se)}},oe.prototype.equals=function(e){return e==null?ve(this,Se):new this.Collection(this,function(){return Er(e)})},oe.prototype.above=function(e){return e==null?ve(this,Se):new this.Collection(this,function(){return je(e,void 0,!0)})},oe.prototype.aboveOrEqual=function(e){return e==null?ve(this,Se):new this.Collection(this,function(){return je(e,void 0,!1)})},oe.prototype.below=function(e){return e==null?ve(this,Se):new this.Collection(this,function(){return je(void 0,e,!1,!0)})},oe.prototype.belowOrEqual=function(e){return e==null?ve(this,Se):new this.Collection(this,function(){return je(void 0,e)})},oe.prototype.startsWith=function(e){return typeof e!="string"?ve(this,gr):this.between(e,e+Ve,!0,!0)},oe.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Xt(this,function(t,n){return t.indexOf(n[0])===0},[e],Ve)},oe.prototype.equalsIgnoreCase=function(e){return Xt(this,function(t,n){return t===n[0]},[e],"")},oe.prototype.anyOfIgnoreCase=function(){var e=Pe.apply(Je,arguments);return e.length===0?ot(this):Xt(this,function(t,n){return n.indexOf(t)!==-1},e,"")},oe.prototype.startsWithAnyOfIgnoreCase=function(){var e=Pe.apply(Je,arguments);return e.length===0?ot(this):Xt(this,function(t,n){return n.some(function(r){return t.indexOf(r)===0})},e,Ve)},oe.prototype.anyOf=function(){var e=this,t=Pe.apply(Je,arguments),n=this._cmp;try{t.sort(n)}catch{return ve(this,Se)}if(t.length===0)return ot(this);var r=new this.Collection(this,function(){return je(t[0],t[t.length-1])});r._ondirectionchange=function(s){n=s==="next"?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm(function(s,l,f){for(var h=s.key;0<n(h,t[i]);)if(++i===t.length)return l(f),!1;return n(h,t[i])===0||(l(function(){s.continue(t[i])}),!1)}),r},oe.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},oe.prototype.noneOf=function(){var e=Pe.apply(Je,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return ve(this,Se)}var t=e.reduce(function(n,r){return n?n.concat([[n[n.length-1][1],r]]):[[-1/0,r]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},oe.prototype.inAnyRange=function(x,t){var n=this,r=this._cmp,i=this._ascending,s=this._descending,l=this._min,f=this._max;if(x.length===0)return ot(this);if(!x.every(function(k){return k[0]!==void 0&&k[1]!==void 0&&i(k[0],k[1])<=0}))return ve(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",B.InvalidArgument);var h=!t||t.includeLowers!==!1,m=t&&t.includeUppers===!0,b,d=i;function _(k,O){return d(k[0],O[0])}try{(b=x.reduce(function(k,O){for(var P=0,T=k.length;P<T;++P){var I=k[P];if(r(O[0],I[1])<0&&0<r(O[1],I[0])){I[0]=l(I[0],O[0]),I[1]=f(I[1],O[1]);break}}return P===T&&k.push(O),k},[])).sort(_)}catch{return ve(this,Se)}var y=0,v=m?function(k){return 0<i(k,b[y][1])}:function(k){return 0<=i(k,b[y][1])},g=h?function(k){return 0<s(k,b[y][0])}:function(k){return 0<=s(k,b[y][0])},w=v,x=new this.Collection(this,function(){return je(b[0][0],b[b.length-1][1],!h,!m)});return x._ondirectionchange=function(k){d=k==="next"?(w=v,i):(w=g,s),b.sort(_)},x._addAlgorithm(function(k,O,P){for(var T,I=k.key;w(I);)if(++y===b.length)return O(P),!1;return!v(T=I)&&!g(T)||(n._cmp(I,b[y][1])===0||n._cmp(I,b[y][0])===0||O(function(){d===i?k.continue(b[y][0]):k.continue(b[y][1])}),!1)}),x},oe.prototype.startsWithAnyOf=function(){var e=Pe.apply(Je,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?ot(this):this.inAnyRange(e.map(function(t){return[t,t+Ve]})):ve(this,"startsWithAnyOf() only works with strings")},oe);function oe(){}function xe(e){return ee(function(t){return _t(t),e(t.target.error),!1})}function _t(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var xt="storagemutated",Tn="x-storagemutated-1",Ae=bt(null,xt),ja=(ke.prototype._lock=function(){return Oe(!R.global),++this._reculock,this._reculock!==1||R.global||(R.lockOwnerFor=this),this},ke.prototype._unlock=function(){if(Oe(!R.global),--this._reculock==0)for(R.global||(R.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{He(e[1],e[0])}catch{}}return this},ke.prototype._locked=function(){return this._reculock&&R.lockOwnerFor!==this},ke.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(Oe(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new B.DatabaseClosed(r);case"MissingAPIError":throw new B.MissingAPI(r.message,r);default:throw new B.OpenFailed(r)}if(!this.active)throw new B.TransactionInactive;return Oe(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ee(function(i){_t(i),t._reject(e.error)}),e.onabort=ee(function(i){_t(i),t.active&&t._reject(new B.Abort(e.error)),t.active=!1,t.on("abort").fire(i)}),e.oncomplete=ee(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Ae.storagemutated.fire(e.mutatedParts)}),this},ke.prototype._promise=function(e,t,n){var r=this;if(e==="readwrite"&&this.mode!=="readwrite")return te(new B.ReadOnly("Transaction is readonly"));if(!this.active)return te(new B.TransactionInactive);if(this._locked())return new A(function(s,l){r._blockedFuncs.push([function(){r._promise(e,t,n).then(s,l)},R])});if(n)return Ce(function(){var s=new A(function(l,f){r._lock();var h=t(l,f,r);h&&h.then&&h.then(l,f)});return s.finally(function(){return r._unlock()}),s._lib=!0,s});var i=new A(function(s,l){var f=t(s,l,r);f&&f.then&&f.then(s,l)});return i._lib=!0,i},ke.prototype._root=function(){return this.parent?this.parent._root():this},ke.prototype.waitFor=function(e){var t,n=this._root(),r=A.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=s)}());var i=n._waitingFor;return new A(function(s,l){r.then(function(f){return n._waitingQueue.push(ee(s.bind(null,f)))},function(f){return n._waitingQueue.push(ee(l.bind(null,f)))}).finally(function(){n._waitingFor===i&&(n._waitingFor=null)})})},ke.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new B.Abort))},ke.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(X(t,e))return t[e];var n=this.schema[e];if(!n)throw new B.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},ke);function ke(){}function Cn(e,t,n,r,i,s,l,f){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:s,src:(n&&!l?"&":"")+(r?"*":"")+(i?"++":"")+Cr(t),type:f}}function Cr(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Kn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(i){return[i.name,i]},n.reduce(function(i,s,l){return l=r(s,l),l&&(i[l[0]]=l[1]),i},{}))};var r}var kt=function(e){try{return e.only([[]]),kt=function(){return[[]]},[[]]}catch{return kt=function(){return Ve},Ve}};function In(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return De(n,t)}:function(n){return De(n,e)};var t}function Kr(e){return[].slice.call(e)}var Aa=0;function Ot(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function qa(e,t,h){function r(w){if(w.type===3)return null;if(w.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var y=w.lower,v=w.upper,g=w.lowerOpen,w=w.upperOpen;return y===void 0?v===void 0?null:t.upperBound(v,!!w):v===void 0?t.lowerBound(y,!!g):t.bound(y,v,!!g,!!w)}function i(_){var y,v=_.name;return{name:v,schema:_,mutate:function(g){var w=g.trans,x=g.type,k=g.keys,O=g.values,P=g.range;return new Promise(function(T,I){T=ee(T);var M=w.objectStore(v),C=M.keyPath==null,j=x==="put"||x==="add";if(!j&&x!=="delete"&&x!=="deleteRange")throw new Error("Invalid operation type: "+x);var K,F=(k||O||{length:1}).length;if(k&&O&&k.length!==O.length)throw new Error("Given keys array must have same length as given values array.");if(F===0)return T({numFailures:0,failures:{},results:[],lastResult:void 0});function W(me){++ge,_t(me)}var L=[],U=[],ge=0;if(x==="deleteRange"){if(P.type===4)return T({numFailures:ge,failures:U,results:[],lastResult:void 0});P.type===3?L.push(K=M.clear()):L.push(K=M.delete(r(P)))}else{var C=j?C?[O,k]:[O,null]:[k,null],Y=C[0],fe=C[1];if(j)for(var de=0;de<F;++de)L.push(K=fe&&fe[de]!==void 0?M[x](Y[de],fe[de]):M[x](Y[de])),K.onerror=W;else for(de=0;de<F;++de)L.push(K=M[x](Y[de])),K.onerror=W}function on(me){me=me.target.result,L.forEach(function($e,Gn){return $e.error!=null&&(U[Gn]=$e.error)}),T({numFailures:ge,failures:U,results:x==="delete"?k:L.map(function($e){return $e.result}),lastResult:me})}K.onerror=function(me){W(me),on(me)},K.onsuccess=on})},getMany:function(g){var w=g.trans,x=g.keys;return new Promise(function(k,O){k=ee(k);for(var P,T=w.objectStore(v),I=x.length,M=new Array(I),C=0,j=0,K=function(L){L=L.target,M[L._pos]=L.result,++j===C&&k(M)},F=xe(O),W=0;W<I;++W)x[W]!=null&&((P=T.get(x[W]))._pos=W,P.onsuccess=K,P.onerror=F,++C);C===0&&k(M)})},get:function(g){var w=g.trans,x=g.key;return new Promise(function(k,O){k=ee(k);var P=w.objectStore(v).get(x);P.onsuccess=function(T){return k(T.target.result)},P.onerror=xe(O)})},query:(y=m,function(g){return new Promise(function(w,x){w=ee(w);var k,O,P,C=g.trans,T=g.values,I=g.limit,K=g.query,M=I===1/0?void 0:I,j=K.index,K=K.range,C=C.objectStore(v),j=j.isPrimaryKey?C:C.index(j.name),K=r(K);if(I===0)return w({result:[]});y?((M=T?j.getAll(K,M):j.getAllKeys(K,M)).onsuccess=function(F){return w({result:F.target.result})},M.onerror=xe(x)):(k=0,O=!T&&"openKeyCursor"in j?j.openKeyCursor(K):j.openCursor(K),P=[],O.onsuccess=function(F){var W=O.result;return W?(P.push(T?W.value:W.primaryKey),++k===I?w({result:P}):void W.continue()):w({result:P})},O.onerror=xe(x))})}),openCursor:function(g){var w=g.trans,x=g.values,k=g.query,O=g.reverse,P=g.unique;return new Promise(function(T,I){T=ee(T);var j=k.index,M=k.range,C=w.objectStore(v),C=j.isPrimaryKey?C:C.index(j.name),j=O?P?"prevunique":"prev":P?"nextunique":"next",K=!x&&"openKeyCursor"in C?C.openKeyCursor(r(M),j):C.openCursor(r(M),j);K.onerror=xe(I),K.onsuccess=ee(function(F){var W,L,U,ge,Y=K.result;Y?(Y.___id=++Aa,Y.done=!1,W=Y.continue.bind(Y),L=(L=Y.continuePrimaryKey)&&L.bind(Y),U=Y.advance.bind(Y),ge=function(){throw new Error("Cursor not stopped")},Y.trans=w,Y.stop=Y.continue=Y.continuePrimaryKey=Y.advance=function(){throw new Error("Cursor not started")},Y.fail=ee(I),Y.next=function(){var fe=this,de=1;return this.start(function(){return de--?fe.continue():fe.stop()}).then(function(){return fe})},Y.start=function(fe){function de(){if(K.result)try{fe()}catch(me){Y.fail(me)}else Y.done=!0,Y.start=function(){throw new Error("Cursor behind last entry")},Y.stop()}var on=new Promise(function(me,$e){me=ee(me),K.onerror=xe($e),Y.fail=$e,Y.stop=function(Gn){Y.stop=Y.continue=Y.continuePrimaryKey=Y.advance=ge,me(Gn)}});return K.onsuccess=ee(function(me){K.onsuccess=de,de()}),Y.continue=W,Y.continuePrimaryKey=L,Y.advance=U,de(),on},T(Y)):T(null)},I)})},count:function(g){var w=g.query,x=g.trans,k=w.index,O=w.range;return new Promise(function(P,T){var I=x.objectStore(v),M=k.isPrimaryKey?I:I.index(k.name),I=r(O),M=I?M.count(I):M.count();M.onsuccess=ee(function(C){return P(C.target.result)}),M.onerror=xe(T)})}}}var s,l,f,b=(l=h,f=Kr((s=e).objectStoreNames),{schema:{name:s.name,tables:f.map(function(_){return l.objectStore(_)}).map(function(_){var y=_.keyPath,w=_.autoIncrement,v=S(y),g={},w={name:_.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:y==null,compound:v,keyPath:y,autoIncrement:w,unique:!0,extractKey:In(y)},indexes:Kr(_.indexNames).map(function(x){return _.index(x)}).map(function(P){var k=P.name,O=P.unique,T=P.multiEntry,P=P.keyPath,T={name:k,compound:S(P),keyPath:P,unique:O,multiEntry:T,extractKey:In(P)};return g[Ot(P)]=T}),getIndexByKeyPath:function(x){return g[Ot(x)]}};return g[":id"]=w.primaryKey,y!=null&&(g[Ot(y)]=w.primaryKey),w})},hasGetAll:0<f.length&&"getAll"in l.objectStore(f[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),h=b.schema,m=b.hasGetAll,b=h.tables.map(i),d={};return b.forEach(function(_){return d[_.name]=_}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(_){if(!d[_])throw new Error("Table '".concat(_,"' not found"));return d[_]},MIN_KEY:-1/0,MAX_KEY:kt(t),schema:h}}function Fa(e,t,n,r){var i=n.IDBKeyRange;return n.indexedDB,{dbcore:(r=qa(t,i,r),e.dbcore.reduce(function(s,l){return l=l.create,c(c({},s),l(s))},r))}}function zt(e,r){var n=r.db,r=Fa(e._middlewares,n,e._deps,r);e.core=r.dbcore,e.tables.forEach(function(i){var s=i.name;e.core.schema.tables.some(function(l){return l.name===s})&&(i.core=e.core.table(s),e[s]instanceof e.Table&&(e[s].core=i.core))})}function Qt(e,t,n,r){n.forEach(function(i){var s=r[i];t.forEach(function(l){var f=function h(m,b){return Tt(m,b)||(m=N(m))&&h(m,b)}(l,i);(!f||"value"in f&&f.value===void 0)&&(l===e.Transaction.prototype||l instanceof e.Transaction?re(l,i,{get:function(){return this.table(i)},set:function(h){ue(this,i,{value:h,writable:!0,configurable:!0,enumerable:!0})}}):l[i]=new e.Table(i,s))})})}function jn(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function Na(e,t){return e._cfg.version-t._cfg.version}function Ra(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=Kn("$meta",jr("")[0],[]),e._storeNames.push("$meta"));var s=e._createTransaction("readwrite",e._storeNames,i);s.create(n),s._completion.catch(r);var l=s._reject.bind(s),f=R.transless||R;Ce(function(){return R.trans=s,R.transless=f,t!==0?(zt(e,n),m=t,((h=s).storeNames.includes("$meta")?h.table("$meta").get("version").then(function(b){return b??m}):A.resolve(m)).then(function(b){return _=b,y=s,v=n,g=[],b=(d=e)._versions,w=d._dbSchema=Gt(0,d.idbdb,v),(b=b.filter(function(x){return x._cfg.version>=_})).length!==0?(b.forEach(function(x){g.push(function(){var k=w,O=x._cfg.dbschema;Jt(d,k,v),Jt(d,O,v),w=d._dbSchema=O;var P=An(k,O);P.add.forEach(function(j){qn(v,j[0],j[1].primKey,j[1].indexes)}),P.change.forEach(function(j){if(j.recreate)throw new B.Upgrade("Not yet support for changing primary key");var K=v.objectStore(j.name);j.add.forEach(function(F){return $t(K,F)}),j.change.forEach(function(F){K.deleteIndex(F.name),$t(K,F)}),j.del.forEach(function(F){return K.deleteIndex(F)})});var T=x._cfg.contentUpgrade;if(T&&x._cfg.version>_){zt(d,v),y._memoizedTables={};var I=ur(O);P.del.forEach(function(j){I[j]=k[j]}),jn(d,[d.Transaction.prototype]),Qt(d,[d.Transaction.prototype],E(I),I),y.schema=I;var M,C=yn(T);return C&&rt(),P=A.follow(function(){var j;(M=T(y))&&C&&(j=Ke.bind(null,null),M.then(j,j))}),M&&typeof M.then=="function"?A.resolve(M):P.then(function(){return M})}}),g.push(function(k){var O,P,T=x._cfg.dbschema;O=T,P=k,[].slice.call(P.db.objectStoreNames).forEach(function(I){return O[I]==null&&P.db.deleteObjectStore(I)}),jn(d,[d.Transaction.prototype]),Qt(d,[d.Transaction.prototype],d._storeNames,d._dbSchema),y.schema=d._dbSchema}),g.push(function(k){d.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(d.idbdb.version/10)===x._cfg.version?(d.idbdb.deleteObjectStore("$meta"),delete d._dbSchema.$meta,d._storeNames=d._storeNames.filter(function(O){return O!=="$meta"})):k.objectStore("$meta").put(x._cfg.version,"version"))})}),function x(){return g.length?A.resolve(g.shift()(y.idbtrans)).then(x):A.resolve()}().then(function(){Ir(w,v)})):A.resolve();var d,_,y,v,g,w}).catch(l)):(E(i).forEach(function(b){qn(n,b,i[b].primKey,i[b].indexes)}),zt(e,n),void A.follow(function(){return e.on.populate.fire(s)}).catch(l));var h,m})}function Ba(e,t){Ir(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=Gt(0,e.idbdb,t);Jt(e,e._dbSchema,t);for(var r=0,i=An(n,e._dbSchema).change;r<i.length;r++){var s=function(l){if(l.change.length||l.recreate)return{value:void 0};var f=t.objectStore(l.name);l.add.forEach(function(h){$t(f,h)})}(i[r]);if(typeof s=="object")return s.value}}function An(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],s=t[n];if(i){var l={name:n,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto)l.recreate=!0,r.change.push(l);else{var f=i.idxByName,h=s.idxByName,m=void 0;for(m in f)h[m]||l.del.push(m);for(m in h){var b=f[m],d=h[m];b?b.src!==d.src&&l.change.push(d):l.add.push(d)}(0<l.del.length||0<l.add.length||0<l.change.length)&&r.change.push(l)}}else r.add.push([n,s])}return r}function qn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(s){return $t(i,s)}),i}function Ir(e,t){E(e).forEach(function(n){t.db.objectStoreNames.contains(n)||qn(t,n,e[n].primKey,e[n].indexes)})}function $t(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Gt(e,t,n){var r={};return ae(t.objectStoreNames,0).forEach(function(i){for(var s=n.objectStore(i),l=Cn(Cr(m=s.keyPath),m||"",!0,!1,!!s.autoIncrement,m&&typeof m!="string",!0),f=[],h=0;h<s.indexNames.length;++h){var b=s.index(s.indexNames[h]),m=b.keyPath,b=Cn(b.name,m,!!b.unique,!!b.multiEntry,!1,m&&typeof m!="string",!1);f.push(b)}r[i]=Kn(i,l,f)}),r}function Jt(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var s=r[i],l=n.objectStore(s);e._hasGetAll="getAll"in l;for(var f=0;f<l.indexNames.length;++f){var h=l.indexNames[f],m=l.index(h).keyPath,b=typeof m=="string"?m:"["+ae(m).join("+")+"]";!t[s]||(m=t[s].idxByName[b])&&(m.name=h,delete t[s].idxByName[b],t[s].idxByName[h]=m)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&D.WorkerGlobalScope&&D instanceof D.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function jr(e){return e.split(",").map(function(t,n){var s=t.split(":"),r=(i=s[1])===null||i===void 0?void 0:i.trim(),i=(t=s[0].trim()).replace(/([&*]|\+\+)/g,""),s=/^\[/.test(i)?i.match(/^\[(.*)\]$/)[1].split("+"):i;return Cn(i,s||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),S(s),n===0,r)})}var Ya=(ut.prototype._createTableSchema=Kn,ut.prototype._parseIndexSyntax=jr,ut.prototype._parseStoresSpec=function(e,t){var n=this;E(e).forEach(function(r){if(e[r]!==null){var i=n._parseIndexSyntax(e[r]),s=i.shift();if(!s)throw new B.Schema("Invalid schema for table "+r+": "+e[r]);if(s.unique=!0,s.multi)throw new B.Schema("Primary key cannot be multiEntry*");i.forEach(function(l){if(l.auto)throw new B.Schema("Only primary key can be marked as autoIncrement (++)");if(!l.keyPath)throw new B.Schema("Index must have a name and cannot be an empty string")}),i=n._createTableSchema(r,s,i),t[r]=i}})},ut.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?q(this._cfg.storesSource,n):n;var n=t._versions,r={},i={};return n.forEach(function(s){q(r,s._cfg.storesSource),i=s._cfg.dbschema={},s._parseStoresSpec(r,i)}),t._dbSchema=i,jn(t,[t._allTables,t,t.Transaction.prototype]),Qt(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],E(i),i),t._storeNames=E(i),this},ut.prototype.upgrade=function(e){return this._cfg.contentUpgrade=vn(this._cfg.contentUpgrade||J,e),this},ut);function ut(){}function Fn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Me(Wt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function Nn(e){return e&&typeof e.databases=="function"}function Rn(e){return Ce(function(){return R.letThrough=!0,e()})}function Bn(e){return!("from"in e)}var le=function(e,t){if(!this){var n=new le;return e&&"d"in e&&q(n,e),n}q(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function Dt(e,t,n){var r=V(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(Bn(e))return q(e,{from:t,to:n,d:1});var i=e.l,r=e.r;if(V(n,e.from)<0)return i?Dt(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},qr(e);if(0<V(t,e.to))return r?Dt(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},qr(e);V(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<V(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,i&&!e.l&&Pt(e,i),r&&n&&Pt(e,r)}}function Pt(e,t){Bn(t)||function n(r,h){var s=h.from,l=h.to,f=h.l,h=h.r;Dt(r,s,l),f&&n(r,f),h&&n(r,h)}(e,t)}function Ar(e,t){var n=Zt(t),r=n.next();if(r.done)return!1;for(var i=r.value,s=Zt(e),l=s.next(i.from),f=l.value;!r.done&&!l.done;){if(V(f.from,i.to)<=0&&0<=V(f.to,i.from))return!0;V(i.from,f.from)<0?i=(r=n.next(f.from)).value:f=(l=s.next(i.from)).value}return!1}function Zt(e){var t=Bn(e)?null:{s:0,n:e};return{next:function(n){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&V(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||V(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function qr(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=1<r?"r":r<-1?"l":"";i&&(t=i=="r"?"l":"r",n=c({},e),r=e[i],e.from=r.from,e.to=r.to,e[i]=r[i],n[i]=r[t],(e[t]=n).d=Fr(n)),e.d=Fr(e)}function Fr(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function en(e,t){return E(t).forEach(function(n){e[n]?Pt(e[n],t[n]):e[n]=function r(i){var s,l,f={};for(s in i)X(i,s)&&(l=i[s],f[s]=!l||typeof l!="object"||cr.has(l.constructor)?l:r(l));return f}(t[n])}),e}function Yn(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&Ar(t[n],e[n])})}$(le.prototype,((be={add:function(e){return Pt(this,e),this},addKey:function(e){return Dt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return Dt(t,n,n)}),this},hasKey:function(e){var t=Zt(this).next(e).value;return t&&V(t.from,e)<=0&&0<=V(t.to,e)}})[mn]=function(){return Zt(this)},be));var ze={},Wn={},Ln=!1;function tn(e){en(Wn,e),Ln||(Ln=!0,setTimeout(function(){Ln=!1,Un(Wn,!(Wn={}))},0))}function Un(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(ze);r<i.length;r++)Nr(l=i[r],e,n,t);else for(var s in e){var l,f=/^idb\:\/\/(.*)\/(.*)\//.exec(s);f&&(s=f[1],f=f[2],(l=ze["idb://".concat(s,"/").concat(f)])&&Nr(l,e,n,t))}n.forEach(function(h){return h()})}function Nr(e,t,n,r){for(var i=[],s=0,l=Object.entries(e.queries.query);s<l.length;s++){for(var f=l[s],h=f[0],m=[],b=0,d=f[1];b<d.length;b++){var _=d[b];Yn(t,_.obsSet)?_.subscribers.forEach(function(w){return n.add(w)}):r&&m.push(_)}r&&i.push([h,m])}if(r)for(var y=0,v=i;y<v.length;y++){var g=v[y],h=g[0],m=g[1];e.queries.query[h]=m}}function Wa(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?te(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(10*e.verno),s=!1;function l(){if(t.openCanceller!==r)throw new B.DatabaseClosed("db.open() was cancelled")}function f(){return new A(function(_,y){if(l(),!n)throw new B.MissingAPI;var v=e.name,g=t.autoSchema||!i?n.open(v):n.open(v,i);if(!g)throw new B.MissingAPI;g.onerror=xe(y),g.onblocked=ee(e._fireOnBlocked),g.onupgradeneeded=ee(function(w){var x;b=g.transaction,t.autoSchema&&!e._options.allowEmptyDB?(g.onerror=_t,b.abort(),g.result.close(),(x=n.deleteDatabase(v)).onsuccess=x.onerror=ee(function(){y(new B.NoSuchDatabase("Database ".concat(v," doesnt exist")))})):(b.onerror=xe(y),w=w.oldVersion>Math.pow(2,62)?0:w.oldVersion,d=w<1,e.idbdb=g.result,s&&Ba(e,b),Ra(e,w/10,b,y))},y),g.onsuccess=ee(function(){b=null;var w,x,k,O,P,T=e.idbdb=g.result,I=ae(T.objectStoreNames);if(0<I.length)try{var M=T.transaction((O=I).length===1?O[0]:O,"readonly");if(t.autoSchema)x=T,k=M,(w=e).verno=x.version/10,k=w._dbSchema=Gt(0,x,k),w._storeNames=ae(x.objectStoreNames,0),Qt(w,[w._allTables],E(k),k);else if(Jt(e,e._dbSchema,M),((P=An(Gt(0,(P=e).idbdb,M),P._dbSchema)).add.length||P.change.some(function(C){return C.add.length||C.change.length}))&&!s)return T.close(),i=T.version+1,s=!0,_(f());zt(e,M)}catch{}at.push(e),T.onversionchange=ee(function(C){t.vcFired=!0,e.on("versionchange").fire(C)}),T.onclose=ee(function(){e.close({disableAutoOpen:!1})}),d&&(P=e._deps,M=v,T=P.indexedDB,P=P.IDBKeyRange,Nn(T)||M===Wt||Fn(T,P).put({name:M}).catch(J)),_()},y)}).catch(function(_){switch(_==null?void 0:_.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,f();break;case"VersionError":if(0<i)return i=0,f()}return A.reject(_)})}var h,m=t.dbReadyResolve,b=null,d=!1;return A.race([r,(typeof navigator>"u"?A.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(_){function y(){return indexedDB.databases().finally(_)}h=setInterval(y,100),y()}).finally(function(){return clearInterval(h)}):Promise.resolve()).then(f)]).then(function(){return l(),t.onReadyBeingFired=[],A.resolve(Rn(function(){return e.on.ready.fire(e.vip)})).then(function _(){if(0<t.onReadyBeingFired.length){var y=t.onReadyBeingFired.reduce(vn,J);return t.onReadyBeingFired=[],A.resolve(Rn(function(){return y(e.vip)})).then(_)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(_){t.dbOpenError=_;try{b&&b.abort()}catch{}return r===t.openCanceller&&e._close(),te(_)}).finally(function(){t.openComplete=!0,m()}).then(function(){var _;return d&&(_={},e.tables.forEach(function(y){y.schema.indexes.forEach(function(v){v.name&&(_["idb://".concat(e.name,"/").concat(y.name,"/").concat(v.name)]=new le(-1/0,[[[]]]))}),_["idb://".concat(e.name,"/").concat(y.name,"/")]=_["idb://".concat(e.name,"/").concat(y.name,"/:dels")]=new le(-1/0,[[[]]])}),Ae(xt).fire(_),Un(_,!0)),e})}function Hn(e){function t(s){return e.next(s)}var n=i(t),r=i(function(s){return e.throw(s)});function i(s){return function(h){var f=s(h),h=f.value;return f.done?h:h&&typeof h.then=="function"?h.then(n,r):S(h)?Promise.all(h).then(n,r):n(h)}}return i(t)()}function nn(e,t,n){for(var r=S(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var La={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return c(c({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},s=[];function l(d,_,y){var v=Ot(d),g=i[v]=i[v]||[],w=d==null?0:typeof d=="string"?1:d.length,x=0<_,x=c(c({},y),{name:x?"".concat(v,"(virtual-from:").concat(y.name,")"):y.name,lowLevelIndex:y,isVirtual:x,keyTail:_,keyLength:w,extractKey:In(d),unique:!x&&y.unique});return g.push(x),x.isPrimaryKey||s.push(x),1<w&&l(w===2?d[0]:d.slice(0,w-1),_+1,y),g.sort(function(k,O){return k.keyTail-O.keyTail}),x}t=l(r.primaryKey.keyPath,0,r.primaryKey),i[":id"]=[t];for(var f=0,h=r.indexes;f<h.length;f++){var m=h[f];l(m.keyPath,0,m)}function b(d){var _,y=d.query.index;return y.isVirtual?c(c({},d),{query:{index:y.lowLevelIndex,range:(_=d.query.range,y=y.keyTail,{type:_.type===1?2:_.type,lower:nn(_.lower,_.lowerOpen?e.MAX_KEY:e.MIN_KEY,y),lowerOpen:!0,upper:nn(_.upper,_.upperOpen?e.MIN_KEY:e.MAX_KEY,y),upperOpen:!0})}}):d}return c(c({},n),{schema:c(c({},r),{primaryKey:t,indexes:s,getIndexByKeyPath:function(d){return(d=i[Ot(d)])&&d[0]}}),count:function(d){return n.count(b(d))},query:function(d){return n.query(b(d))},openCursor:function(d){var _=d.query.index,y=_.keyTail,v=_.isVirtual,g=_.keyLength;return v?n.openCursor(b(d)).then(function(x){return x&&w(x)}):n.openCursor(d);function w(x){return Object.create(x,{continue:{value:function(k){k!=null?x.continue(nn(k,d.reverse?e.MAX_KEY:e.MIN_KEY,y)):d.unique?x.continue(x.key.slice(0,g).concat(d.reverse?e.MIN_KEY:e.MAX_KEY,y)):x.continue()}},continuePrimaryKey:{value:function(k,O){x.continuePrimaryKey(nn(k,e.MAX_KEY,y),O)}},primaryKey:{get:function(){return x.primaryKey}},key:{get:function(){var k=x.key;return g===1?k[0]:k.slice(0,g)}},value:{get:function(){return x.value}}})}}})}})}};function Vn(e,t,n,r){return n=n||{},r=r||"",E(e).forEach(function(i){var s,l,f;X(t,i)?(s=e[i],l=t[i],typeof s=="object"&&typeof l=="object"&&s&&l?(f=hn(s))!==hn(l)?n[r+i]=t[i]:f==="Object"?Vn(s,l,n,r+i+"."):s!==l&&(n[r+i]=t[i]):s!==l&&(n[r+i]=t[i])):n[r+i]=void 0}),E(t).forEach(function(i){X(e,i)||(n[r+i]=t[i])}),n}function Xn(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Ua={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return c(c({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return c(c({},n),{mutate:function(i){var s=R.trans,l=s.table(t).hook,f=l.deleting,h=l.creating,m=l.updating;switch(i.type){case"add":if(h.fire===J)break;return s._promise("readwrite",function(){return b(i)},!0);case"put":if(h.fire===J&&m.fire===J)break;return s._promise("readwrite",function(){return b(i)},!0);case"delete":if(f.fire===J)break;return s._promise("readwrite",function(){return b(i)},!0);case"deleteRange":if(f.fire===J)break;return s._promise("readwrite",function(){return function d(_,y,v){return n.query({trans:_,values:!1,query:{index:r,range:y},limit:v}).then(function(g){var w=g.result;return b({type:"delete",keys:w,trans:_}).then(function(x){return 0<x.numFailures?Promise.reject(x.failures[0]):w.length<v?{failures:[],numFailures:0,lastResult:void 0}:d(_,c(c({},y),{lower:w[w.length-1],lowerOpen:!0}),v)})})}(i.trans,i.range,1e4)},!0)}return n.mutate(i);function b(d){var _,y,v,g=R.trans,w=d.keys||Xn(r,d);if(!w)throw new Error("Keys missing");return(d=d.type==="add"||d.type==="put"?c(c({},d),{keys:w}):c({},d)).type!=="delete"&&(d.values=p([],d.values)),d.keys&&(d.keys=p([],d.keys)),_=n,v=w,((y=d).type==="add"?Promise.resolve([]):_.getMany({trans:y.trans,keys:v,cache:"immutable"})).then(function(x){var k=w.map(function(O,P){var T,I,M,C=x[P],j={onerror:null,onsuccess:null};return d.type==="delete"?f.fire.call(j,O,C,g):d.type==="add"||C===void 0?(T=h.fire.call(j,O,d.values[P],g),O==null&&T!=null&&(d.keys[P]=O=T,r.outbound||ye(d.values[P],r.keyPath,O))):(T=Vn(C,d.values[P]),(I=m.fire.call(j,T,O,C,g))&&(M=d.values[P],Object.keys(I).forEach(function(K){X(M,K)?M[K]=I[K]:ye(M,K,I[K])}))),j});return n.mutate(d).then(function(O){for(var P=O.failures,T=O.results,I=O.numFailures,O=O.lastResult,M=0;M<w.length;++M){var C=(T||w)[M],j=k[M];C==null?j.onerror&&j.onerror(P[M]):j.onsuccess&&j.onsuccess(d.type==="put"&&x[M]?d.values[M]:C)}return{failures:P,results:T,numFailures:I,lastResult:O}}).catch(function(O){return k.forEach(function(P){return P.onerror&&P.onerror(O)}),Promise.reject(O)})})}}})}})}};function Rr(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,s=0;i<t.keys.length&&s<e.length;++i)V(t.keys[i],e[s])===0&&(r.push(n?Ne(t.values[i]):t.values[i]),++s);return r.length===e.length?r:null}catch{return null}}var Ha={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return c(c({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Rr(r.keys,r.trans._cache,r.cache==="clone");return i?A.resolve(i):n.getMany(r).then(function(s){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?Ne(s):s},s})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}};function Br(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Yr(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Va={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new le(e.MIN_KEY,e.MAX_KEY);return c(c({},e),{transaction:function(r,i,s){if(R.subscr&&i!=="readonly")throw new B.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(R.querier));return e.transaction(r,i,s)},table:function(r){var i=e.table(r),s=i.schema,l=s.primaryKey,d=s.indexes,f=l.extractKey,h=l.outbound,m=l.autoIncrement&&d.filter(function(y){return y.compound&&y.keyPath.includes(l.keyPath)}),b=c(c({},i),{mutate:function(y){function v(K){return K="idb://".concat(t,"/").concat(r,"/").concat(K),O[K]||(O[K]=new le)}var g,w,x,k=y.trans,O=y.mutatedParts||(y.mutatedParts={}),P=v(""),T=v(":dels"),I=y.type,j=y.type==="deleteRange"?[y.range]:y.type==="delete"?[y.keys]:y.values.length<50?[Xn(l,y).filter(function(K){return K}),y.values]:[],M=j[0],C=j[1],j=y.trans._cache;return S(M)?(P.addKeys(M),(j=I==="delete"||M.length===C.length?Rr(M,j):null)||T.addKeys(M),(j||C)&&(g=v,w=j,x=C,s.indexes.forEach(function(K){var F=g(K.name||"");function W(U){return U!=null?K.extractKey(U):null}function L(U){return K.multiEntry&&S(U)?U.forEach(function(ge){return F.addKey(ge)}):F.addKey(U)}(w||x).forEach(function(U,fe){var Y=w&&W(w[fe]),fe=x&&W(x[fe]);V(Y,fe)!==0&&(Y!=null&&L(Y),fe!=null&&L(fe))})}))):M?(C={from:(C=M.lower)!==null&&C!==void 0?C:e.MIN_KEY,to:(C=M.upper)!==null&&C!==void 0?C:e.MAX_KEY},T.add(C),P.add(C)):(P.add(n),T.add(n),s.indexes.forEach(function(K){return v(K.name).add(n)})),i.mutate(y).then(function(K){return!M||y.type!=="add"&&y.type!=="put"||(P.addKeys(K.results),m&&m.forEach(function(F){for(var W=y.values.map(function(Y){return F.extractKey(Y)}),L=F.keyPath.findIndex(function(Y){return Y===l.keyPath}),U=0,ge=K.results.length;U<ge;++U)W[U][L]=K.results[U];v(F.name).addKeys(W)})),k.mutatedParts=en(k.mutatedParts||{},O),K})}}),d=function(v){var g=v.query,v=g.index,g=g.range;return[v,new le((v=g.lower)!==null&&v!==void 0?v:e.MIN_KEY,(g=g.upper)!==null&&g!==void 0?g:e.MAX_KEY)]},_={get:function(y){return[l,new le(y.key)]},getMany:function(y){return[l,new le().addKeys(y.keys)]},count:d,query:d,openCursor:d};return E(_).forEach(function(y){b[y]=function(v){var g=R.subscr,w=!!g,x=Br(R,i)&&Yr(y,v)?v.obsSet={}:g;if(w){var k=function(C){return C="idb://".concat(t,"/").concat(r,"/").concat(C),x[C]||(x[C]=new le)},O=k(""),P=k(":dels"),g=_[y](v),w=g[0],g=g[1];if((y==="query"&&w.isPrimaryKey&&!v.values?P:k(w.name||"")).add(g),!w.isPrimaryKey){if(y!=="count"){var T=y==="query"&&h&&v.values&&i.query(c(c({},v),{values:!1}));return i[y].apply(this,arguments).then(function(C){if(y==="query"){if(h&&v.values)return T.then(function(W){return W=W.result,O.addKeys(W),C});var j=v.values?C.result.map(f):C.result;(v.values?O:P).addKeys(j)}else if(y==="openCursor"){var K=C,F=v.values;return K&&Object.create(K,{key:{get:function(){return P.addKey(K.primaryKey),K.key}},primaryKey:{get:function(){var W=K.primaryKey;return P.addKey(W),W}},value:{get:function(){return F&&O.addKey(K.primaryKey),K.value}}})}return C})}P.add(n)}}return i[y].apply(this,arguments)}}),b}})}};function Wr(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var r=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===r?null:(t=c({},t),S(t.keys)&&(t.keys=t.keys.filter(function(i,s){return!(s in n.failures)})),"values"in t&&S(t.values)&&(t.values=t.values.filter(function(i,s){return!(s in n.failures)})),t)}function zn(e,t){return n=e,((r=t).lower===void 0||(r.lowerOpen?0<V(n,r.lower):0<=V(n,r.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?V(e,t.upper)<0:V(e,t.upper)<=0));var n,r}function Lr(e,t,_,r,i,s){if(!_||_.length===0)return e;var l=t.query.index,f=l.multiEntry,h=t.query.range,m=r.schema.primaryKey.extractKey,b=l.extractKey,d=(l.lowLevelIndex||l).extractKey,_=_.reduce(function(y,v){var g=y,w=[];if(v.type==="add"||v.type==="put")for(var x=new le,k=v.values.length-1;0<=k;--k){var O,P=v.values[k],T=m(P);x.hasKey(T)||(O=b(P),(f&&S(O)?O.some(function(K){return zn(K,h)}):zn(O,h))&&(x.addKey(T),w.push(P)))}switch(v.type){case"add":var I=new le().addKeys(t.values?y.map(function(F){return m(F)}):y),g=y.concat(t.values?w.filter(function(F){return F=m(F),!I.hasKey(F)&&(I.addKey(F),!0)}):w.map(function(F){return m(F)}).filter(function(F){return!I.hasKey(F)&&(I.addKey(F),!0)}));break;case"put":var M=new le().addKeys(v.values.map(function(F){return m(F)}));g=y.filter(function(F){return!M.hasKey(t.values?m(F):F)}).concat(t.values?w:w.map(function(F){return m(F)}));break;case"delete":var C=new le().addKeys(v.keys);g=y.filter(function(F){return!C.hasKey(t.values?m(F):F)});break;case"deleteRange":var j=v.range;g=y.filter(function(F){return!zn(m(F),j)})}return g},e);return _===e?e:(_.sort(function(y,v){return V(d(y),d(v))||V(m(y),m(v))}),t.limit&&t.limit<1/0&&(_.length>t.limit?_.length=t.limit:e.length===t.limit&&_.length<t.limit&&(i.dirty=!0)),s?Object.freeze(_):_)}function Ur(e,t){return V(e.lower,t.lower)===0&&V(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Xa(e,t){return function(n,r,i,s){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;if((r=V(n,r))===0){if(i&&s)return 0;if(i)return 1;if(s)return-1}return r}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,r,i,s){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;if((r=V(n,r))===0){if(i&&s)return 0;if(i)return-1;if(s)return 1}return r}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function za(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var i,s;e.subscribers.delete(n),e.subscribers.size===0&&(i=e,s=t,setTimeout(function(){i.subscribers.size===0&&Re(s,i)},3e3))})}var Qa={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return c(c({},e),{transaction:function(n,r,i){var s,l,f=e.transaction(n,r,i);return r==="readwrite"&&(l=(s=new AbortController).signal,i=function(h){return function(){if(s.abort(),r==="readwrite"){for(var m=new Set,b=0,d=n;b<d.length;b++){var _=d[b],y=ze["idb://".concat(t,"/").concat(_)];if(y){var v=e.table(_),g=y.optimisticOps.filter(function(F){return F.trans===f});if(f._explicit&&h&&f.mutatedParts)for(var w=0,x=Object.values(y.queries.query);w<x.length;w++)for(var k=0,O=(I=x[w]).slice();k<O.length;k++)Yn((M=O[k]).obsSet,f.mutatedParts)&&(Re(I,M),M.subscribers.forEach(function(F){return m.add(F)}));else if(0<g.length){y.optimisticOps=y.optimisticOps.filter(function(F){return F.trans!==f});for(var P=0,T=Object.values(y.queries.query);P<T.length;P++)for(var I,M,C,j=0,K=(I=T[P]).slice();j<K.length;j++)(M=K[j]).res!=null&&f.mutatedParts&&(h&&!M.dirty?(C=Object.isFrozen(M.res),C=Lr(M.res,M.req,g,v,M,C),M.dirty?(Re(I,M),M.subscribers.forEach(function(F){return m.add(F)})):C!==M.res&&(M.res=C,M.promise=A.resolve({result:C}))):(M.dirty&&Re(I,M),M.subscribers.forEach(function(F){return m.add(F)})))}}}m.forEach(function(F){return F()})}}},f.addEventListener("abort",i(!1),{signal:l}),f.addEventListener("error",i(!1),{signal:l}),f.addEventListener("complete",i(!0),{signal:l})),f},table:function(n){var r=e.table(n),i=r.schema.primaryKey;return c(c({},r),{mutate:function(s){var l=R.trans;if(i.outbound||l.db._options.cache==="disabled"||l.explicit||l.idbtrans.mode!=="readwrite")return r.mutate(s);var f=ze["idb://".concat(t,"/").concat(n)];return f?(l=r.mutate(s),s.type!=="add"&&s.type!=="put"||!(50<=s.values.length||Xn(i,s).some(function(h){return h==null}))?(f.optimisticOps.push(s),s.mutatedParts&&tn(s.mutatedParts),l.then(function(h){0<h.numFailures&&(Re(f.optimisticOps,s),(h=Wr(0,s,h))&&f.optimisticOps.push(h),s.mutatedParts&&tn(s.mutatedParts))}),l.catch(function(){Re(f.optimisticOps,s),s.mutatedParts&&tn(s.mutatedParts)})):l.then(function(h){var m=Wr(0,c(c({},s),{values:s.values.map(function(b,d){var _;return h.failures[d]?b:(b=(_=i.keyPath)!==null&&_!==void 0&&_.includes(".")?Ne(b):c({},b),ye(b,i.keyPath,h.results[d]),b)})}),h);f.optimisticOps.push(m),queueMicrotask(function(){return s.mutatedParts&&tn(s.mutatedParts)})}),l):r.mutate(s)},query:function(s){if(!Br(R,r)||!Yr("query",s))return r.query(s);var l=((m=R.trans)===null||m===void 0?void 0:m.db._options.cache)==="immutable",d=R,f=d.requery,h=d.signal,m=function(v,g,w,x){var k=ze["idb://".concat(v,"/").concat(g)];if(!k)return[];if(!(g=k.queries[w]))return[null,!1,k,null];var O=g[(x.query?x.query.index.name:null)||""];if(!O)return[null,!1,k,null];switch(w){case"query":var P=O.find(function(T){return T.req.limit===x.limit&&T.req.values===x.values&&Ur(T.req.query.range,x.query.range)});return P?[P,!0,k,O]:[O.find(function(T){return("limit"in T.req?T.req.limit:1/0)>=x.limit&&(!x.values||T.req.values)&&Xa(T.req.query.range,x.query.range)}),!1,k,O];case"count":return P=O.find(function(T){return Ur(T.req.query.range,x.query.range)}),[P,!!P,k,O]}}(t,n,"query",s),b=m[0],d=m[1],_=m[2],y=m[3];return b&&d?b.obsSet=s.obsSet:(d=r.query(s).then(function(v){var g=v.result;if(b&&(b.res=g),l){for(var w=0,x=g.length;w<x;++w)Object.freeze(g[w]);Object.freeze(g)}else v.result=Ne(g);return v}).catch(function(v){return y&&b&&Re(y,b),Promise.reject(v)}),b={obsSet:s.obsSet,promise:d,subscribers:new Set,type:"query",req:s,dirty:!1},y?y.push(b):(y=[b],(_=_||(ze["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[s.query.index.name||""]=y)),za(b,y,f,h),b.promise.then(function(v){return{result:Lr(v.result,s,_==null?void 0:_.optimisticOps,r,b,l)}})}})}})}};function rn(e,t){return new Proxy(e,{get:function(n,r,i){return r==="db"?t:Reflect.get(n,r,i)}})}var Me=(ne.prototype.version=function(e){if(isNaN(e)||e<.1)throw new B.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new B.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(r){return r._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(Na),n.stores({}),this._state.autoSchema=!1,n)},ne.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||R.letThrough||this._vip)?e():new A(function(n,r){if(t._state.openComplete)return r(new B.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new B.DatabaseClosed);t.open().catch(J)}t._state.dbReadyPromise.then(n,r)}).then(e)},ne.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;return i&&this.unuse({stack:t,name:i}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:r??10,name:i}),e.sort(function(s,l){return s.level-l.level}),this},ne.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(i){return r?i.create!==r:!!n&&i.name!==n})),this},ne.prototype.open=function(){var e=this;return He(Te,function(){return Wa(e)})},ne.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=at.indexOf(this);if(0<=t&&at.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new A(function(n){e.dbReadyResolve=n}),e.openCanceller=new A(function(n,r){e.cancelOpen=r}))},ne.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new B.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new B.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},ne.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",r=this._state;return new A(function(i,s){function l(){t.close(e);var f=t._deps.indexedDB.deleteDatabase(t.name);f.onsuccess=ee(function(){var h,m,b;h=t._deps,m=t.name,b=h.indexedDB,h=h.IDBKeyRange,Nn(b)||m===Wt||Fn(b,h).delete(m).catch(J),i()}),f.onerror=xe(s),f.onblocked=t._fireOnBlocked}if(n)throw new B.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(l):l()})},ne.prototype.backendDB=function(){return this.idbdb},ne.prototype.isOpen=function(){return this.idbdb!==null},ne.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},ne.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ne.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ne.prototype,"tables",{get:function(){var e=this;return E(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),ne.prototype.transaction=function(){var e=(function(t,n,r){var i=arguments.length;if(i<2)throw new B.InvalidArgument("Too few arguments");for(var s=new Array(i-1);--i;)s[i-1]=arguments[i];return r=s.pop(),[t,sr(s),r]}).apply(this,arguments);return this._transaction.apply(this,e)},ne.prototype._transaction=function(e,t,n){var r=this,i=R.trans;i&&i.db===this&&e.indexOf("!")===-1||(i=null);var s,l,f=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(l=t.map(function(m){if(m=m instanceof r.Table?m.name:m,typeof m!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return m}),e=="r"||e===Pn)s=Pn;else{if(e!="rw"&&e!=Sn)throw new B.InvalidArgument("Invalid transaction mode: "+e);s=Sn}if(i){if(i.mode===Pn&&s===Sn){if(!f)throw new B.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&l.forEach(function(m){if(i&&i.storeNames.indexOf(m)===-1){if(!f)throw new B.SubTransaction("Table "+m+" not included in parent transaction.");i=null}}),f&&i&&!i.active&&(i=null)}}catch(m){return i?i._promise(null,function(b,d){d(m)}):te(m)}var h=(function m(b,d,_,y,v){return A.resolve().then(function(){var g=R.transless||R,w=b._createTransaction(d,_,b._dbSchema,y);if(w.explicit=!0,g={trans:w,transless:g},y)w.idbtrans=y.idbtrans;else try{w.create(),w.idbtrans._explicit=!0,b._state.PR1398_maxLoop=3}catch(O){return O.name===pn.InvalidState&&b.isOpen()&&0<--b._state.PR1398_maxLoop?(b.close({disableAutoOpen:!1}),b.open().then(function(){return m(b,d,_,null,v)})):te(O)}var x,k=yn(v);return k&&rt(),g=A.follow(function(){var O;(x=v.call(w,w))&&(k?(O=Ke.bind(null,null),x.then(O,O)):typeof x.next=="function"&&typeof x.throw=="function"&&(x=Hn(x)))},g),(x&&typeof x.then=="function"?A.resolve(x).then(function(O){return w.active?O:te(new B.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):g.then(function(){return x})).then(function(O){return y&&w._resolve(),w._completion.then(function(){return O})}).catch(function(O){return w._reject(O),te(O)})})}).bind(null,this,s,l,i,n);return i?i._promise(s,h,"lock"):R.trans?He(R.transless,function(){return r._whenReady(h)}):this._whenReady(h)},ne.prototype.table=function(e){if(!X(this._allTables,e))throw new B.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},ne);function ne(e,t){var n=this;this._middlewares={},this.verno=0;var r=ne.dependencies;this._options=t=c({addons:ne.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},r=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var i,s,l,f,h,m={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:J,dbReadyPromise:null,cancelOpen:J,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};m.dbReadyPromise=new A(function(d){m.dbReadyResolve=d}),m.openCanceller=new A(function(d,_){m.cancelOpen=_}),this._state=m,this.name=e,this.on=bt(this,"populate","blocked","versionchange","close",{ready:[vn,J]}),this.once=function(d,_){var y=function(){for(var v=[],g=0;g<arguments.length;g++)v[g]=arguments[g];n.on(d).unsubscribe(y),_.apply(n,v)};return n.on(d,y)},this.on.ready.subscribe=se(this.on.ready.subscribe,function(d){return function(_,y){ne.vip(function(){var v,g=n._state;g.openComplete?(g.dbOpenError||A.resolve().then(_),y&&d(_)):g.onReadyBeingFired?(g.onReadyBeingFired.push(_),y&&d(_)):(d(_),v=n,y||d(function w(){v.on.ready.unsubscribe(_),v.on.ready.unsubscribe(w)}))})}}),this.Collection=(i=this,wt(Ca.prototype,function(x,w){this.db=i;var y=br,v=null;if(w)try{y=w()}catch(k){v=k}var g=x._ctx,w=g.table,x=w.hook.reading.fire;this._ctx={table:w,index:g.index,isPrimKey:!g.index||w.schema.primKey.keyPath&&g.index===w.schema.primKey.name,range:y,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:v,or:g.or,valueMapper:x!==ht?x:null}})),this.Table=(s=this,wt(Dr.prototype,function(d,_,y){this.db=s,this._tx=y,this.name=d,this.schema=_,this.hook=s._allTables[d]?s._allTables[d].hook:bt(null,{creating:[xa,J],reading:[_a,ht],updating:[Oa,J],deleting:[ka,J]})})),this.Transaction=(l=this,wt(ja.prototype,function(d,_,y,v,g){var w=this;d!=="readonly"&&_.forEach(function(x){x=(x=y[x])===null||x===void 0?void 0:x.yProps,x&&(_=_.concat(x.map(function(k){return k.updatesTable})))}),this.db=l,this.mode=d,this.storeNames=_,this.schema=y,this.chromeTransactionDurability=v,this.idbtrans=null,this.on=bt(this,"complete","error","abort"),this.parent=g||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new A(function(x,k){w._resolve=x,w._reject=k}),this._completion.then(function(){w.active=!1,w.on.complete.fire()},function(x){var k=w.active;return w.active=!1,w.on.error.fire(x),w.parent?w.parent._reject(x):k&&w.idbtrans&&w.idbtrans.abort(),te(x)})})),this.Version=(f=this,wt(Ya.prototype,function(d){this.db=f,this._cfg={version:d,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(h=this,wt(Tr.prototype,function(d,_,y){if(this.db=h,this._ctx={table:d,index:_===":id"?null:_,or:y},this._cmp=this._ascending=V,this._descending=function(v,g){return V(g,v)},this._max=function(v,g){return 0<V(v,g)?v:g},this._min=function(v,g){return V(v,g)<0?v:g},this._IDBKeyRange=h._deps.IDBKeyRange,!this._IDBKeyRange)throw new B.MissingAPI})),this.on("versionchange",function(d){0<d.newVersion,n.close({disableAutoOpen:!1})}),this.on("blocked",function(d){!d.newVersion||d.newVersion<d.oldVersion}),this._maxKey=kt(t.IDBKeyRange),this._createTransaction=function(d,_,y,v){return new n.Transaction(d,_,y,n._options.chromeTransactionDurability,v)},this._fireOnBlocked=function(d){n.on("blocked").fire(d),at.filter(function(_){return _.name===n.name&&_!==n&&!_._state.vcFired}).map(function(_){return _.on("versionchange").fire(d)})},this.use(Ha),this.use(Qa),this.use(Va),this.use(La),this.use(Ua);var b=new Proxy(this,{get:function(d,_,y){if(_==="_vip")return!0;if(_==="table")return function(g){return rn(n.table(g),b)};var v=Reflect.get(d,_,y);return v instanceof Dr?rn(v,b):_==="tables"?v.map(function(g){return rn(g,b)}):_==="_createTransaction"?function(){return rn(v.apply(this,arguments),b)}:v}});this.vip=b,r.forEach(function(d){return d(n)})}var an,be=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",$a=(Qn.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},Qn.prototype[be]=function(){return this},Qn);function Qn(e){this._subscribe=e}try{an={indexedDB:D.indexedDB||D.mozIndexedDB||D.webkitIndexedDB||D.msIndexedDB,IDBKeyRange:D.IDBKeyRange||D.webkitIDBKeyRange}}catch{an={indexedDB:null,IDBKeyRange:null}}function Hr(e){var t,n=!1,r=new $a(function(i){var s=yn(e),l,f=!1,h={},m={},b={get closed(){return f},unsubscribe:function(){f||(f=!0,l&&l.abort(),d&&Ae.storagemutated.unsubscribe(y))}};i.start&&i.start(b);var d=!1,_=function(){return Dn(v)},y=function(g){en(h,g),Yn(m,h)&&_()},v=function(){var g,w,x;!f&&an.indexedDB&&(h={},g={},l&&l.abort(),l=new AbortController,x=function(k){var O=tt();try{s&&rt();var P=Ce(e,k);return P=s?P.finally(Ke):P}finally{O&&nt()}}(w={subscr:g,signal:l.signal,requery:_,querier:e,trans:null}),Promise.resolve(x).then(function(k){n=!0,t=k,f||w.signal.aborted||(h={},function(O){for(var P in O)if(X(O,P))return;return 1}(m=g)||d||(Ae(xt,y),d=!0),Dn(function(){return!f&&i.next&&i.next(k)}))},function(k){n=!1,["DatabaseClosedError","AbortError"].includes(k==null?void 0:k.name)||f||Dn(function(){f||i.error&&i.error(k)})}))};return setTimeout(_,0),b});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var Qe=Me;function $n(e){var t=qe;try{qe=!0,Ae.storagemutated.fire(e),Un(e,!0)}finally{qe=t}}$(Qe,c(c({},It),{delete:function(e){return new Qe(e,{addons:[]}).delete()},exists:function(e){return new Qe(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=Qe.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(Nn(n)?Promise.resolve(n.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==Wt})}):Fn(n,t).toCollection().primaryKeys()).then(e)}catch{return te(new B.MissingAPI)}var t,n},defineClass:function(){return function(e){q(this,e)}},ignoreTransaction:function(e){return R.trans?He(R.transless,e):e()},vip:Rn,async:function(e){return function(){try{var t=Hn(e.apply(this,arguments));return t&&typeof t.then=="function"?t:A.resolve(t)}catch(n){return te(n)}}},spawn:function(e,t,n){try{var r=Hn(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:A.resolve(r)}catch(i){return te(i)}},currentTransaction:{get:function(){return R.trans||null}},waitFor:function(e,t){return t=A.resolve(typeof e=="function"?Qe.ignoreTransaction(e):e).timeout(t||6e4),R.trans?R.trans.waitFor(t):t},Promise:A,debug:{get:function(){return _e},set:function(e){dr(e)}},derive:pe,extend:q,props:$,override:se,Events:bt,on:Ae,liveQuery:Hr,extendObservabilitySet:en,getByKeyPath:De,setByKeyPath:ye,delByKeyPath:function(e,t){typeof t=="string"?ye(e,t,void 0):"length"in t&&[].map.call(t,function(n){ye(e,n,void 0)})},shallowClone:ur,deepClone:Ne,getObjectDiff:Vn,cmp:V,asap:or,minKey:-1/0,addons:[],connections:at,errnames:pn,dependencies:an,cache:ze,semVer:"4.2.1",version:"4.2.1".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),Qe.maxKey=kt(Qe.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ae(xt,function(e){qe||(e=new CustomEvent(Tn,{detail:e}),qe=!0,dispatchEvent(e),qe=!1)}),addEventListener(Tn,function(e){e=e.detail,qe||$n(e)}));var st,qe=!1,Vr=function(){};return typeof BroadcastChannel<"u"&&((Vr=function(){(st=new BroadcastChannel(Tn)).onmessage=function(e){return e.data&&$n(e.data)}})(),typeof st.unref=="function"&&st.unref(),Ae(xt,function(e){qe||st.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Me.disableBfCache&&e.persisted){st!=null&&st.close();for(var t=0,n=at;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Me.disableBfCache&&e.persisted&&(Vr(),$n({all:new le(-1/0,[[]])}))})),A.rejectionMapper=function(e,t){return!e||e instanceof Ze||e instanceof TypeError||e instanceof SyntaxError||!e.name||!fr[e.name]?e:(t=new fr[e.name](t||e.message,e),"stack"in e&&re(t,"stack",{get:function(){return this.inner.stack}}),t)},dr(_e),c(Me,Object.freeze({__proto__:null,Dexie:Me,liveQuery:Hr,Entity:wr,cmp:V,PropModification:gt,replacePrefix:function(e,t){return new gt({replacePrefix:[e,t]})},add:function(e){return new gt({add:e})},remove:function(e){return new gt({remove:e})},default:Me,RangeSet:le,mergeRanges:Pt,rangesOverlap:Ar}),{default:Me}),Me})})(ia);var oi=ia.exports;const tr=Ga(oi),Gr=Symbol.for("Dexie"),nr=globalThis[Gr]||(globalThis[Gr]=tr);if(tr.semVer!==nr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${tr.semVer} and ${nr.semVer}`);const{liveQuery:Yo,mergeRanges:Wo,rangesOverlap:Lo,RangeSet:Uo,cmp:Ho,Entity:Vo,PropModification:Xo,replacePrefix:zo,add:Qo,remove:$o,DexieYProvider:Go}=nr,oa=6048e5,ui=864e5,rr=6e4,ar=36e5,sn=43200,Jr=1440,Zr=Symbol.for("constructDateFrom");function he(o,a){return typeof o=="function"?o(a):o&&typeof o=="object"&&Zr in o?o[Zr](a):o instanceof Date?new o.constructor(a):new Date(a)}function Q(o,a){return he(a||o,o)}function si(o,a,u){const c=Q(o,u==null?void 0:u.in);return isNaN(a)?he(o,NaN):(a&&c.setDate(c.getDate()+a),c)}function ci(o,a,u){const c=Q(o,u==null?void 0:u.in);if(isNaN(a))return he(o,NaN);if(!a)return c;const p=c.getDate(),D=he(o,c.getTime());D.setMonth(c.getMonth()+a+1,0);const E=D.getDate();return p>=E?D:(c.setFullYear(D.getFullYear(),D.getMonth(),p),c)}function Jo(o,a){const u=Q(o,a==null?void 0:a.in).getDay();return u===0||u===6}let li={};function ft(){return li}function Ee(o,a){var S,q,N,H;const u=ft(),c=(a==null?void 0:a.weekStartsOn)??((q=(S=a==null?void 0:a.locale)==null?void 0:S.options)==null?void 0:q.weekStartsOn)??u.weekStartsOn??((H=(N=u.locale)==null?void 0:N.options)==null?void 0:H.weekStartsOn)??0,p=Q(o,a==null?void 0:a.in),D=p.getDay(),E=(D<c?7:0)+D-c;return p.setDate(p.getDate()-E),p.setHours(0,0,0,0),p}function ln(o,a){return Ee(o,{...a,weekStartsOn:1})}function ua(o,a){const u=Q(o,a==null?void 0:a.in),c=u.getFullYear(),p=he(u,0);p.setFullYear(c+1,0,4),p.setHours(0,0,0,0);const D=ln(p),E=he(u,0);E.setFullYear(c,0,4),E.setHours(0,0,0,0);const S=ln(E);return u.getTime()>=D.getTime()?c+1:u.getTime()>=S.getTime()?c:c-1}function fn(o){const a=Q(o),u=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return u.setUTCFullYear(a.getFullYear()),+o-+u}function we(o,...a){const u=he.bind(null,o||a.find(c=>typeof c=="object"));return a.map(u)}function dn(o,a){const u=Q(o,a==null?void 0:a.in);return u.setHours(0,0,0,0),u}function sa(o,a,u){const[c,p]=we(u==null?void 0:u.in,o,a),D=dn(c),E=dn(p),S=+D-fn(D),q=+E-fn(E);return Math.round((S-q)/ui)}function fi(o,a){const u=ua(o,a),c=he(o,0);return c.setFullYear(u,0,4),c.setHours(0,0,0,0),ln(c)}function di(o,a,u){return si(o,a*7,u)}function lt(o,a){const u=+Q(o)-+Q(a);return u<0?-1:u>0?1:u}function ca(o){return he(o,Date.now())}function hi(o,a,u){const[c,p]=we(u==null?void 0:u.in,o,a);return+dn(c)==+dn(p)}function mi(o){return o instanceof Date||typeof o=="object"&&Object.prototype.toString.call(o)==="[object Date]"}function yi(o){return!(!mi(o)&&typeof o!="number"||isNaN(+Q(o)))}function pi(o,a,u){const[c,p]=we(u==null?void 0:u.in,o,a),D=c.getFullYear()-p.getFullYear(),E=c.getMonth()-p.getMonth();return D*12+E}function vi(o,a,u){const[c,p]=we(u==null?void 0:u.in,o,a);return c.getFullYear()-p.getFullYear()}function Zo(o,a,u){const[c,p]=we(u==null?void 0:u.in,o,a),D=ea(c,p),E=Math.abs(sa(c,p));c.setDate(c.getDate()-D*E);const S=+(ea(c,p)===-D),q=D*(E-S);return q===0?0:q}function ea(o,a){const u=o.getFullYear()-a.getFullYear()||o.getMonth()-a.getMonth()||o.getDate()-a.getDate()||o.getHours()-a.getHours()||o.getMinutes()-a.getMinutes()||o.getSeconds()-a.getSeconds()||o.getMilliseconds()-a.getMilliseconds();return u<0?-1:u>0?1:u}function ir(o){return a=>{const u=Math.trunc,c=u(a);return c===0?0:c}}function eu(o,a,u){const[c,p]=we(u==null?void 0:u.in,o,a),D=(+c-+p)/ar;return ir()(D)}function la(o,a){return+Q(o)-+Q(a)}function tu(o,a,u){const c=la(o,a)/rr;return ir()(c)}function gi(o,a){const u=Q(o,a==null?void 0:a.in);return u.setHours(23,59,59,999),u}function bi(o,a){const u=Q(o,a==null?void 0:a.in),c=u.getMonth();return u.setFullYear(u.getFullYear(),c+1,0),u.setHours(23,59,59,999),u}function wi(o,a){const u=Q(o,a==null?void 0:a.in);return+gi(u,a)==+bi(u,a)}function _i(o,a,u){const[c,p,D]=we(u==null?void 0:u.in,o,o,a),E=lt(p,D),S=Math.abs(pi(p,D));if(S<1)return 0;p.getMonth()===1&&p.getDate()>27&&p.setDate(30),p.setMonth(p.getMonth()-E*S);let q=lt(p,D)===-E;wi(c)&&S===1&&lt(c,D)===1&&(q=!1);const N=E*(S-+q);return N===0?0:N}function xi(o,a,u){const c=la(o,a)/1e3;return ir()(c)}function nu(o,a,u){const[c,p]=we(u==null?void 0:u.in,o,a),D=lt(c,p),E=Math.abs(vi(c,p));c.setFullYear(1584),p.setFullYear(1584);const S=lt(c,p)===-D,q=D*(E-+S);return q===0?0:q}function fa(o,a){const[u,c]=we(o,a.start,a.end);return{start:u,end:c}}function ru(o,a){const{start:u,end:c}=fa(a==null?void 0:a.in,o);let p=+u>+c;const D=p?+u:+c,E=p?c:u;E.setHours(0,0,0,0);let S=1;const q=[];for(;+E<=D;)q.push(he(u,E)),E.setDate(E.getDate()+S),E.setHours(0,0,0,0);return p?q.reverse():q}function au(o,a){const{start:u,end:c}=fa(a==null?void 0:a.in,o);let p=+u>+c;const D=Ee(p?c:u,a),E=Ee(p?u:c,a);D.setHours(15),E.setHours(15);const S=+E.getTime();let q=D,N=(a==null?void 0:a.step)??1;if(!N)return[];N<0&&(N=-N,p=!p);const H=[];for(;+q<=S;)q.setHours(0),H.push(he(u,q)),q=di(q,N),q.setHours(15);return p?H.reverse():H}function iu(o,a){const u=Q(o,a==null?void 0:a.in);return u.setDate(1),u.setHours(0,0,0,0),u}function ki(o,a){const u=Q(o,a==null?void 0:a.in);return u.setFullYear(u.getFullYear(),0,1),u.setHours(0,0,0,0),u}function ou(o,a){var S,q,N,H;const u=ft(),c=(a==null?void 0:a.weekStartsOn)??((q=(S=a==null?void 0:a.locale)==null?void 0:S.options)==null?void 0:q.weekStartsOn)??u.weekStartsOn??((H=(N=u.locale)==null?void 0:N.options)==null?void 0:H.weekStartsOn)??0,p=Q(o,a==null?void 0:a.in),D=p.getDay(),E=(D<c?-7:0)+6-(D-c);return p.setDate(p.getDate()+E),p.setHours(23,59,59,999),p}const Oi={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Di=(o,a,u)=>{let c;const p=Oi[o];return typeof p=="string"?c=p:a===1?c=p.one:c=p.other.replace("{{count}}",a.toString()),u!=null&&u.addSuffix?u.comparison&&u.comparison>0?"in "+c:c+" ago":c};function Zn(o){return(a={})=>{const u=a.width?String(a.width):o.defaultWidth;return o.formats[u]||o.formats[o.defaultWidth]}}const Pi={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Si={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Mi={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ei={date:Zn({formats:Pi,defaultWidth:"full"}),time:Zn({formats:Si,defaultWidth:"full"}),dateTime:Zn({formats:Mi,defaultWidth:"full"})},Ti={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ci=(o,a,u,c)=>Ti[o];function St(o){return(a,u)=>{const c=u!=null&&u.context?String(u.context):"standalone";let p;if(c==="formatting"&&o.formattingValues){const E=o.defaultFormattingWidth||o.defaultWidth,S=u!=null&&u.width?String(u.width):E;p=o.formattingValues[S]||o.formattingValues[E]}else{const E=o.defaultWidth,S=u!=null&&u.width?String(u.width):o.defaultWidth;p=o.values[S]||o.values[E]}const D=o.argumentCallback?o.argumentCallback(a):a;return p[D]}}const Ki={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ii={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ji={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ai={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qi={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Fi={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ni=(o,a)=>{const u=Number(o),c=u%100;if(c>20||c<10)switch(c%10){case 1:return u+"st";case 2:return u+"nd";case 3:return u+"rd"}return u+"th"},Ri={ordinalNumber:Ni,era:St({values:Ki,defaultWidth:"wide"}),quarter:St({values:Ii,defaultWidth:"wide",argumentCallback:o=>o-1}),month:St({values:ji,defaultWidth:"wide"}),day:St({values:Ai,defaultWidth:"wide"}),dayPeriod:St({values:qi,defaultWidth:"wide",formattingValues:Fi,defaultFormattingWidth:"wide"})};function Mt(o){return(a,u={})=>{const c=u.width,p=c&&o.matchPatterns[c]||o.matchPatterns[o.defaultMatchWidth],D=a.match(p);if(!D)return null;const E=D[0],S=c&&o.parsePatterns[c]||o.parsePatterns[o.defaultParseWidth],q=Array.isArray(S)?Yi(S,X=>X.test(E)):Bi(S,X=>X.test(E));let N;N=o.valueCallback?o.valueCallback(q):q,N=u.valueCallback?u.valueCallback(N):N;const H=a.slice(E.length);return{value:N,rest:H}}}function Bi(o,a){for(const u in o)if(Object.prototype.hasOwnProperty.call(o,u)&&a(o[u]))return u}function Yi(o,a){for(let u=0;u<o.length;u++)if(a(o[u]))return u}function Wi(o){return(a,u={})=>{const c=a.match(o.matchPattern);if(!c)return null;const p=c[0],D=a.match(o.parsePattern);if(!D)return null;let E=o.valueCallback?o.valueCallback(D[0]):D[0];E=u.valueCallback?u.valueCallback(E):E;const S=a.slice(p.length);return{value:E,rest:S}}}const Li=/^(\d+)(th|st|nd|rd)?/i,Ui=/\d+/i,Hi={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Vi={any:[/^b/i,/^(a|c)/i]},Xi={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},zi={any:[/1/i,/2/i,/3/i,/4/i]},Qi={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},$i={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Gi={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ji={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Zi={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},eo={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},to={ordinalNumber:Wi({matchPattern:Li,parsePattern:Ui,valueCallback:o=>parseInt(o,10)}),era:Mt({matchPatterns:Hi,defaultMatchWidth:"wide",parsePatterns:Vi,defaultParseWidth:"any"}),quarter:Mt({matchPatterns:Xi,defaultMatchWidth:"wide",parsePatterns:zi,defaultParseWidth:"any",valueCallback:o=>o+1}),month:Mt({matchPatterns:Qi,defaultMatchWidth:"wide",parsePatterns:$i,defaultParseWidth:"any"}),day:Mt({matchPatterns:Gi,defaultMatchWidth:"wide",parsePatterns:Ji,defaultParseWidth:"any"}),dayPeriod:Mt({matchPatterns:Zi,defaultMatchWidth:"any",parsePatterns:eo,defaultParseWidth:"any"})},da={code:"en-US",formatDistance:Di,formatLong:Ei,formatRelative:Ci,localize:Ri,match:to,options:{weekStartsOn:0,firstWeekContainsDate:1}};function no(o,a){const u=Q(o,a==null?void 0:a.in);return sa(u,ki(u))+1}function ro(o,a){const u=Q(o,a==null?void 0:a.in),c=+ln(u)-+fi(u);return Math.round(c/oa)+1}function ha(o,a){var H,X,$,ue;const u=Q(o,a==null?void 0:a.in),c=u.getFullYear(),p=ft(),D=(a==null?void 0:a.firstWeekContainsDate)??((X=(H=a==null?void 0:a.locale)==null?void 0:H.options)==null?void 0:X.firstWeekContainsDate)??p.firstWeekContainsDate??((ue=($=p.locale)==null?void 0:$.options)==null?void 0:ue.firstWeekContainsDate)??1,E=he((a==null?void 0:a.in)||o,0);E.setFullYear(c+1,0,D),E.setHours(0,0,0,0);const S=Ee(E,a),q=he((a==null?void 0:a.in)||o,0);q.setFullYear(c,0,D),q.setHours(0,0,0,0);const N=Ee(q,a);return+u>=+S?c+1:+u>=+N?c:c-1}function ao(o,a){var S,q,N,H;const u=ft(),c=(a==null?void 0:a.firstWeekContainsDate)??((q=(S=a==null?void 0:a.locale)==null?void 0:S.options)==null?void 0:q.firstWeekContainsDate)??u.firstWeekContainsDate??((H=(N=u.locale)==null?void 0:N.options)==null?void 0:H.firstWeekContainsDate)??1,p=ha(o,a),D=he((a==null?void 0:a.in)||o,0);return D.setFullYear(p,0,c),D.setHours(0,0,0,0),Ee(D,a)}function io(o,a){const u=Q(o,a==null?void 0:a.in),c=+Ee(u,a)-+ao(u,a);return Math.round(c/oa)+1}function G(o,a){const u=o<0?"-":"",c=Math.abs(o).toString().padStart(a,"0");return u+c}const Fe={y(o,a){const u=o.getFullYear(),c=u>0?u:1-u;return G(a==="yy"?c%100:c,a.length)},M(o,a){const u=o.getMonth();return a==="M"?String(u+1):G(u+1,2)},d(o,a){return G(o.getDate(),a.length)},a(o,a){const u=o.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return u.toUpperCase();case"aaa":return u;case"aaaaa":return u[0];case"aaaa":default:return u==="am"?"a.m.":"p.m."}},h(o,a){return G(o.getHours()%12||12,a.length)},H(o,a){return G(o.getHours(),a.length)},m(o,a){return G(o.getMinutes(),a.length)},s(o,a){return G(o.getSeconds(),a.length)},S(o,a){const u=a.length,c=o.getMilliseconds(),p=Math.trunc(c*Math.pow(10,u-3));return G(p,a.length)}},ct={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ta={G:function(o,a,u){const c=o.getFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return u.era(c,{width:"abbreviated"});case"GGGGG":return u.era(c,{width:"narrow"});case"GGGG":default:return u.era(c,{width:"wide"})}},y:function(o,a,u){if(a==="yo"){const c=o.getFullYear(),p=c>0?c:1-c;return u.ordinalNumber(p,{unit:"year"})}return Fe.y(o,a)},Y:function(o,a,u,c){const p=ha(o,c),D=p>0?p:1-p;if(a==="YY"){const E=D%100;return G(E,2)}return a==="Yo"?u.ordinalNumber(D,{unit:"year"}):G(D,a.length)},R:function(o,a){const u=ua(o);return G(u,a.length)},u:function(o,a){const u=o.getFullYear();return G(u,a.length)},Q:function(o,a,u){const c=Math.ceil((o.getMonth()+1)/3);switch(a){case"Q":return String(c);case"QQ":return G(c,2);case"Qo":return u.ordinalNumber(c,{unit:"quarter"});case"QQQ":return u.quarter(c,{width:"abbreviated",context:"formatting"});case"QQQQQ":return u.quarter(c,{width:"narrow",context:"formatting"});case"QQQQ":default:return u.quarter(c,{width:"wide",context:"formatting"})}},q:function(o,a,u){const c=Math.ceil((o.getMonth()+1)/3);switch(a){case"q":return String(c);case"qq":return G(c,2);case"qo":return u.ordinalNumber(c,{unit:"quarter"});case"qqq":return u.quarter(c,{width:"abbreviated",context:"standalone"});case"qqqqq":return u.quarter(c,{width:"narrow",context:"standalone"});case"qqqq":default:return u.quarter(c,{width:"wide",context:"standalone"})}},M:function(o,a,u){const c=o.getMonth();switch(a){case"M":case"MM":return Fe.M(o,a);case"Mo":return u.ordinalNumber(c+1,{unit:"month"});case"MMM":return u.month(c,{width:"abbreviated",context:"formatting"});case"MMMMM":return u.month(c,{width:"narrow",context:"formatting"});case"MMMM":default:return u.month(c,{width:"wide",context:"formatting"})}},L:function(o,a,u){const c=o.getMonth();switch(a){case"L":return String(c+1);case"LL":return G(c+1,2);case"Lo":return u.ordinalNumber(c+1,{unit:"month"});case"LLL":return u.month(c,{width:"abbreviated",context:"standalone"});case"LLLLL":return u.month(c,{width:"narrow",context:"standalone"});case"LLLL":default:return u.month(c,{width:"wide",context:"standalone"})}},w:function(o,a,u,c){const p=io(o,c);return a==="wo"?u.ordinalNumber(p,{unit:"week"}):G(p,a.length)},I:function(o,a,u){const c=ro(o);return a==="Io"?u.ordinalNumber(c,{unit:"week"}):G(c,a.length)},d:function(o,a,u){return a==="do"?u.ordinalNumber(o.getDate(),{unit:"date"}):Fe.d(o,a)},D:function(o,a,u){const c=no(o);return a==="Do"?u.ordinalNumber(c,{unit:"dayOfYear"}):G(c,a.length)},E:function(o,a,u){const c=o.getDay();switch(a){case"E":case"EE":case"EEE":return u.day(c,{width:"abbreviated",context:"formatting"});case"EEEEE":return u.day(c,{width:"narrow",context:"formatting"});case"EEEEEE":return u.day(c,{width:"short",context:"formatting"});case"EEEE":default:return u.day(c,{width:"wide",context:"formatting"})}},e:function(o,a,u,c){const p=o.getDay(),D=(p-c.weekStartsOn+8)%7||7;switch(a){case"e":return String(D);case"ee":return G(D,2);case"eo":return u.ordinalNumber(D,{unit:"day"});case"eee":return u.day(p,{width:"abbreviated",context:"formatting"});case"eeeee":return u.day(p,{width:"narrow",context:"formatting"});case"eeeeee":return u.day(p,{width:"short",context:"formatting"});case"eeee":default:return u.day(p,{width:"wide",context:"formatting"})}},c:function(o,a,u,c){const p=o.getDay(),D=(p-c.weekStartsOn+8)%7||7;switch(a){case"c":return String(D);case"cc":return G(D,a.length);case"co":return u.ordinalNumber(D,{unit:"day"});case"ccc":return u.day(p,{width:"abbreviated",context:"standalone"});case"ccccc":return u.day(p,{width:"narrow",context:"standalone"});case"cccccc":return u.day(p,{width:"short",context:"standalone"});case"cccc":default:return u.day(p,{width:"wide",context:"standalone"})}},i:function(o,a,u){const c=o.getDay(),p=c===0?7:c;switch(a){case"i":return String(p);case"ii":return G(p,a.length);case"io":return u.ordinalNumber(p,{unit:"day"});case"iii":return u.day(c,{width:"abbreviated",context:"formatting"});case"iiiii":return u.day(c,{width:"narrow",context:"formatting"});case"iiiiii":return u.day(c,{width:"short",context:"formatting"});case"iiii":default:return u.day(c,{width:"wide",context:"formatting"})}},a:function(o,a,u){const p=o.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return u.dayPeriod(p,{width:"abbreviated",context:"formatting"});case"aaa":return u.dayPeriod(p,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return u.dayPeriod(p,{width:"narrow",context:"formatting"});case"aaaa":default:return u.dayPeriod(p,{width:"wide",context:"formatting"})}},b:function(o,a,u){const c=o.getHours();let p;switch(c===12?p=ct.noon:c===0?p=ct.midnight:p=c/12>=1?"pm":"am",a){case"b":case"bb":return u.dayPeriod(p,{width:"abbreviated",context:"formatting"});case"bbb":return u.dayPeriod(p,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return u.dayPeriod(p,{width:"narrow",context:"formatting"});case"bbbb":default:return u.dayPeriod(p,{width:"wide",context:"formatting"})}},B:function(o,a,u){const c=o.getHours();let p;switch(c>=17?p=ct.evening:c>=12?p=ct.afternoon:c>=4?p=ct.morning:p=ct.night,a){case"B":case"BB":case"BBB":return u.dayPeriod(p,{width:"abbreviated",context:"formatting"});case"BBBBB":return u.dayPeriod(p,{width:"narrow",context:"formatting"});case"BBBB":default:return u.dayPeriod(p,{width:"wide",context:"formatting"})}},h:function(o,a,u){if(a==="ho"){let c=o.getHours()%12;return c===0&&(c=12),u.ordinalNumber(c,{unit:"hour"})}return Fe.h(o,a)},H:function(o,a,u){return a==="Ho"?u.ordinalNumber(o.getHours(),{unit:"hour"}):Fe.H(o,a)},K:function(o,a,u){const c=o.getHours()%12;return a==="Ko"?u.ordinalNumber(c,{unit:"hour"}):G(c,a.length)},k:function(o,a,u){let c=o.getHours();return c===0&&(c=24),a==="ko"?u.ordinalNumber(c,{unit:"hour"}):G(c,a.length)},m:function(o,a,u){return a==="mo"?u.ordinalNumber(o.getMinutes(),{unit:"minute"}):Fe.m(o,a)},s:function(o,a,u){return a==="so"?u.ordinalNumber(o.getSeconds(),{unit:"second"}):Fe.s(o,a)},S:function(o,a){return Fe.S(o,a)},X:function(o,a,u){const c=o.getTimezoneOffset();if(c===0)return"Z";switch(a){case"X":return ra(c);case"XXXX":case"XX":return Ge(c);case"XXXXX":case"XXX":default:return Ge(c,":")}},x:function(o,a,u){const c=o.getTimezoneOffset();switch(a){case"x":return ra(c);case"xxxx":case"xx":return Ge(c);case"xxxxx":case"xxx":default:return Ge(c,":")}},O:function(o,a,u){const c=o.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+na(c,":");case"OOOO":default:return"GMT"+Ge(c,":")}},z:function(o,a,u){const c=o.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+na(c,":");case"zzzz":default:return"GMT"+Ge(c,":")}},t:function(o,a,u){const c=Math.trunc(+o/1e3);return G(c,a.length)},T:function(o,a,u){return G(+o,a.length)}};function na(o,a=""){const u=o>0?"-":"+",c=Math.abs(o),p=Math.trunc(c/60),D=c%60;return D===0?u+String(p):u+String(p)+a+G(D,2)}function ra(o,a){return o%60===0?(o>0?"-":"+")+G(Math.abs(o)/60,2):Ge(o,a)}function Ge(o,a=""){const u=o>0?"-":"+",c=Math.abs(o),p=G(Math.trunc(c/60),2),D=G(c%60,2);return u+p+a+D}const aa=(o,a)=>{switch(o){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});case"PPPP":default:return a.date({width:"full"})}},ma=(o,a)=>{switch(o){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});case"pppp":default:return a.time({width:"full"})}},oo=(o,a)=>{const u=o.match(/(P+)(p+)?/)||[],c=u[1],p=u[2];if(!p)return aa(o,a);let D;switch(c){case"P":D=a.dateTime({width:"short"});break;case"PP":D=a.dateTime({width:"medium"});break;case"PPP":D=a.dateTime({width:"long"});break;case"PPPP":default:D=a.dateTime({width:"full"});break}return D.replace("{{date}}",aa(c,a)).replace("{{time}}",ma(p,a))},uo={p:ma,P:oo},so=/^D+$/,co=/^Y+$/,lo=["D","DD","YY","YYYY"];function fo(o){return so.test(o)}function ho(o){return co.test(o)}function mo(o,a,u){const c=yo(o,a,u);if(lo.includes(o))throw new RangeError(c)}function yo(o,a,u){const c=o[0]==="Y"?"years":"days of the month";return`Use \`${o.toLowerCase()}\` instead of \`${o}\` (in \`${a}\`) for formatting ${c} to the input \`${u}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const po=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vo=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,go=/^'([^]*?)'?$/,bo=/''/g,wo=/[a-zA-Z]/;function uu(o,a,u){var H,X,$,ue,re,pe,Tt,Ct;const c=ft(),p=(u==null?void 0:u.locale)??c.locale??da,D=(u==null?void 0:u.firstWeekContainsDate)??((X=(H=u==null?void 0:u.locale)==null?void 0:H.options)==null?void 0:X.firstWeekContainsDate)??c.firstWeekContainsDate??((ue=($=c.locale)==null?void 0:$.options)==null?void 0:ue.firstWeekContainsDate)??1,E=(u==null?void 0:u.weekStartsOn)??((pe=(re=u==null?void 0:u.locale)==null?void 0:re.options)==null?void 0:pe.weekStartsOn)??c.weekStartsOn??((Ct=(Tt=c.locale)==null?void 0:Tt.options)==null?void 0:Ct.weekStartsOn)??0,S=Q(o,u==null?void 0:u.in);if(!yi(S))throw new RangeError("Invalid time value");let q=a.match(vo).map(ae=>{const se=ae[0];if(se==="p"||se==="P"){const Oe=uo[se];return Oe(ae,p.formatLong)}return ae}).join("").match(po).map(ae=>{if(ae==="''")return{isToken:!1,value:"'"};const se=ae[0];if(se==="'")return{isToken:!1,value:_o(ae)};if(ta[se])return{isToken:!0,value:ae};if(se.match(wo))throw new RangeError("Format string contains an unescaped latin alphabet character `"+se+"`");return{isToken:!1,value:ae}});p.localize.preprocessor&&(q=p.localize.preprocessor(S,q));const N={firstWeekContainsDate:D,weekStartsOn:E,locale:p};return q.map(ae=>{if(!ae.isToken)return ae.value;const se=ae.value;(!(u!=null&&u.useAdditionalWeekYearTokens)&&ho(se)||!(u!=null&&u.useAdditionalDayOfYearTokens)&&fo(se))&&mo(se,a,String(o));const Oe=ta[se[0]];return Oe(S,se,p.localize,N)}).join("")}function _o(o){const a=o.match(go);return a?a[1].replace(bo,"'"):o}function xo(o,a,u){const c=ft(),p=(u==null?void 0:u.locale)??c.locale??da,D=2520,E=lt(o,a);if(isNaN(E))throw new RangeError("Invalid time value");const S=Object.assign({},u,{addSuffix:u==null?void 0:u.addSuffix,comparison:E}),[q,N]=we(u==null?void 0:u.in,...E>0?[a,o]:[o,a]),H=xi(N,q),X=(fn(N)-fn(q))/1e3,$=Math.round((H-X)/60);let ue;if($<2)return u!=null&&u.includeSeconds?H<5?p.formatDistance("lessThanXSeconds",5,S):H<10?p.formatDistance("lessThanXSeconds",10,S):H<20?p.formatDistance("lessThanXSeconds",20,S):H<40?p.formatDistance("halfAMinute",0,S):H<60?p.formatDistance("lessThanXMinutes",1,S):p.formatDistance("xMinutes",1,S):$===0?p.formatDistance("lessThanXMinutes",1,S):p.formatDistance("xMinutes",$,S);if($<45)return p.formatDistance("xMinutes",$,S);if($<90)return p.formatDistance("aboutXHours",1,S);if($<Jr){const re=Math.round($/60);return p.formatDistance("aboutXHours",re,S)}else{if($<D)return p.formatDistance("xDays",1,S);if($<sn){const re=Math.round($/Jr);return p.formatDistance("xDays",re,S)}else if($<sn*2)return ue=Math.round($/sn),p.formatDistance("aboutXMonths",ue,S)}if(ue=_i(N,q),ue<12){const re=Math.round($/sn);return p.formatDistance("xMonths",re,S)}else{const re=ue%12,pe=Math.trunc(ue/12);return re<3?p.formatDistance("aboutXYears",pe,S):re<9?p.formatDistance("overXYears",pe,S):p.formatDistance("almostXYears",pe+1,S)}}function su(o,a){return xo(o,ca(o),a)}function cu(o,a){return Q(o,a==null?void 0:a.in).getDay()}function lu(o,a){return+Q(o)>+Q(a)}function fu(o,a,u){const[c,p]=we(u==null?void 0:u.in,o,a);return c.getFullYear()===p.getFullYear()&&c.getMonth()===p.getMonth()}function du(o,a){return hi(he(o,o),ca(o))}function hu(o,a,u){const c=+Q(o,u==null?void 0:u.in),[p,D]=[+Q(a.start,u==null?void 0:u.in),+Q(a.end,u==null?void 0:u.in)].sort((E,S)=>E-S);return c>=p&&c<=D}function mu(o,a){const u=()=>he(a==null?void 0:a.in,NaN),p=Po(o);let D;if(p.date){const N=So(p.date,2);D=Mo(N.restDateString,N.year)}if(!D||isNaN(+D))return u();const E=+D;let S=0,q;if(p.time&&(S=Eo(p.time),isNaN(S)))return u();if(p.timezone){if(q=To(p.timezone),isNaN(q))return u()}else{const N=new Date(E+S),H=Q(0,a==null?void 0:a.in);return H.setFullYear(N.getUTCFullYear(),N.getUTCMonth(),N.getUTCDate()),H.setHours(N.getUTCHours(),N.getUTCMinutes(),N.getUTCSeconds(),N.getUTCMilliseconds()),H}return Q(E+S+q,a==null?void 0:a.in)}const cn={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ko=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Oo=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Do=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Po(o){const a={},u=o.split(cn.dateTimeDelimiter);let c;if(u.length>2)return a;if(/:/.test(u[0])?c=u[0]:(a.date=u[0],c=u[1],cn.timeZoneDelimiter.test(a.date)&&(a.date=o.split(cn.timeZoneDelimiter)[0],c=o.substr(a.date.length,o.length))),c){const p=cn.timezone.exec(c);p?(a.time=c.replace(p[1],""),a.timezone=p[1]):a.time=c}return a}function So(o,a){const u=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+a)+"})|(\\d{2}|[+-]\\d{"+(2+a)+"})$)"),c=o.match(u);if(!c)return{year:NaN,restDateString:""};const p=c[1]?parseInt(c[1]):null,D=c[2]?parseInt(c[2]):null;return{year:D===null?p:D*100,restDateString:o.slice((c[1]||c[2]).length)}}function Mo(o,a){if(a===null)return new Date(NaN);const u=o.match(ko);if(!u)return new Date(NaN);const c=!!u[4],p=Et(u[1]),D=Et(u[2])-1,E=Et(u[3]),S=Et(u[4]),q=Et(u[5])-1;if(c)return Ao(a,S,q)?Co(a,S,q):new Date(NaN);{const N=new Date(0);return!Io(a,D,E)||!jo(a,p)?new Date(NaN):(N.setUTCFullYear(a,D,Math.max(p,E)),N)}}function Et(o){return o?parseInt(o):1}function Eo(o){const a=o.match(Oo);if(!a)return NaN;const u=er(a[1]),c=er(a[2]),p=er(a[3]);return qo(u,c,p)?u*ar+c*rr+p*1e3:NaN}function er(o){return o&&parseFloat(o.replace(",","."))||0}function To(o){if(o==="Z")return 0;const a=o.match(Do);if(!a)return 0;const u=a[1]==="+"?-1:1,c=parseInt(a[2]),p=a[3]&&parseInt(a[3])||0;return Fo(c,p)?u*(c*ar+p*rr):NaN}function Co(o,a,u){const c=new Date(0);c.setUTCFullYear(o,0,4);const p=c.getUTCDay()||7,D=(a-1)*7+u+1-p;return c.setUTCDate(c.getUTCDate()+D),c}const Ko=[31,null,31,30,31,30,31,31,30,31,30,31];function ya(o){return o%400===0||o%4===0&&o%100!==0}function Io(o,a,u){return a>=0&&a<=11&&u>=1&&u<=(Ko[a]||(ya(o)?29:28))}function jo(o,a){return a>=1&&a<=(ya(o)?366:365)}function Ao(o,a,u){return a>=1&&a<=53&&u>=0&&u<=6}function qo(o,a,u){return o===24?a===0&&u===0:u>=0&&u<60&&a>=0&&a<60&&o>=0&&o<25}function Fo(o,a){return a>=0&&a<=59}function yu(o,a,u){return ci(o,-a,u)}export{Zn as A,St as B,Mt as C,nr as D,Wi as E,iu as a,Ee as b,Ro as c,Zo as d,bi as e,uu as f,ou as g,ru as h,ci as i,fu as j,du as k,cu as l,hi as m,nu as n,_i as o,mu as p,eu as q,tu as r,yu as s,si as t,au as u,Bo as v,su as w,Jo as x,hu as y,lu as z};
