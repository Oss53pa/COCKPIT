import{j as e}from"./vendor-charts-cvMpHz0W.js";import{e as Ue,r as l}from"./vendor-react-BdB5Pz3t.js";import{a as ze,u as Be,s as qe,B as j,C as u,g as h}from"./index-IaNwoOYO.js";import{B as p}from"./Badge-CM23X0aP.js";import{S as x,I as i,T as W}from"./Input-BZ7duGHL.js";import{M as Re,C as _e}from"./Modal-J_gxoCCM.js";import{U as Ge,h as Z,y as Ve,az as ee,a7 as Xe,P as Qe,ag as se,r as Ke,a6 as Ye,a8 as He,aA as ae,K as te,aB as re,ak as ne,aC as Je,f as ie,e as le,aD as ce,ab as G,X as V,p as We,o as Ze}from"./vendor-icons-B6Rt7gcW.js";import{f as K,n as es,o as ss,v as X}from"./vendor-utils-BBD155gO.js";import"./vendor-export-C98UG4Mq.js";const M={direction:"Direction",facility:"Facility Management",finance:"Finance",securite:"Sécurité",commercial_marketing:"Commercial & Marketing",administration:"Administration"},Q={direction:"bg-purple-100 text-purple-800 border-purple-200",facility:"bg-blue-100 text-blue-800 border-blue-200",finance:"bg-green-100 text-green-800 border-green-200",securite:"bg-red-100 text-red-800 border-red-200",commercial_marketing:"bg-orange-100 text-orange-800 border-orange-200",administration:"bg-gray-100 text-gray-800 border-gray-200"},L={cdi:"CDI",cdd:"CDD",stage:"Stage",interim:"Intérim",consultant:"Consultant",prestataire:"Prestataire"},P={actif:"Actif",conge:"En congé",formation:"En formation",mission:"En mission",inactif:"Inactif"},oe={actif:"bg-success/10 text-success",conge:"bg-info/10 text-info",formation:"bg-warning/10 text-warning",mission:"bg-purple-100 text-purple-700",inactif:"bg-error/10 text-error"},de={debutant:"Débutant",intermediaire:"Intermédiaire",confirme:"Confirmé",expert:"Expert"},as={debutant:"bg-gray-100 text-gray-700",intermediaire:"bg-blue-100 text-blue-700",confirme:"bg-green-100 text-green-700",expert:"bg-purple-100 text-purple-700"},me={centreId:"",matricule:"",nom:"",prenom:"",email:"",telephone:"",poste:"",departement:"administration",typeContrat:"cdi",dateEmbauche:K(new Date,"yyyy-MM-dd"),statut:"actif",devise:"XOF",competences:[],formations:[],absences:[],objectifs:[]};function ys(){const{centreId:d}=Ue(),U=ze(s=>s.getCentre(d||"")),{addToast:y}=Be(),{membres:ts,loadMembres:pe,addMembre:xe,updateMembre:ue,deleteMembre:he,getMembresByCentre:ge,getStatistiques:je,getOrganigramme:fe,addCompetence:rs,removeCompetence:ns,addFormation:is,removeFormation:ls,addAbsence:cs,removeAbsence:os,isLoading:ds}=qe(),[N,z]=l.useState("grid"),[F,ve]=l.useState(""),[A,ye]=l.useState("all"),[E,Ne]=l.useState("all"),[k,be]=l.useState("all"),[Ce,D]=l.useState(!1),[we,I]=l.useState(!1),[n,O]=l.useState(null),[b,B]=l.useState("info"),[a,r]=l.useState(me),[f,$]=l.useState({nom:"",niveau:"intermediaire"}),[o,C]=l.useState({titre:"",organisme:"",dateDebut:"",enCours:!1}),[c,w]=l.useState({type:"conge_paye",dateDebut:"",dateFin:"",motif:""});l.useEffect(()=>{d&&pe(d)},[d]);const S=ge(d||""),v=je(d||""),Y=fe(d||""),q=l.useMemo(()=>S.filter(s=>{if(F){const t=F.toLowerCase();if(!s.nom.toLowerCase().includes(t)&&!s.prenom.toLowerCase().includes(t)&&!s.poste.toLowerCase().includes(t)&&!s.matricule.toLowerCase().includes(t))return!1}return!(A!=="all"&&s.departement!==A||E!=="all"&&s.statut!==E||k!=="all"&&s.typeContrat!==k)}),[S,F,A,E,k]),R=()=>{r({...me,centreId:d||""}),O(null),B("info"),$({nom:"",niveau:"intermediaire"}),C({titre:"",organisme:"",dateDebut:"",enCours:!1}),w({type:"conge_paye",dateDebut:"",dateFin:"",motif:""})},T=s=>{s?(O(s),r({centreId:s.centreId,matricule:s.matricule,nom:s.nom,prenom:s.prenom,photo:s.photo,email:s.email,telephone:s.telephone,telephoneUrgence:s.telephoneUrgence,dateNaissance:s.dateNaissance,adresse:s.adresse,poste:s.poste,departement:s.departement,typeContrat:s.typeContrat,dateEmbauche:s.dateEmbauche,dateFinContrat:s.dateFinContrat,managerId:s.managerId,statut:s.statut,salaireBase:s.salaireBase,devise:s.devise,competences:s.competences,formations:s.formations,absences:s.absences,objectifs:s.objectifs,notes:s.notes})):R(),B("info"),D(!0)},De=async()=>{if(d){if(!a.nom.trim()||!a.prenom.trim()){y({type:"error",title:"Erreur",message:"Le nom et le prénom sont obligatoires"});return}try{if(n)await ue(n.id,a),y({type:"success",title:"Membre modifié"});else{const s=a.matricule||`EMP-${Date.now().toString(36).toUpperCase()}`;await xe({...a,centreId:d,matricule:s}),y({type:"success",title:"Membre ajouté"})}D(!1),R()}catch(s){y({type:"error",title:"Erreur",message:String(s)})}}},Se=async()=>{if(n)try{await he(n.id),y({type:"success",title:"Membre supprimé"}),I(!1),O(null)}catch(s){y({type:"error",title:"Erreur",message:String(s)})}},Me=()=>{if(!f.nom.trim())return;const s={id:X(),...f};r({...a,competences:[...a.competences,s]}),$({nom:"",niveau:"intermediaire"})},Fe=s=>{r({...a,competences:a.competences.filter(t=>t.id!==s)})},Ae=()=>{if(!o.titre.trim())return;const s={id:X(),...o};r({...a,formations:[...a.formations,s]}),C({titre:"",organisme:"",dateDebut:"",enCours:!1})},Ee=s=>{r({...a,formations:a.formations.filter(t=>t.id!==s)})},ke=()=>{if(!c.dateDebut||!c.dateFin)return;const s={id:X(),...c,validee:!1};r({...a,absences:[...a.absences,s]}),w({type:"conge_paye",dateDebut:"",dateFin:"",motif:""})},Ie=s=>{r({...a,absences:a.absences.filter(t=>t.id!==s)})},H=s=>{const t=es(new Date,new Date(s)),m=ss(new Date,new Date(s))%12;return t>0?`${t} an${t>1?"s":""} ${m>0?`${m} mois`:""}`:`${m} mois`},Oe=[{value:"",label:"Aucun manager"},...S.filter(s=>s.id!==(n==null?void 0:n.id)).map(s=>({value:s.id,label:`${s.prenom} ${s.nom} - ${s.poste}`}))],$e=({membre:s})=>{const t=S.find(m=>m.id===s.managerId);return e.jsx(u,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>T(s),children:e.jsxs(h,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"w-14 h-14 rounded-full bg-primary-100 flex items-center justify-center text-primary-700 font-bold text-lg",children:[s.prenom[0],s.nom[0]]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-semibold text-primary-900 truncate",children:[s.prenom," ",s.nom]}),e.jsx(p,{className:oe[s.statut],size:"sm",children:P[s.statut]})]}),e.jsx("p",{className:"text-sm text-primary-600",children:s.poste}),e.jsx(p,{className:`mt-1 ${Q[s.departement]}`,size:"sm",children:M[s.departement]})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-primary-100 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-primary-500",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-primary-500",children:[e.jsx(ce,{className:"w-4 h-4"}),e.jsx("span",{children:s.telephone})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-primary-500",children:[e.jsx(ie,{className:"w-4 h-4"}),e.jsxs("span",{children:["Ancienneté: ",H(s.dateEmbauche)]})]}),t&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-primary-500",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsxs("span",{children:["Manager: ",t.prenom," ",t.nom]})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsx(p,{size:"sm",children:L[s.typeContrat]}),e.jsx("span",{className:"text-xs text-primary-400",children:s.matricule})]})]})})},J=({membre:s,subordinates:t,level:m=0})=>{const[_,Te]=l.useState(!0),Le=t.map(g=>({membre:g,subordinates:S.filter(Pe=>Pe.managerId===g.id)}));return e.jsxs("div",{className:`${m>0?"ml-8 border-l-2 border-primary-200 pl-4":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border border-primary-200 hover:border-accent cursor-pointer mb-2",onClick:()=>T(s),children:[t.length>0&&e.jsx("button",{onClick:g=>{g.stopPropagation(),Te(!_)},className:"p-1 hover:bg-primary-100 rounded",children:_?e.jsx(We,{className:"w-4 h-4"}):e.jsx(Ze,{className:"w-4 h-4"})}),e.jsxs("div",{className:"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center text-primary-700 font-bold",children:[s.prenom[0],s.nom[0]]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium text-primary-900",children:[s.prenom," ",s.nom]}),e.jsx("p",{className:"text-sm text-primary-500",children:s.poste})]}),e.jsx(p,{className:Q[s.departement],size:"sm",children:M[s.departement]})]}),_&&t.length>0&&e.jsx("div",{className:"space-y-2",children:Le.map(g=>e.jsx(J,{membre:g.membre,subordinates:g.subordinates,level:m+1},g.membre.id))})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-primary-900",children:"Équipe"}),e.jsx("p",{className:"text-primary-500 mt-1",children:U==null?void 0:U.nom})]}),e.jsx(j,{leftIcon:e.jsx(Ge,{className:"w-4 h-4"}),onClick:()=>T(),children:"Nouveau membre"})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-4",children:[e.jsx(u,{children:e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:e.jsx(Z,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-primary-900",children:v.totalMembres}),e.jsx("p",{className:"text-sm text-primary-500",children:"Total"})]})]})})}),e.jsx(u,{children:e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-success/10 rounded-lg",children:e.jsx(Ve,{className:"w-5 h-5 text-success"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-success",children:v.parStatut.actif}),e.jsx("p",{className:"text-sm text-primary-500",children:"Actifs"})]})]})})}),e.jsx(u,{children:e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-info/10 rounded-lg",children:e.jsx(ee,{className:"w-5 h-5 text-info"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-info",children:v.parTypeContrat.cdi}),e.jsx("p",{className:"text-sm text-primary-500",children:"CDI"})]})]})})}),e.jsx(u,{children:e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-warning/10 rounded-lg",children:e.jsx(Xe,{className:"w-5 h-5 text-warning"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-warning",children:v.ancienneteMovenne.toFixed(1)}),e.jsx("p",{className:"text-sm text-primary-500",children:"Anc. moy. (ans)"})]})]})})}),e.jsx(u,{children:e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-accent/10 rounded-lg",children:e.jsx(Qe,{className:"w-5 h-5 text-accent"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-accent",children:[v.tauxPresence.toFixed(0),"%"]}),e.jsx("p",{className:"text-sm text-primary-500",children:"Présence"})]})]})})}),e.jsx(u,{children:e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(se,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:v.masseSalariale?(v.masseSalariale/1e6).toFixed(1)+"M":"-"}),e.jsx("p",{className:"text-sm text-primary-500",children:"Masse sal."})]})]})})})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-[300px]",children:[e.jsx(Ke,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-primary-400"}),e.jsx("input",{type:"text",value:F,onChange:s=>ve(s.target.value),placeholder:"Rechercher...",className:"w-full pl-9 pr-4 py-2 border border-primary-200 rounded-lg text-sm focus:ring-2 focus:ring-primary-500"})]}),e.jsx(x,{options:[{value:"all",label:"Tous les départements"},...Object.entries(M).map(([s,t])=>({value:s,label:t}))],value:A,onChange:s=>ye(s.target.value),className:"w-44"}),e.jsx(x,{options:[{value:"all",label:"Tous les statuts"},...Object.entries(P).map(([s,t])=>({value:s,label:t}))],value:E,onChange:s=>Ne(s.target.value),className:"w-36"}),e.jsx(x,{options:[{value:"all",label:"Tous les contrats"},...Object.entries(L).map(([s,t])=>({value:s,label:t}))],value:k,onChange:s=>be(s.target.value),className:"w-36"}),e.jsxs("div",{className:"flex border border-primary-200 rounded-lg overflow-hidden ml-auto",children:[e.jsx("button",{onClick:()=>z("grid"),className:`p-2 ${N==="grid"?"bg-primary-900 text-white":"bg-white text-primary-600 hover:bg-primary-50"}`,title:"Vue Grille",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>z("list"),className:`p-2 ${N==="list"?"bg-primary-900 text-white":"bg-white text-primary-600 hover:bg-primary-50"}`,title:"Vue Liste",children:e.jsx(He,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>z("organigramme"),className:`p-2 ${N==="organigramme"?"bg-primary-900 text-white":"bg-white text-primary-600 hover:bg-primary-50"}`,title:"Organigramme",children:e.jsx(ae,{className:"w-4 h-4"})})]})]}),N==="grid"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[q.map(s=>e.jsx($e,{membre:s},s.id)),q.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12 text-primary-500",children:[e.jsx(Z,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Aucun membre trouvé"})]})]}),N==="list"&&e.jsx(u,{children:e.jsx(h,{className:"p-0",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-primary-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-primary-700",children:"Membre"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-primary-700",children:"Poste"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-primary-700",children:"Département"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-primary-700",children:"Contrat"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-primary-700",children:"Statut"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-primary-700",children:"Ancienneté"}),e.jsx("th",{className:"py-3 px-4"})]})}),e.jsx("tbody",{children:q.map(s=>e.jsxs("tr",{className:"border-b border-primary-100 hover:bg-primary-50 cursor-pointer",onClick:()=>T(s),children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center text-primary-700 font-bold",children:[s.prenom[0],s.nom[0]]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-primary-900",children:[s.prenom," ",s.nom]}),e.jsx("p",{className:"text-xs text-primary-500",children:s.email})]})]})}),e.jsx("td",{className:"py-3 px-4 text-primary-700",children:s.poste}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(p,{className:Q[s.departement],size:"sm",children:M[s.departement]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(p,{size:"sm",children:L[s.typeContrat]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(p,{className:oe[s.statut],size:"sm",children:P[s.statut]})}),e.jsx("td",{className:"py-3 px-4 text-sm text-primary-600",children:H(s.dateEmbauche)}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(j,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),O(s),I(!0)},children:e.jsx(te,{className:"w-4 h-4 text-error"})})})]},s.id))})]})})}),N==="organigramme"&&e.jsx("div",{className:"space-y-4",children:Y.length===0?e.jsx(u,{children:e.jsxs(h,{className:"py-12 text-center",children:[e.jsx(ae,{className:"w-12 h-12 mx-auto mb-4 text-primary-300"}),e.jsx("p",{className:"text-primary-500",children:"Aucun membre dans l'équipe"})]})}):Y.map(s=>e.jsx(J,{membre:s.membre,subordinates:s.subordinates},s.membre.id))}),e.jsxs(Re,{isOpen:Ce,onClose:()=>{D(!1),R()},title:n?`${n.prenom} ${n.nom}`:"Nouveau membre",size:"xl",footer:e.jsxs(e.Fragment,{children:[n&&e.jsxs(j,{variant:"ghost",onClick:()=>{D(!1),I(!0)},className:"text-error mr-auto",children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Supprimer"]}),e.jsx(j,{variant:"ghost",onClick:()=>D(!1),children:"Annuler"}),e.jsx(j,{onClick:De,children:n?"Enregistrer":"Créer"})]}),children:[e.jsx("div",{className:"flex border-b border-primary-200 mb-4 -mt-2",children:[{id:"info",label:"Informations",icon:re},{id:"contrat",label:"Contrat",icon:ee},{id:"competences",label:"Compétences",icon:ne},{id:"formations",label:"Formations",icon:Je},{id:"absences",label:"Absences",icon:ie}].map(({id:s,label:t,icon:m})=>e.jsxs("button",{onClick:()=>B(s),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium border-b-2 transition-colors ${b===s?"border-accent text-accent":"border-transparent text-primary-500 hover:text-primary-700"}`,children:[e.jsx(m,{className:"w-4 h-4"}),t]},s))}),b==="info"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(i,{label:"Matricule",value:a.matricule,onChange:s=>r({...a,matricule:s.target.value}),placeholder:"Auto-généré si vide"}),e.jsx(i,{label:"Prénom *",value:a.prenom,onChange:s=>r({...a,prenom:s.target.value}),required:!0}),e.jsx(i,{label:"Nom *",value:a.nom,onChange:s=>r({...a,nom:s.target.value}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(i,{label:"Email",type:"email",value:a.email,onChange:s=>r({...a,email:s.target.value}),leftIcon:e.jsx(le,{className:"w-4 h-4"})}),e.jsx(i,{label:"Téléphone",value:a.telephone,onChange:s=>r({...a,telephone:s.target.value}),leftIcon:e.jsx(ce,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(i,{label:"Date de naissance",type:"date",value:a.dateNaissance||"",onChange:s=>r({...a,dateNaissance:s.target.value})}),e.jsx(i,{label:"Téléphone d'urgence",value:a.telephoneUrgence||"",onChange:s=>r({...a,telephoneUrgence:s.target.value})})]}),e.jsx(W,{label:"Adresse",rows:2,value:a.adresse||"",onChange:s=>r({...a,adresse:s.target.value})}),e.jsx(W,{label:"Notes",rows:3,value:a.notes||"",onChange:s=>r({...a,notes:s.target.value}),placeholder:"Notes internes..."})]}),b==="contrat"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(i,{label:"Poste",value:a.poste,onChange:s=>r({...a,poste:s.target.value})}),e.jsx(x,{label:"Département",options:Object.entries(M).map(([s,t])=>({value:s,label:t})),value:a.departement,onChange:s=>r({...a,departement:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(x,{label:"Type de contrat",options:Object.entries(L).map(([s,t])=>({value:s,label:t})),value:a.typeContrat,onChange:s=>r({...a,typeContrat:s.target.value})}),e.jsx(x,{label:"Statut",options:Object.entries(P).map(([s,t])=>({value:s,label:t})),value:a.statut,onChange:s=>r({...a,statut:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(i,{label:"Date d'embauche",type:"date",value:a.dateEmbauche,onChange:s=>r({...a,dateEmbauche:s.target.value})}),(a.typeContrat==="cdd"||a.typeContrat==="stage"||a.typeContrat==="interim")&&e.jsx(i,{label:"Date de fin de contrat",type:"date",value:a.dateFinContrat||"",onChange:s=>r({...a,dateFinContrat:s.target.value})})]}),e.jsx(x,{label:"Manager",options:Oe,value:a.managerId||"",onChange:s=>r({...a,managerId:s.target.value||void 0})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(i,{label:"Salaire de base",type:"number",value:a.salaireBase||"",onChange:s=>r({...a,salaireBase:Number(s.target.value)||void 0}),leftIcon:e.jsx(se,{className:"w-4 h-4"})}),e.jsx(x,{label:"Devise",options:[{value:"XOF",label:"XOF (FCFA)"},{value:"EUR",label:"EUR (€)"},{value:"USD",label:"USD ($)"}],value:a.devise,onChange:s=>r({...a,devise:s.target.value})})]})]}),b==="competences"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-primary-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsx(i,{label:"Compétence",value:f.nom,onChange:s=>$({...f,nom:s.target.value}),placeholder:"Ex: Excel, Management..."}),e.jsx(x,{label:"Niveau",options:Object.entries(de).map(([s,t])=>({value:s,label:t})),value:f.niveau,onChange:s=>$({...f,niveau:s.target.value})})]}),e.jsxs(j,{onClick:Me,disabled:!f.nom.trim(),className:"w-full",children:[e.jsx(G,{className:"w-4 h-4 mr-1"})," Ajouter"]})]}),e.jsx("div",{className:"space-y-2 max-h-[250px] overflow-y-auto",children:a.competences.length===0?e.jsx("p",{className:"text-center py-6 text-primary-400",children:"Aucune compétence"}):a.competences.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-primary-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"w-5 h-5 text-primary-400"}),e.jsx("span",{className:"font-medium text-primary-900",children:s.nom}),e.jsx(p,{className:as[s.niveau],size:"sm",children:de[s.niveau]})]}),e.jsx("button",{onClick:()=>Fe(s.id),className:"p-1 text-primary-400 hover:text-error",children:e.jsx(V,{className:"w-4 h-4"})})]},s.id))})]}),b==="formations"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-primary-50 rounded-lg space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(i,{label:"Titre de la formation",value:o.titre,onChange:s=>C({...o,titre:s.target.value})}),e.jsx(i,{label:"Organisme",value:o.organisme,onChange:s=>C({...o,organisme:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(i,{label:"Date de début",type:"date",value:o.dateDebut,onChange:s=>C({...o,dateDebut:s.target.value})}),e.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[e.jsx("input",{type:"checkbox",id:"enCours",checked:o.enCours,onChange:s=>C({...o,enCours:s.target.checked}),className:"rounded border-primary-300"}),e.jsx("label",{htmlFor:"enCours",className:"text-sm text-primary-700",children:"En cours"})]})]}),e.jsxs(j,{onClick:Ae,disabled:!o.titre.trim(),className:"w-full",children:[e.jsx(G,{className:"w-4 h-4 mr-1"})," Ajouter"]})]}),e.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:a.formations.length===0?e.jsx("p",{className:"text-center py-6 text-primary-400",children:"Aucune formation"}):a.formations.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-primary-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-900",children:s.titre}),e.jsxs("p",{className:"text-sm text-primary-500",children:[s.organisme," - ",s.dateDebut]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.enCours&&e.jsx(p,{size:"sm",className:"bg-info/10 text-info",children:"En cours"}),e.jsx("button",{onClick:()=>Ee(s.id),className:"p-1 text-primary-400 hover:text-error",children:e.jsx(V,{className:"w-4 h-4"})})]})]},s.id))})]}),b==="absences"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-primary-50 rounded-lg space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(x,{label:"Type d'absence",options:[{value:"conge_paye",label:"Congé payé"},{value:"maladie",label:"Maladie"},{value:"formation",label:"Formation"},{value:"mission",label:"Mission"},{value:"autre",label:"Autre"}],value:c.type,onChange:s=>w({...c,type:s.target.value})}),e.jsx(i,{label:"Motif",value:c.motif,onChange:s=>w({...c,motif:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(i,{label:"Date de début",type:"date",value:c.dateDebut,onChange:s=>w({...c,dateDebut:s.target.value})}),e.jsx(i,{label:"Date de fin",type:"date",value:c.dateFin,onChange:s=>w({...c,dateFin:s.target.value})})]}),e.jsxs(j,{onClick:ke,disabled:!c.dateDebut||!c.dateFin,className:"w-full",children:[e.jsx(G,{className:"w-4 h-4 mr-1"})," Ajouter"]})]}),e.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:a.absences.length===0?e.jsx("p",{className:"text-center py-6 text-primary-400",children:"Aucune absence enregistrée"}):a.absences.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-primary-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-900",children:s.type==="conge_paye"?"Congé payé":s.type==="maladie"?"Maladie":s.type}),e.jsxs("p",{className:"text-sm text-primary-500",children:["Du ",K(new Date(s.dateDebut),"dd/MM/yyyy")," au ",K(new Date(s.dateFin),"dd/MM/yyyy")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{size:"sm",className:s.validee?"bg-success/10 text-success":"bg-warning/10 text-warning",children:s.validee?"Validée":"En attente"}),e.jsx("button",{onClick:()=>Ie(s.id),className:"p-1 text-primary-400 hover:text-error",children:e.jsx(V,{className:"w-4 h-4"})})]})]},s.id))})]})]}),e.jsx(_e,{isOpen:we,onClose:()=>I(!1),onConfirm:Se,title:"Supprimer le membre",message:`Êtes-vous sûr de vouloir supprimer ${n==null?void 0:n.prenom} ${n==null?void 0:n.nom} de l'équipe ?`,confirmLabel:"Supprimer",variant:"danger"})]})}export{ys as Equipe};
